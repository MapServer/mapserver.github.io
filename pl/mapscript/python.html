
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="pl">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Python MapScript Appendix &#8212; MapServer 7.2.0 documentation</title>
    <link rel="stylesheet" href="../_static/sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <link rel="shortcut icon" href="../_static/mapserver.ico"/>
    <link rel="author" title="O tych dokumentach" href="../about.html" />
    <link rel="index" title="Indeks" href="../genindex.html" />
    <link rel="search" title="Szukaj" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="Python MapScript Image Generation" href="imagery.html" />
    <link rel="prev" title="By Example" href="php/by_example.html" /> 
  </head><body>

<table width="100%" style="width: 100%; background-color: white;">
  <tr>
    <td rowspan="2" style="padding: 10px 0px 10px 10px;">
      <a href="../index.html" title="Home"><img src="../_static/banner.png" alt="MapServer banner" border="0" /></a>
    </td>
    <td style="padding: 10px 10px 0px 0px; text-align: right; vertical-align: top;">
      <a href="../index.html" title="Home">Home</a> |
      <a href="../products.html" title="Products (MapServer core, MapCache, TinyOWS">Products</a> |
      <a href="https://github.com/mapserver/mapserver/issues/" title="Issue Tracker (MapServer core)">Issue Tracker</a> |
      <a href="../community/service_providers.html" title="Professional Service Providers">Service Providers</a> |      
      <a href="../faq.html" title="Frequently Asked Questions">FAQ</a> |
      <a href="https://twitter.com/mapserver_osgeo" title="Twitter">Twitter</a> |
      <a href="../download.html" title="Download Source or Binaries">Download </a>
    </td>
  </tr>
  <tr>
    <td style="padding: 0px 10px 0px 0px; text-align: right; vertical-align: bottom;">
        
          
            <a href="../../mapscript/python.html"><img src="../_static/flagicons/en.png" alt="en" title="en" border="0" /></a>
          
        
        
          
            <a href="../../ar/mapscript/python.html"><img src="../_static/flagicons/ar.png" alt="ar" title="ar" border="0" /></a>
          
        
        
          
            <a href="../../de/mapscript/python.html"><img src="../_static/flagicons/de.png" alt="de" title="de" border="0" /></a>
          
        
        
          
            <a href="../../el/mapscript/python.html"><img src="../_static/flagicons/el.png" alt="el" title="el" border="0" /></a>
          
        
        
          
            <a href="../../es/mapscript/python.html"><img src="../_static/flagicons/es.png" alt="es" title="es" border="0" /></a>
          
        
        
          
            <a href="../../fr/mapscript/python.html"><img src="../_static/flagicons/fr.png" alt="fr" title="fr" border="0" /></a>
          
        
        
          
            <a href="../../id/mapscript/python.html"><img src="../_static/flagicons/id.png" alt="id" title="id" border="0" /></a>
          
        
        
          
            <a href="../../it/mapscript/python.html"><img src="../_static/flagicons/it.png" alt="it" title="it" border="0" /></a>
          
        
        
          
            <a href="../../ja/mapscript/python.html"><img src="../_static/flagicons/ja.png" alt="ja" title="ja" border="0" /></a>
          
        
        
          
            <a href="../../nl_NL/mapscript/python.html"><img src="../_static/flagicons/nl_NL.png" alt="nl_NL" title="nl_NL" border="0" /></a>
          
        
        <img src="../_static/flagicons/pl.png" alt="pl" title="pl" border="0" width="18px" height="13px"/>
        
          
            <a href="../../ru/mapscript/python.html"><img src="../_static/flagicons/ru.png" alt="ru" title="ru" border="0" /></a>
          
        
        
          
            <a href="../../sq/mapscript/python.html"><img src="../_static/flagicons/sq.png" alt="sq" title="sq" border="0" /></a>
          
        
        
          
            <a href="../../tr/mapscript/python.html"><img src="../_static/flagicons/tr.png" alt="tr" title="tr" border="0" /></a>
          
        

    </td>
  </tr>
</table>


    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Nawigacja</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Indeks ogólny"
             accesskey="I">indeks</a></li>
        <li class="right" >
          <a href="imagery.html" title="Python MapScript Image Generation"
             accesskey="N">dalej</a> |</li>
        <li class="right" >
          <a href="php/by_example.html" title="By Example"
             accesskey="P">wstecz</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../documentation.html" >MapServer 7.2.0 Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">MapScript</a> &#187;</li> 
      </ul>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="python-mapscript-appendix">
<span id="python"></span><h1><a class="toc-backref" href="#tresc">Python MapScript Appendix</a><a class="headerlink" href="#python-mapscript-appendix" title="Stały odnośnik do tego nagłówka">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Author:</th><td class="field-body">Sean Gillies</td>
</tr>
</tbody>
</table>
<div class="contents topic" id="tresc">
<p class="topic-title first">Treść</p>
<ul class="simple">
<li><a class="reference internal" href="#python-mapscript-appendix" id="id1">Python MapScript Appendix</a><ul>
<li><a class="reference internal" href="#introduction" id="id2">Introduction</a></li>
<li><a class="reference internal" href="#classes" id="id3">Classes</a></li>
<li><a class="reference internal" href="#exception-handling" id="id4">Exception Handling</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="introduction">
<span id="index-0"></span><h2><a class="toc-backref" href="#tresc">Introduction</a><a class="headerlink" href="#introduction" title="Stały odnośnik do tego nagłówka">¶</a></h2>
<p>The Python MapScript module contains some class extension methods that have
not yet been implemented for other languages.</p>
</div>
<div class="section" id="classes">
<span id="index-1"></span><h2><a class="toc-backref" href="#tresc">Classes</a><a class="headerlink" href="#classes" title="Stały odnośnik do tego nagłówka">¶</a></h2>
<p>References to sections below will be added here as the documentation grows.</p>
<div class="section" id="imageobj">
<span id="index-2"></span><h3>imageObj<a class="headerlink" href="#imageobj" title="Stały odnośnik do tego nagłówka">¶</a></h3>
<p>The Python Imaging Library, <a class="reference external" href="http://www.pythonware.com/products/pil/">http://www.pythonware.com/products/pil/</a>, is an
indispensable tool for image manipulation.  The extensions to imageObj are
all geared towards better integration of PIL in MapScript applications.</p>
<div class="section" id="imageobj-methods">
<h4>imageObj Methods<a class="headerlink" href="#imageobj-methods" title="Stały odnośnik do tego nagłówka">¶</a></h4>
<dl class="docutils">
<dt>imageObj( PyObject arg1, PyObject arg2 [, PyObject arg3 ] ) <span class="classifier-delimiter">:</span> <span class="classifier"><a class="reference internal" href="#imageobj">imageObj</a></span></dt>
<dd><p class="first">Create a new instance which is either empty or read from a Python
file-like object that refers to a GD format image.</p>
<p>The constructor has 2 different modes.  In the blank image mode, arg1
and arg2 should be the desired width and height in pixels, and the
optional arg3 should be either an instance of outputFormatObj or
a GD driver name as a shortcut to a format.  In the image file mode,
arg1 should be a filename or a Python file or file-like object.  If
the file-like object does not have a „seek” attribute (such as a
urllib resource handle), then a GD driver name <em>must</em> be provided as
arg2.</p>
<p>Here’s an example of creating a 320 pixel wide by 240 pixel high JPEG
using the constructor’s blank image mode:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">image</span> <span class="o">=</span> <span class="n">mapscript</span><span class="o">.</span><span class="n">imageObj</span><span class="p">(</span><span class="mi">320</span><span class="p">,</span> <span class="mi">240</span><span class="p">,</span> <span class="s1">&#39;GD/JPEG&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>In image file mode, interesting values of <em>arg1</em> to try are instances
of <em>StringIO</em>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">s</span> <span class="o">=</span> <span class="n">StringIO</span><span class="p">()</span>
<span class="n">pil_image</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>    <span class="c1"># Save an image manipulated with PIL</span>
<span class="n">ms_image</span> <span class="o">=</span> <span class="n">imageObj</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</pre></div>
</div>
<p>Or the file-like object returned from <em>urlopen</em></p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">url</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="s1">&#39;http://mapserver.gis.umn.edu/bugs/ant.jpg&#39;</span><span class="p">)</span>
<span class="n">ms_image</span> <span class="o">=</span> <span class="n">imageObj</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="s1">&#39;GD/JPEG&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd>
<dt>write( [ PyObject file ] ) <span class="classifier-delimiter">:</span> <span class="classifier">void</span></dt>
<dd>Write image data to a Python file-like object.  Default is stdout.</dd>
</dl>
</div>
</div>
<div class="section" id="pointobj">
<span id="index-3"></span><h3>pointObj<a class="headerlink" href="#pointobj" title="Stały odnośnik do tego nagłówka">¶</a></h3>
<div class="section" id="pointobj-methods">
<h4>pointObj Methods<a class="headerlink" href="#pointobj-methods" title="Stały odnośnik do tego nagłówka">¶</a></h4>
<dl class="docutils">
<dt>__str__() <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first">Return a string formatted like</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span> <span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="o">%</span><span class="n">f</span> <span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="o">%</span><span class="n">f</span> <span class="p">}</span>
</pre></div>
</div>
<p>with the coordinate values substituted appropriately.  Usage example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">p</span> <span class="o">=</span> <span class="n">mapscript</span><span class="o">.</span><span class="n">pointObj</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
<span class="go">{ &#39;x&#39;: 1.000000 , &#39;y&#39;: 1.000000 }</span>
</pre></div>
</div>
<p>Note that the return value can be conveniently eval’d into a Python
dictionary:</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">p_dict</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p_dict</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]</span>
<span class="go">1.000000</span>
</pre></div>
</div>
</dd>
</dl>
</div>
</div>
<div class="section" id="rectobj">
<span id="index-4"></span><h3>rectObj<a class="headerlink" href="#rectobj" title="Stały odnośnik do tego nagłówka">¶</a></h3>
<div class="section" id="rectobj-methods">
<h4>rectObj Methods<a class="headerlink" href="#rectobj-methods" title="Stały odnośnik do tego nagłówka">¶</a></h4>
<dl class="docutils">
<dt>__contains__( pointObj point ) <span class="classifier-delimiter">:</span> <span class="classifier">boolean</span></dt>
<dd><p class="first">Returns True if <em>point</em> is inside the rectangle, otherwise returns False.</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">mapscript</span><span class="o">.</span><span class="n">rectObj</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span> <span class="o">=</span> <span class="n">mapscript</span><span class="o">.</span><span class="n">pointObj</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>       <span class="c1"># outside</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span> <span class="ow">in</span> <span class="n">r</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">r</span>
<span class="go">True</span>
</pre></div>
</div>
</dd>
<dt>__str__() <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first">Return a string formatted like</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span> <span class="s1">&#39;minx&#39;</span><span class="p">:</span> <span class="o">%</span><span class="n">f</span> <span class="p">,</span> <span class="s1">&#39;miny&#39;</span><span class="p">:</span> <span class="o">%</span><span class="n">f</span> <span class="p">,</span> <span class="s1">&#39;maxx&#39;</span><span class="p">:</span> <span class="o">%</span><span class="n">f</span> <span class="p">,</span> <span class="s1">&#39;maxy&#39;</span><span class="p">:</span> <span class="o">%</span><span class="n">f</span> <span class="p">}</span>
</pre></div>
</div>
<p>with the bounding values substituted appropriately.  Usage example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">mapscript</span><span class="o">.</span><span class="n">rectObj</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
<span class="go">{ &#39;minx&#39;: 0.000000 , &#39;miny&#39;: 0.000000 , &#39;maxx&#39;: 1.000000 , &#39;maxy&#39;: 1.000000 }</span>
</pre></div>
</div>
<p>Note that the return value can be conveniently eval’d into a Python
dictionary:</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">r_dict</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">r</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r_dict</span><span class="p">[</span><span class="s1">&#39;minx&#39;</span><span class="p">]</span>
<span class="go">0.000000</span>
</pre></div>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="section" id="exception-handling">
<span id="index-5"></span><h2><a class="toc-backref" href="#tresc">Exception Handling</a><a class="headerlink" href="#exception-handling" title="Stały odnośnik do tego nagłówka">¶</a></h2>
<p>The Python MapScript module maps a few MapServer errors into Python exceptions.
Attempting to load a non-existent mapfile raises an «IOError», for example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">mapscript</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mapfile</span> <span class="o">=</span> <span class="s1">&#39;/no/such/file.map&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="n">mapscript</span><span class="o">.</span><span class="n">mapObj</span><span class="p">(</span><span class="n">mapfile</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">?</span>
  File <span class="nb">&quot;/usr/lib/python2.3/site-packages/mapscript.py&quot;</span>, line <span class="m">799</span>, in <span class="n">__init__</span>
    <span class="n">newobj</span> <span class="o">=</span> <span class="n">_mapscript</span><span class="o">.</span><span class="n">new_mapObj</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
<span class="gr">IOError</span>: <span class="n">msLoadMap(): Unable to access file. (/no/such/file.map)</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p>The message of the error is written by «msSetError» and so is the same message that
CGI mapserv users see in error logs.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3>Szybkie wyszukiwanie</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Szukaj" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><h3>Navigation</h3>
<p>
<a href="../about.html" title="About">About</a><br>
<a href="../products.html" title="Products">Products</a><br>
<a href="../community/index.html" title="Community">Community</a><br>
<a href="../development/index.html" title="Development">Development</a><br>
<a href="../download.html" title="Downloads">Downloads</a><br>
<a href="../documentation.html" title="Documentation">Documentation</a><br>
<a href="../faq.html" title="FAQ">FAQ</a><br>
<a href="../psc.html" title="PSC">PSC</a><br>
<a href="https://twitter.com/mapserver_osgeo" title="Twitter">Twitter</a>
</p>
  <h3>Current Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Python MapScript Appendix</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#classes">Classes</a><ul>
<li><a class="reference internal" href="#imageobj">imageObj</a><ul>
<li><a class="reference internal" href="#imageobj-methods">imageObj Methods</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pointobj">pointObj</a><ul>
<li><a class="reference internal" href="#pointobj-methods">pointObj Methods</a></li>
</ul>
</li>
<li><a class="reference internal" href="#rectobj">rectObj</a><ul>
<li><a class="reference internal" href="#rectobj-methods">rectObj Methods</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#exception-handling">Exception Handling</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Nawigacja</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Indeks ogólny"
             >indeks</a></li>
        <li class="right" >
          <a href="imagery.html" title="Python MapScript Image Generation"
             >dalej</a> |</li>
        <li class="right" >
          <a href="php/by_example.html" title="By Example"
             >wstecz</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../documentation.html" >MapServer 7.2.0 Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >MapScript</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; <a href="../copyright.html">Copyright</a> 2018, Open Source Geospatial Foundation.
      Ostatnia modyfikacja 2018-07-31.
      Utworzone przy pomocy <a href="http://sphinx-doc.org/">Sphinx</a>'a 1.7.6.
    </div>
  </body>
</html>