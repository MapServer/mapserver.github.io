<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Section 2: CGI variables and the User Interface &#8212; MapServer 8.0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx.css?v=6c7b17ac" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=dd298242" />
    <link rel="stylesheet" type="text/css" href="../_static/ribbon.css?v=ea091bf4" />
    
    <script src="../_static/documentation_options.js?v=521b6f53"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    
    <link rel="icon" href="../_static/mapserver.ico"/>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="Section 3: Query and more about HTML Templates" href="section3.html" />
    <link rel="prev" title="Section 1: Static Maps and the MapFile" href="section1.html" /> 
  </head><body>


<!-- for main branch only, do not backport this -->

<table width="100%" style="width: 100%; background-color: white;">
  <tr>
    <td rowspan="2" style="padding: 10px 0px 10px 10px;">
      <a href="../index.html" title="Home"><img src="../_static/banner.png" alt="MapServer banner" border="0" /></a>
    </td>
    <td style="padding: 10px 10px 0px 0px; text-align: right; vertical-align: top;">
      <a href="../index.html" title="Home">Home</a> |
      <a href="../products.html" title="Products (MapServer core, MapCache, TinyOWS">Products</a> |
      <a href="https://github.com/mapserver/mapserver/issues/" title="Issue Tracker (MapServer core)">Issue Tracker</a> |
      <a href="../community/service_providers.html" title="Professional Service Providers">Service Providers</a> |      
      <a href="../faq.html" title="Frequently Asked Questions">FAQ</a> |
      <a href="https://twitter.com/mapserver_osgeo" title="Twitter" target="_blank">Twitter</a> |
      <a href="../download.html" title="Download Source or Binaries">Download </a> |
      <a class="badge" href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=KRJ2X44N3HA6U&source=url" target="_blank">
        <img src="https://img.shields.io/badge/donate-%E2%9D%A4%C2%A0-ff69b4.svg?style=flat" alt="Donate to MapServer">
      </a>
    </td>
  </tr>
  <tr>
    <td style="padding: 0px 10px 0px 0px; text-align: right; vertical-align: bottom;">
        <img src="../_static/flagicons/en.png" alt="en" title="en" border="0" width="18px" height="13px"/>
        
          <a href="../ar/tutorial/section2.html"><img src="../_static/flagicons/ar.png" alt="ar" title="ar" border="0" /></a>
        
        
          <a href="../de/tutorial/section2.html"><img src="../_static/flagicons/de.png" alt="de" title="de" border="0" /></a>
        
        
          <a href="../el/tutorial/section2.html"><img src="../_static/flagicons/el.png" alt="el" title="el" border="0" /></a>
        
        
          <a href="../es/tutorial/section2.html"><img src="../_static/flagicons/es.png" alt="es" title="es" border="0" /></a>
        
        
          <a href="../fr/tutorial/section2.html"><img src="../_static/flagicons/fr.png" alt="fr" title="fr" border="0" /></a>
        
        
          <a href="../id/tutorial/section2.html"><img src="../_static/flagicons/id.png" alt="id" title="id" border="0" /></a>
        
        
          <a href="../it/tutorial/section2.html"><img src="../_static/flagicons/it.png" alt="it" title="it" border="0" /></a>
        
        
          <a href="../ja/tutorial/section2.html"><img src="../_static/flagicons/ja.png" alt="ja" title="ja" border="0" /></a>
        
        
          <a href="../nl_NL/tutorial/section2.html"><img src="../_static/flagicons/nl_NL.png" alt="nl_NL" title="nl_NL" border="0" /></a>
        
        
          <a href="../pl/tutorial/section2.html"><img src="../_static/flagicons/pl.png" alt="pl" title="pl" border="0" /></a>
        
        
          <a href="../ru/tutorial/section2.html"><img src="../_static/flagicons/ru.png" alt="ru" title="ru" border="0" /></a>
        
        
          <a href="../sq/tutorial/section2.html"><img src="../_static/flagicons/sq.png" alt="sq" title="sq" border="0" /></a>
        
        
          <a href="../tr/tutorial/section2.html"><img src="../_static/flagicons/tr.png" alt="tr" title="tr" border="0" /></a>
        

    </td>
  </tr>
</table>


    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="section3.html" title="Section 3: Query and more about HTML Templates"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="section1.html" title="Section 1: Static Maps and the MapFile"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../documentation.html" >MapServer 8.0.1 Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">MapServer Tutorial</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Section 2: CGI variables and the User Interface</a></li> 
      </ul>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="section-2-cgi-variables-and-the-user-interface">
<span id="tutorial-section2"></span><h1>Section 2: CGI variables and the User Interface<a class="headerlink" href="#section-2-cgi-variables-and-the-user-interface" title="Link to this heading">¶</a></h1>
<p>So far we have only looked at the mapfile when creating maps. In
creating web mapping applications, it is usually our intention to make
maps that can be changed by the user (of the application)
interactively. That is, a user should be able to change the content of
(or the information in) the map. To accomplish this interactivity, we
use the MapServer HTML templates.</p>
<section id="html-templates">
<h2>HTML Templates<a class="headerlink" href="#html-templates" title="Link to this heading">¶</a></h2>
<p>A MapServer HTML template is essentially an HTML file with a few
MapServer specific tags.  These tags are the MapServer CGI variables
and are enclosed in square brackets “[]”.  When the MapServer CGI
program processes an application, it first parses the query string and
the mapfile, and produces the necessary output. Some of this output
will need to be written to the HTML template file which you would have
to also specify in the mapfile using the web template keyword (or in a
separate HTML initialization file). The CGI program will replace all
the variables in the HTML template with the proper value before
sending it back to the web browser. If you are to directly view an
HTML template in a web browser, there won’t be any maps rendered and
you will instead get blank images and other junk.</p>
<section id="variables">
<h3>Variables<a class="headerlink" href="#variables" title="Link to this heading">¶</a></h3>
<p>MapServer provides several variables for web mapping: the “img”
variable which you’ve seen in Example 1.9 is but one example. There
area few core CGI variables originally designed as part of the mapping
interface but practically all the mapfile parameters can be defined as
variables. The definitive reference to the MapServer  CGI variables can
be found <a class="reference internal" href="../cgi/index.html#cgi"><span class="std std-ref">here</span></a>.</p>
<p>We can also define our own variables, which MapServer will pass along
to our application.  For example, we can create a variable called
“root” to represent the root directory of this tutorial, the value for
“root” will then be “/tutorial”. When the MapServer CGI program
processes our HTML template, it will replace every instance of he
“[root]” tag with “/tutorial”. You will see this in action for each of
the following examples.</p>
</section>
<section id="run-time-substitution">
<h3>Run-time Substitution<a class="headerlink" href="#run-time-substitution" title="Link to this heading">¶</a></h3>
<p>Since MapServer 8.0.1, this tutorial uses MapServer’s <a class="reference internal" href="../cgi/runsub.html#runsub"><span class="std std-ref">Run-time Substitution</span></a> to pass the
template name through the url, such as <cite>…&amp;template=example2-2.html</cite>.  The
associated mapfile’s WEB object contains a <cite>%template%</cite> variable, and a VALIDATION
object with a regular expression to allow the “<cite>template=</cite>” variable’s possible
values through the url.</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">WEB</span>
  <span class="k">TEMPLATE</span>  <span class="s">&#39;%template%&#39;</span>
  <span class="p">...</span>
  <span class="k">VALIDATION</span>
    <span class="s">&quot;template&quot;</span> <span class="s">&quot;example2*&quot;</span>
  <span class="k">END</span>
<span class="k">END</span>
</pre></div>
</div>
</section>
</section>
<section id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Link to this heading">¶</a></h2>
<p>So, let’s build an interactive interface for our application…</p>
<ul class="simple">
<li><p>Users of a web mapping application should be able to pan and zoom on the map:
<a class="reference external" href="https://demo.mapserver.org/cgi-bin/mapserv?map=/mapserver/apps/tutorial/htdocs/example2.map&amp;layer=states&amp;zoom=0&amp;mode=browse&amp;root=/tutorial&amp;program=/cgi-bin/mapserv&amp;template=example2-1.html">Example 2.1 - Pan and Zoom Controls</a></p></li>
<li><p>They also should be able to turn on and off layers on a map:
<a class="reference external" href="https://demo.mapserver.org/cgi-bin/mapserv?map=/mapserver/apps/tutorial/htdocs/example2.map&amp;layer=states&amp;zoom=0&amp;mode=browse&amp;root=/tutorial&amp;program=/cgi-bin/mapserv&amp;template=example2-2.html">Example 2.2 - Layer Control</a></p></li>
<li><p>A map should always include a scalebar.
<a class="reference external" href="https://demo.mapserver.org/cgi-bin/mapserv?map=/mapserver/apps/tutorial/htdocs/example2.map&amp;layer=states&amp;zoom=0&amp;mode=browse&amp;root=/tutorial&amp;program=/cgi-bin/mapserv&amp;template=example2-3.html">Example 2.3 - Adding a Scalebar</a></p></li>
<li><p>If users are to navigate through the map, a reference map should be provided:
<a class="reference external" href="https://demo.mapserver.org/cgi-bin/mapserv?map=/mapserver/apps/tutorial/htdocs/example2.map&amp;layer=states&amp;zoom=0&amp;mode=browse&amp;root=/tutorial&amp;program=/cgi-bin/mapserv&amp;template=example2-4.html">Example 2.4 - Adding a Reference Map</a></p></li>
<li><p>The map should include a legend.
<a class="reference external" href="https://demo.mapserver.org/cgi-bin/mapserv?map=/mapserver/apps/tutorial/htdocs/example2.map&amp;layer=states&amp;zoom=0&amp;mode=browse&amp;root=/tutorial&amp;program=/cgi-bin/mapserv&amp;template=example2-5.html">Example 2.5- Adding a Legend</a></p></li>
</ul>
<hr class="docutils" />
<p><a class="reference internal" href="section1.html#tutorial-section1"><span class="std std-ref">Back to Section 1 index</span></a> | <a class="reference internal" href="section3.html#tutorial-section3"><span class="std std-ref">Proceed to Section 3</span></a></p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p>
<a href="../about.html" title="About">About</a><br>
<a href="../products.html" title="Products">Products</a><br>
<a href="../community/index.html" title="Community">Community</a><br>
<a href="../development/index.html" title="Development">Development</a><br>
<a href="../download.html" title="Downloads">Downloads</a><br>
<a href="../documentation.html" title="Documentation">Documentation</a><br>
<a href="../faq.html" title="FAQ">FAQ</a><br>
<a href="../psc.html" title="PSC">PSC</a><br>
<a href="https://twitter.com/mapserver_osgeo" title="Twitter">Twitter</a>
</p>
  <h3>Current Table Of Contents</h3>
  <ul>
<li><a class="reference internal" href="#">Section 2: CGI variables and the User Interface</a><ul>
<li><a class="reference internal" href="#html-templates">HTML Templates</a><ul>
<li><a class="reference internal" href="#variables">Variables</a></li>
<li><a class="reference internal" href="#run-time-substitution">Run-time Substitution</a></li>
</ul>
</li>
<li><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="section3.html" title="Section 3: Query and more about HTML Templates"
             >next</a> |</li>
        <li class="right" >
          <a href="section1.html" title="Section 1: Static Maps and the MapFile"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../documentation.html" >MapServer 8.0.1 Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >MapServer Tutorial</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Section 2: CGI variables and the User Interface</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; <a href="../copyright.html">Copyright</a> 2023, Open Source Geospatial Foundation.
      Last updated on 2023-12-22.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.5.
    </div>
  </body>
</html>