<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Example 1.5 &#8212; MapServer 8.0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx.css?v=6c7b17ac" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=dd298242" />
    <link rel="stylesheet" type="text/css" href="../_static/ribbon.css?v=ea091bf4" />
    
    <script src="../_static/documentation_options.js?v=521b6f53"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    
    <link rel="icon" href="../_static/mapserver.ico"/>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" /> 
  </head><body>


<!-- for main branch only, do not backport this -->

<table width="100%" style="width: 100%; background-color: white;">
  <tr>
    <td rowspan="2" style="padding: 10px 0px 10px 10px;">
      <a href="../index.html" title="Home"><img src="../_static/banner.png" alt="MapServer banner" border="0" /></a>
    </td>
    <td style="padding: 10px 10px 0px 0px; text-align: right; vertical-align: top;">
      <a href="../index.html" title="Home">Home</a> |
      <a href="../products.html" title="Products (MapServer core, MapCache, TinyOWS">Products</a> |
      <a href="https://github.com/mapserver/mapserver/issues/" title="Issue Tracker (MapServer core)">Issue Tracker</a> |
      <a href="../community/service_providers.html" title="Professional Service Providers">Service Providers</a> |      
      <a href="../faq.html" title="Frequently Asked Questions">FAQ</a> |
      <a href="https://twitter.com/mapserver_osgeo" title="Twitter" target="_blank">Twitter</a> |
      <a href="../download.html" title="Download Source or Binaries">Download </a> |
      <a class="badge" href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=KRJ2X44N3HA6U&source=url" target="_blank">
        <img src="https://img.shields.io/badge/donate-%E2%9D%A4%C2%A0-ff69b4.svg?style=flat" alt="Donate to MapServer">
      </a>
    </td>
  </tr>
  <tr>
    <td style="padding: 0px 10px 0px 0px; text-align: right; vertical-align: bottom;">
        <img src="../_static/flagicons/en.png" alt="en" title="en" border="0" width="18px" height="13px"/>
        
          <a href="../ar/tutorial/example1-5.html"><img src="../_static/flagicons/ar.png" alt="ar" title="ar" border="0" /></a>
        
        
          <a href="../de/tutorial/example1-5.html"><img src="../_static/flagicons/de.png" alt="de" title="de" border="0" /></a>
        
        
          <a href="../el/tutorial/example1-5.html"><img src="../_static/flagicons/el.png" alt="el" title="el" border="0" /></a>
        
        
          <a href="../es/tutorial/example1-5.html"><img src="../_static/flagicons/es.png" alt="es" title="es" border="0" /></a>
        
        
          <a href="../fr/tutorial/example1-5.html"><img src="../_static/flagicons/fr.png" alt="fr" title="fr" border="0" /></a>
        
        
          <a href="../id/tutorial/example1-5.html"><img src="../_static/flagicons/id.png" alt="id" title="id" border="0" /></a>
        
        
          <a href="../it/tutorial/example1-5.html"><img src="../_static/flagicons/it.png" alt="it" title="it" border="0" /></a>
        
        
          <a href="../ja/tutorial/example1-5.html"><img src="../_static/flagicons/ja.png" alt="ja" title="ja" border="0" /></a>
        
        
          <a href="../nl_NL/tutorial/example1-5.html"><img src="../_static/flagicons/nl_NL.png" alt="nl_NL" title="nl_NL" border="0" /></a>
        
        
          <a href="../pl/tutorial/example1-5.html"><img src="../_static/flagicons/pl.png" alt="pl" title="pl" border="0" /></a>
        
        
          <a href="../ru/tutorial/example1-5.html"><img src="../_static/flagicons/ru.png" alt="ru" title="ru" border="0" /></a>
        
        
          <a href="../sq/tutorial/example1-5.html"><img src="../_static/flagicons/sq.png" alt="sq" title="sq" border="0" /></a>
        
        
          <a href="../tr/tutorial/example1-5.html"><img src="../_static/flagicons/tr.png" alt="tr" title="tr" border="0" /></a>
        

    </td>
  </tr>
</table>


    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Example 1.5</a></li> 
      </ul>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="example-1-5">
<span id="example1-5"></span><h1>Example 1.5<a class="headerlink" href="#example-1-5" title="Link to this heading">¶</a></h1>
<section id="adding-a-raster-layer">
<h2>Adding a Raster Layer<a class="headerlink" href="#adding-a-raster-layer" title="Link to this heading">¶</a></h2>
<img alt="https://demo.mapserver.org/cgi-bin/mapserv?map=/mapserver/apps/tutorial/htdocs/example1-5.map&amp;layer=states&amp;layer=states_line&amp;layer=modis&amp;mode=map" src="https://demo.mapserver.org/cgi-bin/mapserv?map=/mapserver/apps/tutorial/htdocs/example1-5.map&amp;layer=states&amp;layer=states_line&amp;layer=modis&amp;mode=map" />
<p>In addition to vector data support (point, lines, polygons),
MapServer can also display raster data. Through the use
of GDAL library, MapServer can input and output multiple raster
formats. Whereas in versions prior to 4.x raster input is limited to
single layer, grayscale or indexed color images, recent MapServer
versions support RGB and multispectral (multi-layer) images. This
example shows how to select what layers to display when using
multispectral data.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>There might be a noticeable performance hit when using RGB and
multispectral images.</p>
</div>
<p>Because MapServer uses AGG to generate output
images, it supports RGB (24-bit or true color) output as well. So,
along with 8-bit (indexed color or grayscale) PNG8, you can now also
use PNG (true color) for output. This example uses PNG as
IMAGETYPE.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>As with RGB input, there might be a noticeable performance hit when
using PNG compared to PNG8.</p>
</div>
<p>MapServer can actually use GDAL to generate output images as well, but
that’s another topic. If you want to know more about it, look at the
<a class="reference internal" href="../mapfile/outputformat.html#outputformat"><span class="std std-ref">OUTPUTFORMAT</span></a> object in the mapfile reference.</p>
<section id="mapfile-structure">
<h3>MapFile Structure<a class="headerlink" href="#mapfile-structure" title="Link to this heading">¶</a></h3>
<p>This is what the mapfile looks like: <a class="reference internal" href="example1-5-map.html#example1-5-map"><span class="std std-ref">Example1-5.map</span></a></p>
<p>The mapfile structure, by objects, looks like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>                                             <span class="n">MAP</span>
             <span class="n">LAYER</span> <span class="c1">#1-------------LAYER #2----|----LAYER #3</span>
          <span class="p">(</span><span class="n">states_poly</span><span class="p">)</span>           <span class="p">(</span><span class="n">modis</span><span class="p">)</span>       <span class="p">(</span><span class="n">states_line</span><span class="p">)</span>
             <span class="o">|</span>                                        <span class="o">|</span>
<span class="p">(</span><span class="n">land</span><span class="p">)</span> <span class="n">CLASS</span><span class="o">-|</span>                                        <span class="o">|-</span><span class="n">CLASS</span>
          <span class="o">|</span>                                               <span class="o">|</span>
    <span class="n">STYLE</span><span class="o">-|-</span><span class="n">LABEL</span>                                         <span class="o">|-</span><span class="n">STYLE</span>
</pre></div>
</div>
<p>When you look at the mapfile, you’ll see that the new LAYER object is added below
(after) the state POLYGON layer. Why? MapServer displays layers in reverse order:
last in, first out (LIFO). The first layer defined in the mapfile is drawn at
the bottom of the map.</p>
<p>So, if we have drawn the state POLYGON layer, it would be on the bottom. Since the
raster layer gets drawn on top of it, we won’t see it. That’s why the first layer
gets the STATUS value of OFF. The state LINE layer is defined below the raster
layer so it gets drawn on top (and you can see it). This is why we separated the
state LINE layer from the state POLYGON layer. Of course the labels get drawn
on top of everything.</p>
<p>MapServer can automatically turn layers on or off based on the status of other
layers (say you want the states polygon layer turned off when the raster layer
is turned on). This is done by using the REQUIRES parameter. Keep this in
mind as you might want to use it once you start creating your own MapServer
applications.</p>
</section>
<section id="parameters">
<h3>Parameters<a class="headerlink" href="#parameters" title="Link to this heading">¶</a></h3>
<p>Let’s have a look at the new parameters introduced in the mapfile:</p>
<dl class="simple">
<dt><strong>IMAGETYPE</strong></dt><dd><p>PNG is the 24-bit or true-color version of the PNG format.  By the
way, try changing this value to PNG8.  Notice the time it takes to
generate the image using either formats. In choosing between true
color and indexed color, take into account the time it takes to
generate the image.</p>
</dd>
<dt><strong>SYMBOLSET</strong></dt><dd><p>Points to the path of the symbol definition file. The symbols in
this file are referenced by the SYMBOL parameter in the <a class="reference internal" href="../mapfile/class.html#class"><span class="std std-ref">CLASS</span></a> object.  It’s not really needed at this point but I thought
I’d throw this here now.  Please refer to the <a class="reference internal" href="../mapfile/symbology/construction.html#sym-construction"><span class="std std-ref">Cartographic
Symbol Reference</span></a> for further information.</p>
</dd>
<dt><strong>DATA raster/mod09a12003161_ugl_ll_8bit.tif</strong></dt><dd><p>In the newly added LAYER object, the DATA parameter points to a
GeoTIFF image.  Like vector datasets, MapServer supports multiple
raster file formats. This support is accomplished through use of the
GDAL library. For more information on the different raster formats
supported by MapServer and for general discussion on the use of
rasters in MapServer, please read the <a class="reference internal" href="../input/raster.html#raster"><span class="std std-ref">Raster Data Reference</span></a>.</p>
</dd>
<dt><strong>TYPE RASTER</strong></dt><dd><p>When using raster data (images) we use the value RASTER for the
parameter TYPE, as opposed to the POLYGON, LINE, and POINT values
for vector data and its labels.</p>
</dd>
<dt><strong>PROCESSING “BANDS=1,2,3”</strong></dt><dd><p>This LAYER object parameter was added in MapServer 4.x. The
<a class="reference internal" href="../mapfile/layer.html#layer"><span class="std std-ref">PROCESSING</span></a> keyword has many values but in this case
we are using it to select which bands in a multispectral image to
display. The values here are strings that will be passed to the GDAL
library.</p>
</dd>
<dt><strong>OFFSITE</strong></dt><dd><p>This parameter tells MapServer what pixel values to render as
background (or ignore). You can get the pixel values using image
processing or image manipulation programs (i.e. Imagine, Photoshop,
Gimp).</p>
</dd>
</dl>
</section>
<section id="rgb-vs-indexed-color-image">
<h3>RGB vs Indexed Color Image<a class="headerlink" href="#rgb-vs-indexed-color-image" title="Link to this heading">¶</a></h3>
<p>To compare map creation speed when using RGB image as opposed to indexed color
image, replace the following lines in the mapfile:</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">DATA</span> <span class="s">&quot;raster/mod09a12003161_ugl_ll_8bit.tif&quot;</span>
<span class="k">STATUS</span> <span class="nb">DEFAULT</span>
<span class="k">TYPE</span> <span class="nb">RASTER</span>
<span class="k">PROCESSING</span> <span class="s">&quot;BANDS=1,2,3&quot;</span>
<span class="k">OFFSITE</span> <span class="mi">71</span> <span class="mi">74</span> <span class="mi">65</span>
</pre></div>
</div>
<p>with these:</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">DATA</span> <span class="s">&quot;raster/mod09a12003161_ugl_ll_idxa.tif&quot;</span>
<span class="k">STATUS</span> <span class="nb">DEFAULT</span>
<span class="k">TYPE</span> <span class="nb">RASTER</span>
<span class="k">OFFSITE</span> <span class="mi">70</span> <span class="mi">74</span> <span class="mi">66</span>
</pre></div>
</div>
<p>Also, try changing the IMAGETYPE from PNG to PNG8.</p>
<hr class="docutils" />
<p><a class="reference internal" href="example1-4.html#example1-4"><span class="std std-ref">Back to Example 1.4</span></a> | <a class="reference internal" href="example1-6.html#example1-6"><span class="std std-ref">Proceed to Example 1.6</span></a></p>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p>
<a href="../about.html" title="About">About</a><br>
<a href="../products.html" title="Products">Products</a><br>
<a href="../community/index.html" title="Community">Community</a><br>
<a href="../development/index.html" title="Development">Development</a><br>
<a href="../download.html" title="Downloads">Downloads</a><br>
<a href="../documentation.html" title="Documentation">Documentation</a><br>
<a href="../faq.html" title="FAQ">FAQ</a><br>
<a href="../psc.html" title="PSC">PSC</a><br>
<a href="https://twitter.com/mapserver_osgeo" title="Twitter">Twitter</a>
</p>
  <h3>Current Table Of Contents</h3>
  <ul>
<li><a class="reference internal" href="#">Example 1.5</a><ul>
<li><a class="reference internal" href="#adding-a-raster-layer">Adding a Raster Layer</a><ul>
<li><a class="reference internal" href="#mapfile-structure">MapFile Structure</a></li>
<li><a class="reference internal" href="#parameters">Parameters</a></li>
<li><a class="reference internal" href="#rgb-vs-indexed-color-image">RGB vs Indexed Color Image</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Example 1.5</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; <a href="../copyright.html">Copyright</a> 2023, Open Source Geospatial Foundation.
      Last updated on 2023-12-22.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.5.
    </div>
  </body>
</html>