<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>WCS Server &#8212; MapServer 8.0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx.css?v=6c7b17ac" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=dd298242" />
    <link rel="stylesheet" type="text/css" href="../_static/ribbon.css?v=ea091bf4" />
    
    <script src="../_static/documentation_options.js?v=521b6f53"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    
    <link rel="icon" href="../_static/mapserver.ico"/>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="WCS Use Cases" href="wcs_format.html" />
    <link rel="prev" title="SLD" href="sld.html" /> 
  </head><body>


<!-- for main branch only, do not backport this -->

<table width="100%" style="width: 100%; background-color: white;">
  <tr>
    <td rowspan="2" style="padding: 10px 0px 10px 10px;">
      <a href="../index.html" title="Home"><img src="../_static/banner.png" alt="MapServer banner" border="0" /></a>
    </td>
    <td style="padding: 10px 10px 0px 0px; text-align: right; vertical-align: top;">
      <a href="../index.html" title="Home">Home</a> |
      <a href="../products.html" title="Products (MapServer core, MapCache, TinyOWS">Products</a> |
      <a href="https://github.com/mapserver/mapserver/issues/" title="Issue Tracker (MapServer core)">Issue Tracker</a> |
      <a href="../community/service_providers.html" title="Professional Service Providers">Service Providers</a> |      
      <a href="../faq.html" title="Frequently Asked Questions">FAQ</a> |
      <a href="https://twitter.com/mapserver_osgeo" title="Twitter" target="_blank">Twitter</a> |
      <a href="../download.html" title="Download Source or Binaries">Download </a> |
      <a class="badge" href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=KRJ2X44N3HA6U&source=url" target="_blank">
        <img src="https://img.shields.io/badge/donate-%E2%9D%A4%C2%A0-ff69b4.svg?style=flat" alt="Donate to MapServer">
      </a>
    </td>
  </tr>
  <tr>
    <td style="padding: 0px 10px 0px 0px; text-align: right; vertical-align: bottom;">
        <img src="../_static/flagicons/en.png" alt="en" title="en" border="0" width="18px" height="13px"/>
        
          <a href="../ar/ogc/wcs_server.html"><img src="../_static/flagicons/ar.png" alt="ar" title="ar" border="0" /></a>
        
        
          <a href="../de/ogc/wcs_server.html"><img src="../_static/flagicons/de.png" alt="de" title="de" border="0" /></a>
        
        
          <a href="../el/ogc/wcs_server.html"><img src="../_static/flagicons/el.png" alt="el" title="el" border="0" /></a>
        
        
          <a href="../es/ogc/wcs_server.html"><img src="../_static/flagicons/es.png" alt="es" title="es" border="0" /></a>
        
        
          <a href="../fr/ogc/wcs_server.html"><img src="../_static/flagicons/fr.png" alt="fr" title="fr" border="0" /></a>
        
        
          <a href="../id/ogc/wcs_server.html"><img src="../_static/flagicons/id.png" alt="id" title="id" border="0" /></a>
        
        
          <a href="../it/ogc/wcs_server.html"><img src="../_static/flagicons/it.png" alt="it" title="it" border="0" /></a>
        
        
          <a href="../ja/ogc/wcs_server.html"><img src="../_static/flagicons/ja.png" alt="ja" title="ja" border="0" /></a>
        
        
          <a href="../nl_NL/ogc/wcs_server.html"><img src="../_static/flagicons/nl_NL.png" alt="nl_NL" title="nl_NL" border="0" /></a>
        
        
          <a href="../pl/ogc/wcs_server.html"><img src="../_static/flagicons/pl.png" alt="pl" title="pl" border="0" /></a>
        
        
          <a href="../ru/ogc/wcs_server.html"><img src="../_static/flagicons/ru.png" alt="ru" title="ru" border="0" /></a>
        
        
          <a href="../sq/ogc/wcs_server.html"><img src="../_static/flagicons/sq.png" alt="sq" title="sq" border="0" /></a>
        
        
          <a href="../tr/ogc/wcs_server.html"><img src="../_static/flagicons/tr.png" alt="tr" title="tr" border="0" /></a>
        

    </td>
  </tr>
</table>


    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="wcs_format.html" title="WCS Use Cases"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="sld.html" title="SLD"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../documentation.html" >MapServer 8.0.1 Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">OGC Support and Configuration</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">WCS Server</a></li> 
      </ul>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="wcs-server">
<span id="index-0"></span><span id="id1"></span><h1><a class="toc-backref" href="#table-of-contents" role="doc-backlink">WCS Server</a><a class="headerlink" href="#wcs-server" title="Link to this heading">¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd">Author<span class="colon">:</span></dt>
<dd class="field-odd"><p>Jeff McKenna</p>
</dd>
<dt class="field-even">Contact<span class="colon">:</span></dt>
<dd class="field-even"><p>jmckenna at gatewaygeomatics.com</p>
</dd>
<dt class="field-odd">Author<span class="colon">:</span></dt>
<dd class="field-odd"><p>Stephan Meissl</p>
</dd>
<dt class="field-even">Contact<span class="colon">:</span></dt>
<dd class="field-even"><p>stephan.meissl at eox.at</p>
</dd>
<dt class="field-odd">Author<span class="colon">:</span></dt>
<dd class="field-odd"><p>Fabian Schindler</p>
</dd>
<dt class="field-even">Contact<span class="colon">:</span></dt>
<dd class="field-even"><p>fabian.schindler at eox.at</p>
</dd>
<dt class="field-odd">Last Updated<span class="colon">:</span></dt>
<dd class="field-odd"><p>2021-03-27</p>
</dd>
</dl>
<nav class="contents" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#wcs-server" id="id2">WCS Server</a></p>
<ul>
<li><p><a class="reference internal" href="#introduction" id="id3">Introduction</a></p></li>
<li><p><a class="reference internal" href="#configuring-your-mapfile-to-serve-wcs-layers" id="id4">Configuring Your Mapfile to Serve WCS Layers</a></p></li>
<li><p><a class="reference internal" href="#test-your-wcs-1-0-server" id="id5">Test Your WCS 1.0 Server</a></p></li>
<li><p><a class="reference internal" href="#wcs-1-1-0-issues" id="id6">WCS 1.1.0+ Issues</a></p></li>
<li><p><a class="reference internal" href="#wcs-2-0" id="id7">WCS 2.0</a></p></li>
<li><p><a class="reference internal" href="#http-post-support" id="id8">HTTP-POST support</a></p></li>
<li><p><a class="reference internal" href="#inspire-download-service-support" id="id9">INSPIRE download service support</a></p></li>
<li><p><a class="reference internal" href="#reference-section" id="id10">Reference Section</a></p></li>
<li><p><a class="reference internal" href="#rules-for-handling-srs-in-a-mapserver-wcs" id="id11">Rules for handling SRS in a MapServer WCS</a></p></li>
<li><p><a class="reference internal" href="#spatio-temporal-indexes" id="id12">Spatio/Temporal Indexes</a></p></li>
<li><p><a class="reference internal" href="#wcs-2-0-application-profile-earth-observation-eo-wcs" id="id13">WCS 2.0 Application Profile - Earth Observation (EO-WCS)</a></p></li>
<li><p><a class="reference internal" href="#to-do-items-and-known-limitations" id="id14">To-do Items and Known Limitations</a></p></li>
<li><p><a class="reference internal" href="#credits" id="id15">Credits</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="introduction">
<h2><a class="toc-backref" href="#table-of-contents" role="doc-backlink">Introduction</a><a class="headerlink" href="#introduction" title="Link to this heading">¶</a></h2>
<p>A WCS (or Web Coverage Service) allows for the publication of
“coverages”- digital geospatial information representing space-varying
phenomena. In the MapServer world it allows for unfiltered access to
raster data. Conceptually it is easy think of WCS as a raster
equivalent of WFS. The following documentation is based on the <a class="reference external" href="https://portal.ogc.org/files/?artifact_id=3837">Open
Geospatial Consortium’s (OGC) Web Coverage Service Interfaces
Implementation Specification version 1.0.0</a>.</p>
<section id="links-to-wcs-related-information">
<h3>Links to WCS-Related Information<a class="headerlink" href="#links-to-wcs-related-information" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><a class="reference external" href="https://www.ogc.org/standards/wcs">OGC’c WCS Standard page</a></p></li>
<li><p><a class="reference external" href="https://portal.ogc.org/files/?artifact_id=3837">WCS 1.0.0 specification</a></p></li>
<li><p><a class="reference external" href="https://portal.ogc.org/files/?artifact_id=22560">WCS 1.1.1c1 specification</a></p></li>
<li><p>WCS 2.0</p>
<ul>
<li><p><a class="reference external" href="https://portal.ogc.org/files/?artifact_id=48553">GML 3.2.1 Application Schema Coverages</a></p></li>
<li><p><a class="reference external" href="https://portal.ogc.org/files/?artifact_id=48428">WCS 2.0 Specification - Core</a></p></li>
<li><p><a class="reference external" href="https://portal.ogc.org/files/?artifact_id=41439">WCS 2.0 Specification - KVP Protocol Binding Extension</a></p></li>
<li><p><a class="reference external" href="https://portal.ogc.org/files/?artifact_id=41440">WCS 2.0 Specification - XML/POST Protocol Binding Extension</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="wms_server.html#wms-server"><span class="std std-ref">WMS Server HowTo</span></a></p></li>
</ul>
</section>
<section id="software-requirements">
<h3>Software Requirements<a class="headerlink" href="#software-requirements" title="Link to this heading">¶</a></h3>
<p>In order to enable MapServer to serve WCS data, it MUST be compiled
against certain libraries:</p>
<ul class="simple">
<li><p>PROJ: The reprojection library. Version 4.4.3 or greater is required.</p></li>
<li><p>GDAL: raster support library.</p></li>
<li><p>MapServer: version &gt;= 4.4 (tested with 5.0.2 while updating this document)</p></li>
</ul>
<p>For WCS 1.1.x (MapServer 5.2) and WCS 2.0 (MapServer 6.0) support
there is an additional requirement:</p>
<ul class="simple">
<li><p>libxml2: An xml parser and generation library.</p></li>
</ul>
<p>Please see the <a class="reference internal" href="../installation/unix.html#unix"><span class="std std-ref">MapServer UNIX Compilation and Installation HowTo</span></a> for detailed instructions on compiling MapServer with support
for these libraries and features.  For Windows users, <a class="reference external" href="http://www.ms4w.com">MapServer for
Windows (MS4W)</a> comes with WCS Server support.</p>
</section>
</section>
<section id="configuring-your-mapfile-to-serve-wcs-layers">
<span id="index-1"></span><h2><a class="toc-backref" href="#table-of-contents" role="doc-backlink">Configuring Your Mapfile to Serve WCS Layers</a><a class="headerlink" href="#configuring-your-mapfile-to-serve-wcs-layers" title="Link to this heading">¶</a></h2>
<p>Much as in the WMS and WFS support, WCS publishing is enabled by
adding certain magic METADATA keyword/value pairs to a .map file.</p>
<p>MapServer will serve and include in its WCS capabilities only the
layers that meet the following conditions:</p>
<ul class="simple">
<li><p>Data source is a raster, which is processed using GDAL
(e.g GeoTIFF, Erdas Imagine, …)</p></li>
<li><p>LAYER NAME must be set</p></li>
<li><p>LAYER TYPE is set to RASTER</p></li>
<li><p>WEB metadata or LAYER metadata “wcs_enable_request” must be set</p></li>
<li><p>WEB metadata “wcs_label” must be set</p></li>
<li><p>LAYER metadata “wcs_label” must be set</p></li>
<li><p>LAYER metadata “wcs_rangeset_name” must be set</p></li>
<li><p>LAYER metadata “wcs_rangeset_label” must be set</p></li>
<li><p>LAYER is enabled to be served via WCS (see <a class="reference external" href="https://mapserver.org/development/rfc/ms-rfc-67.html">MS RFC 67</a>)</p></li>
<li><p>LAYER PROJECTION must be set, even if PROJECTION is set at the MAP
level (a bug?)</p></li>
</ul>
<section id="example-wcs-server-mapfile">
<h3>Example WCS Server Mapfile<a class="headerlink" href="#example-wcs-server-mapfile" title="Link to this heading">¶</a></h3>
<p>The following is an example of a simple WCS Server mapfile. Note the
comments for the required parameters.</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">MAP</span>
  <span class="k">NAME</span> <span class="err">WCS_server</span>
  <span class="k">STATUS</span> <span class="nb">ON</span>
  <span class="k">SIZE</span> <span class="mi">400</span> <span class="mi">300</span>
  <span class="k">SYMBOLSET</span> <span class="s">&quot;../etc/symbols.txt&quot;</span>
  <span class="k">EXTENT</span> <span class="p">-</span><span class="mi">2200000</span> <span class="p">-</span><span class="mi">712631</span> <span class="mi">3072800</span> <span class="mi">3840000</span>
  <span class="k">UNITS</span> <span class="nb">METERS</span>
  <span class="k">SHAPEPATH</span> <span class="s">&quot;../data&quot;</span>
  <span class="k">IMAGECOLOR</span> <span class="mi">255</span> <span class="mi">255</span> <span class="mi">255</span>
  <span class="k">FONTSET</span> <span class="s">&quot;../etc/fonts.txt&quot;</span>


  <span class="c">#</span>
  <span class="c"># Start of web interface definition</span>
  <span class="c">#</span>
  <span class="k">WEB</span>
    <span class="k">IMAGEPATH</span> <span class="s">&quot;/ms4w/tmp/ms_tmp/&quot;</span>
    <span class="k">IMAGEURL</span> <span class="s">&quot;/ms_tmp/&quot;</span>
    <span class="k">METADATA</span>
      <span class="s">&quot;wcs_label&quot;</span>           <span class="s">&quot;GMap WCS Demo Server&quot;</span> <span class="c">### required</span>
      <span class="s">&quot;wcs_description&quot;</span>     <span class="s">&quot;Some text description of the service&quot;</span>
      <span class="s">&quot;wcs_onlineresource&quot;</span>  <span class="s">&quot;http://127.0.0.1/cgi-bin/mapserv.exe?&quot;</span> <span class="c">### recommended</span>
      <span class="s">&quot;wcs_fees&quot;</span>            <span class="s">&quot;none&quot;</span>
      <span class="s">&quot;wcs_accessconstraints&quot;</span>    <span class="s">&quot;none&quot;</span>
      <span class="s">&quot;wcs_keywordlist&quot;</span>          <span class="s">&quot;wcs,test&quot;</span>
      <span class="s">&quot;wcs_metadatalink_type&quot;</span>    <span class="s">&quot;TC211&quot;</span>
      <span class="s">&quot;wcs_metadatalink_format&quot;</span>  <span class="s">&quot;text/plain&quot;</span>
      <span class="s">&quot;wcs_metadatalink_href&quot;</span>    <span class="s">&quot;http://someurl.com&quot;</span>
      <span class="s">&quot;wcs_address&quot;</span>              <span class="s">&quot;124 Gilmour Street&quot;</span>
      <span class="s">&quot;wcs_city&quot;</span>                 <span class="s">&quot;Ottawa&quot;</span>
      <span class="s">&quot;wcs_stateorprovince&quot;</span>      <span class="s">&quot;ON&quot;</span>
      <span class="s">&quot;wcs_postcode&quot;</span>             <span class="s">&quot;90210&quot;</span>
      <span class="s">&quot;wcs_country&quot;</span>              <span class="s">&quot;Canada&quot;</span>
      <span class="s">&quot;wcs_contactelectronicmailaddress&quot;</span> <span class="s">&quot;blah@blah&quot;</span>
      <span class="s">&quot;wcs_contactperson&quot;</span>            <span class="s">&quot;me&quot;</span>
      <span class="s">&quot;wcs_contactorganization&quot;</span>      <span class="s">&quot;unemployed&quot;</span>
      <span class="s">&quot;wcs_contactposition&quot;</span>          <span class="s">&quot;manager&quot;</span>
      <span class="s">&quot;wcs_contactvoicetelephone&quot;</span>    <span class="s">&quot;613-555-1234&quot;</span>
      <span class="s">&quot;wcs_contactfacimiletelephone&quot;</span> <span class="s">&quot;613-555-1235&quot;</span>
      <span class="s">&quot;wcs_service_onlineresource&quot;</span>   <span class="s">&quot;http://127.0.0.1/cgi-bin/mapserv.exe?&quot;</span>
      <span class="s">&quot;wcs_enable_request&quot;</span>           <span class="s">&quot;*&quot;</span>
    <span class="k">END</span>
  <span class="k">END</span>

  <span class="k">PROJECTION</span>
    <span class="s">&quot;init=epsg:3978&quot;</span>
  <span class="k">END</span>


  <span class="k">LAYER</span>
    <span class="k">NAME</span> <span class="err">bathymetry</span>
    <span class="k">METADATA</span>
      <span class="s">&quot;wcs_label&quot;</span>           <span class="s">&quot;Elevation/Bathymetry&quot;</span>  <span class="c">### required</span>
      <span class="s">&quot;wcs_rangeset_name&quot;</span>   <span class="s">&quot;Range 1&quot;</span>  <span class="c">### required to support DescribeCoverage request</span>
      <span class="s">&quot;wcs_rangeset_label&quot;</span>  <span class="s">&quot;My Label&quot;</span> <span class="c">### required to support DescribeCoverage request</span>
    <span class="k">END</span>
    <span class="k">TYPE</span> <span class="nb">RASTER</span> <span class="c">### required</span>
    <span class="k">STATUS</span> <span class="nb">ON</span>
    <span class="k">DATA</span> <span class="err">bath_mapserver</span><span class="p">.</span><span class="err">tif</span>
    <span class="k">PROJECTION</span>
      <span class="s">&quot;init=epsg:3978&quot;</span>
    <span class="k">END</span>
  <span class="k">END</span>
<span class="k">END</span> <span class="c"># Map File</span>
</pre></div>
</div>
</section>
<section id="output-formats">
<span id="index-2"></span><h3>Output Formats<a class="headerlink" href="#output-formats" title="Link to this heading">¶</a></h3>
<p>The raster formats supported by MapServer WCS are determined by the
wcs_formats metadata item on the LAYER.  This should contain a space
separated list of OUTPUTFORMAT driver names separated by spaces.  If
absent, all raster OUTPUTFORMATs are allowed.</p>
<p>WCS is a “raw data” oriented format.  So it often most suitable to use
it with format using the BYTE, INT16 and FLOAT32 IMAGEMODEs with GDAL
related output formats rather than the built in “rendering oriented”
output formats.  By default the only GDAL format driver defined is the
GTiff driver.  The following are example output format declarations
utilizing the raw image modes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OUTPUTFORMAT</span>
  <span class="n">NAME</span> <span class="n">GEOTIFF_16</span>
  <span class="n">DRIVER</span> <span class="s2">&quot;GDAL/GTiff&quot;</span>
  <span class="n">MIMETYPE</span> <span class="s2">&quot;image/tiff&quot;</span>
  <span class="n">IMAGEMODE</span> <span class="n">FLOAT32</span>
  <span class="n">EXTENSION</span> <span class="s2">&quot;tif&quot;</span>
<span class="n">END</span>

<span class="n">OUTPUTFORMAT</span>
  <span class="n">NAME</span> <span class="n">AAIGRID</span>
  <span class="n">DRIVER</span> <span class="s2">&quot;GDAL/AAIGRID&quot;</span>
  <span class="n">MIMETYPE</span> <span class="s2">&quot;image/x-aaigrid&quot;</span>
  <span class="n">IMAGEMODE</span> <span class="n">INT16</span>
  <span class="n">EXTENSION</span> <span class="s2">&quot;grd&quot;</span>
  <span class="n">FORMATOPTION</span> <span class="s2">&quot;FILENAME=result.grd&quot;</span>
<span class="n">END</span>
</pre></div>
</div>
<p>The FORMATOPTION FILENAME defines the preferred name of the result
file when returned WCS GetCoverage results.</p>
</section>
</section>
<section id="test-your-wcs-1-0-server">
<h2><a class="toc-backref" href="#table-of-contents" role="doc-backlink">Test Your WCS 1.0 Server</a><a class="headerlink" href="#test-your-wcs-1-0-server" title="Link to this heading">¶</a></h2>
<section id="validate-the-capabilities-metadata">
<h3>Validate the Capabilities Metadata<a class="headerlink" href="#validate-the-capabilities-metadata" title="Link to this heading">¶</a></h3>
<p>OK, now that we’ve got a mapfile, we have to check the XML
capabilities returned by our server to make sure nothing is missing.</p>
<p>Using a web browser, access your server’s online resource URL to which
you add the parameters
“SERVICE=WCS&amp;VERSION=1.0.0&amp;REQUEST=GetCapabilities” to the end, e.g.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>http://my.host.com/cgi-bin/mapserv?map=mywcs.map&amp;SERVICE=WCS
  &amp;VERSION=1.0.0&amp;REQUEST=GetCapabilities
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is strongly recommended to review the security steps for the <em>MAP=</em>
call to the MapServer executable, by setting <em>MS_MAP_PATTERN</em> or
<em>MS_MAP_NO_PATH</em> or hiding the <em>MAP=</em> parameter on public servers,
as recommended in the document <a class="reference internal" href="../optimization/limit_mapfile_access.html#limit-mapfile-access"><span class="std std-ref">Limit Mapfile Access</span></a>.  All possible
environment variables to secure your server are listed in <a class="reference internal" href="../optimization/environment_variables.html#environment-variables"><span class="std std-ref">Environment Variables</span></a>.</p>
</div>
<p>If you get an error message in the XML output then take necessary
actions. Common problems and solutions are listed in the FAQ at the
end of this document.</p>
<p>If everything went well, you should have a complete XML capabilities
document.  Search it for the word “WARNING”… MapServer inserts XML
comments starting with “&lt;!–WARNING: “ in the XML output if it detects
missing mapfile parameters or metadata items.</p>
<p>Note that when a request happens, it is passed through WMS, WFS, and
WCS in MapServer (in that order) until one of the services respond to
it.</p>
<p>Here is a working example of a GetCapabilities request:</p>
<p><a class="reference external" href="https://demo.mapserver.org/cgi-bin/wcs?SERVICE=WCS&amp;VERSION=1.0.0&amp;REQUEST=GetCapabilities">WCS GetCapabilities live example</a></p>
</section>
<section id="test-with-a-describecoverage-request">
<h3>Test With a DescribeCoverage Request<a class="headerlink" href="#test-with-a-describecoverage-request" title="Link to this heading">¶</a></h3>
<p>OK, now that we know that our server can produce a valid XML
GetCapabilities response we should test the DescribeCoverage request.
The DescribeCoverage request lists more information about specific
coverage offerings.</p>
<p>Using a web browser, access your server’s online resource URL to which
you add the parameters
“SERVICE=WCS&amp;VERSION=1.0.0&amp;REQUEST=DescribeCoverage&amp;COVERAGE=layername”
to the end, e.g.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>http://my.host.com/cgi-bin/mapserv?map=mywcs.map&amp;SERVICE=WCS
  &amp;VERSION=1.0.0&amp;REQUEST=DescribeCoverage&amp;COVERAGE=bathymetry
</pre></div>
</div>
<p>Here is a working example of a DescribeCoverage request:</p>
<p><a class="reference external" href="https://demo.mapserver.org/cgi-bin/wcs?SERVICE=WCS&amp;VERSION=1.0.0&amp;REQUEST=DescribeCoverage&amp;COVERAGE=modis">WCS DescribeCoverage live example</a></p>
</section>
<section id="test-with-a-getcoverage-request">
<h3>Test With a GetCoverage Request<a class="headerlink" href="#test-with-a-getcoverage-request" title="Link to this heading">¶</a></h3>
<p>The GetCoverage request allows for the retrieval of coverages in a
specified output format to the client.</p>
<p>The following is a list of the required GetCoverage parameters
according to the WCS spec:</p>
<blockquote>
<div><p><strong>VERSION=version:</strong> Request version</p>
<p><strong>REQUEST=GetCoverage:</strong> Request name</p>
<p><strong>COVERAGE=coverage_name:</strong> Name of an available coverage, as
stated in the GetCapabilities</p>
<p><strong>CRS=epsg_code:</strong> Coordinate Reference System in which the request
is expressed.</p>
<p><strong>BBOX=minx,miny,maxx,maxy:</strong> Bounding box corners (lower left,
upper right) in CRS units.  One of BBOX or TIME is required.</p>
<p><strong>TIME=time1,time2:</strong> Request a subset corresponding to a time. One
of BBOX or TIME is required..</p>
<p><strong>WIDTH=output_width:</strong> Width in pixels of map picture.  One of
WIDTH/HEIGHT or RESX/Y is required.</p>
<p><strong>HEIGHT=output_height:</strong> Height in pixels of map picture.  One of
WIDTH/HEIGHT or RESX/Y is required.</p>
<p><strong>RESX=x:</strong> When requesting a georectified grid coverage, this
requests a subset with a specific spatial resolution.  One of
WIDTH/HEIGHT or RESX/Y is required.</p>
<p><strong>RESY=y:</strong> When requesting a georectified grid coverage, this
requests a subset with a specific spatial resolution.  One of
WIDTH/HEIGHT or RESX/Y is required.</p>
<p><strong>FORMAT=output_format:</strong> Output format of map, as stated in the
DescribeCoverage response.</p>
</div></blockquote>
<p>The following are optional GetCoverage parameters according to the WCS
spec:</p>
<blockquote>
<div><p><strong>RESPONSE_CRS=epsg_code:</strong> Coordinate Reference System in which to
express coverage responses.</p>
</div></blockquote>
<p>So to follow our above examples, a valid DescribeCoverage request
would look like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>http://my.host.com/cgi-bin/mapserv?map=mywcs.map&amp;SERVICE=WCS
  &amp;VERSION=1.0.0&amp;REQUEST=GetCoverage&amp;coverage=bathymetry
  &amp;CRS=EPSG:3978&amp;BBOX=-2200000,-712631,3072800,3840000&amp;WIDTH=3199
  &amp;HEIGHT=2833&amp;FORMAT=GTiff
</pre></div>
</div>
<p>Here is a working example of a GetCoverage request (note that a 350KB
tif is being requested, so this may take a second):</p>
<p><a class="reference external" href="https://demo.mapserver.org/cgi-bin/wcs?SERVICE=WCS&amp;VERSION=1.0.0&amp;REQUEST=GetCoverage&amp;COVERAGE=modis-001&amp;CRS=EPSG:26915&amp;BBOX=159707,4597395,1400707,5501395&amp;WIDTH=400&amp;HEIGHT=300&amp;FORMAT=GEOTIFF_RGB">WCS GetCoverage live example</a></p>
</section>
</section>
<section id="wcs-1-1-0-issues">
<span id="index-3"></span><h2><a class="toc-backref" href="#table-of-contents" role="doc-backlink">WCS 1.1.0+ Issues</a><a class="headerlink" href="#wcs-1-1-0-issues" title="Link to this heading">¶</a></h2>
<p>WCS 1.1.0 and later versions of the WCS protocol are supported by
MapServer 5.2.  For the most part the map file setup for WCS 1.1.0 is
similar to WCS 1.0.0, but the actual protocol is substantially
changed.</p>
<section id="getcapabilities">
<h3>GetCapabilities<a class="headerlink" href="#getcapabilities" title="Link to this heading">¶</a></h3>
<p>The GetCapabilities request is the same as WCS 1.0 but with a
different VERSION value:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SERVICE</span><span class="o">=</span><span class="n">WCS</span><span class="o">&amp;</span><span class="n">VERSION</span><span class="o">=</span><span class="mf">1.1.0</span><span class="o">&amp;</span><span class="n">REQUEST</span><span class="o">=</span><span class="n">GetCapabilities</span>
</pre></div>
</div>
<p>The format of the returned capabilities document is substantially
altered from WCS 1.0, and makes use of OWS Common for service
descriptions.</p>
</section>
<section id="describecoverage">
<h3>DescribeCoverage<a class="headerlink" href="#describecoverage" title="Link to this heading">¶</a></h3>
<p>The DescribeCoverage request is similar to WCS 1.0, but the IDENTIFIERS
keyword is used instead of COVERAGE to name the coverage(s) being
requested:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SERVICE</span><span class="o">=</span><span class="n">WCS</span><span class="o">&amp;</span><span class="n">VERSION</span><span class="o">=</span><span class="mf">1.1.0</span><span class="o">&amp;</span><span class="n">REQUEST</span><span class="o">=</span><span class="n">DescribeCoverage</span><span class="o">&amp;</span><span class="n">IDENTIFIERS</span><span class="o">=</span><span class="n">spaceimaging</span>
</pre></div>
</div>
</section>
<section id="getcoverage">
<h3>GetCoverage<a class="headerlink" href="#getcoverage" title="Link to this heading">¶</a></h3>
<p>The format for GetCoverage is substantially changed from 1.0.  The
following is a list of GetCoverage required parameters:</p>
<blockquote>
<div><p><strong>VERSION=version:</strong> Request version</p>
<p><strong>REQUEST=GetCoverage:</strong> Request name</p>
<p><strong>IDENTIFIER=coverage_name:</strong> Name of an available coverage, as
stated in the GetCapabilities</p>
<p><strong>BOUNDINGBOX=minx,miny,maxx,maxy,crs:</strong> Bounding box corners
(lower left, upper right), and the CRS they are in.  The CRS is
described using a URN.</p>
<p><strong>FORMAT=output_format:</strong> Output format (mime type) of grid
product, as stated in the GetCapabilities.</p>
</div></blockquote>
<p>If an alternate spatial resolution is desired, then the following set
of keywords must be used to specify the sample origin and step size of
the output grid to be produced.  The produced grid will be of a number
of pixels and lines as can be fit in the BOUNDINGBOX starting at
GridOrigin, at GridOffsets resolution.</p>
<blockquote>
<div><p><strong>GRIDBASECRS=crs:</strong> The grid base CRS (URN).</p>
<p><strong>GRIDCS=crs:</strong> The grid CRS (URN).</p>
<p><strong>GridType=urn:ogc:def:method:WCS:1.1:2dGridIn2dCrs:</strong> This is the
only supported value for MapServer.</p>
<p><strong>GridOrigin=x_origin,y_origin:</strong> The sample point for the top left
pixel.</p>
<p><strong>GridOffsets=xstep,ystep:</strong> The x and y step size for grid
sampling (resolution). Both are positive.</p>
</div></blockquote>
<p>As well, the following optional parameters are available.</p>
<blockquote>
<div><p><strong>RangeSubset=selection:</strong> Selects a range subset, and
interpolation method.  Currently only subsetting on bands are
allowed.  Depending on rangeset names, this might take the form
“BandsName[bands[1]]” to select band 1, or
“BandsName:bilinear[bands[1]]” to select band 1 with bilinear
interpolation.</p>
</div></blockquote>
<p>So a simple GetCoverage might look like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SERVICE</span><span class="o">=</span><span class="n">WCS</span><span class="o">&amp;</span><span class="n">VERSION</span><span class="o">=</span><span class="mf">1.1.0</span><span class="o">&amp;</span><span class="n">REQUEST</span><span class="o">=</span><span class="n">GetCoverage</span><span class="o">&amp;</span><span class="n">IDENTIFIER</span><span class="o">=</span><span class="n">dem</span><span class="o">&amp;</span><span class="n">FORMAT</span><span class="o">=</span><span class="n">image</span><span class="o">/</span><span class="n">tiff</span>
  <span class="o">&amp;</span><span class="n">BOUNDINGBOX</span><span class="o">=</span><span class="mi">43</span><span class="p">,</span><span class="mi">33</span><span class="p">,</span><span class="mi">44</span><span class="p">,</span><span class="mi">34</span><span class="p">,</span><span class="n">urn</span><span class="p">:</span><span class="n">ogc</span><span class="p">:</span><span class="n">def</span><span class="p">:</span><span class="n">crs</span><span class="p">:</span><span class="n">EPSG</span><span class="p">::</span><span class="mi">4326</span>
</pre></div>
</div>
<p>A more complex request might look like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SERVICE</span><span class="o">=</span><span class="n">WCS</span><span class="o">&amp;</span><span class="n">VERSION</span><span class="o">=</span><span class="mf">1.1.0</span><span class="o">&amp;</span><span class="n">REQUEST</span><span class="o">=</span><span class="n">GetCoverage</span><span class="o">&amp;</span><span class="n">IDENTIFIER</span><span class="o">=</span><span class="n">dem</span><span class="o">&amp;</span><span class="n">FORMAT</span><span class="o">=</span><span class="n">image</span><span class="o">/</span><span class="n">tiff</span>
  <span class="o">&amp;</span><span class="n">BOUNDINGBOX</span><span class="o">=</span><span class="mi">33</span><span class="p">,</span><span class="mi">43</span><span class="p">,</span><span class="mi">34</span><span class="p">,</span><span class="mi">44</span><span class="p">,</span><span class="n">urn</span><span class="p">:</span><span class="n">ogc</span><span class="p">:</span><span class="n">def</span><span class="p">:</span><span class="n">crs</span><span class="p">:</span><span class="n">EPSG</span><span class="p">::</span><span class="mi">4326</span>
  <span class="o">&amp;</span><span class="n">GridBaseCRS</span><span class="o">=</span><span class="n">urn</span><span class="p">:</span><span class="n">ogc</span><span class="p">:</span><span class="n">def</span><span class="p">:</span><span class="n">crs</span><span class="p">:</span><span class="n">EPSG</span><span class="p">::</span><span class="mi">4326</span><span class="o">&amp;</span><span class="n">GridCS</span><span class="o">=</span><span class="n">urn</span><span class="p">:</span><span class="n">ogc</span><span class="p">:</span><span class="n">def</span><span class="p">:</span><span class="n">crs</span><span class="p">:</span><span class="n">EPSG</span><span class="p">::</span><span class="mi">4326</span>
  <span class="o">&amp;</span><span class="n">GridType</span><span class="o">=</span><span class="n">urn</span><span class="p">:</span><span class="n">ogc</span><span class="p">:</span><span class="n">def</span><span class="p">:</span><span class="n">method</span><span class="p">:</span><span class="n">WCS</span><span class="p">:</span><span class="mf">1.1</span><span class="p">:</span><span class="mi">2</span><span class="n">dGridIn2dCrs</span>
  <span class="o">&amp;</span><span class="n">GridOrigin</span><span class="o">=</span><span class="mi">33</span><span class="p">,</span><span class="mi">44</span><span class="o">&amp;</span><span class="n">GridOffsets</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span><span class="mf">0.01</span>
  <span class="o">&amp;</span><span class="n">RangeSubset</span><span class="o">=</span><span class="n">BandsName</span><span class="p">:</span><span class="n">bilinear</span><span class="p">[</span><span class="n">bands</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
</pre></div>
</div>
<p>It should also be noted that return results from WCS 1.1 GetCoverage
requests are in multi-part mime format.  Typically this consists of a
first part with an xml document referencing the other parts of the
message, and an image file part.  However, for output formats that
return multiple files, each will be a separate part.  For instance,
this means it is possible to return a jpeg file with a world file, the
OUTPUTFORMAT is appropriately configured.</p>
</section>
<section id="urns">
<h3>URNs<a class="headerlink" href="#urns" title="Link to this heading">¶</a></h3>
<p>In WCS 1.1 protocol coordinate systems are referenced by URN.  Some
typical URNs are:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">urn</span><span class="p">:</span><span class="n">ogc</span><span class="p">:</span><span class="n">def</span><span class="p">:</span><span class="n">crs</span><span class="p">:</span><span class="n">EPSG</span><span class="p">::</span><span class="mi">4326</span>
<span class="n">urn</span><span class="p">:</span><span class="n">ogc</span><span class="p">:</span><span class="n">def</span><span class="p">:</span><span class="n">crs</span><span class="p">:</span><span class="n">EPSG</span><span class="p">:</span><span class="mi">27700</span>
<span class="n">urn</span><span class="p">:</span><span class="n">ogc</span><span class="p">:</span><span class="n">def</span><span class="p">:</span><span class="n">crs</span><span class="p">:</span><span class="n">OGC</span><span class="p">::</span><span class="n">CRS84</span>
</pre></div>
</div>
<p>The first two are roughly equivalent to EPSG:4326, and EPSG:27700
while the third is a CRS defined by OGC (essentially WGS84).  One
critical thing to note is that WCS 1.1 follows EPSG defined axis/tuple
ordering for geographic coordinate systems.  This means that
coordinates reported, or provided in urn:ogc:def:EPSG::4326 (WGS84)
are actually handled as lat, long, not long,lat.  So, for instance the
BOUNDINGBOX for an area in California might look like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">BOUNDINGBOX</span><span class="o">=</span><span class="mi">34</span><span class="p">,</span><span class="o">-</span><span class="mi">117</span><span class="p">,</span><span class="mi">35</span><span class="p">,</span><span class="o">-</span><span class="mi">116</span><span class="p">,</span><span class="n">urn</span><span class="p">:</span><span class="n">ogc</span><span class="p">:</span><span class="n">def</span><span class="p">:</span><span class="n">crs</span><span class="p">:</span><span class="n">EPSG</span><span class="p">::</span><span class="mi">4326</span>
</pre></div>
</div>
<p>And, likewise the bounds reported by GetCapabilities, and
DescribeCoverage will be in this ordering as appropriate.</p>
</section>
</section>
<section id="wcs-2-0">
<span id="index-4"></span><h2><a class="toc-backref" href="#table-of-contents" role="doc-backlink">WCS 2.0</a><a class="headerlink" href="#wcs-2-0" title="Link to this heading">¶</a></h2>
<section id="overview">
<h3>Overview<a class="headerlink" href="#overview" title="Link to this heading">¶</a></h3>
<p>Version 6.0 introduces support for the new version 2.0 of the WCS
specification. This section documents the usage of the new WCS
version.</p>
<section id="web-coverage-service-wcs-2-0-interface-standard">
<h4>Web Coverage Service (WCS) 2.0 Interface Standard<a class="headerlink" href="#web-coverage-service-wcs-2-0-interface-standard" title="Link to this heading">¶</a></h4>
<p>This specification adopts the new OGC Core and Extension model and at
the moment the following documents are available from the <a class="reference external" href="https://www.ogc.org/standards/wcs">OGC’c WCS
Standard page</a>:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://portal.ogc.org/files/?artifact_id=48553">GML 3.2.1 Application Schema Coverages</a></p></li>
<li><p><a class="reference external" href="https://portal.ogc.org/files/?artifact_id=48428">WCS 2.0 Specification - Core</a></p></li>
<li><p><a class="reference external" href="https://portal.ogc.org/files/?artifact_id=41439">WCS 2.0 Specification - KVP Protocol Binding Extension</a></p></li>
<li><p><a class="reference external" href="https://portal.ogc.org/files/?artifact_id=41440">WCS 2.0 Specification - XML/POST Protocol Binding Extension</a></p></li>
<li><p><a class="reference external" href="https://portal.ogc.org/files/?artifact_id=54502">WCS 2.0 Specification - Interpolation Extension</a></p></li>
<li><p><a class="reference external" href="https://portal.ogc.org/files/?artifact_id=54503">WCS 2.0 Specification - Range Subsetting Extension</a></p></li>
<li><p><a class="reference external" href="https://portal.ogc.org/files/?artifact_id=54813">WCS 2.0 Specification - GeoTIFF Coverage Encoding Profile</a></p></li>
<li><p><a class="reference external" href="https://portal.ogc.org/files/?artifact_id=54209">WCS 2.0 Specification - CRS Extension</a></p></li>
<li><p><a class="reference external" href="https://portal.ogc.org/files/?artifact_id=54504">WCS 2.0 Specification - Scaling Extension</a></p></li>
</ul>
<p>Technical changes from WCS version 1.1.2 include entirely building on
the <a class="reference external" href="https://portal.ogc.org/files/?artifact_id=48553">GML 3.2.1 Application Schema Coverages</a> and adoption of <a class="reference external" href="https://portal.ogc.org/files/?artifact_id=38867">OWS
Common 2.0</a>. Another major change is the introduction of trim and
slice concepts which is explained in more detail below.</p>
<p>There are <a class="reference external" href="http://schemas.opengis.net/wcs/2.0/">WCS 2.0 Schemas</a> defined against which all requests and
responses should validate.</p>
</section>
<section id="wcs-2-0-kvp-request-parameters">
<h4>WCS 2.0 KVP request parameters<a class="headerlink" href="#wcs-2-0-kvp-request-parameters" title="Link to this heading">¶</a></h4>
<p>The following KVP request parameters are available in WCS 2.0:</p>
<blockquote>
<div><p><strong>COVERAGEID=id</strong>: This parameter is technically the same as the
<strong>COVERAGE</strong> parameter for WCS 1.0 or the <strong>IDENTIFIER</strong> parameter
<strong>for WCS 1.1</strong>. In DescribeCoverage requests, multiple IDs can be
requested by concatenating them with commas.</p>
<p><strong>SUBSET=axis[,crs](low,high):</strong> This parameter subsets the
coverage on the given axis. This parameter can be given multiple
times, but only once for each axis. The optional sub-parameter <strong>crs</strong> can
either be an EPSG definition (like EPSG:4326), an URN or an URI or
‘imageCRS’ (which is the default). All <strong>crs</strong> sub-parameters from all
<strong>SUBSET</strong> parameters must be equal. (e.g: you cannot subset one
axis in imageCRS and another in EPSG:4326).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The syntax of the <strong>crs</strong> sub-parameter is non-standard and deprecated.
Please use the <em>SUBSETTINGCRS</em> parameter instead.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Recognized values for the axis sub-parameter are: “x”, “xaxis”,
“x-axis”, “x_axis”, “long”, “long_axis”, “long-axis”, “lon”,
“lon_axis”, “lon-axis”, “y”, “yaxis”, “y-axis”, “y_axis”, “lat”,
“lat_axis” and “lat-axis”.</p>
</div>
<p><strong>SUBSETTINGCRS=crs:</strong> This parameter defines the crs subsetting all
<em>SUBSETs</em> are expressed in, and also the output CRS if no <em>OUTPUTCRS</em> is
specified. By default all subsets are interpreted to be relative to
the coverages CRS.</p>
<p><strong>OUTPUTCRS=crs:</strong> This parameter defines in which crs the output
image should be expressed in.</p>
<p><strong>MEDIATYPE=mediatype:</strong> This parameter is relevant to GetCoverage
requests, when multipart XML/image output is desired. It should be
set to ‘multipart/related’ (which is currently the only possible
value for this parameter).</p>
<p><strong>SCALEFACTOR=factor:</strong> With this parameter (a positive float) the size of
the output image can be adjusted. All axes are scaled equally.</p>
<p><strong>SCALEAXES=axis(value)[,axis(value)]:</strong> With this parameter, an axis
specific scaling can be applied. Any axis not mentioned</p>
<p><strong>SCALESIZE=axis(size)[,axis(size)]:</strong> This is similar to the <em>SCALEAXES</em>
parameter, but allows an axis specific setting of the absolute pixel size
of the returned coverage.</p>
<p><strong>SCALEEXTENT=axis(min:max)[,axis(min:max)]:</strong> This parameter is treated
like a <em>SCALESIZE</em> parameter with “axis(max-min)”.</p>
<p><strong>INTERPOLATION=interpolation_method:</strong> This defines the
interpolation method used, for rescaled images. Possible values
are “NEAREST”, “BILINEAR” and “AVERAGE”.</p>
<p><strong>RANGESUBSET=band1[,band2[,…]]:</strong> With this parameter, a
selection of bands can be made. Also the bands can be
reordered.  The bands can be referred to either by name (which can
be retrieved using the DescribeCoverage request) or by index
(starting with ‘1’ for the first band). Also a range of bands can be given:
<em>bandX:bandY</em>. This also includes the lower and upper bounds. As the name
implies, the lower bound must reference the band with the lower index. You
can mix direct references to the bands with intervals. E.g:
<em>RANGESUBSET=band1,band3:band:5,band7</em></p>
</div></blockquote>
<p>The following parameters are part of the
<a class="reference external" href="https://portal.ogc.org/files/?artifact_id=54813">WCS 2.0 Specification - GeoTIFF Coverage Encoding Profile</a> and are only
available for the GeoTIFF outputformat:</p>
<blockquote>
<div><p><strong>GEOTIFF:COMPRESSION=compression:</strong> The compression method used for the
returned image. Valid options are: None, PackBits, Deflate, Huffman, LZW
and JPEG.</p>
<p><strong>GEOTIFF:JPEG_QUALITY=1-100:</strong> When the compression method JPEG is chosen,
this value defines the quality of the algorithm.</p>
<p><strong>GEOTIFF:PREDICTOR=None|Horizontal|FloatingPoint:</strong> The predictor value
for the LZW and Deflate compression methods.</p>
<p><strong>GEOTIFF:INTERLEAVE=Band|Pixel:</strong> Defines whether the image shall be band
or pixel interleaved.</p>
<p><strong>GEOTIFF:TILING=true|false:</strong> Defines if the output image shall be
internally tiled.</p>
<p><strong>GEOTIFF:TILEWIDTH=tilewidth</strong>, <strong>GEOTIFF:TILEHEIGHT=tileheight</strong>: Define
the size of the internal tiles. Must be positive integer divisible by 16.</p>
</div></blockquote>
<p>The following request parameters are not part of the WCS 2.0 Core or any
extension thereof, and are kept for backward compatibility. They originate from
a time where the most vital standard extensions were not specified and the WCS
core was not quite useful without. They are deprecated.</p>
<blockquote>
<div><p><strong>SIZE=axis(value):</strong> This parameter sets the size of the desired
axis to the desired value (pixels).</p>
<p><strong>RESOLUTION=axis(value):</strong> This parameter sets the resolution of
the desired axis to the desired value (pixels/unit).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <strong>SIZE</strong> and <strong>RESOLUTION</strong> are mutually exclusive on one
axis, but can be mixed on different axes (e.g: SIZE on x-axis
and RESOLUTION on y-axis). Also axis names in <strong>SUBSET</strong>,
<strong>SIZE</strong> and <strong>RESOLUTION</strong> parameters cannot be mixed. E.g:
…&amp;SUBSET=x(0,100)&amp;SIZE=lon(200)&amp;… is not legal although the
axis names logically refer to the same axis.</p>
</div>
</div></blockquote>
<section id="unchanged-kvp-parameters">
<h5>Unchanged KVP parameters<a class="headerlink" href="#unchanged-kvp-parameters" title="Link to this heading">¶</a></h5>
<p>The following parameters have not (or just slightly) changed since the
last version of the WCS standard.</p>
<blockquote>
<div><dl class="simple">
<dt><strong>VERSION=version:</strong> For WCS 2.0, this should be set to ‘2.0.1’. This</dt><dd><p>parameter is deprecated for GetCapabilities related to OGC Web Services
Common Standard 2.0.0.</p>
</dd>
</dl>
<p><strong>SERVICE=service</strong></p>
<p><strong>REQUEST=request</strong></p>
<p><strong>ACCEPTVERSIONS=versions</strong></p>
<p><strong>SECTIONS=sections</strong></p>
<p><strong>UPDATESEQUENCE=updatesequence</strong></p>
<p><strong>ACCEPTFORMATS=formats:</strong> This parameter is currently ignored.</p>
<p><strong>ACCEPTLANGUAGES=languages:</strong> This is used for language negotiation for
multi-lingual services</p>
<p><strong>FORMAT=format:</strong> The desired format can now also be set with the
name of the outputformat object defined in the mapfile. In
contrast to previous versions of WCS this parameter is optional
when the native format is either specified or can be determined
via GDAL.</p>
<p><strong>MAP=mapfile</strong></p>
</div></blockquote>
</section>
<section id="kvp-request-examples">
<h5>KVP request examples<a class="headerlink" href="#kvp-request-examples" title="Link to this heading">¶</a></h5>
<p>The below sample request outline the new KVP request syntax:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># GetCapabilities
http://www.yourserver.com/wcs?SERVICE=WCS&amp;ACCEPTVERSIONS=1.0.0,2.0.1
  &amp;REQUEST=GetCapabilities
http://www.yourserver.com/wcs?SERVICE=WCS&amp;REQUEST=GetCapabilities
# DescribeCoverage 2.0
http://www.yourserver.com/wcs?SERVICE=WCS&amp;VERSION=2.0.1
  &amp;REQUEST=DescribeCoverage&amp;COVERAGEID=grey
# GetCoverage 2.0 image/tiff full
http://www.yourserver.com/wcs?SERVICE=WCS&amp;VERSION=2.0.1
  &amp;REQUEST=GetCoverage&amp;COVERAGEID=grey&amp;FORMAT=image/tiff
# GetCoverage 2.0 multipart/related (GML header &amp; image/tiff) full
http://www.yourserver.com/wcs?SERVICE=WCS&amp;VERSION=2.0.1
  &amp;REQUEST=GetCoverage&amp;COVERAGEID=grey&amp;FORMAT=image/tiff
  &amp;MEDIATYPE=multipart/related
# GetCoverage 2.0 image/tiff trim x y both in imageCRS
http://www.yourserver.com/wcs?SERVICE=WCS&amp;VERSION=2.0.1
  &amp;REQUEST=GetCoverage&amp;COVERAGEID=grey&amp;FORMAT=image/tiff
  &amp;SUBSET=x(10,200)&amp;SUBSET=y(10,200)
  &amp;SUBSETTINGCRS=imageCRS
# GetCoverage 2.0 reproject to EPSG 4326
http://www.yourserver.com/wcs?SERVICE=WCS&amp;VERSION=2.0.1
  &amp;REQUEST=GetCoverage&amp;COVERAGEID=grey&amp;FORMAT=image/tiff
  &amp;SUBSET=x(-121.488744,-121.485169)
  &amp;SUBSETTINGCRS=http://www.opengis.net/def/crs/EPSG/0/4326
</pre></div>
</div>
<p>Please refer to the <a class="reference external" href="https://github.com/MapServer/MapServer/blob/main/msautotest/wxs/wcs_simple.map">WCS 2.0 tests in msautotest</a> for further sample
requests.</p>
</section>
</section>
</section>
<section id="changes-to-previous-versions">
<h3>Changes to previous versions<a class="headerlink" href="#changes-to-previous-versions" title="Link to this heading">¶</a></h3>
<p>The layer name must be a valid NCName, i.e: must not start with a
number and can only contain alphanumerical characters. This constraint
derives of the gml:id property which has to be a NCName, that relates
to the coverage ID which is itself taken from the layers name.</p>
</section>
<section id="specifying-coverage-specific-metadata">
<h3>Specifying coverage specific metadata<a class="headerlink" href="#specifying-coverage-specific-metadata" title="Link to this heading">¶</a></h3>
<p>For WCS enabled layers in MapServer, there are different possibilities
for declaring coverage metadata for WCS 2.0.  In the simplest case,
all of the required metadata can be retrieved from the source image.</p>
<p>For some reason this may not be desirable, maybe because the source
image does not provide these metadata.  Not every input image format
has geospatial metadata attached.  In this case, the layer metadata
can be used to provide this information.</p>
<p>The convention is that once (wcs|ows)_extent and one of (wcs|ows)_size
and (wcs|ows)_resolution is set in the layer metadata, all the
coverage specific metadata will be retrieved from there.  Otherwise
the source image is queried via GDAL, if possible.</p>
<p>The relevant layer metadata fields are (wcs|ows)_bandcount, (wcs|ows)_imagemode,
(wcs|ows)_native_format, and all <a class="reference internal" href="#new-band-related-metadata-entries">New band related metadata entries</a>.</p>
</section>
<section id="new-band-related-metadata-entries">
<h3>New band related metadata entries<a class="headerlink" href="#new-band-related-metadata-entries" title="Link to this heading">¶</a></h3>
<p>In this section new WCS 2.0 specific layer metadata entries are
discussed.</p>
<p>The following layer metadata fields can be used to return a more
detailed description for the range type of a “virtual dataset”
coverage.  A coverage is considered as a “virtual dataset” if the
(wcs|ows)_extent metadata entry and one of the (wcs|ows)_size or
(wcs|ows)_resolution metadata entries are set.</p>
<p>First of all, the used version of metadata has to be identified. To
identify the bands of a coverage, the following field must be
present:</p>
<blockquote>
<div><ul class="simple">
<li><p>(wcs|ows)_band_names</p></li>
</ul>
</div></blockquote>
<p>The type of these fields is a space delimited list of names, whereas
the count of the names has to match the “bandcount” metadata
field. These names are then used as a prefix for other metadata fields
only concerning this band. The possible metadata keys are the
following:</p>
<blockquote>
<div><ul class="simple">
<li><p>{band_name}_band_interpretation</p></li>
<li><p>{band_name}_band_uom</p></li>
<li><p>{band_name}_band_definition</p></li>
<li><p>{band_name}_band_description</p></li>
<li><p>{band_name}_interval</p></li>
</ul>
</div></blockquote>
<p>All values are interpreted as strings, only “interval” is interpreted
as 2 double precision float values separated with a space.</p>
<p>Also default values can be configured for every key. These have the
same suffix as the band specific keys but start with (wcs|ows) instead
of the bands name:</p>
<blockquote>
<div><ul class="simple">
<li><p>(wcs|ows)_band_interpretation</p></li>
<li><p>(wcs|ows)_band_uom</p></li>
<li><p>(wcs|ows)_band_definition</p></li>
<li><p>(wcs|ows)_band_description</p></li>
<li><p>(wcs|ows)_interval</p></li>
</ul>
</div></blockquote>
<p>If no specific or default value is given, the output is dependent on
the metadata key. The UOM, for example will be set to ‘W.m-2.Sr-1’,
interval and significant figures will be determined according to the
image type and definition, description, and interpretation will not be
visible in the output at all.</p>
<p>This example demonstrates the use of the band-specific metadata fields
with their default values:</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">METADATA</span>
  <span class="s">&quot;ows_srs&quot;</span> <span class="s">&quot;EPSG:4326&quot;</span>
  <span class="s">&quot;wcs_extent&quot;</span> <span class="s">&quot;47.5070762077246 16.038578977182 49.0103258976982 17.2500586851354&quot;</span>

  <span class="s">&quot;wcs_size&quot;</span> <span class="s">&quot;1200 1100&quot;</span>
  <span class="s">&quot;wcs_imagemode&quot;</span> <span class="s">&quot;BYTE&quot;</span>

  <span class="s">&quot;wcs_bandcount&quot;</span> <span class="s">&quot;3&quot;</span>
  <span class="s">&quot;wcs_band_names&quot;</span> <span class="s">&quot;BandA BandB BandC&quot;</span>

  <span class="c">#default values</span>
  <span class="s">&quot;wcs_band_interpretation&quot;</span>   <span class="s">&quot;This is default interpretation&quot;</span>
  <span class="s">&quot;wcs_band_uom&quot;</span>              <span class="s">&quot;DefaultUOM&quot;</span>
  <span class="s">&quot;wcs_band_definition&quot;</span>       <span class="s">&quot;DefaultDefinition&quot;</span>
  <span class="s">&quot;wcs_band_description&quot;</span>      <span class="s">&quot;This is default description&quot;</span>
  <span class="s">&quot;wcs_interval&quot;</span>              <span class="s">&quot;0 125&quot;</span>
  <span class="s">&quot;wcs_significant_figures&quot;</span>   <span class="s">&quot;3&quot;</span>

  <span class="c">#specific band values</span>
  <span class="s">&quot;BandA_band_interpretation&quot;</span> <span class="s">&quot;This is a specific interpretation&quot;</span>
  <span class="s">&quot;BandA_band_uom&quot;</span>            <span class="s">&quot;SpecificUOM&quot;</span>
  <span class="s">&quot;BandA_band_definition&quot;</span>     <span class="s">&quot;SpecificDefinition&quot;</span>
  <span class="s">&quot;BandA_band_description&quot;</span>    <span class="s">&quot;This is a specific description&quot;</span>
  <span class="s">&quot;BandA_interval&quot;</span>            <span class="s">&quot;0 255&quot;</span>
<span class="k">END</span>
</pre></div>
</div>
<p>The above example would result in having BandA a more specific
description, and BandB and BandC having the default description. It
would also be possible to only use some of the specific values for
BandA and others from the default.</p>
<p>If no default and specific values are given for the interval or
significant figures metadata field, the a default is generated from the
“imagemode” field, which itself defaults to FLOAT32.</p>
<p>The new metadata fields also contain the <em>(wcs|ows)_nilvalues</em> and
<em>(wcs|ows)_nilvalues_reasons</em></p>
<ul class="simple">
<li><p>(wcs|ows)_nilvalues</p></li>
</ul>
<p>With this field, specific nilvalues can be set. The values have to be
delimited by a space.</p>
<ul class="simple">
<li><p>(wcs|ows)_nilvalues_reasons</p></li>
</ul>
<p>This field defines the reasons for the specific nilvalues. The reasons
are also space delimited and reference the nilvalue with the same
index. The values for the reasons should be URIs or URNs.</p>
<p>The following example demonstrates the use of both metadata fields:</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">METADATA</span>
  <span class="s">&quot;ows_srs&quot;</span> <span class="s">&quot;EPSG:4326&quot;</span>
  <span class="s">&quot;wcs_extent&quot;</span> <span class="s">&quot;47.5070762077246 16.038578977182 49.0103258976982 17.2500586851354&quot;</span>

  <span class="s">&quot;wcs_size&quot;</span> <span class="s">&quot;1200 1100&quot;</span>
  <span class="s">&quot;wcs_imagemode&quot;</span> <span class="s">&quot;BYTE&quot;</span>
  <span class="s">&quot;wcs_bandcount&quot;</span> <span class="s">&quot;3&quot;</span>

  <span class="s">&quot;wcs_nilvalues&quot;</span> <span class="s">&quot;0 255&quot;</span>
  <span class="s">&quot;wcs_nilvalues_reasons&quot;</span>
    <span class="s">&quot;urn:ogc:def:nil:OGC::BelowDetectionLimit urn:ogc:def:nil:OGC::AboveDetectionLimit&quot;</span>
<span class="k">END</span>
</pre></div>
</div>
</section>
</section>
<section id="http-post-support">
<h2><a class="toc-backref" href="#table-of-contents" role="doc-backlink">HTTP-POST support</a><a class="headerlink" href="#http-post-support" title="Link to this heading">¶</a></h2>
<p>Since version 6.0 MapServer also supports HTTP-POST XML requests. All
requests possible via HTTP GET can also be sent via POST. POST requests
are possible for WCS 1.1 or WCS 2.0 which adhere to the according
standard.</p>
<p>This is an example GetCapabilities request:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;wcs:GetCapabilities</span>
<span class="w">  </span><span class="na">xmlns:xsi=</span><span class="s">&#39;http://www.w3.org/2001/XMLSchema-instance&#39;</span>
<span class="w">  </span><span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://www.opengis.net/wcs/2.0</span>
<span class="s">    http://schemas.opengis.net/wcs/2.0/wcsAll.xsd&quot;</span>
<span class="w">  </span><span class="na">xmlns=</span><span class="s">&quot;http://www.opengis.net/wcs/2.0&quot;</span>
<span class="w">  </span><span class="na">xmlns:wcs=</span><span class="s">&#39;http://www.opengis.net/wcs/2.0&#39;</span>
<span class="w">  </span><span class="na">xmlns:ows=</span><span class="s">&quot;http://www.opengis.net/ows/2.0&quot;</span>
<span class="w">  </span><span class="na">service=</span><span class="s">&quot;WCS&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;ows:AcceptVersions&gt;</span>
<span class="w">    </span><span class="nt">&lt;ows:Version&gt;</span>2.0.1<span class="nt">&lt;/ows:Version&gt;</span>
<span class="w">  </span><span class="nt">&lt;/ows:AcceptVersions&gt;</span>
<span class="w">  </span><span class="nt">&lt;ows:Sections&gt;</span>
<span class="w">    </span><span class="nt">&lt;ows:Section&gt;</span>OperationsMetadata<span class="nt">&lt;/ows:Section&gt;</span>
<span class="w">    </span><span class="nt">&lt;ows:Section&gt;</span>ServiceIdentification<span class="nt">&lt;/ows:Section&gt;</span>
<span class="w">  </span><span class="nt">&lt;/ows:Sections&gt;</span>
<span class="nt">&lt;/wcs:GetCapabilities&gt;</span>
</pre></div>
</div>
<p>This is an example DescribeCoverage request, which is only valid for
WCS 2.0:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;wcs:DescribeCoverage</span>
<span class="w">  </span><span class="na">xmlns:xsi=</span><span class="s">&#39;http://www.w3.org/2001/XMLSchema-instance&#39;</span>
<span class="w">  </span><span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://www.opengis.net/wcs/2.0</span>
<span class="s">    http://schemas.opengis.net/wcs/2.0/wcsAll.xsd&quot;</span>
<span class="w">  </span><span class="na">xmlns=</span><span class="s">&quot;http://www.opengis.net/wcs/2.0&quot;</span>
<span class="w">  </span><span class="na">xmlns:wcs=</span><span class="s">&quot;http://www.opengis.net/wcs/2.0&quot;</span>
<span class="w">  </span><span class="na">service=</span><span class="s">&quot;WCS&quot;</span>
<span class="w">  </span><span class="na">version=</span><span class="s">&quot;2.0.1&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;wcs:CoverageId&gt;</span>SOME_ID<span class="nt">&lt;/wcs:CoverageId&gt;</span>
<span class="nt">&lt;/wcs:DescribeCoverage&gt;</span>
</pre></div>
</div>
<p>This example demonstrates the usage of a WCS 2.0 POST-XML GetCoverage
request:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;wcs:GetCoverage</span>
<span class="w">  </span><span class="na">xmlns:xsi=</span><span class="s">&#39;http://www.w3.org/2001/XMLSchema-instance&#39;</span>
<span class="w">  </span><span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://www.opengis.net/wcs/2.0</span>
<span class="s">    http://schemas.opengis.net/wcs/2.0/wcsAll.xsd&quot;</span>
<span class="w">  </span><span class="na">xmlns=</span><span class="s">&quot;http://www.opengis.net/wcs/2.0&quot;</span>
<span class="w">  </span><span class="na">xmlns:wcs=</span><span class="s">&quot;http://www.opengis.net/wcs/2.0&quot;</span>
<span class="w">  </span><span class="na">xmlns:wcscrs=</span><span class="s">&quot;http://www.opengis.net/wcs/crs/1.0&quot;</span>
<span class="w">  </span><span class="na">xmlns:scal=</span><span class="s">&quot;http://www.opengis.net/wcs/scaling/1.0&quot;</span>
<span class="w">  </span><span class="na">xmlns:int=</span><span class="s">&quot;http://www.opengis.net/wcs/interpolation/1.0&quot;</span>
<span class="w">  </span><span class="na">service=</span><span class="s">&quot;WCS&quot;</span>
<span class="w">  </span><span class="na">version=</span><span class="s">&quot;2.0.1&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;wcs:CoverageId&gt;</span>SOME_ID<span class="nt">&lt;/wcs:CoverageId&gt;</span>
<span class="w">  </span><span class="nt">&lt;wcs:DimensionTrim&gt;</span>
<span class="w">    </span><span class="nt">&lt;wcs:Dimension&gt;</span>x<span class="nt">&lt;/wcs:Dimension&gt;</span>
<span class="w">    </span><span class="nt">&lt;wcs:TrimLow&gt;</span>16.5<span class="nt">&lt;/wcs:TrimLow&gt;</span>
<span class="w">    </span><span class="nt">&lt;wcs:TrimHigh&gt;</span>17.25<span class="nt">&lt;/wcs:TrimHigh&gt;</span>
<span class="w">  </span><span class="nt">&lt;/wcs:DimensionTrim&gt;</span>
<span class="w">  </span><span class="nt">&lt;wcs:DimensionTrim&gt;</span>
<span class="w">    </span><span class="nt">&lt;wcs:Dimension&gt;</span>y<span class="nt">&lt;/wcs:Dimension&gt;</span>
<span class="w">    </span><span class="nt">&lt;wcs:TrimLow&gt;</span>47.9<span class="nt">&lt;/wcs:TrimLow&gt;</span>
<span class="w">  </span><span class="nt">&lt;/wcs:DimensionTrim&gt;</span>
<span class="w">  </span><span class="nt">&lt;wcs:format&gt;</span>image/tiff<span class="nt">&lt;/wcs:format&gt;</span>
<span class="w">  </span><span class="nt">&lt;wcs:mediaType&gt;</span>multipart/related<span class="nt">&lt;/wcs:mediaType&gt;</span>
<span class="w">  </span><span class="nt">&lt;wcs:Extension&gt;</span>
<span class="w">    </span><span class="nt">&lt;wcscrs:subsettingCrs&gt;</span>http://www.opengis.net/def/crs/EPSG/0/4326<span class="nt">&lt;/wcscrs:subsettingCrs&gt;</span>
<span class="w">    </span><span class="nt">&lt;wcscrs:outputCrs&gt;</span>http://www.opengis.net/def/crs/EPSG/0/32611<span class="nt">&lt;/wcscrs:outputCrs&gt;</span>
<span class="w">    </span><span class="nt">&lt;scal:ScaleToSize&gt;</span>
<span class="w">      </span><span class="nt">&lt;scal:TargetAxisSize&gt;</span>
<span class="w">        </span><span class="nt">&lt;scal:axis&gt;</span>x<span class="nt">&lt;/scal:axis&gt;</span>
<span class="w">        </span><span class="nt">&lt;scal:targetSize&gt;</span>50<span class="nt">&lt;/scal:targetSize&gt;</span>
<span class="w">      </span><span class="nt">&lt;/scal:TargetAxisSize&gt;</span>
<span class="w">      </span><span class="nt">&lt;scal:TargetAxisSize&gt;</span>
<span class="w">        </span><span class="nt">&lt;scal:axis&gt;</span>y<span class="nt">&lt;/scal:axis&gt;</span>
<span class="w">        </span><span class="nt">&lt;scal:targetSize&gt;</span>50<span class="nt">&lt;/scal:targetSize&gt;</span>
<span class="w">      </span><span class="nt">&lt;/scal:TargetAxisSize&gt;</span>
<span class="w">    </span><span class="nt">&lt;/scal:ScaleToSize&gt;</span>
<span class="w">    </span><span class="nt">&lt;int:Interpolation&gt;</span>
<span class="w">      </span><span class="nt">&lt;int:globalInterpolation&gt;</span>NEAREST<span class="nt">&lt;/int:globalInterpolation&gt;</span>
<span class="w">    </span><span class="nt">&lt;/int:Interpolation&gt;</span>
<span class="w">  </span><span class="nt">&lt;/wcs:Extension&gt;</span>
<span class="nt">&lt;/wcs:GetCoverage&gt;</span>
</pre></div>
</div>
<p>These are some other scaling options:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;wcs:GetCoverage</span>
<span class="w">  </span><span class="na">xmlns:xsi=</span><span class="s">&#39;http://www.w3.org/2001/XMLSchema-instance&#39;</span>
<span class="w">  </span><span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://www.opengis.net/wcs/2.0</span>
<span class="s">    http://schemas.opengis.net/wcs/2.0/wcsAll.xsd&quot;</span>
<span class="w">  </span><span class="na">xmlns=</span><span class="s">&quot;http://www.opengis.net/wcs/2.0&quot;</span>
<span class="w">  </span><span class="na">xmlns:wcs=</span><span class="s">&quot;http://www.opengis.net/wcs/2.0&quot;</span>
<span class="w">  </span><span class="na">xmlns:scal=</span><span class="s">&quot;http://www.opengis.net/wcs/scaling/1.0&quot;</span>
<span class="w">  </span><span class="na">service=</span><span class="s">&quot;WCS&quot;</span>
<span class="w">  </span><span class="na">version=</span><span class="s">&quot;2.0.1&quot;</span><span class="nt">&gt;</span>

<span class="w">  </span><span class="cm">&lt;!-- ... --&gt;</span>
<span class="w">  </span><span class="nt">&lt;wcs:Extension&gt;</span>
<span class="w">    </span><span class="nt">&lt;scal:ScaleByFactor&gt;</span>
<span class="w">      </span><span class="nt">&lt;scal:scaleFactor&gt;</span>1.5<span class="nt">&lt;/scal:scaleFactor&gt;</span>
<span class="w">    </span><span class="nt">&lt;/scal:ScaleByFactor&gt;</span>

<span class="w">    </span><span class="cm">&lt;!-- or --&gt;</span>

<span class="w">    </span><span class="nt">&lt;scal:ScaleAxesByFactor&gt;</span>
<span class="w">      </span><span class="nt">&lt;scal:ScaleAxis&gt;</span>
<span class="w">        </span><span class="nt">&lt;scal:axis&gt;</span>x<span class="nt">&lt;/scal:axis&gt;</span>
<span class="w">        </span><span class="nt">&lt;scal:scaleFactor&gt;</span>1.5<span class="nt">&lt;/scal:scaleFactor&gt;</span>
<span class="w">      </span><span class="nt">&lt;/scal:ScaleAxis&gt;</span>
<span class="w">      </span><span class="nt">&lt;scal:ScaleAxis&gt;</span>
<span class="w">        </span><span class="nt">&lt;scal:axis&gt;</span>y<span class="nt">&lt;/scal:axis&gt;</span>
<span class="w">        </span><span class="nt">&lt;scal:scaleFactor&gt;</span>2.0<span class="nt">&lt;/scal:scaleFactor&gt;</span>
<span class="w">      </span><span class="nt">&lt;/scal:ScaleAxis&gt;</span>
<span class="w">    </span><span class="nt">&lt;/scal:ScaleAxesByFactor&gt;</span>

<span class="w">    </span><span class="cm">&lt;!-- or --&gt;</span>

<span class="w">    </span><span class="nt">&lt;scal:ScaleToExtent&gt;</span>
<span class="w">      </span><span class="nt">&lt;scal:TargetAxisExtent&gt;</span>
<span class="w">        </span><span class="nt">&lt;scal:axis&gt;</span>x<span class="nt">&lt;/scal:axis&gt;</span>
<span class="w">        </span><span class="nt">&lt;scal:low&gt;</span>10<span class="nt">&lt;/scal:low&gt;</span>
<span class="w">        </span><span class="nt">&lt;scal:high&gt;</span>20<span class="nt">&lt;/scal:high&gt;</span>
<span class="w">      </span><span class="nt">&lt;/scal:TargetAxisExtent&gt;</span>
<span class="w">      </span><span class="nt">&lt;scal:TargetAxisExtent&gt;</span>
<span class="w">        </span><span class="nt">&lt;scal:axis&gt;</span>y<span class="nt">&lt;/scal:axis&gt;</span>
<span class="w">        </span><span class="nt">&lt;scal:low&gt;</span>20<span class="nt">&lt;/scal:low&gt;</span>
<span class="w">        </span><span class="nt">&lt;scal:high&gt;</span>30<span class="nt">&lt;/scal:high&gt;</span>
<span class="w">      </span><span class="nt">&lt;/scal:TargetAxisExtent&gt;</span>
<span class="w">    </span><span class="nt">&lt;/scal:ScaleToExtent&gt;</span>
<span class="w">  </span><span class="nt">&lt;/wcs:Extension&gt;</span>
<span class="nt">&lt;/wcs:GetCoverage&gt;</span>
</pre></div>
</div>
<p>GeoTIFF parameters are used as follows:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;wcs:GetCoverage</span>
<span class="w">   </span><span class="na">xmlns:xsi=</span><span class="s">&#39;http://www.w3.org/2001/XMLSchema-instance&#39;</span>
<span class="w">   </span><span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://www.opengis.net/wcs/2.0</span>
<span class="s">     http://schemas.opengis.net/wcs/2.0/wcsAll.xsd&quot;</span>
<span class="w">   </span><span class="na">xmlns=</span><span class="s">&quot;http://www.opengis.net/wcs/2.0&quot;</span>
<span class="w">   </span><span class="na">xmlns:wcs=</span><span class="s">&quot;http://www.opengis.net/wcs/2.0&quot;</span>
<span class="w">   </span><span class="na">xmlns:geotiff=</span><span class="s">&quot;http://www.opengis.net/gmlcov/geotiff/1.0&quot;</span>
<span class="w">   </span><span class="na">service=</span><span class="s">&quot;WCS&quot;</span>
<span class="w">   </span><span class="na">version=</span><span class="s">&quot;2.0.1&quot;</span><span class="nt">&gt;</span>

<span class="w">   </span><span class="cm">&lt;!-- ... --&gt;</span>
<span class="w">   </span><span class="nt">&lt;wcs:Extension&gt;</span>
<span class="w">     </span><span class="nt">&lt;geotiff:parameters&gt;</span>
<span class="w">       </span><span class="nt">&lt;geotiff:compression&gt;</span>LZW<span class="nt">&lt;/geotiff:compression&gt;</span>
<span class="w">       </span><span class="nt">&lt;geotiff:predictor&gt;</span>Horizontal<span class="nt">&lt;/geotiff:predictor&gt;</span>
<span class="w">       </span><span class="nt">&lt;geotiff:interleave&gt;</span>Band<span class="nt">&lt;/geotiff:interleave&gt;</span>
<span class="w">       </span><span class="nt">&lt;geotiff:tiling&gt;</span>yes<span class="nt">&lt;/geotiff:tiling&gt;</span>
<span class="w">       </span><span class="nt">&lt;geotiff:tilewidth&gt;</span>256<span class="nt">&lt;/geotiff:tilewidth&gt;</span>
<span class="w">       </span><span class="nt">&lt;geotiff:tileheight&gt;</span>256<span class="nt">&lt;/geotiff:tileheight&gt;</span>
<span class="w">     </span><span class="nt">&lt;/geotiff:parameters&gt;</span>
<span class="w">   </span><span class="nt">&lt;/wcs:Extension&gt;</span>
<span class="w"> </span><span class="nt">&lt;/wcs:GetCoverage&gt;</span>
</pre></div>
</div>
<p>Please refer to the <a class="reference external" href="https://portal.ogc.org/files/?artifact_id=41440">WCS 2.0 Specification - XML/POST Protocol Binding
Extension</a> and the <a class="reference external" href="http://schemas.opengis.net/wcs/2.0/">WCS 2.0 Schemas</a> for further information on POST
request in WCS 2.0.</p>
</section>
<section id="inspire-download-service-support">
<span id="wcs-inspire-support"></span><span id="index-5"></span><h2><a class="toc-backref" href="#table-of-contents" role="doc-backlink">INSPIRE download service support</a><a class="headerlink" href="#inspire-download-service-support" title="Link to this heading">¶</a></h2>
<p>Since version 7.2, MapServer WCS 2.0 also supports the the INSPIRE download
service. To enable this functionality, the <cite>wcs_inspire_capabilities</cite> setting
must be set to either <cite>url</cite> or <cite>embed</cite>.</p>
<p>Please refer to the <a class="reference internal" href="inspire_dl.html#inspire-download-service"><span class="std std-ref">INSPIRE Download Service</span></a> documentation for further
metadata options.</p>
<section id="multi-language-support">
<h3>Multi-language support<a class="headerlink" href="#multi-language-support" title="Link to this heading">¶</a></h3>
<p>Part of the INSPIRE download service support is the support for multi-lingual
WCS services. With the <cite>wcs_languages</cite> a (comma-separated) list of language
specifiers can be set. When this is set, client and server can negotiate the
result language using the <cite>ACCEPTLANGUAGES</cite> parameter (or the
<cite>&lt;ows:AcceptLanguages&gt;</cite>/<cite>&lt;ows:Language&gt;</cite> tags when using XML). The first
item in the accept languages list contained in the list specified with
<cite>wcs_languages</cite> will be used for the resulting capabilities document</p>
<p>Additional information can be found in the section for
<a class="reference internal" href="inspire_dl.html#inspire-dl-multi-language-support"><span class="std std-ref">Multi-language support for certain capabilities fields</span></a>.</p>
</section>
</section>
<section id="reference-section">
<h2><a class="toc-backref" href="#table-of-contents" role="doc-backlink">Reference Section</a><a class="headerlink" href="#reference-section" title="Link to this heading">¶</a></h2>
<p>To avoid confusion only “wcs_*” and “ows_*” prefixed metadata entries
are evaluated in OGC WCS services. Previous versions used “wms_*”
prefixed entries as fallback which is dropped in version 6.0 in favor of
forcing explicit decisions. The module will look for the “wcs_*” and
“ows_*” metadata prefixes in this order.</p>
<p>The following metadata are available in the setup of the mapfile:</p>
<section id="web-object-metadata">
<span id="index-6"></span><h3>Web Object Metadata<a class="headerlink" href="#web-object-metadata" title="Link to this heading">¶</a></h3>
<p id="index-8"><span id="index-7"></span><strong>ows_allowed_ip_list</strong> (or wcs_allowed_ip_list)</p>
<ul>
<li><p><em>Description:</em> (Optional) A list of IP addresses that will be
allowed access to the service.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">METADATA</span>
  <span class="s2">&quot;ows_allowed_ip_list&quot;</span> <span class="s2">&quot;123.45.67.89 11.22.33.44&quot;</span>
<span class="n">END</span>
</pre></div>
</div>
</li>
</ul>
<p id="index-10"><span id="index-9"></span><strong>ows_denied_ip_list</strong> (or wcs_denied_ip_list)</p>
<ul>
<li><p><em>Description:</em> (Optional) A list of IP addresses that will be denied
access to the service.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">METADATA</span>
  <span class="s2">&quot;ows_denied_ip_list&quot;</span> <span class="s2">&quot;123.45.67.89 11.22.33.44&quot;</span>
<span class="n">END</span>
</pre></div>
</div>
</li>
</ul>
<p id="index-11"><strong>wcs_abstract</strong></p>
<ul class="simple">
<li><p><em>Description:</em> (Optional) A brief description of the service, maps
to ows:Abstract (WCS 1.1+ only).</p></li>
</ul>
<p id="index-12"><strong>wcs_accessconstraints</strong></p>
<ul class="simple">
<li><p><em>Description:</em> (Optional) A list of codes describing any access
constraints imposed by the service provider. The keyword NONE is
reserved to mean no access constraints are imposed.</p></li>
</ul>
<p id="index-23"><span id="index-22"></span><span id="index-21"></span><span id="index-20"></span><span id="index-19"></span><span id="index-18"></span><span id="index-17"></span><span id="index-16"></span><span id="index-15"></span><span id="index-14"></span><span id="index-13"></span><strong>wcs_address, wcs_city, wcs_contactelectronicmailaddress,
wcs_contactfacimiletelephone, wcs_contactorganization,
wcs_contactperson, wcs_contactposition, wcs_contactvoicetelephone,
wcs_country, wcs_postcode, wcs_stateorprovince</strong></p>
<ul class="simple">
<li><p><em>Description:</em> (Optional) Contact address information. If provided
then all twelve metadata items are required.  You can also use the
<cite>responsibleparty</cite> metadata instead.</p></li>
</ul>
<p id="index-24"><strong>wcs_band_names</strong></p>
<ul class="simple">
<li><p><em>Description:</em> (WCS 2.0) Space separated list of band names. See
<a class="reference internal" href="#new-band-related-metadata-entries">New band related metadata entries</a></p></li>
</ul>
<p id="index-25"><strong>wcs_description</strong></p>
<ul class="simple">
<li><p><em>Description:</em> (Optional) A description of the server.</p></li>
</ul>
<p id="index-26"><strong>wcs_enable_request</strong> (or <strong>ows_enable_request</strong>)</p>
<ul>
<li><p><em>Description:</em> Space separated list of requests to enable.
The default is none.
The following requests can be enabled:
<cite>GetCapabilities</cite>, <cite>GetCoverage</cite> and <cite>DescribeCoverage</cite>.
A “!” in front of a request will disable the request.
“*” enables all requests.</p></li>
<li><p><em>Examples:</em></p>
<p>To enable only <cite>GetCapabilities</cite> and <cite>GetCoverage</cite>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;wcs_enable_request&quot;</span> <span class="s2">&quot;GetCapabilities GetCoverage&quot;</span>
</pre></div>
</div>
<p>To enable all requests except <cite>GetCapabilities</cite></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;wcs_enable_request&quot;</span> <span class="s2">&quot;* !GetCapabilities&quot;</span>
</pre></div>
</div>
</li>
</ul>
<p id="index-27"><strong>wcs_fees</strong></p>
<ul class="simple">
<li><p><em>Description:</em> (Optional) A text string indicating any fees imposed
by the service provider.</p></li>
</ul>
<p id="index-28"><strong>wcs_keywords</strong></p>
<ul class="simple">
<li><p><em>Description:</em> (Optional) Short words for catalog searching.</p></li>
</ul>
<p id="index-29"><strong>wcs_label</strong></p>
<ul class="simple">
<li><p><em>Description:</em> (Required) A human-readable label for the server.</p></li>
</ul>
<p id="index-30"><strong>wcs_metadatalink_format</strong></p>
<ul class="simple">
<li><p><em>Description:</em> (Optional) The file format MIME type of the metadata
record (e.g.  “text/plain”). The web metadata wcs_metadatalink_type
and wcs_metadatalink_href must also be specified.</p></li>
<li><p>To output several metadata links, use <cite>wcs_metadatalink_list</cite></p></li>
</ul>
<p id="index-31"><strong>wcs_metadatalink_href</strong></p>
<ul class="simple">
<li><p><em>Description:</em> (Optional) The URL to the server’s metadata. The web
metadata wcs_metadatalink_format and wcs_metadatalink_type must also
be specified.</p></li>
<li><p>To output several metadata links, use <cite>wcs_metadatalink_list</cite></p></li>
</ul>
<p id="index-32"><strong>wcs_metadatalink_list</strong></p>
<ul>
<li><p><em>Description:</em> (Optional) Space-separated list of parts of metadata keys,
to be able to specify several metadata links. If the value of wcs_metadatalink_list
is “foo bar”, then wcs_metadatalink_foo_href, wcs_metadatalink_foo_format,
wcs_metadatalink_foo_type, wcs_metadatalink_bar_href, wcs_metadatalink_bar_format,
wcs_metadatalink_bar_type will be queried with the semantics of the
wcs_metadatalink_href, wcs_metadatalink_format and wcs_metadatalink_type items.</p>
<p>Example:</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="s">&quot;wcs_metadatalink_list&quot;</span> <span class="s">&quot;xml html&quot;</span>

<span class="s">&quot;wcs_metadatalink_xml_format&quot;</span> <span class="s">&quot;text/xml&quot;</span>
<span class="s">&quot;wcs_metadatalink_xml_type&quot;</span> <span class="s">&quot;TC211&quot;</span>
<span class="s">&quot;wcs_metadatalink_xml_href&quot;</span> <span class="s">&quot;http://example.com/testXML&quot;</span>

<span class="s">&quot;wcs_metadatalink_html_format&quot;</span> <span class="s">&quot;text/html&quot;</span>
<span class="s">&quot;wcs_metadatalink_html_type&quot;</span> <span class="s">&quot;TC211&quot;</span>
<span class="s">&quot;wcs_metadatalink_html_href&quot;</span> <span class="s">&quot;http://example.com/testHTML&quot;</span>
</pre></div>
</div>
</li>
<li><div class="versionadded">
<p><span class="versionmodified added">New in version 8.0.</span></p>
</div>
</li>
</ul>
<p id="index-33"><strong>wcs_metadatalink_type</strong></p>
<ul class="simple">
<li><p><em>Description:</em> (Optional) The standard to which the metadata
complies. Currently only two types are valid: “TC211” which refers
to [ISO 19115], and “FGDC” which refers to [FGDC-STD-001-1988]. The
web metadata wcs_metadatalink_format and wcs_metadatalink_href must
also be specified.</p></li>
<li><p>To output several metadata links, use <cite>wcs_metadatalink_list</cite></p></li>
</ul>
<p id="index-34"><strong>wcs_name</strong></p>
<ul class="simple">
<li><p><em>Description:</em> (Optional) A name for the server.</p></li>
</ul>
<p id="index-46"><span id="index-45"></span><span id="index-44"></span><span id="index-43"></span><span id="index-42"></span><span id="index-41"></span><span id="index-40"></span><span id="index-39"></span><span id="index-38"></span><span id="index-37"></span><span id="index-36"></span><span id="index-35"></span><strong>wcs_responsibleparty_address_administrativearea,
wcs_responsibleparty_address_city,
wcs_responsibleparty_address_country,
wcs_responsibleparty_address_deliverypoint,
wcs_responsibleparty_address_electronicmailaddress,
wcs_responsibleparty_address_postalcode,
wcs_responsibleparty_individualname,
wcs_responsibleparty_onlineresource,
wcs_responsibleparty_organizationname,
wcs_responsibleparty_phone_facsimile,
wcs_responsibleparty_phone_voice, wcs_responsibleparty_postionname</strong></p>
<ul class="simple">
<li><p><em>Description:</em> (Optional) Contact address information. If provided
then all twelve metadata items are required.  You can also use the
address* metadata instead.</p></li>
</ul>
<p id="index-47"><strong>wcs_service_onlineresource</strong></p>
<ul class="simple">
<li><p><em>Description:</em> (Optional) Top-level onlineresource URL. MapServer
uses the onlineresource metadata (if provided) in the following
order:</p>
<ol class="arabic simple">
<li><p>wcs_service_onlineresource</p></li>
<li><p>ows_service_onlineresource</p></li>
<li><p>wcs_onlineresource (or automatically generated URL, see the
onlineresource section of this document)</p></li>
</ol>
</li>
</ul>
<p id="index-48"><strong>wcs_languages</strong></p>
<ul class="simple">
<li><p><em>Description:</em> (Optional) A comma-separated list of supported languages. For
details please refer to the section <a class="reference internal" href="inspire_dl.html#inspire-dl-multi-language-support"><span class="std std-ref">Multi-language support for certain capabilities fields</span></a>
in the INSPIRE Download Service documentation.</p></li>
</ul>
</section>
<section id="layer-object-metadata">
<span id="index-49"></span><h3>Layer Object Metadata<a class="headerlink" href="#layer-object-metadata" title="Link to this heading">¶</a></h3>
<dl class="simple" id="index-50">
<dt><strong>ows_allowed_ip_list</strong></dt><dd><p>Same as ows_allowed_ip_list in the Web Object.</p>
</dd>
</dl>
<dl class="simple" id="index-51">
<dt><strong>ows_denied_ip_list</strong></dt><dd><p>Same as ows_denied_ip_list in the Web Object.</p>
</dd>
</dl>
<p id="index-52"><strong>wcs_abstract</strong></p>
<ul class="simple">
<li><p><em>Description:</em> (Optional) A brief description of the service, maps
to ows:Abstract (WCS 1.1+ only).</p></li>
</ul>
<p id="index-53"><strong>wcs_description</strong></p>
<ul class="simple">
<li><p><em>Description:</em> (Optional) A description of the layer.</p></li>
</ul>
<p id="index-54"><strong>wcs_enable_request</strong> (or <strong>ows_enable_request</strong>)</p>
<ul>
<li><p><em>Description:</em> Space separated list of requests to enable.
The default is none.
The following requests can be enabled:
<cite>GetCapabilities</cite>, <cite>GetCoverage</cite> and <cite>DescribeCoverage</cite>.
A “!” in front of a request will disable the request.
“*” enables all requests.</p></li>
<li><p><em>Examples:</em></p>
<p>To enable only <cite>GetCapabilities</cite> and <cite>GetCoverage</cite>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;wcs_enable_request&quot;</span> <span class="s2">&quot;GetCapabilities GetCoverage&quot;</span>
</pre></div>
</div>
<p>To enable all requests except <cite>GetCapabilities</cite></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;wcs_enable_request&quot;</span> <span class="s2">&quot;* !GetCapabilities&quot;</span>
</pre></div>
</div>
</li>
</ul>
<p id="index-55"><strong>wcs_extent</strong></p>
<ul class="simple">
<li><p><em>Description:</em> (Optional) Bounding box of layer, which must be
provided for tiled data.  Comma-delimited, in the format of:
minx,miny,maxx,maxy</p></li>
</ul>
<p id="index-56"><strong>wcs_formats</strong></p>
<ul class="simple">
<li><p><em>Description:</em> (Optional) The formats which may be requested for
this layer, separated by a space. (e.g. “GTiff MrSID”)</p></li>
</ul>
<p id="index-57"><strong>wcs_keywords</strong></p>
<ul class="simple">
<li><p><em>Description:</em> (Optional) Short words for catalog searching.</p></li>
</ul>
<p id="index-58"><strong>wcs_label</strong></p>
<ul class="simple">
<li><p><em>Description:</em> (Required) A human-readable label for the layer.</p></li>
</ul>
<p id="index-59"><strong>wcs_metadatalink_format</strong></p>
<ul class="simple">
<li><p><em>Description:</em> (Optional) The file format MIME type of the metadata
record (e.g.  “text/plain”). The web metadata wcs_metadatalink_type
and wcs_metadatalink_href must also be specified.</p></li>
</ul>
<p id="index-60"><strong>wcs_metadatalink_href</strong></p>
<ul class="simple">
<li><p><em>Description:</em> (Optional) The URL to the layer’s metadata. The web
metadata wcs_metadatalink_format and wcs_metadatalink_type must also
be specified.</p></li>
</ul>
<p id="index-61"><strong>wcs_metadatalink_type</strong></p>
<ul class="simple">
<li><p><em>Description:</em> (Optional) The standard to which the metadata
complies. Currently only two types are valid: “TC211” which refers
to [ISO 19115], and “FGDC” which refers to [FGDC-STD-001-1988]. The
web metadata wcs_metadatalink_format and wcs_metadatalink_href must
also be specified.</p></li>
</ul>
<p id="index-62"><strong>wcs_name</strong></p>
<ul class="simple">
<li><p><em>Description:</em> (Optional) A name for the layer.</p></li>
</ul>
<p id="index-63"><strong>wcs_nativeformat</strong></p>
<ul class="simple">
<li><p><em>Description:</em> (Optional) The current format of the served raster
layer. (e.g. “GTiff”) (used for WCS 1.0)</p></li>
</ul>
<p id="index-64"><strong>wcs_native_format</strong></p>
<ul class="simple">
<li><p><em>Description:</em> (Optional) The mime-type of the current format of the
served raster layer (e.g. “image/tiff”).  This field is used when
coverage metadata is provided by the layer metadata only (when
wcs_extent and wcs_size/wcs_resolution are set).  When set, WCS 2.0
GetCoverage requests will use this format when no other format is
specified (the format parameter is optional then).</p></li>
</ul>
<p id="index-65"><strong>wcs_outputformat_{OUTPUTFORMATNAME}_creationoption_{OPTIONNAME}</strong></p>
<ul>
<li><p><em>Description:</em> (Optional) (added in MapServer 7.2.0) To provide
creation options in a (GDAL) output format specific and layer specific way.
{OUTPUTFORMATNAME} should be substituted by the user with the OUTPUTFORMAT.NAME
value of an output format allowed for the layer. And {OPTIONNAME} by a
valid GDAL creation option valid for the OUTPUTFORMAT.DRIVER.</p>
<p>The purpose of this metadata item is to provide creation options that depend
on the layer,  typically to configure some metadata in the resulting raster
file that depends on that layer (for non-layer dependent configuration options,
OUTPUTFORMAT.FORMATOPTION should rather be used).</p>
<p>For GDAL drivers that support band-specific creation output (at time of
writing, only the GRIB  driver in GDAL 2.3.0), with a BAND_{bandnumber}_{OPTIONNAME}
syntax for the GDAL creation option, it is also possible to use a MapServer
metadata item named
<strong>wcs_outputformat_{OUTPUTFORMATNAME}_creationoption_BAND_{bandnumber}_{OPTIONNAME}</strong>.
bandnumber will be automatically adjusted when passed to GDAL so that the
WCS band subsetting is properly taken into account.
You can consult <a class="reference external" href="https://github.com/MapServer/MapServer/blob/main/msautotest/wxs/wcs_grib_output.map">WCS GRIB output in msautotest</a> as
a practical example of how to configure GRIB2 WCS output (requires GDAL 2.3.0)</p>
</li>
</ul>
<p id="index-66"><strong>wcs_outputformat_{OUTPUTFORMATNAME}_mdi_{DOMAIN}_{KEY}</strong></p>
<ul>
<li><p><em>Description:</em> (Optional) (added in MapServer 8.0.0) To provide
metadata item (mdi) options in a GDAL output format specific and layer specific way.
{OUTPUTFORMATNAME} should be substituted by the user with the OUTPUTFORMAT.NAME
value of an output format allowed for the layer.
{DOMAIN} is the name of a GDAL metadata domain. In general, you should use “default”
for the default metadata domain.
And {KEY} is the key of the GDAL metadata item.</p>
<p>The purpose of this metadata item is to provide GDAL metadata that depend
on the layer, typically to configure some metadata in the resulting raster
file that depends on that layer.</p>
<p>For GDAL drivers that support band-specific metadata (e.g GeoTIFF, netCDF),
it is also possible to use a MapServer metadata item named
<strong>wcs_outputformat_{OUTPUTFORMATNAME}_mdi_BAND_{bandnumber}_{DOMAIN}_{KEY}</strong>.
bandnumber will be automatically adjusted when passed to GDAL so that the
WCS band subsetting is properly taken into account.</p>
<p>netCDF output is a typical use case. For dataset level metadata, the key
must be prefix with <code class="docutils literal notranslate"><span class="pre">NC_GLOBAL#</span></code></p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;wcs_outputformat_netCDF_mdi_default_NC_GLOBAL#title&quot;</span> <span class="s2">&quot;A succinct description of what is in the dataset&quot;</span>
</pre></div>
</div>
<p>For Band metadata:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;wcs_outputformat_netCDF_mdi_BAND_1_default_NETCDF_VARNAME&quot;</span> <span class="s2">&quot;wind&quot;</span>
<span class="s2">&quot;wcs_outputformat_netCDF_mdi_BAND_1_default_long_name&quot;</span>      <span class="s2">&quot;wind from direction&quot;</span>
<span class="s2">&quot;wcs_outputformat_netCDF_mdi_BAND_1_default_standard_name&quot;</span>  <span class="s2">&quot;wind_from_direction&quot;</span>
</pre></div>
</div>
<p>NETCDF_VARNAME is a special key name recognized by the GDAL netCDF
driver to determine the variable name. All other keys are mapped to a
netCDF attribute belonging to the corresponding variable.</p>
<p>In the special case of the DATA of the layer being a netCDF dataset and
the output of the WCS request too, and no manual wcs_outputformat_netCDF_mdi_*
item is defined, then MapServer will automatically forward metadata from the
input dataset to the output file.</p>
<p>For netCDF output, if the input dataset has multiple bands, it is possible to
generate a 3D dataset with the extra dimension being typically time or Z.</p>
<p>For each band, the MapServer metadata item
<strong>wcs_outputformat_{OUTPUTFORMATNAME}_mdi_BAND_{bandnumber}_default__NETCDF_DIM_{DIMNAME}</strong>
must be defined, where DIMNAME is the name of the extra dimension (e.g. “time”)</p>
<p>In addition to that, netCDF attributes can be defined on the extra
dimension by setting metadata items of the form</p>
<p><strong>wcs_outputformat_{OUTPUTFORMATNAME}_mdi_default_{DIMNAME}#{ATTRNAME}</strong></p>
<p>where {ATTRNAME} is substituted with the name of the attribute to set on
the extra dimension (e.g. “standard_name”, “units”, etc.)</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Metadata items to apply to the &quot;time&quot; extra dimension.</span>
<span class="s2">&quot;wcs_outputformat_netCDF_mdi_default_time#calendar&quot;</span> <span class="s2">&quot;standard&quot;</span>
<span class="s2">&quot;wcs_outputformat_netCDF_mdi_default_time#standard_name&quot;</span> <span class="s2">&quot;time&quot;</span>
<span class="s2">&quot;wcs_outputformat_netCDF_mdi_default_time#units&quot;</span> <span class="s2">&quot;hours since 1900-01-01 00:00:00&quot;</span>

<span class="c1"># Values of each band along the &quot;time&quot; extra dimension.</span>
<span class="s2">&quot;wcs_outputformat_netCDF_mdi_BAND_1_default_NETCDF_DIM_time&quot;</span> <span class="s2">&quot;10&quot;</span>
<span class="s2">&quot;wcs_outputformat_netCDF_mdi_BAND_2_default_NETCDF_DIM_time&quot;</span> <span class="s2">&quot;20&quot;</span>
<span class="s2">&quot;wcs_outputformat_netCDF_mdi_BAND_3_default_NETCDF_DIM_time&quot;</span> <span class="s2">&quot;30&quot;</span>
<span class="s2">&quot;wcs_outputformat_netCDF_mdi_BAND_4_default_NETCDF_DIM_time&quot;</span> <span class="s2">&quot;40&quot;</span>
</pre></div>
</div>
<p>In the special case of the DATA of the layer being a netCDF 3D dataset and
the output of the WCS request is netCDF too, and no manual wcs_outputformat_netCDF_mdi_*
item is defined, then MapServer will automatically forward metadata from the
input dataset to the output file to generate a netCDF 3D dataset.</p>
</li>
</ul>
<p><em>Axes Descriptions</em> (WCS 1.x only)</p>
<p>MapServer allows you define a number of these for a layer. Individual
axis are identified by name when defining specific metadata
(e.g. description). All defined axes must be listed in the
rangeset_axes metadata tag so MapServer knows in advance what to
expect. A special rangeset for multiband date is automatically
generated by adding the name “bands” to the rangeset_axes list.  If
found MapServer will automatically generate metadata for the image
bands.  You may of course extend that basic support using the naming
conventions below.</p>
<p id="index-67"><strong>wcs_rangeset_axes</strong></p>
<ul>
<li><p><em>Description:</em> (Optional) Delimited list of defined range sets.  If
defined, you can also use the following nine metadata items, where
<em>rangeset axis</em> matches the axis name provided in this
<em>wcs_rangeset_axes</em> metadata:  (WCS 1.x only)</p>
<blockquote>
<div><p><strong>{rangeset axis}_semantic</strong></p>
<p><strong>{rangeset axis}_refsys</strong></p>
<p><strong>{rangeset axis}_refsyslabel</strong></p>
<p><strong>{rangeset axis}_description</strong></p>
<p><strong>{rangeset axis}_label</strong></p>
<p><strong>{rangeset axis}_values</strong></p>
<p><strong>{rangeset axis}_values_semantic</strong></p>
<p><strong>{rangeset axis}_values_type</strong></p>
<p><strong>{rangeset axis}_interval</strong></p>
</div></blockquote>
</li>
</ul>
<p id="index-68"><strong>wcs_rangeset_description</strong></p>
<ul class="simple">
<li><p><em>Description:</em> (Optional, for DescribeCoverage request) Rangeset description (WCS 1.0 only)</p></li>
</ul>
<p id="index-69"><strong>wcs_rangeset_label</strong></p>
<ul class="simple">
<li><p><em>Description:</em> (Required, for DescribeCoverage request) Rangeset label (WCS 1.x only)</p></li>
</ul>
<p id="index-70"><strong>wcs_rangeset_name</strong></p>
<ul class="simple">
<li><p><em>Description:</em> (Required, for DescribeCoverage request) Rangeset name (WCS 1.x only)</p></li>
</ul>
<p id="index-71"><strong>wcs_rangeset_nullvalue</strong></p>
<ul class="simple">
<li><p><em>Description:</em> (Optional, for DescribeCoverage request) Rangeset single null value (WCS 1.x only)</p></li>
</ul>
<p id="index-72"><strong>wcs_srs</strong></p>
<ul class="simple">
<li><p><em>Description:</em> (Optional) Spatial reference system of the layer, in
the form of: EPSG:code (e.g. EPSG:3978)</p></li>
</ul>
<p id="index-73"><strong>wcs_timeitem</strong></p>
<ul class="simple">
<li><p><em>Description:</em> (Optional) The attribute in the spatio/temporal index
that contains time values.</p></li>
</ul>
<p id="index-74"><strong>wcs_timeposition</strong></p>
<ul class="simple">
<li><p><em>Description:</em> (Optional) A list of the start and end time of a
given coverage (i.e. “2000-11-11T11:11:11Z,2001-11-11T11:11:11Z”),
used when advertising GetCapabilities.</p></li>
</ul>
</section>
<section id="layer-metadata-api">
<h3>Layer Metadata API<a class="headerlink" href="#layer-metadata-api" title="Link to this heading">¶</a></h3>
<p>If <cite>wcs_metadatalink_href</cite> is not defined, MapServer will provide a link to
the Layer Metadata API for the given layer. See the
<a class="reference internal" href="layer_metadata.html#layer-metadata"><span class="std std-ref">Layer Metadata API</span></a> documentation for more information.</p>
</section>
</section>
<section id="rules-for-handling-srs-in-a-mapserver-wcs">
<h2><a class="toc-backref" href="#table-of-contents" role="doc-backlink">Rules for handling SRS in a MapServer WCS</a><a class="headerlink" href="#rules-for-handling-srs-in-a-mapserver-wcs" title="Link to this heading">¶</a></h2>
<p>TODO!</p>
</section>
<section id="spatio-temporal-indexes">
<h2><a class="toc-backref" href="#table-of-contents" role="doc-backlink">Spatio/Temporal Indexes</a><a class="headerlink" href="#spatio-temporal-indexes" title="Link to this heading">¶</a></h2>
<p>MapServer has long supported a method of breaking a dataset into smaller, more
manageable pieces or tiles. In this case a shapefile is used to store the
boundary of each tile, and an attribute holds the location of the actual data.
Within a MapServer mapfile the layer keywords TILEINDEX and TILEITEM are used
to activate tiling.</p>
<p>Consider the example where an organization wants to serve hundreds or even
thousands of MODIS scenes. Five images cover the spatial extent and each group
of five varies by date of acquisition. This turns out to be a fairly common
scenario for organizations interested in WCS, one that the existing tiling
support does not adequately address. In previous versions of MapServer a
developer would have to create one tile index and one layer definition for
each group of five images. This could result in configuration files that are
prohibitively long and difficult to manage.</p>
<p>In order to more efficiently support the WCS specification a new tiling scheme
has been implemented within MapServer. One that supports spatial sub-setting,
but also ad hoc sub-setting based on any attributes found within tile index.
In many cases a temporal attribute could be used, but sub-setting is not
limited to that case. The new scheme introduces the concept of tile index
layers, that is, a separate layer definition is used to describe the tile
index dataset. With this we get all the benefits of any MapServer layer, most
importantly we can apply MapServer filters to the data. Filters can be defined
at runtime using MapServer CGI, MapScript or via the WCS server interface. The
syntax for the layer using the index remains unchanged except that the value
for <a class="reference internal" href="../optimization/tileindex.html#tileindex"><span class="std std-ref">Tile Indexes</span></a> refers to the index layer instead of an external shapefile.</p>
<p>So, looking at the example above again we can reduce our MapServer
configuration to two layer definitions, one for the tile index and one for the
imagery itself. Extracting a single dates worth of imagery is now a matter of
setting the appropriate filter within the tile index layer.</p>
<section id="building-spatio-temporal-tile-indexes">
<h3>Building Spatio-Temporal Tile Indexes<a class="headerlink" href="#building-spatio-temporal-tile-indexes" title="Link to this heading">¶</a></h3>
<p>Developing these tile indexes is more difficult than basic indexes simply
because there are no ready-made tools to do so. Fortunately we can leverage
existing tool available within MapServer or supporting libraries such as GDAL
by post processing their output.</p>
<p>Taking the above example, building an index is relatively simple task if you
are willing to roll up your sleeves and write a bit of code. First, the basic
spatial index needs to be built. The GDAL utility gdaltindex already does
this. Simply point gdaltindex at the directory containing the collection of
MODIS images and it will build a shapefile index suitable for use with
MapServer. The next step would be to add the temporal information. The pseudo
code would look something like:</p>
<ul class="simple">
<li><p>open the index .dbf file for reading</p></li>
<li><p>create a new column to hold the image acquisition date</p></li>
<li><p>for each image; 1) extract the image acquisition date and 2) insert it into
the new column</p></li>
<li><p>close the index .dbf file</p></li>
</ul>
<p>This general approach could be used for many cases. A scripting language such
as Perl, PHP or Python works well since they all have readily available
modules for manipulating .dbf files. A worst case would involve hand editing
the resulting .dbf file using a desktop tool such as Mircosoft Access or ESRI
Arcview.</p>
</section>
</section>
<section id="wcs-2-0-application-profile-earth-observation-eo-wcs">
<h2><a class="toc-backref" href="#table-of-contents" role="doc-backlink">WCS 2.0 Application Profile - Earth Observation (EO-WCS)</a><a class="headerlink" href="#wcs-2-0-application-profile-earth-observation-eo-wcs" title="Link to this heading">¶</a></h2>
<p>OGC is currently discussing the adoption of an Earth Observation
(EO) Application Profile for WCS 2.0 (EO-WCS) (see <a class="reference external" href="https://www.ogc.org/standards/requests/81">public RFC on EO-WCS</a>).
For an implementation please refer to the Open Source project <a class="reference external" href="http://eoxserver.org">EOxServer</a>
which already implements this proposed EO-WCS based on MapServer.</p>
</section>
<section id="to-do-items-and-known-limitations">
<span id="wcs-to-do"></span><h2><a class="toc-backref" href="#table-of-contents" role="doc-backlink">To-do Items and Known Limitations</a><a class="headerlink" href="#to-do-items-and-known-limitations" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>MapServer does not derive all of the metadata it could from a given dataset.
For example, you must explicitly list time periods covered by a layer. This
should get better with time.</p></li>
<li><p>Only spatial, simple temporal and radiometric band subsetting is possible
with the current implementation. Future enhancements should allow for arbitrary
subsets based on pixel values or tile/image attributes.</p></li>
<li><p>The available set of WCS 2.0 specification documents is not yet
complete. Thus, for some implementation details, the content of some
forthcoming extensions had to be anticipated based on the approaches
taken for WCS 1.1 and 1.0. The implementation will be adjusted as
soon as new specification documents become available.</p></li>
<li><p>If you want to use libxml2 or its derived tools (like xmllint) for
validation be aware that there is a currently bug in libxml2 that
breaks the validation of GML 3.2.1.</p></li>
</ul>
</section>
<section id="credits">
<h2><a class="toc-backref" href="#table-of-contents" role="doc-backlink">Credits</a><a class="headerlink" href="#credits" title="Link to this heading">¶</a></h2>
<p>Support for per-layer creation options has been funded by Meteorological
Service of Canada.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p>
<a href="../about.html" title="About">About</a><br>
<a href="../products.html" title="Products">Products</a><br>
<a href="../community/index.html" title="Community">Community</a><br>
<a href="../development/index.html" title="Development">Development</a><br>
<a href="../download.html" title="Downloads">Downloads</a><br>
<a href="../documentation.html" title="Documentation">Documentation</a><br>
<a href="../faq.html" title="FAQ">FAQ</a><br>
<a href="../psc.html" title="PSC">PSC</a><br>
<a href="https://twitter.com/mapserver_osgeo" title="Twitter">Twitter</a>
</p>
  <h3>Current Table Of Contents</h3>
  <ul>
<li><a class="reference internal" href="#">WCS Server</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a><ul>
<li><a class="reference internal" href="#links-to-wcs-related-information">Links to WCS-Related Information</a></li>
<li><a class="reference internal" href="#software-requirements">Software Requirements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#configuring-your-mapfile-to-serve-wcs-layers">Configuring Your Mapfile to Serve WCS Layers</a><ul>
<li><a class="reference internal" href="#example-wcs-server-mapfile">Example WCS Server Mapfile</a></li>
<li><a class="reference internal" href="#output-formats">Output Formats</a></li>
</ul>
</li>
<li><a class="reference internal" href="#test-your-wcs-1-0-server">Test Your WCS 1.0 Server</a><ul>
<li><a class="reference internal" href="#validate-the-capabilities-metadata">Validate the Capabilities Metadata</a></li>
<li><a class="reference internal" href="#test-with-a-describecoverage-request">Test With a DescribeCoverage Request</a></li>
<li><a class="reference internal" href="#test-with-a-getcoverage-request">Test With a GetCoverage Request</a></li>
</ul>
</li>
<li><a class="reference internal" href="#wcs-1-1-0-issues">WCS 1.1.0+ Issues</a><ul>
<li><a class="reference internal" href="#getcapabilities">GetCapabilities</a></li>
<li><a class="reference internal" href="#describecoverage">DescribeCoverage</a></li>
<li><a class="reference internal" href="#getcoverage">GetCoverage</a></li>
<li><a class="reference internal" href="#urns">URNs</a></li>
</ul>
</li>
<li><a class="reference internal" href="#wcs-2-0">WCS 2.0</a><ul>
<li><a class="reference internal" href="#overview">Overview</a><ul>
<li><a class="reference internal" href="#web-coverage-service-wcs-2-0-interface-standard">Web Coverage Service (WCS) 2.0 Interface Standard</a></li>
<li><a class="reference internal" href="#wcs-2-0-kvp-request-parameters">WCS 2.0 KVP request parameters</a><ul>
<li><a class="reference internal" href="#unchanged-kvp-parameters">Unchanged KVP parameters</a></li>
<li><a class="reference internal" href="#kvp-request-examples">KVP request examples</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#changes-to-previous-versions">Changes to previous versions</a></li>
<li><a class="reference internal" href="#specifying-coverage-specific-metadata">Specifying coverage specific metadata</a></li>
<li><a class="reference internal" href="#new-band-related-metadata-entries">New band related metadata entries</a></li>
</ul>
</li>
<li><a class="reference internal" href="#http-post-support">HTTP-POST support</a></li>
<li><a class="reference internal" href="#inspire-download-service-support">INSPIRE download service support</a><ul>
<li><a class="reference internal" href="#multi-language-support">Multi-language support</a></li>
</ul>
</li>
<li><a class="reference internal" href="#reference-section">Reference Section</a><ul>
<li><a class="reference internal" href="#web-object-metadata">Web Object Metadata</a></li>
<li><a class="reference internal" href="#layer-object-metadata">Layer Object Metadata</a></li>
<li><a class="reference internal" href="#layer-metadata-api">Layer Metadata API</a></li>
</ul>
</li>
<li><a class="reference internal" href="#rules-for-handling-srs-in-a-mapserver-wcs">Rules for handling SRS in a MapServer WCS</a></li>
<li><a class="reference internal" href="#spatio-temporal-indexes">Spatio/Temporal Indexes</a><ul>
<li><a class="reference internal" href="#building-spatio-temporal-tile-indexes">Building Spatio-Temporal Tile Indexes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#wcs-2-0-application-profile-earth-observation-eo-wcs">WCS 2.0 Application Profile - Earth Observation (EO-WCS)</a></li>
<li><a class="reference internal" href="#to-do-items-and-known-limitations">To-do Items and Known Limitations</a></li>
<li><a class="reference internal" href="#credits">Credits</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="wcs_format.html" title="WCS Use Cases"
             >next</a> |</li>
        <li class="right" >
          <a href="sld.html" title="SLD"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../documentation.html" >MapServer 8.0.1 Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >OGC Support and Configuration</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">WCS Server</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; <a href="../copyright.html">Copyright</a> 2023, Open Source Geospatial Foundation.
      Last updated on 2023-12-22.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.5.
    </div>
  </body>
</html>