<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>WFS Server &#8212; MapServer 8.0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx.css?v=6c7b17ac" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=dd298242" />
    <link rel="stylesheet" type="text/css" href="../_static/ribbon.css?v=ea091bf4" />
    
    <script src="../_static/documentation_options.js?v=521b6f53"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    
    <link rel="icon" href="../_static/mapserver.ico"/>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="INSPIRE Download Service" href="inspire_dl.html" />
    <link rel="prev" title="Layer Metadata" href="layer_metadata.html" /> 
  </head><body>


<!-- for main branch only, do not backport this -->

<table width="100%" style="width: 100%; background-color: white;">
  <tr>
    <td rowspan="2" style="padding: 10px 0px 10px 10px;">
      <a href="../index.html" title="Home"><img src="../_static/banner.png" alt="MapServer banner" border="0" /></a>
    </td>
    <td style="padding: 10px 10px 0px 0px; text-align: right; vertical-align: top;">
      <a href="../index.html" title="Home">Home</a> |
      <a href="../products.html" title="Products (MapServer core, MapCache, TinyOWS">Products</a> |
      <a href="https://github.com/mapserver/mapserver/issues/" title="Issue Tracker (MapServer core)">Issue Tracker</a> |
      <a href="../community/service_providers.html" title="Professional Service Providers">Service Providers</a> |      
      <a href="../faq.html" title="Frequently Asked Questions">FAQ</a> |
      <a href="https://twitter.com/mapserver_osgeo" title="Twitter" target="_blank">Twitter</a> |
      <a href="../download.html" title="Download Source or Binaries">Download </a> |
      <a class="badge" href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=KRJ2X44N3HA6U&source=url" target="_blank">
        <img src="https://img.shields.io/badge/donate-%E2%9D%A4%C2%A0-ff69b4.svg?style=flat" alt="Donate to MapServer">
      </a>
    </td>
  </tr>
  <tr>
    <td style="padding: 0px 10px 0px 0px; text-align: right; vertical-align: bottom;">
        <img src="../_static/flagicons/en.png" alt="en" title="en" border="0" width="18px" height="13px"/>
        
          <a href="../ar/ogc/wfs_server.html"><img src="../_static/flagicons/ar.png" alt="ar" title="ar" border="0" /></a>
        
        
          <a href="../de/ogc/wfs_server.html"><img src="../_static/flagicons/de.png" alt="de" title="de" border="0" /></a>
        
        
          <a href="../el/ogc/wfs_server.html"><img src="../_static/flagicons/el.png" alt="el" title="el" border="0" /></a>
        
        
          <a href="../es/ogc/wfs_server.html"><img src="../_static/flagicons/es.png" alt="es" title="es" border="0" /></a>
        
        
          <a href="../fr/ogc/wfs_server.html"><img src="../_static/flagicons/fr.png" alt="fr" title="fr" border="0" /></a>
        
        
          <a href="../id/ogc/wfs_server.html"><img src="../_static/flagicons/id.png" alt="id" title="id" border="0" /></a>
        
        
          <a href="../it/ogc/wfs_server.html"><img src="../_static/flagicons/it.png" alt="it" title="it" border="0" /></a>
        
        
          <a href="../ja/ogc/wfs_server.html"><img src="../_static/flagicons/ja.png" alt="ja" title="ja" border="0" /></a>
        
        
          <a href="../nl_NL/ogc/wfs_server.html"><img src="../_static/flagicons/nl_NL.png" alt="nl_NL" title="nl_NL" border="0" /></a>
        
        
          <a href="../pl/ogc/wfs_server.html"><img src="../_static/flagicons/pl.png" alt="pl" title="pl" border="0" /></a>
        
        
          <a href="../ru/ogc/wfs_server.html"><img src="../_static/flagicons/ru.png" alt="ru" title="ru" border="0" /></a>
        
        
          <a href="../sq/ogc/wfs_server.html"><img src="../_static/flagicons/sq.png" alt="sq" title="sq" border="0" /></a>
        
        
          <a href="../tr/ogc/wfs_server.html"><img src="../_static/flagicons/tr.png" alt="tr" title="tr" border="0" /></a>
        

    </td>
  </tr>
</table>


    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="inspire_dl.html" title="INSPIRE Download Service"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="layer_metadata.html" title="Layer Metadata"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../documentation.html" >MapServer 8.0.1 Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">OGC Support and Configuration</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">WFS Server</a></li> 
      </ul>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="wfs-server">
<span id="index-0"></span><span id="id1"></span><h1><a class="toc-backref" href="#contents" role="doc-backlink">WFS Server</a><a class="headerlink" href="#wfs-server" title="Link to this heading">¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd">Author<span class="colon">:</span></dt>
<dd class="field-odd"><p>Jeff McKenna</p>
</dd>
<dt class="field-even">Contact<span class="colon">:</span></dt>
<dd class="field-even"><p>jmckenna at gatewaygeomatics.com</p>
</dd>
<dt class="field-odd">Author<span class="colon">:</span></dt>
<dd class="field-odd"><p>Even Rouault</p>
</dd>
<dt class="field-even">Contact<span class="colon">:</span></dt>
<dd class="field-even"><p>even.rouault at mines-paris.org</p>
</dd>
<dt class="field-odd">Last Updated<span class="colon">:</span></dt>
<dd class="field-odd"><p>2022-09-05</p>
</dd>
</dl>
<nav class="contents" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#wfs-server" id="id2">WFS Server</a></p>
<ul>
<li><p><a class="reference internal" href="#introduction" id="id3">Introduction</a></p></li>
<li><p><a class="reference internal" href="#configuring-your-mapfile-to-serve-wfs-layers" id="id4">Configuring your MapFile to Serve WFS layers</a></p></li>
<li><p><a class="reference internal" href="#stored-queries-wfs-2-0" id="id5">Stored queries (WFS 2.0)</a></p></li>
<li><p><a class="reference internal" href="#reference-section" id="id6">Reference Section</a></p></li>
<li><p><a class="reference internal" href="#to-do-items-and-known-limitations" id="id7">To-do Items and Known Limitations</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="introduction">
<h2><a class="toc-backref" href="#contents" role="doc-backlink">Introduction</a><a class="headerlink" href="#introduction" title="Link to this heading">¶</a></h2>
<p>A WFS ( Web Feature Service ) publishes feature-level geospatial data
to the web.  This means that instead of returning an image, as
MapServer has traditionally done, the client now obtains fine-grained
information about specific geospatial features of the underlying data,
at both the geometry AND attribute levels. As with other OGC
specifications, this interface uses XML over HTTP as it’s delivery
mechanism, and, more precisely, GML (Geography Markup Language), which
is a subset of XML.</p>
<p>In version 7.0, MapServer supports versions 1.0, 1.1 and 2.0 of the WFS
specifications.</p>
<section id="wfs-related-information">
<h3>WFS-Related Information<a class="headerlink" href="#wfs-related-information" title="Link to this heading">¶</a></h3>
<p>Here are some WFS related links (including a newly added OGC services
workshop with MapServer). Since these are highly detailed technical
specifications, there is no need to read through them in their
entirety to get a MapServer WFS up and running. It is still
recommended however to read them over and get familiar with the basics
of each of them, in order to understand how it all works:</p>
<ul class="simple">
<li><p>The <a class="reference external" href="https://portal.ogc.org/files/?artifact_id=7176">OGC Web Feature Service Implementation Specification</a>.</p></li>
<li><p>The <a class="reference external" href="https://portal.ogc.org/files/?artifact_id=7174">Geography Markup Language Implementation Specification</a>.</p></li>
<li><p>MapServer <a class="reference external" href="http://mapserver.github.io/ms-ogc-workshop/">OGC Web Services Workshop package</a>.</p></li>
</ul>
<p>For WFS 2.0, the following documents apply :</p>
<ul class="simple">
<li><p>The <a class="reference external" href="https://portal.ogc.org/files/?artifact_id=39967">OGC WFS 2.0 specification</a>.</p></li>
<li><p>The <a class="reference external" href="https://portal.ogc.org/files/?artifact_id=39968">OGC Filter Encoding 2.0 specification</a>.</p></li>
<li><p>The <a class="reference external" href="https://portal.ogc.org/files/?artifact_id=20509">OGC GML 3.2.1 specification</a>.</p></li>
</ul>
<p>Technical details on the implementation of WFS 2.0 in MapServer are given in
the <a class="reference internal" href="../development/rfc/ms-rfc-105.html#rfc105"><span class="std std-ref">MS RFC 105: Support for WFS 2.0 (server side)</span></a>.</p>
<p>Working knowledge of MapServer is of course also required.</p>
</section>
<section id="software-requirements">
<h3>Software Requirements<a class="headerlink" href="#software-requirements" title="Link to this heading">¶</a></h3>
<p>In order to enable MapServer to serve WFS, it MUST be compiled against
certain libraries:</p>
<ul class="simple">
<li><p>PROJ: The reprojection library. Version 4.4.3 or greater is required.</p></li>
<li><p>GDAL/OGR: I/O support libraries. Version 1.6.0 or greater is required.</p></li>
</ul>
<p>Please see the MapServer <a class="reference internal" href="../installation/unix.html#unix"><span class="std std-ref">UNIX Compilation and Installation HowTo</span></a> for detailed instructions on compiling mapserver with support
for these libraries and features.  For Windows users, the <a class="reference external" href="https://ms4w.com">MS4W</a>
installer comes ready to serve both WFS and WMS.</p>
</section>
<section id="versions-of-gml-supported">
<span id="index-1"></span><h3>Versions of GML Supported<a class="headerlink" href="#versions-of-gml-supported" title="Link to this heading">¶</a></h3>
<p>MapServer can output both GML2 and GML3.  By default MapServer serves
GML2.  You can test this by adding an ‘OUTPUTFORMAT’ parameter to a
GetFeature request, such as:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://demo.mapserver.org/cgi-bin/wfs?SERVICE=WFS&amp;VERSION=1.0.0&amp;REQUEST=getfeature&amp;TYPENAME=continents&amp;MAXFEATURES=1&amp;OUTPUTFORMAT=gml2">GML2 request output</a></p></li>
<li><p><a class="reference external" href="https://demo.mapserver.org/cgi-bin/wfs?SERVICE=WFS&amp;VERSION=1.0.0&amp;REQUEST=getfeature&amp;TYPENAME=continents&amp;MAXFEATURES=1&amp;OUTPUTFORMAT=gml3">GML3 request output</a></p></li>
</ul>
<p>With WFS 2.0, the default OUTPUTFORMAT is “application/gml+xml; version=3.2”.</p>
<p>For a detailed discussion on the versions supported, see <a class="reference external" href="https://github.com/MapServer/MapServer/issues/884">bug#884</a>.</p>
</section>
</section>
<section id="configuring-your-mapfile-to-serve-wfs-layers">
<span id="index-2"></span><h2><a class="toc-backref" href="#contents" role="doc-backlink">Configuring your MapFile to Serve WFS layers</a><a class="headerlink" href="#configuring-your-mapfile-to-serve-wfs-layers" title="Link to this heading">¶</a></h2>
<p>Much as in the WMS support, WFS publishing is enabled by adding
certain magic METADATA keyword/value pairs to a MapFile.</p>
<p>MapServer will serve and include in its WFS capabilities only the
layers that meet the following conditions:</p>
<ul>
<li><p>Data source is of vector type (Shapefile, OGR, PostGIS, SDE, SDO, …)</p></li>
<li><p>LAYER NAME must be set. Layer names must start with a letter when
setting up a WFS server (layer names should not start with a digit
or have spaces in them).</p></li>
<li><p>LAYER TYPE is one of: LINE, POINT, POLYGON</p></li>
<li><p>The “wfs_onlineresource” metadata:</p>
<p>The wfs_onlineresource metadata is set in the map’s web object
metadata and specifies the URL that should be used to access your
server. This is required for the GetCapabilities output. If
wfs_onlineresource is not provided then MapServer will try to
provide a default one using the script name and hostname, but you
shouldn’t count on that too much. It is strongly recommended that
you provide the wfs_onlineresource metadata.</p>
<p>See section 12.3.3 of the <a class="reference external" href="https://portal.ogc.org/files/?artifact_id=7176">WFS 1.0.0 specification</a> for the whole
story about the online resource URL. Basically, what you need is a
complete HTTP URL including the <a class="reference external" href="http://">http://</a> prefix, hostname, script
name, potentially a “map=” parameter, and and terminated by “?” or
“&amp;”.</p>
<p>Here is a valid online resource URL:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>http://my.host.com/cgi-bin/mapserv?map=mywfs.map&amp;
</pre></div>
</div>
<p>By creating a wrapper script on the server it is possible to hide
the “map=” parameter from the URL and then your server’s online
resource URL could be something like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>http://my.host.com/cgi-bin/mywfs?
</pre></div>
</div>
<p>This is covered in more detail in the “More About the Online
Resource URL” section of the <a class="reference internal" href="wms_server.html#online-resource-wms"><span class="std std-ref">WMS Server</span></a>
document.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is strongly recommended to review the security steps for the <em>MAP=</em>
call to the MapServer executable, by setting <em>MS_MAP_PATTERN</em> or
<em>MS_MAP_NO_PATH</em> or hiding the <em>MAP=</em> parameter on public servers,
as recommended in the document <a class="reference internal" href="../optimization/limit_mapfile_access.html#limit-mapfile-access"><span class="std std-ref">Limit Mapfile Access</span></a>. All possible
environment variables to secure your server are listed in <a class="reference internal" href="../optimization/environment_variables.html#environment-variables"><span class="std std-ref">Environment Variables</span></a>.</p>
</div>
</li>
<li><p>The “wfs_enable_request” metadata (see below).</p></li>
</ul>
<section id="example-wfs-server-mapfile">
<h3>Example WFS Server Mapfile<a class="headerlink" href="#example-wfs-server-mapfile" title="Link to this heading">¶</a></h3>
<p>The following is an example of a bare minimum WFS Server mapfile. Note
the comments for the required parameters.</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">MAP</span>
  <span class="k">NAME</span> <span class="s">&quot;WFS_server&quot;</span> <span class="c">##strongly recommended. containing no special characters or spaces</span>
  <span class="k">STATUS</span> <span class="nb">ON</span>
  <span class="k">SIZE</span> <span class="mi">400</span> <span class="mi">300</span>
  <span class="k">SYMBOLSET</span> <span class="s">&quot;../etc/symbols.txt&quot;</span>
  <span class="k">EXTENT</span> <span class="p">-</span><span class="mi">180</span> <span class="p">-</span><span class="mi">90</span> <span class="mi">180</span> <span class="mi">90</span>
  <span class="k">UNITS</span> <span class="nb">DD</span>
  <span class="k">SHAPEPATH</span> <span class="s">&quot;../data&quot;</span>
  <span class="k">IMAGECOLOR</span> <span class="mi">255</span> <span class="mi">255</span> <span class="mi">255</span>
  <span class="k">FONTSET</span> <span class="s">&quot;../etc/fonts.txt&quot;</span>


  <span class="c">#</span>
  <span class="c"># Start of web interface definition</span>
  <span class="c">#</span>
  <span class="k">WEB</span>
    <span class="k">IMAGEPATH</span> <span class="s">&quot;/ms4w/tmp/ms_tmp/&quot;</span>
    <span class="k">IMAGEURL</span> <span class="s">&quot;/ms_tmp/&quot;</span>
    <span class="k">METADATA</span>
      <span class="s">&quot;wfs_title&quot;</span>          <span class="s">&quot;WFS Demo Server for MapServer&quot;</span> <span class="c">## REQUIRED</span>
      <span class="s">&quot;wfs_onlineresource&quot;</span> <span class="s">&quot;https://demo.mapserver.org/cgi-bin/wfs?&quot;</span> <span class="c">## Recommended</span>
      <span class="s">&quot;wfs_srs&quot;</span>            <span class="s">&quot;EPSG:4326 EPSG:4269 EPSG:3978 EPSG:3857&quot;</span> <span class="c">## Recommended</span>
      <span class="s">&quot;wfs_abstract&quot;</span>       <span class="s">&quot;This text describes my WFS service.&quot;</span> <span class="c">## Recommended</span>
      <span class="s">&quot;wfs_enable_request&quot;</span> <span class="s">&quot;*&quot;</span>  <span class="c"># necessary</span>
    <span class="k">END</span>
  <span class="k">END</span>

  <span class="k">PROJECTION</span>
    <span class="s">&quot;init=epsg:4326&quot;</span>
  <span class="k">END</span>

  <span class="c">#</span>
  <span class="c"># Start of layer definitions</span>
  <span class="c">#</span>

  <span class="c">##################</span>
  <span class="c"># World Continents</span>
  <span class="c">##################</span>
  <span class="k">LAYER</span>
    <span class="k">NAME</span> <span class="s">&quot;continents&quot;</span>
    <span class="k">METADATA</span>
      <span class="s">&quot;wfs_title&quot;</span>         <span class="s">&quot;World continents&quot;</span> <span class="c">##REQUIRED</span>
      <span class="s">&quot;wfs_srs&quot;</span>           <span class="s">&quot;EPSG:4326&quot;</span> <span class="c">## REQUIRED</span>
      <span class="s">&quot;gml_include_items&quot;</span> <span class="s">&quot;all&quot;</span> <span class="c">## Optional (serves all attributes for layer)</span>
      <span class="s">&quot;gml_featureid&quot;</span>     <span class="s">&quot;ID&quot;</span> <span class="c">## REQUIRED</span>
      <span class="s">&quot;gml_types&quot;</span>         <span class="s">&quot;auto&quot;</span> <span class="c">## Optional (automatically populate the type for the attributes)</span>
      <span class="s">&quot;wfs_enable_request&quot;</span> <span class="s">&quot;*&quot;</span>
      <span class="s">&quot;wfs_use_default_extent_for_getfeature&quot;</span> <span class="s">&quot;false&quot;</span> <span class="c">## Optional (improves performance of OGR layers)</span>
    <span class="k">END</span>
    <span class="k">TYPE</span> <span class="nb">POLYGON</span>
    <span class="k">STATUS</span> <span class="nb">ON</span>
    <span class="k">DATA</span> <span class="s">&quot;shapefile/countries_area&quot;</span>
    <span class="c"># define source projection</span>
    <span class="k">PROJECTION</span>
      <span class="s">&quot;init=epsg:4326&quot;</span>
    <span class="k">END</span>
    <span class="k">CLASS</span>
      <span class="k">NAME</span> <span class="s">&quot;World Continents&quot;</span>
      <span class="k">STYLE</span>
        <span class="k">COLOR</span> <span class="mi">255</span> <span class="mi">128</span> <span class="mi">128</span>
        <span class="k">OUTLINECOLOR</span> <span class="mi">96</span> <span class="mi">96</span> <span class="mi">96</span>
      <span class="k">END</span>
    <span class="k">END</span>
  <span class="k">END</span> <span class="c">#layer</span>

<span class="k">END</span> <span class="c">#mapfile</span>
</pre></div>
</div>
</section>
<section id="rules-for-handling-srs-in-mapserver-wfs">
<span id="index-3"></span><h3>Rules for Handling SRS in MapServer WFS<a class="headerlink" href="#rules-for-handling-srs-in-mapserver-wfs" title="Link to this heading">¶</a></h3>
<p>The OGC WFS 1.0 specification doesn’t allow a layer (feature type)
to be advertised in more than one SRS.  Also, there is no default SRS
that applies to all layers by default.  However, it is possible to
have every layer in a WFS server advertised in a different SRS.</p>
<p>The OGC WFS 1.1 and 2.0 specifications allow more than one SRS to be
advertised, and one of the SRSs will be advertised as the default SRS
(the default SRS will be the first in the list specified in the
<cite>METADATA</cite> <cite>wfs_srs</cite> / <cite>ows_srs</cite>).</p>
<p>Here is how MapServer decides the SRS to advertise and use for each
layer in your WFS:</p>
<ul class="simple">
<li><p>If a top-level map SRS is defined then this SRS is used and applies
to all layers (feature types) in this WFS. In this case the SRS of
individual layers is simply ignored even if it is set.</p></li>
<li><p>If no top-level map SRS is defined, then each layer is
advertised in its own SRS in the capabilities.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>By “SRS is defined”, we mean either the presence of a PROJECTION
object defined using an EPSG code, or of a <cite>wfs_srs</cite> / <cite>ows_srs</cite>
metadata at this level.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>At the map top-level the <cite>wfs_srs</cite> / <cite>ows_srs</cite> metadata value takes
precedence over the contents of the <a class="reference internal" href="../mapfile/projection.html#projection"><span class="std std-ref">PROJECTION</span></a> block.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The first advertised <cite>wfs_srs</cite> / <cite>ows_srs</cite> metadata value will be used
as the default projection of the bbox requested (unless explicitly set)
and will be using in spatial filtering the data for those layer types
that support spatial filtering. If the data is in a different projection,
the spatial filter BBOX will be projected to match the source data.</p>
</div>
<p>At the layer level, if both the <cite>wfs_srs</cite> / <cite>ows_srs</cite> metadata and the
PROJECTION object are set to different values, then the <cite>wfs_srs</cite> /
<cite>ows_srs</cite> metadata defines the projection to use in advertising this
layer (assuming there is no top-level map SRS), and the PROJECTION
value is assumed to be the projection of the data. So this means that
the data would be reprojected from the PROJECTION SRS to the one
defined in the <cite>wfs_srs</cite> / <cite>ows_srs</cite> metadata before being served to
WFS clients.</p>
<p>Confusing? As a rule of thumb, simply set the <cite>wfs_srs</cite> / <cite>ows_srs</cite> at
the map level (in web metadata) and never set the <cite>wfs_srs</cite> /
<cite>ows_srs</cite> metadata at the layer level and things will work fine for
most cases.</p>
</section>
<section id="axis-orientation-in-wfs-1-1-and-2-0">
<h3>Axis Orientation in WFS 1.1 and 2.0<a class="headerlink" href="#axis-orientation-in-wfs-1-1-and-2-0" title="Link to this heading">¶</a></h3>
<p>The axis order in previous versions of the WFS specifications was to
always use easting (x or lon ) and northing (y or lat).  WFS 1.1
specifies that, depending on the particular SRS, the x axis may or may
not be oriented West-to-East, and the y axis may or may not be
oriented South-to-North. The WFS portrayal operation shall account for
axis order. This affects some of the EPSG codes that were commonly
used such as ESPG:4326.  The current implementation makes sure that
coordinates returned to the server for the GetFeature request reflect
the inverse axis orders for EPSG codes between 4000 and 5000.</p>
<p>Regarding SRS, for WFS 2.0, it will always be reported with the <em>“urn:ogc:def:crs:EPSG::”</em>
syntax. This should likely also be done for WFS 1.1.0. The “wfs_return_srs_as_urn” web
metadata item can be set to “true” or “false” to enable or disable this behaviour.
It defaults to “true” for WFS 2.0 and to “false” for older versions.</p>
</section>
<section id="test-your-wfs-server">
<h3>Test Your WFS Server<a class="headerlink" href="#test-your-wfs-server" title="Link to this heading">¶</a></h3>
<section id="validate-the-capabilities-metadata">
<h4>Validate the Capabilities Metadata<a class="headerlink" href="#validate-the-capabilities-metadata" title="Link to this heading">¶</a></h4>
<p>OK, now that we’ve got a mapfile, we have to check the XML
capabilities returned by our server to make sure nothing is missing.</p>
<p>Using a web browser, access your server’s online resource URL to which
you add the parameter “REQUEST=GetCapabilities” to the end, e.g.</p>
<p><a class="reference external" href="https://demo.mapserver.org/cgi-bin/wfs?SERVICE=WFS&amp;VERSION=1.0.0&amp;REQUEST=GetCapabilities">https://demo.mapserver.org/cgi-bin/wfs?SERVICE=WFS&amp;VERSION=1.0.0&amp;REQUEST=GetCapabilities</a></p>
<p>If everything went well, you should have a complete XML capabilities
document.  Search it for the word “WARNING”… MapServer inserts XML
comments starting with “&lt;!–WARNING: “ in the XML output if it detects
missing mapfile parameters or metadata items. If you notice any
warning in your XML output then you have to fix all of them before you
can register your server with a WFS client, otherwise things are
likely not going to work.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The SERVICE parameter is required for all WFS requests.  When a
request happens, it is passed through WMS, WFS, and WCS in MapServer
(in that order) until one of the services respond to it.</p>
</div>
</section>
<section id="test-with-a-getfeature-request">
<h4>Test With a GetFeature Request<a class="headerlink" href="#test-with-a-getfeature-request" title="Link to this heading">¶</a></h4>
<p>OK, now that we know that our server can produce a valid XML
GetCapabilities response we should test the GetFeature request. Simply
adding
“SERVICE=WFS&amp;VERSION=1.0.0&amp;REQUEST=GetFeature&amp;TYPENAME=yourlayername1,yourlayername2”
to your server’s URL should return the GML associated with those
layers.</p>
<p><a class="reference external" href="https://demo.mapserver.org/cgi-bin/wfs?SERVICE=WFS&amp;VERSION=1.0.0&amp;REQUEST=getfeature&amp;TYPENAME=continents&amp;MAXFEATURES=100">https://demo.mapserver.org/cgi-bin/wfs?SERVICE=WFS&amp;VERSION=1.0.0&amp;REQUEST=getfeature&amp;TYPENAME=continents&amp;MAXFEATURES=100</a></p>
<p>For WFS 2.0, the same request would be :</p>
<p><a class="reference external" href="https://demo.mapserver.org/cgi-bin/wfs?SERVICE=WFS&amp;VERSION=2.0.0&amp;REQUEST=GetFeature&amp;TYPENAMES=continents&amp;COUNT=100">https://demo.mapserver.org/cgi-bin/wfs?SERVICE=WFS&amp;VERSION=2.0.0&amp;REQUEST=GetFeature&amp;TYPENAMES=continents&amp;COUNT=100</a></p>
</section>
<section id="test-with-a-real-client">
<h4>Test with a Real Client<a class="headerlink" href="#test-with-a-real-client" title="Link to this heading">¶</a></h4>
<p>If you have access to a WFS client, then register your new server’s
online resource with it and you should be off and running.</p>
<p>If you don’t have your own WFS client installed already, here are a
few pointers:</p>
<ul class="simple">
<li><p>MapServer itself can be used as a WFS client, see the <a class="reference internal" href="wfs_client.html#wfs-client"><span class="std std-ref">WFS
Client HowTo</span></a>.</p></li>
<li><p><a class="reference external" href="https://qgis.org/">QGIS</a> is a full GIS package which includes WFS client
support. (recommended)</p></li>
<li><p><a class="reference external" href="https://www.deegree.org/">Deegree</a> provides a WFS client.</p></li>
<li><p><a class="reference external" href="http://udig.refractions.net/">uDig</a> can add layers from WMS/WFS servers.</p></li>
</ul>
</section>
<section id="support-for-get-and-post-requests">
<h4>Support for GET and POST Requests<a class="headerlink" href="#support-for-get-and-post-requests" title="Link to this heading">¶</a></h4>
<p>Starting from version 4.2 MapServer supports XML-encoded POST requests
and GET requests. The default in MapServer is POST.</p>
</section>
<section id="support-for-filter-encoding">
<h4>Support for Filter Encoding<a class="headerlink" href="#support-for-filter-encoding" title="Link to this heading">¶</a></h4>
<p>Starting from version 4.2 MapServer supports Filter Encoding (FE) in
WFS GetFeature requests. For more information on the server side of
Filter Encoding see the <a class="reference internal" href="filter_encoding.html#filter-encoding"><span class="std std-ref">Filter Encoding HowTo</span></a>.</p>
</section>
<section id="support-for-sorting">
<h4>Support for Sorting<a class="headerlink" href="#support-for-sorting" title="Link to this heading">¶</a></h4>
<p>Sorting is supported for WFS 1.1 and 2.0. WFS clients can add a <cite>SORTBY</cite> parameter
to the query string to order results based on one or more attribute values
e.g. <cite>SORTBY=Field1 DESC,Field2 ASC</cite>.</p>
<p>The list of drivers that support sorting (sorting was implemented in
MapServer 7.0 unless otherwise specified):</p>
<ul class="simple">
<li><p>OGR</p></li>
<li><p>PostGIS</p></li>
<li><p>Oracle</p></li>
<li><p>MS SQL Server (version 7.4)</p></li>
</ul>
<p>The MapServer Shapefile provider does not support sorting. If this needed, you must
use the OGR Shapefile provider.</p>
<p>Further sorting implementation details can be found in <a class="reference internal" href="../development/rfc/ms-rfc-105.html#rfc105"><span class="std std-ref">MS RFC 105: Support for WFS 2.0 (server side)</span></a>.</p>
</section>
<section id="mapserver-wfs-extensions">
<h4>MapServer WFS Extensions<a class="headerlink" href="#mapserver-wfs-extensions" title="Link to this heading">¶</a></h4>
<dl class="simple" id="index-4">
<dt><strong>STARTINDEX</strong></dt><dd><p>This is standard in WFS 2.0, and also available as a MapServer extension for
WFS 1.0 and 1.1.
In addition to the MAXFEATURES=n keyword (replaced by COUNT in WFS
2.0), MapServer also supports a STARTINDEX=n keyword in WFS
GetFeature requests.  This can be used to skip some features in the
result set and in combination with MAXFEATURES (or COUNT) provides
for the ability to use WFS GetFeature to page through results.  Note
that STARTINDEX=0 means start with the first feature, skipping none.</p>
</dd>
</dl>
<dl class="simple" id="index-5">
<dt><strong>OUTPUTFORMAT</strong></dt><dd><p>Normally OUTPUTFORMAT should be GML2 for WFS 1.0 and either
“text/xml; subtype=gml/2.1.2” or “text/xml; subtype=gml/3.1.1” for
WFS 1.1.  For WFS 2.0, the default is “application/gml+xml; version=3.2”,
but GML2 and GML3 can also be requested.
However as an extension to the specification, it is also
possible to configure MapServer for a variety of other feature
output formats.  This is discussed in some detail in the <a class="reference internal" href="../output/ogr_output.html#ogr-output"><span class="std std-ref">OGR
Output</span></a> document.</p>
</dd>
</dl>
</section>
</section>
</section>
<section id="stored-queries-wfs-2-0">
<span id="index-7"></span><span id="index-6"></span><h2><a class="toc-backref" href="#contents" role="doc-backlink">Stored queries (WFS 2.0)</a><a class="headerlink" href="#stored-queries-wfs-2-0" title="Link to this heading">¶</a></h2>
<p>Stored queries are queries (&lt;wfs:Query&gt;) stored on the server,
potentially with parameters whose value can be assigned by the client
during a GetFeature request.</p>
<p>At WEB.METADATA level, a “wfs_storedqueries” metadata item can be
specified with a comma separated list of stored queries ids.</p>
<p>Then for each stored query id, “wfs_[storedqueryid]_inlinedef” must be
specified with a valid &lt;StoredQueryDescription&gt; as value. As it is not
always convenient to specify a inline XML content, it is also possible
to specify “wfs_{storedqueryid}_filedef” whose value is a filename
that contains the &lt;StoredQueryDescription&gt; XML content.</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="s">&quot;wfs_storedqueries&quot;</span>           <span class="s">&quot;bboxstoredquery&quot;</span>
<span class="s">&quot;wfs_bboxstoredquery_filedef&quot;</span> <span class="s">&quot;/data/bboxstoredquery.xml&quot;</span>
</pre></div>
</div>
<p>with /data/bboxstoredquery.xml containing for example:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;StoredQueryDescription</span><span class="w"> </span><span class="na">xmlns:xs=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span>
<span class="w">                        </span><span class="na">xmlns:gml=</span><span class="s">&quot;http://www.opengis.net/gml/3.2&quot;</span>
<span class="w">                        </span><span class="na">id=</span><span class="s">&quot;bboxstoredquery&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;Title&gt;</span>query<span class="w"> </span>title<span class="nt">&lt;/Title&gt;</span>
<span class="w">    </span><span class="nt">&lt;Abstract&gt;</span>query<span class="w"> </span>abstract<span class="nt">&lt;/Abstract&gt;</span>
<span class="w">    </span><span class="nt">&lt;Parameter</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;longmin&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;xs:double&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;Parameter</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;latmin&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;xs:double&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;Parameter</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;longmax&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;xs:double&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;Parameter</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;latmax&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;xs:double&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;QueryExpressionText</span><span class="w"> </span><span class="na">isPrivate=</span><span class="s">&quot;false&quot;</span>
<span class="w">                        </span><span class="na">language=</span><span class="s">&quot;urn:ogc:def:queryLanguage:OGC-WFS::WFS_QueryExpression&quot;</span>
<span class="w">                        </span><span class="na">xmlns:ms=</span><span class="s">&quot;http://mapserver.gis.umn.edu/mapserver&quot;</span>
<span class="w">                        </span><span class="na">returnFeatureTypes=</span><span class="s">&quot;ms:firstLayer ms:secondLayer&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;Query</span><span class="w"> </span><span class="na">xmlns:fes=</span><span class="s">&quot;http://www.opengis.net/fes/2.0&quot;</span><span class="w"> </span><span class="na">typeNames=</span><span class="s">&quot;ms:firstLayer&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;fes:Filter&gt;</span>
<span class="w">                </span><span class="nt">&lt;fes:BBOX&gt;</span>
<span class="w">                    </span><span class="nt">&lt;gml:Envelope</span><span class="w"> </span><span class="na">srsName=</span><span class="s">&quot;urn:ogc:def:crs:EPSG::4326&quot;</span><span class="nt">&gt;</span>
<span class="w">                        </span><span class="nt">&lt;gml:lowerCorner&gt;</span>${latmin}<span class="w"> </span>${longmin}<span class="nt">&lt;/gml:lowerCorner&gt;</span>
<span class="w">                        </span><span class="nt">&lt;gml:upperCorner&gt;</span>${latmax}<span class="w"> </span>${longmax}<span class="nt">&lt;/gml:upperCorner&gt;</span>
<span class="w">                    </span><span class="nt">&lt;/gml:Envelope&gt;</span>
<span class="w">                </span><span class="nt">&lt;/fes:BBOX&gt;</span>
<span class="w">            </span><span class="nt">&lt;/fes:Filter&gt;</span>
<span class="w">        </span><span class="nt">&lt;/Query&gt;</span>
<span class="w">        </span><span class="nt">&lt;Query</span><span class="w"> </span><span class="na">xmlns:fes=</span><span class="s">&quot;http://www.opengis.net/fes/2.0&quot;</span><span class="w"> </span><span class="na">typeNames=</span><span class="s">&quot;ms:secondLayer&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;fes:Filter&gt;</span>
<span class="w">                </span><span class="nt">&lt;fes:BBOX&gt;</span>
<span class="w">                    </span><span class="nt">&lt;gml:Envelope</span><span class="w"> </span><span class="na">srsName=</span><span class="s">&quot;urn:ogc:def:crs:EPSG::4326&quot;</span><span class="nt">&gt;</span>
<span class="w">                        </span><span class="nt">&lt;gml:lowerCorner&gt;</span>${latmin}<span class="w"> </span>${longmin}<span class="nt">&lt;/gml:lowerCorner&gt;</span>
<span class="w">                        </span><span class="nt">&lt;gml:upperCorner&gt;</span>${latmax}<span class="w"> </span>${longmax}<span class="nt">&lt;/gml:upperCorner&gt;</span>
<span class="w">                    </span><span class="nt">&lt;/gml:Envelope&gt;</span>
<span class="w">                </span><span class="nt">&lt;/fes:BBOX&gt;</span>
<span class="w">            </span><span class="nt">&lt;/fes:Filter&gt;</span>
<span class="w">        </span><span class="nt">&lt;/Query&gt;</span>
<span class="w">    </span><span class="nt">&lt;/QueryExpressionText&gt;</span>
<span class="nt">&lt;/StoredQueryDescription&gt;</span>
</pre></div>
</div>
<p>A corresponding valid GetFeature request can be:</p>
<p>REQUEST=GetFeature&amp;STOREDQUERY_ID=bboxstoredquery&amp;LONGMIN=2&amp;LATMIN=49&amp;LONGMAX=3&amp;LATMAX=50</p>
<section id="predefined-urn-ogc-def-query-ogc-wfs-getfeaturebyid-stored-query">
<h3>Predefined <a class="reference external" href="urn:ogc:def:query:OGC-WFS::GetFeatureById">urn:ogc:def:query:OGC-WFS::GetFeatureById</a> stored query<a class="headerlink" href="#predefined-urn-ogc-def-query-ogc-wfs-getfeaturebyid-stored-query" title="Link to this heading">¶</a></h3>
<p>WFS 2.0 defines a mandatory
<em>“urn:ogc:def:query:OGC-WFS::GetFeatureById”</em> stored query.  This query
accept a ID parameter whose value must be a feature id.</p>
<p>A valid request is:
REQUEST=GetFeature&amp;STOREDQUERY_ID=urn:ogc:def:query:OGC-WFS::GetFeatureById&amp;ID=mylayer.3</p>
<p>The definition hardcoded in MapServer is:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;StoredQueryDescription</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;urn:ogc:def:query:OGC-WFS::GetFeatureById&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;Title&gt;</span>Get<span class="w"> </span>feature<span class="w"> </span>by<span class="w"> </span>identifier<span class="nt">&lt;/Title&gt;</span>
<span class="w">  </span><span class="nt">&lt;Abstract&gt;</span>Returns<span class="w"> </span>the<span class="w"> </span>single<span class="w"> </span>feature<span class="w"> </span>whose<span class="w"> </span>value<span class="w"> </span>is<span class="w"> </span>equal<span class="w"> </span>to<span class="w"> </span>the<span class="w"> </span>specified<span class="w"> </span>value<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>ID<span class="w"> </span>argument<span class="nt">&lt;/Abstract&gt;</span>
<span class="w">  </span><span class="nt">&lt;Parameter</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;ID&quot;</span><span class="w"> </span><span class="na">xmlns:xs=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;xs:string&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;QueryExpressionText</span><span class="w"> </span><span class="na">isPrivate=</span><span class="s">&quot;true&quot;</span>
<span class="w">        </span><span class="na">language=</span><span class="s">&quot;urn:ogc:def:queryLanguage:OGC-WFS::WFS_QueryExpression&quot;</span>
<span class="w">        </span><span class="na">returnFeatureTypes=</span><span class="s">&quot;&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;Query</span><span class="w"> </span><span class="na">xmlns:fes=</span><span class="s">&quot;http://www.opengis.net/fes/2.0&quot;</span><span class="w"> </span><span class="na">typeNames=</span><span class="s">&quot;?&quot;</span><span class="nt">&gt;</span>
<span class="w">      </span><span class="nt">&lt;fes:Filter&gt;</span>
<span class="w">        </span><span class="nt">&lt;fes:ResourceId</span><span class="w"> </span><span class="na">rid=</span><span class="s">&quot;${ID}&quot;</span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;/fes:Filter&gt;</span>
<span class="w">    </span><span class="nt">&lt;/Query&gt;</span>
<span class="w">  </span><span class="nt">&lt;/QueryExpressionText&gt;</span>
<span class="nt">&lt;/StoredQueryDescription&gt;</span>
</pre></div>
</div>
<p>Comparing to a more standard stored query description, there are 2
oddities : The value of the “returnFeatureTypes” attribute is replaced
at runtime by the name of the valid WFS layers of the mapfile (when
issuing the response document to DescribeStoredQueries request). And
the value of the typeNames attribute is deduced at runtime from the
value of the passed ID parameter.</p>
<p>It is possible to override this hardcoded definition by a custom one
(for example to provide alternate values for other languages) by
defining <em>“wfs_urn:ogc:def:query:OGC-WFS::GetFeatureById_inlinedef”</em> or
<em>“wfs_urn:ogc:def:query:OGC-WFS::GetFeatureById_filedef”</em>.  The value of
&lt;QueryExpressionText&gt; attributes and child elements must however be
strictly identical to the hard-coded definition for correct execution.</p>
<p>A GetFeature using <em>“urn:ogc:def:query:OGC-WFS::GetFeatureById”</em> seems to
be identical to a GetFeature with a RESOURCEID parameter, but there is
a difference. GetFeatureById returns the feature directly as the
response :</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&#39;1.0&#39; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="nt">&lt;ms:province</span><span class="w"> </span><span class="na">gml:id=</span><span class="s">&quot;province.977&quot;</span><span class="w"> </span><span class="na">xmlns:ms=</span><span class="s">&quot;http://mapserver.gis.umn.edu/mapserver&quot;</span>
<span class="w">    </span><span class="na">xmlns:gml=</span><span class="s">&quot;http://www.opengis.net/gml/3.2&quot;</span>
<span class="w">    </span><span class="na">xmlns:wfs=</span><span class="s">&quot;http://www.opengis.net/wfs/2.0&quot;</span>
<span class="w">    </span><span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
<span class="w">    </span><span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://mapserver.gis.umn.edu/mapserver</span>
<span class="s">      http://localhost/path/to/wfs_simple?myparam=something&amp;amp;</span>
<span class="s">        SERVICE=WFS&amp;amp;VERSION=2.0.0&amp;amp;REQUEST=DescribeFeatureType&amp;amp;</span>
<span class="s">        TYPENAME=province&amp;amp;</span>
<span class="s">        OUTPUTFORMAT=application%2Fgml%2Bxml%3B%20version%3D3.2</span>
<span class="s">      http://www.opengis.net/wfs/2.0</span>
<span class="s">      http://schemas.opengis.net/wfs/2.0/wfs.xsd</span>
<span class="s">      http://www.opengis.net/gml/3.2</span>
<span class="s">      http://schemas.opengis.net/gml/3.2.1/gml.xsd&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;gml:boundedBy&gt;</span>
<span class="w">  </span><span class="nt">&lt;gml:Envelope</span><span class="w"> </span><span class="na">srsName=</span><span class="s">&quot;urn:ogc:def:crs:EPSG::4326&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;gml:lowerCorner&gt;</span>47.76789<span class="w"> </span>-61.51051<span class="nt">&lt;/gml:lowerCorner&gt;</span>
<span class="w">  </span><span class="nt">&lt;gml:upperCorner&gt;</span>47.79644<span class="w"> </span>-61.45764<span class="nt">&lt;/gml:upperCorner&gt;</span>
<span class="w">  </span><span class="nt">&lt;/gml:Envelope&gt;</span>
<span class="nt">&lt;/gml:boundedBy&gt;</span>
<span class="nt">&lt;ms:msGeometry&gt;</span>
<span class="w">  </span><span class="nt">&lt;gml:Polygon</span><span class="w"> </span><span class="na">gml:id=</span><span class="s">&quot;province.977.1&quot;</span><span class="w"> </span><span class="na">srsName=</span><span class="s">&quot;urn:ogc:def:crs:EPSG::4326&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;gml:exterior&gt;</span>
<span class="w">      </span><span class="nt">&lt;gml:LinearRing&gt;</span>
<span class="w">      </span><span class="nt">&lt;gml:posList</span><span class="w"> </span><span class="na">srsDimension=</span><span class="s">&quot;2&quot;</span><span class="nt">&gt;</span>47.77424<span class="w"> </span>-61.51051<span class="w"> </span>47.78860<span class="w"> </span>-61.50894
<span class="w">        </span>47.79644<span class="w"> </span>-61.49272<span class="w"> </span>47.78743<span class="w"> </span>-61.45764<span class="w"> </span>47.76789<span class="w"> </span>-61.45998<span class="w"> </span>47.76961
<span class="w">        </span>-61.48350<span class="w"> </span>47.77424<span class="w"> </span>-61.51051<span class="w"> </span><span class="nt">&lt;/gml:posList&gt;</span>
<span class="w">      </span><span class="nt">&lt;/gml:LinearRing&gt;</span>
<span class="w">    </span><span class="nt">&lt;/gml:exterior&gt;</span>
<span class="w">  </span><span class="nt">&lt;/gml:Polygon&gt;</span>
<span class="nt">&lt;/ms:msGeometry&gt;</span>
<span class="nt">&lt;/ms:province&gt;</span>
</pre></div>
</div>
</section>
</section>
<section id="reference-section">
<h2><a class="toc-backref" href="#contents" role="doc-backlink">Reference Section</a><a class="headerlink" href="#reference-section" title="Link to this heading">¶</a></h2>
<p>The following metadata are available in the setup of the WFS Server
mapfile:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Each of the metadata below can also be referred to as ‘ows_*’
instead of ‘wfs_*’.  MapServer tries the ‘wfs_*’ metadata first, and
if not found it tries the corresponding ‘ows_*’ name. Using this
reduces the amount of duplication in mapfiles that support multiple
OGC interfaces since “ows_*” metadata can be used almost everywhere
for common metadata items shared by multiple OGC interfaces.</p>
</div>
<section id="web-object-metadata">
<span id="index-8"></span><h3>Web Object Metadata<a class="headerlink" href="#web-object-metadata" title="Link to this heading">¶</a></h3>
<p id="index-10"><span id="index-9"></span><strong>ows_allowed_ip_list</strong> (or wfs_allowed_ip_list)</p>
<ul>
<li><p><em>Description:</em> (Optional) A list of IP addresses that will be
allowed access to the service.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">METADATA</span>
  <span class="s2">&quot;ows_allowed_ip_list&quot;</span> <span class="s2">&quot;123.45.67.89 11.22.33.44&quot;</span>
<span class="n">END</span>
</pre></div>
</div>
</li>
</ul>
<p id="index-12"><span id="index-11"></span><strong>ows_denied_ip_list</strong> (or wfs_denied_ip_list)</p>
<ul>
<li><p><em>Description:</em> (Optional) A list of IP addresses that will be denied
access to the service.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">METADATA</span>
  <span class="s2">&quot;ows_denied_ip_list&quot;</span> <span class="s2">&quot;123.45.67.89 11.22.33.44&quot;</span>
<span class="n">END</span>
</pre></div>
</div>
</li>
</ul>
<dl class="simple" id="index-13">
<dt><strong>ows_schemas_location</strong></dt><dd><p>(Optional) (Note the name ows_schemas_location and not wfs/_…
this is because all OGC Web Services (OWS) use the same metadata)
Root of the web tree where the family of OGC WFS XMLSchema files are
located. This must be a valid URL where the actual .xsd files are
located if you want your WFS output to validate in a validating XML
parser. Default is <a class="reference external" href="http://schemas.opengis.net">http://schemas.opengis.net</a>.</p>
</dd>
</dl>
<dl class="simple" id="index-14">
<dt><strong>ows_updatesequence</strong></dt><dd><p>(Optional) The updateSequence parameter can be used for maintaining
the consistency of a client cache of the contents of a service
metadata document. The parameter value can be an integer, a
timestamp in [ISO 8601:2000] format, or any other number or string.</p>
</dd>
</dl>
<dl id="index-15">
<dt><strong>wfs_abstract</strong></dt><dd><p>(Optional) Descriptive narrative for more information about the
server.</p>
<p>WFS TAG Name: Abstract (WFS 1.0.0, sect. 12.3.3)</p>
</dd>
</dl>
<dl id="index-16">
<dt><strong>wfs_accessconstraints</strong></dt><dd><p>(Optional) Text describing any access constraints imposed by the
service provider on the WFS or data retrieved from this service.</p>
<p>WFS TAG Name: Accessconstraints (WFS 1.0.0, sect. 12.3.3)</p>
</dd>
</dl>
<dl id="index-17">
<dt><strong>wfs_compute_number_matched</strong></dt><dd><p>(Optional, WFS 2.0 only) When this metadata item is set to “true”,
the server will determine the number of features that match the
GetFeature request and return it in the ‘numberMatched’ attribute of
the &lt;FeatureCollection&gt; element in the response. Computing that
number might take a very long time, so it is strongly encouraged to
<em>NOT</em> define this item. When it is not defined, the ‘numberMatched’
attribute is set to “unknown”.</p>
<p>See “wfs_maxfeatures_ignore_for_resulttype_hits” for a similar setting
affecting resultType=hits GetFeature request.</p>
</dd>
</dl>
<dl id="index-18">
<dt><strong>wfs_enable_request</strong> (or <strong>ows_enable_request</strong>)</dt><dd><p>Space separated list of requests to enable.  The default is none.
The following requests can be enabled: <cite>GetCapabilities</cite>,
<cite>GetFeature</cite> and <cite>DescribeFeatureType</cite>.  A “!” in front of a request
will disable the request.  “*” enables all requests.</p>
<p><em>Examples:</em></p>
<p>To enable only <cite>GetCapabilities</cite> and <cite>GetFeature</cite>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;wfs_enable_request&quot;</span> <span class="s2">&quot;GetCapabilities GetFeature&quot;</span>
</pre></div>
</div>
<p>To enable all requests except <cite>GetCapabilities</cite></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;wfs_enable_request&quot;</span> <span class="s2">&quot;* !GetCapabilities&quot;</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="simple" id="index-19">
<dt><strong>wfs_feature_collection</strong></dt><dd><p>Replaces the default name of the feature-containing element
(&lt;msFeatureCollection&gt;) with a user-defined value.</p>
</dd>
</dl>
<dl class="simple" id="index-20">
<dt><strong>wfs_features_cache_count</strong></dt><dd><p>(Optional, since MapServer 7.2) Maximum number of features retrieved during
the first query pass that should be cached, so as not to be asked again to
the datasource. This might be set to the same value as wfs_maxfeatures, but
not necessarily. If wfs_features_cache_size is also set, the most limiting
will be honoured.
Note: this is an advanced setting.</p>
</dd>
</dl>
<dl class="simple" id="index-21">
<dt><strong>wfs_features_cache_size</strong></dt><dd><p>(Optional, since MapServer 7.2) Maximum amount of RAM allowed to cache
features during the first query pass, so as not to be asked again to
the datasource when geneating the GML or OGR output.
If wfs_features_cache_count   is also set, the most limiting will be honoured.
By default the value is in bytes, unless the “ MB” suffix is specified.
Note: this is an advanced setting.</p>
</dd>
</dl>
<dl id="index-22">
<dt><strong>wfs_fees</strong></dt><dd><p>(Optional) Any fees imposed by the service provider for usage of
this service or for data retrieved from the WFS.</p>
<p>WFS TAG Name: Fees (WFS 1.0.0, sect. 12.3.3)</p>
</dd>
</dl>
<dl id="index-23">
<dt><strong>wfs_geometry_precision</strong></dt><dd><p>(Optional, since MapServer 8.0) Specifies the precision of
the geometry coordinates in the generated GML, where precision is
the number of decimal places.  This affects WFS requests using
the built-in GML2/GML3 output (specifying a different OUTPUTFORMAT
will override this setting).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>setting <em>wfs_geometry_precision</em> at the LAYER-level will override
any value set here in the WEB metadata.</p>
</div>
</dd>
</dl>
<dl class="simple" id="index-24">
<dt><strong>wfs_getcapabilities_version</strong></dt><dd><p>(Optional) Default version to use for GetCapabilities requests that
do not have a version parameter.  If not set, the latest supported
version will be returned. As of MapServer 7.0, this default version is “2.0.0”.
Valid values are “1.0.0”, “1.1.0” and “2.0.0”.</p>
</dd>
</dl>
<dl id="index-25">
<dt><strong>wfs_keywordlist</strong></dt><dd><p>(Optional) List of words to aid catalog searching.</p>
<p>WFS TAG Name: Keyword (WFS 1.0.0, sect. 12.3.3)</p>
</dd>
</dl>
<p id="index-26"><strong>wfs_languages</strong></p>
<ul class="simple">
<li><p><em>Description:</em> (Optional) A comma-separated list of supported languages. For
details please refer to the section <a class="reference internal" href="inspire_dl.html#inspire-dl-multi-language-support"><span class="std std-ref">Multi-language support for certain capabilities fields</span></a>
in the INSPIRE Download Service documentation.</p></li>
</ul>
<dl class="simple" id="index-27">
<dt><strong>wfs_maxfeatures</strong></dt><dd><p>(Optional) The maximum and default number of elements to be returned
by the WFS server.  If the user sets the ‘maxfeatures’ parameter in
a GetFeatureRequest, his value will be used, provided it does not
exceed wfs_maxfeatures. If wfs_maxfeatures is not specified, the
server will return all the features that match the query, without
limit, which may make the server busy for a long time when layers
with big number of features are served.  Sensible values are
integers greater than 0.  If 0 is specified, no features will be
returned. In WFS 2.0, this item is used to fill the “CountDefault”
parameter of the response document to a GetCapabilities request, so
that clients are aware of the server limit.
See also the “wfs_maxfeatures_ignore_for_resulttype_hits” item.</p>
</dd>
</dl>
<dl id="index-28">
<dt><strong>wfs_maxfeatures_ignore_for_resulttype_hits</strong></dt><dd><p>(Optional, added in MapServer 7.2) Controls whether the limit set by
“wfs_maxfeatures” is also taken into account in resultType=hits GetFeature requests.</p>
<p>See “resultType parameter” chapter (<a class="reference external" href="https://portal.ogc.org/files/?artifact_id=39967">OGC WFS 2.0 specification</a>, sect. 7.6.3.6)</p>
<p>When setting this item to “false”, the limit set by “wfs_maxfeatures” will also
be taken into account when processing a resultType=hits GetFeature request, that is
to say the number of hits returned will not be greater than wfs_maxfeatures. This is
the behaviour in MapServer version prior to 7.2, and also the general default behaviour
in later versions. Unless if all the layers that are queried are PostGIS layers,
in which case wfs_maxfeatures is not taken into account when computing the number of hits.
The item may be explicitly set to “true” so that wfs_maxfeatures is not taken
into account when computing the number of hits (for any layer type), which may exhibit
performance issues for large layers and/ or backends with slow access.</p>
<p>This item has no effect if wfs_maxfeatures is not set.</p>
</dd>
</dl>
<dl class="simple" id="index-29">
<dt><strong>wfs_namespace_prefix</strong></dt><dd><p>(Optional) User defined namespace prefix to be used in the response
of a WFS GetFeature request.  E.g.  “wfs_namespace_prefix”
“someprefix”.</p>
</dd>
</dl>
<dl class="simple" id="index-30">
<dt><strong>wfs_namespace_uri</strong></dt><dd><p>(Optional) User defined namespace URI to be used in the response of
a WFS GetFeature request. e.g. “wfs_namespace_uri”
“<a class="reference external" href="http://somehost/someurl">http://somehost/someurl</a>”.</p>
</dd>
</dl>
<dl id="index-31">
<dt><strong>wfs_onlineresource</strong></dt><dd><p>(Recommended) The URL prefix for HTTP GET requests.</p>
<p>WFS TAG Name: Onlineresource (WFS 1.0.0, sect. 12.3.3)</p>
</dd>
</dl>
<dl class="simple" id="index-32">
<dt><strong>wfs_return_srs_as_urn</strong></dt><dd><p>(Optional) Defaults to “true” in WFS 2.0, and “false” in WFS 1.0 and 1.1.
When set to “true”, SRS in GetFeature response documents will always be
reported with the <em>“urn:ogc:def:crs:EPSG::”</em> syntax.</p>
</dd>
</dl>
<dl class="simple" id="index-33">
<dt><strong>wfs_service_onlineresource</strong></dt><dd><p>(Optional) Top-level onlineresource URL. MapServer uses the
onlineresource metadata (if provided) in the following order:</p>
<ol class="arabic simple">
<li><p>wfs_service_onlineresource</p></li>
<li><p>ows_service_onlineresource</p></li>
<li><p>wfs_onlineresource (or automatically generated URL, see the
onlineresource section of this document)</p></li>
</ol>
</dd>
</dl>
<dl class="simple" id="index-34">
<dt><strong>wfs_srs</strong></dt><dd><p>(Recommended) The SRS to use for all layers in this server.
(e.g. EPSG:4326) See the note about the SRS rules in WFS.</p>
</dd>
</dl>
<dl class="simple" id="index-35">
<dt><strong>wfs_storedqueries</strong></dt><dd><p>(Optional, WFS 2.0) A comma separated list of stored queries IDs. The
definition of each of those stored queries must be given with
wfs_[storedqueryid]_inlinedef or wfs_[storedqueryid]_filedef</p>
</dd>
</dl>
<dl class="simple" id="index-36">
<dt><strong>wfs_[storedqueryid]_inlinedef</strong></dt><dd><p>(Optional, WFS 2.0) Inline XML content for a stored query listed in
wfs_storedqueries.  This content must be a valid
&lt;StoredQueryDescription&gt; document.</p>
</dd>
</dl>
<dl class="simple" id="index-37">
<dt><strong>wfs_[storedqueryid]_filedef</strong></dt><dd><p>(Optional, WFS 2.0) Name of a file that contains a valid
&lt;StoredQueryDescription&gt; document.</p>
</dd>
</dl>
<dl class="simple" id="index-38">
<dt><strong>wfs_title</strong></dt><dd><p>(Required) Human readable title to identify server.
WFS TAG Name: Title (WFS 1.0.0, sect. 12.3.3)</p>
</dd>
</dl>
</section>
<section id="layer-object">
<span id="index-39"></span><h3>Layer Object<a class="headerlink" href="#layer-object" title="Link to this heading">¶</a></h3>
<dl id="index-40">
<dt><strong>gml_constants</strong></dt><dd><p>(Optional) A comma delimited list of constants.  This option allows
you to define data that are not part of the underlying dataset and
add them to the GML output.  Many application schemas require
constants of one form or another.  To specify the value and type of
the constants use gml_[item name]_value and gml_[item name]_type.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;gml_constants&quot;</span> <span class="s2">&quot;const1,const2&quot;</span>
<span class="s2">&quot;gml_const1_type&quot;</span> <span class="s2">&quot;Character&quot;</span>
<span class="s2">&quot;gml_const1_value&quot;</span> <span class="s2">&quot;abc&quot;</span>
<span class="s2">&quot;gml_const2_type&quot;</span> <span class="s2">&quot;Integer&quot;</span>
<span class="s2">&quot;gml_const2_value&quot;</span> <span class="s2">&quot;999&quot;</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="simple" id="index-41">
<dt><strong>gml_default_items</strong></dt><dd><p>(Optional) A comma delimited list of items to put in a GetFeature response
document without explicit PROPERTYNAME, or “all”.
When a GetFeature request without explicit PROPERTYNAME is processed,
MapServer returns all items by default. As of MapServer 7.0, this behaviour
can be amended by specifying “gml_default_items” to specify which items (among the optional
ones) must be returned.</p>
</dd>
</dl>
<dl id="index-42">
<dt><strong>gml_exclude_items</strong></dt><dd><p>(Optional) A comma delimited list of items to exclude.  As of
MapServer 4.6, you can control how many attributes (fields) you
expose for your data layer with metadata. The previous behaviour was
simply to expose all attributes all of the time. The default is to
expose no attributes at all.  An example excluding a specific field
would be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;gml_include_items&quot;</span> <span class="s2">&quot;all&quot;</span>
<span class="s2">&quot;gml_exclude_items&quot;</span> <span class="s2">&quot;Phonenum&quot;</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="simple" id="index-43">
<dt><strong>gml_featureid</strong></dt><dd><p>(Required for MapServer 4.10) Field to be used for the ID of the
feature in the output GML.  wfs_featureid or ows_featureid can be
specified instead.</p>
</dd>
</dl>
<dl class="simple" id="index-44">
<dt><strong>gml_geometries</strong></dt><dd><p>Provides a name other than the default “msGeometry” for geometry
elements. The value is specified as a string to be used for geometry
element names.
“none” will exclude the geometry from MapServer integrated output
(OGR outputformat doesn’t honour this setting).</p>
</dd>
</dl>
<dl class="simple" id="index-45">
<dt><strong>gml_[geometry name]_occurances</strong></dt><dd><p>MapServer applies default values of 0 and 1, respectively, to the
“minOccurs” and “maxOccurs” attributes of geometry elements, as can
be seen in the preceding examples. To override these defaults, a
value is assigned to a gml_[geometry name]_occurances layer metadata
item, where again [geometry name] is the string value specified for
gml_geometries, and the value is a comma-delimited pair containing
the respective lower and upper bounds.</p>
</dd>
</dl>
<dl class="simple" id="index-46">
<dt><strong>gml_[geometry name]_type</strong></dt><dd><p>When employing gml_geometries, it is also necessary to specify the
geometry type of the layer. This is accomplished by providing a
value for gml_[geometry name]_type, where [geometry name] is the
string value specified for gml_geometries, and a value which is one
of:</p>
<ul class="simple">
<li><p>point</p></li>
<li><p>multipoint</p></li>
<li><p>line</p></li>
<li><p>multiline</p></li>
<li><p>polygon</p></li>
<li><p>multipolygon</p></li>
</ul>
</dd>
</dl>
<dl id="index-47">
<dt><strong>ows/wfs_geomtype</strong></dt><dd><p>(Optional, metadata shared with <a class="reference internal" href="../output/ogr_output.html#ogr-output"><span class="std std-ref">OGR output</span></a>). Set the geometry type of OGR layers
created from this MapServer LAYER.  One of “Point”, “LineString”, “Polygon”, “MultiPoint”,
“MultiLineString”, “MultiPolygon”, “GeometryCollection”, “Geometry”,
or “None”.  Most are fairly obvious, but “Geometry” can be used to represent
a mix of geometry types, and “None” is sometimes suitable for layers without
geometry.  Note that layers which are a mix of polygon and multipolygon
would normally have to be described as “Geometry”.  To produce 2.5D output
append “25D” to the geometry type (ie. “Polygon25D”).   Note that Z values
are only carried by MapServer if built with USE_POINT_Z_M support.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;ows_geomtype&quot;</span>  <span class="s2">&quot;Polygon25D&quot;</span>
</pre></div>
</div>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For GML output, only the “25D” suffix of the value is taken into account
to determine whether Z coordinates should be output or not.</p>
</div>
<dl class="simple">
<dt><strong>gml_groups</strong></dt><dd><p>(Optional) A comma delimited list of group names for the layer.</p>
</dd>
</dl>
<dl id="index-48">
<dt><strong>gml_[group name]_group</strong></dt><dd><p>(Optional) A comma delimited list of attributes in the group.  Here
is an example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;gml_include_items&quot;</span> <span class="s2">&quot;all&quot;</span>
<span class="s2">&quot;gml_groups&quot;</span>        <span class="s2">&quot;display&quot;</span>
<span class="s2">&quot;gml_display_group&quot;</span> <span class="s2">&quot;Name_e,Name_f&quot;</span>
</pre></div>
</div>
</dd>
</dl>
<dl id="index-49">
<dt><strong>gml_include_items</strong></dt><dd><p>(Optional) A comma delimited list of items to include, or keyword
“all”. As of MapServer 4.6, you can control how many attributes
(fields) you expose for your data layer with this metadata. The
previous behaviour was simply to expose all attributes all of the
time. You can enable full exposure by using the keyword “all”, such
as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;gml_include_items&quot;</span> <span class="s2">&quot;all&quot;</span>
</pre></div>
</div>
<p>You can specify a list of attributes (fields) for partial exposure,
such as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;gml_include_items&quot;</span> <span class="s2">&quot;Name,ID&quot;</span>
</pre></div>
</div>
<p>The new default behaviour is to expose no attributes at all.</p>
</dd>
</dl>
<dl id="index-50">
<dt><strong>gml_[item name]_alias</strong></dt><dd><p>(Optional) An alias for an attribute’s name.  The served GML will
refer to this attribute by the alias.  Here is an example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;gml_province_alias&quot;</span> <span class="s2">&quot;prov&quot;</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="simple" id="index-51">
<dt><strong>gml_[item name]_precision</strong></dt><dd><p>(Optional) Specifies the precision of the indicated field for
formats where this is significant, such as Shapefiles.  Precision is
the number of decimal places, and is only needed for “Real” fields.
Currently this is only used for OGR based output formats, not the
WFS GML2/GML3 output.</p>
</dd>
</dl>
<dl id="index-52">
<dt><strong>gml_[item name]_type</strong> (Optional)</dt><dd><p>Specifies the type of the attribute.  Valid values are the OGR data
types: Integer|Long|Real|Character|Date|Time|DateTime|Boolean.  MapServer translates
these to valid GML data types.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Long is to be used for 64-bit integers, starting with MapServer 7.0.1.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Time and DateTime have been added in MapServer 8. And since MapServer 8,
Date semantics is a date, without time, whereas in previous versions, it
was used indifferently for Date, Time or DateTime.</p>
</div>
</dd>
</dl>
<dl class="simple" id="index-53">
<dt><strong>gml_[item name]_value</strong></dt><dd><p>Used to specify values for gml_constants.</p>
</dd>
</dl>
<dl class="simple" id="index-54">
<dt><strong>gml_[item name]_width</strong></dt><dd><p>(Optional) Specifies the width of the indicated field for formats
where this is significant, such as Shapefiles.</p>
</dd>
</dl>
<dl class="simple" id="index-55">
<dt><strong>gml_mandatory_items</strong></dt><dd><p>(Optional) A comma delimited list of items to make mandatory, or keyword
“all”.
See gml_optional_items.</p>
</dd>
</dl>
<dl class="simple" id="index-56">
<dt><strong>gml_optional_items</strong></dt><dd><p>(Optional) A comma delimited list of items to make optional, or
keyword “all”.
By default, as of MapServer 7.0, all items are considered as
optional (minOccurs=”0” in the GML application schema). If
“gml_optional_items” is specified, only the listed elements will be
optional and other included items will be mandatory.  If there are
more mandatory items, it might be more convenient to specify
“gml_mandatory_items”.</p>
</dd>
</dl>
<dl id="index-57">
<dt><strong>gml_types</strong></dt><dd><p>(Optional) If this field is set to “auto” then the OGR, POSTGIS, ORACLESPATIAL,
MSSQL, and native Shapefiles input feature drivers will
automatically populate the type, width and precision metadata for
the layer based on the source file. This is mainly used by
OGR based output formats, as well as the WFS GML2/GML3 output to format
dates.</p>
<p>In addition the MSSQL driver also sets nillable=”true” in the output GML
for any database fields that accept NULLs.</p>
<p>This option can be overridden by setting
gml_[item name]_type for individual fields.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;gml_types&quot;</span>   <span class="s2">&quot;auto&quot;</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="simple" id="index-58">
<dt><strong>gml_xml_items</strong></dt><dd><p>(Optional) A comma delimited list of items that should not be
XML-encoded.</p>
</dd>
</dl>
<dl class="simple" id="index-59">
<dt><strong>ows_allowed_ip_list</strong></dt><dd><p>Same as ows_allowed_ip_list in the Web Object.</p>
</dd>
</dl>
<dl class="simple" id="index-60">
<dt><strong>ows_denied_ip_list</strong></dt><dd><p>Same as ows_denied_ip_list in the Web Object.</p>
</dd>
</dl>
<dl class="simple" id="index-61">
<dt><strong>wfs_abstract</strong></dt><dd><p>Same as wfs_abstract in the Web Object.</p>
</dd>
</dl>
<dl id="index-62">
<dt><strong>wfs_enable_request</strong> (or <strong>ows_enable_request</strong>)</dt><dd><p>Space separated list of requests to enable.  The default is none.
The following requests can be enabled: <cite>GetCapabilities</cite>,
<cite>GetFeature</cite> and <cite>DescribeFeatureType</cite>.  A “!” in front of a request
will disable the request.  “*” enables all requests.</p>
<p><em>Examples:</em></p>
<p>To enable only <cite>GetCapabilities</cite> and <cite>GetFeature</cite>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;wfs_enable_request&quot;</span> <span class="s2">&quot;GetCapabilities GetFeature&quot;</span>
</pre></div>
</div>
<p>To enable all requests except <cite>GetCapabilities</cite></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;wfs_enable_request&quot;</span> <span class="s2">&quot;* !GetCapabilities&quot;</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="simple" id="index-63">
<dt><strong>wfs_extent</strong></dt><dd><p>(Optional) Used for the layer’s BoundingBox tag for cases where it
is impossible (or very inefficient) for MapServer to probe the data
source to figure its extents. The value for this metadata is “minx
miny maxx maxy” separated by spaces, with the values in the layer’s
projection units. If wfs_extent is provided then it has priority and
MapServer will NOT try to read the source file’s extents.</p>
</dd>
</dl>
<dl class="simple" id="index-64">
<dt><strong>wfs_featureid</strong></dt><dd><p>(Required for MapServer 4.10) Field to be used for the ID of the
feature in the output GML.  gml_featureid or ows_featureid can be
specified instead.</p>
</dd>
</dl>
<dl id="index-65">
<dt><strong>wfs_geometry_precision</strong></dt><dd><p>(Optional, since MapServer 8.0) Specifies the precision of
the geometry coordinates in the generated GML, where precision
is the number of decimal places.  This affects WFS requests using
the built-in GML2/GML3 output (specifying a different OUTPUTFORMAT
will override this setting).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>setting <em>wfs_geometry_precision</em> here at the LAYER-level will override
any value set in the WEB <em>wfs_geometry_precision</em> metadata.</p>
</div>
</dd>
</dl>
<dl class="simple" id="index-66">
<dt><strong>wfs_getfeature_formatlist</strong></dt><dd><p>(Optional) Comma-separted list of formats that should be valid for a
GetFeature request.  If defined, only these formats are advertised
in the Capabilities document.</p>
</dd>
</dl>
<dl class="simple" id="index-67">
<dt><strong>wfs_keywordlist</strong></dt><dd><p>Same as wfs_keywordlist in the Web Object.</p>
</dd>
</dl>
<p id="index-68"><strong>wfs_metadataurl_about</strong></p>
<ul class="simple">
<li><p>(Optional) used to reference the aspect of the element which includes
the MetadataURL element that this metadata provides more information about.
The layer metadata wfs_metadataurl_href must also be specified.  Refer to
Table 11 of the <a class="reference external" href="https://portal.ogc.org/files/?artifact_id=39967">OGC WFS 2.0 specification</a> (WFS 2.0 only)</p></li>
<li><p>To output several MetadataURL elements, use <cite>wfs_metadataurl_list</cite></p></li>
</ul>
<p id="index-69"><strong>wfs_metadataurl_format</strong></p>
<ul class="simple">
<li><p>(Optional) The file format of the metadata record. Valid values are
“XML”, “SGML”, or “HTML”. The layer metadata wfs_metadataurl_type
and wfs_metadataurl_href must also be specified.  Refer to section
12.3.5 of the <a class="reference external" href="https://portal.ogc.org/files/?artifact_id=7176">WFS 1.0.0 spec</a> (unused for WFS 2.0).</p></li>
<li><p>To output several MetadataURL elements, use <cite>wfs_metadataurl_list</cite></p></li>
</ul>
<p id="index-70"><strong>wfs_metadataurl_href</strong></p>
<ul class="simple">
<li><p>(Optional) The URL to the layer’s metadata. The layer metadata
wfs_metadataurl_type and wfs_metadataurl_format for WFS 1.0 and 1.1, or
wfs_metadataurl_about for WFS 2.0 may also be specified.
Refer to section 12.3.5 of the <a class="reference external" href="https://portal.ogc.org/files/?artifact_id=7176">WFS 1.0.0 spec</a> and
Table 11 of the <a class="reference external" href="https://portal.ogc.org/files/?artifact_id=39967">OGC WFS 2.0 specification</a></p></li>
<li><p>To output several MetadataURL elements, use <cite>wfs_metadataurl_list</cite></p></li>
</ul>
<p id="index-71"><strong>wfs_metadataurl_list</strong></p>
<ul>
<li><p>(Optional) Space-separated list of parts of metadata keys,
to be able to specify several MetadataURL. If the value of wfs_metadataurl_list
is “foo bar”, then wfs_metadataurl_foo_href, wfs_metadataurl_foo_format,
wfs_metadataurl_foo_type, wfs_metadataurl_foo_about,
wfs_metadataurl_bar_href, wfs_metadataurl_bar_format,
wfs_metadataurl_bar_type, wfs_metadataurl_bar_about
will be queried with the semantics of the
wfs_metadataurl_href, wfs_metadataurl_format, wfs_metadataurl_type and
wfs_metadataurl_about items.</p>
<p>Example:</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="s">&quot;wfs_metadataurl_list&quot;</span> <span class="s">&quot;xml html&quot;</span>

<span class="s">&quot;wfs_metadataurl_xml_format&quot;</span> <span class="s">&quot;text/xml&quot;</span>
<span class="s">&quot;wfs_metadataurl_xml_type&quot;</span> <span class="s">&quot;TC211&quot;</span>
<span class="s">&quot;wfs_metadataurl_xml_href&quot;</span> <span class="s">&quot;http://example.com/testXML&quot;</span>
<span class="s">&quot;wfs_metadataurl_xml_about&quot;</span> <span class="s">&quot;about XML&quot;</span>

<span class="s">&quot;wfs_metadataurl_html_format&quot;</span> <span class="s">&quot;text/html&quot;</span>
<span class="s">&quot;wfs_metadataurl_html_type&quot;</span> <span class="s">&quot;TC211&quot;</span>
<span class="s">&quot;wfs_metadataurl_html_href&quot;</span> <span class="s">&quot;http://example.com/testHTML&quot;</span>
<span class="s">&quot;wfs_metadataurl_html_about&quot;</span> <span class="s">&quot;about HTML&quot;</span>
</pre></div>
</div>
</li>
<li><div class="versionadded">
<p><span class="versionmodified added">New in version 8.0.</span></p>
</div>
</li>
</ul>
<p id="index-72"><strong>wfs_metadataurl_type</strong></p>
<ul class="simple">
<li><p>(Optional) The standard to which the metadata complies. Currently
only two types are valid: “TC211” which refers to [ISO 19115], and
“FGDC” which refers to [FGDC CSDGM]. The layer metadata
wfs_metadataurl_format and wfs_metadataurl_href must also be
specified.  Refer to section 12.3.5 of the <a class="reference external" href="https://portal.ogc.org/files/?artifact_id=7176">WFS 1.0.0 spec</a> (unused for WFS 2.0).</p></li>
<li><p>To output several MetadataURL elements, use <cite>wfs_metadataurl_list</cite></p></li>
</ul>
<dl class="simple" id="index-73">
<dt><strong>wfs_srs</strong></dt><dd><p>If there is no SRS defined at the top-level in the mapfile then this
SRS will be used to advertize this feature type (layer) in the
capabilities. See the note about the SRS rules in WFS.</p>
</dd>
</dl>
<dl class="simple" id="index-74">
<dt><strong>wfs_title</strong></dt><dd><p>Same as wfs_title in the Web Object.</p>
</dd>
</dl>
<dl class="simple" id="index-75">
<dt><strong>wfs_use_default_extent_for_getfeature</strong></dt><dd><p>(Optional, since MapServer 7.0.4) Whether the MAP.EXTENT should be used in
request to datasources in the absence of other spatial filter. This is the
default behaviour, but this might affect performance in some use cases. In
those cases, setting this item to “false” will avoid he default spatial filter to
be appended to the request. This is only implemented for OGR datasources (since 7.0.4)
and MSSQL2008 connections (since 7.6)</p>
</dd>
</dl>
</section>
<section id="layer-metadata-api">
<h3>Layer Metadata API<a class="headerlink" href="#layer-metadata-api" title="Link to this heading">¶</a></h3>
<p>If <cite>wfs_metadataurl_href</cite> is not defined, MapServer will provide a link to
the Layer Metadata API for the given layer in the <cite>&lt;MetadataURL&gt;</cite> element.
See the <a class="reference internal" href="layer_metadata.html#layer-metadata"><span class="std std-ref">Layer Metadata API</span></a> documentation for more
information.</p>
</section>
</section>
<section id="to-do-items-and-known-limitations">
<h2><a class="toc-backref" href="#contents" role="doc-backlink">To-do Items and Known Limitations</a><a class="headerlink" href="#to-do-items-and-known-limitations" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>This is just a basic WFS (read-only): transaction requests are not
supported and probably never will given the nature of MapServer.
<a class="reference external" href="http://geoserver.org">GeoServer</a> or <a class="reference external" href="https://mapserver.org/tinyows/">TinyOWS</a> is recommended for those needing WFS-T
support.</p></li>
<li><p>WFS spec. seems to require that features of a given feature type
must all be of the same geometry type (point, line, polygon). This
works fine for shapefiles, but some data source formats supported by
MapServer allow mixed geometry types in a single layer and this goes
against the WFS spec. Suggestions on how to handle this are welcome
(send suggestions to the <a class="reference internal" href="../community/lists.html#lists"><span class="std std-ref">mapserver-dev mailing list</span></a>.</p></li>
</ul>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p>
<a href="../about.html" title="About">About</a><br>
<a href="../products.html" title="Products">Products</a><br>
<a href="../community/index.html" title="Community">Community</a><br>
<a href="../development/index.html" title="Development">Development</a><br>
<a href="../download.html" title="Downloads">Downloads</a><br>
<a href="../documentation.html" title="Documentation">Documentation</a><br>
<a href="../faq.html" title="FAQ">FAQ</a><br>
<a href="../psc.html" title="PSC">PSC</a><br>
<a href="https://twitter.com/mapserver_osgeo" title="Twitter">Twitter</a>
</p>
  <h3>Current Table Of Contents</h3>
  <ul>
<li><a class="reference internal" href="#">WFS Server</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a><ul>
<li><a class="reference internal" href="#wfs-related-information">WFS-Related Information</a></li>
<li><a class="reference internal" href="#software-requirements">Software Requirements</a></li>
<li><a class="reference internal" href="#versions-of-gml-supported">Versions of GML Supported</a></li>
</ul>
</li>
<li><a class="reference internal" href="#configuring-your-mapfile-to-serve-wfs-layers">Configuring your MapFile to Serve WFS layers</a><ul>
<li><a class="reference internal" href="#example-wfs-server-mapfile">Example WFS Server Mapfile</a></li>
<li><a class="reference internal" href="#rules-for-handling-srs-in-mapserver-wfs">Rules for Handling SRS in MapServer WFS</a></li>
<li><a class="reference internal" href="#axis-orientation-in-wfs-1-1-and-2-0">Axis Orientation in WFS 1.1 and 2.0</a></li>
<li><a class="reference internal" href="#test-your-wfs-server">Test Your WFS Server</a><ul>
<li><a class="reference internal" href="#validate-the-capabilities-metadata">Validate the Capabilities Metadata</a></li>
<li><a class="reference internal" href="#test-with-a-getfeature-request">Test With a GetFeature Request</a></li>
<li><a class="reference internal" href="#test-with-a-real-client">Test with a Real Client</a></li>
<li><a class="reference internal" href="#support-for-get-and-post-requests">Support for GET and POST Requests</a></li>
<li><a class="reference internal" href="#support-for-filter-encoding">Support for Filter Encoding</a></li>
<li><a class="reference internal" href="#support-for-sorting">Support for Sorting</a></li>
<li><a class="reference internal" href="#mapserver-wfs-extensions">MapServer WFS Extensions</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#stored-queries-wfs-2-0">Stored queries (WFS 2.0)</a><ul>
<li><a class="reference internal" href="#predefined-urn-ogc-def-query-ogc-wfs-getfeaturebyid-stored-query">Predefined urn:ogc:def:query:OGC-WFS::GetFeatureById stored query</a></li>
</ul>
</li>
<li><a class="reference internal" href="#reference-section">Reference Section</a><ul>
<li><a class="reference internal" href="#web-object-metadata">Web Object Metadata</a></li>
<li><a class="reference internal" href="#layer-object">Layer Object</a></li>
<li><a class="reference internal" href="#layer-metadata-api">Layer Metadata API</a></li>
</ul>
</li>
<li><a class="reference internal" href="#to-do-items-and-known-limitations">To-do Items and Known Limitations</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="inspire_dl.html" title="INSPIRE Download Service"
             >next</a> |</li>
        <li class="right" >
          <a href="layer_metadata.html" title="Layer Metadata"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../documentation.html" >MapServer 8.0.1 Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >OGC Support and Configuration</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">WFS Server</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; <a href="../copyright.html">Copyright</a> 2023, Open Source Geospatial Foundation.
      Last updated on 2023-12-22.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.5.
    </div>
  </body>
</html>