<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Map Context &#8212; MapServer 8.0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx.css?v=6c7b17ac" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=dd298242" />
    <link rel="stylesheet" type="text/css" href="../_static/ribbon.css?v=ea091bf4" />
    
    <script src="../_static/documentation_options.js?v=521b6f53"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    
    <link rel="icon" href="../_static/mapserver.ico"/>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="Layer Metadata" href="layer_metadata.html" />
    <link rel="prev" title="WMS Dimension" href="wms_dimension.html" /> 
  </head><body>


<!-- for main branch only, do not backport this -->

<table width="100%" style="width: 100%; background-color: white;">
  <tr>
    <td rowspan="2" style="padding: 10px 0px 10px 10px;">
      <a href="../index.html" title="Home"><img src="../_static/banner.png" alt="MapServer banner" border="0" /></a>
    </td>
    <td style="padding: 10px 10px 0px 0px; text-align: right; vertical-align: top;">
      <a href="../index.html" title="Home">Home</a> |
      <a href="../products.html" title="Products (MapServer core, MapCache, TinyOWS">Products</a> |
      <a href="https://github.com/mapserver/mapserver/issues/" title="Issue Tracker (MapServer core)">Issue Tracker</a> |
      <a href="../community/service_providers.html" title="Professional Service Providers">Service Providers</a> |      
      <a href="../faq.html" title="Frequently Asked Questions">FAQ</a> |
      <a href="https://twitter.com/mapserver_osgeo" title="Twitter" target="_blank">Twitter</a> |
      <a href="../download.html" title="Download Source or Binaries">Download </a> |
      <a class="badge" href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=KRJ2X44N3HA6U&source=url" target="_blank">
        <img src="https://img.shields.io/badge/donate-%E2%9D%A4%C2%A0-ff69b4.svg?style=flat" alt="Donate to MapServer">
      </a>
    </td>
  </tr>
  <tr>
    <td style="padding: 0px 10px 0px 0px; text-align: right; vertical-align: bottom;">
        <img src="../_static/flagicons/en.png" alt="en" title="en" border="0" width="18px" height="13px"/>
        
          <a href="../ar/ogc/mapcontext.html"><img src="../_static/flagicons/ar.png" alt="ar" title="ar" border="0" /></a>
        
        
          <a href="../de/ogc/mapcontext.html"><img src="../_static/flagicons/de.png" alt="de" title="de" border="0" /></a>
        
        
          <a href="../el/ogc/mapcontext.html"><img src="../_static/flagicons/el.png" alt="el" title="el" border="0" /></a>
        
        
          <a href="../es/ogc/mapcontext.html"><img src="../_static/flagicons/es.png" alt="es" title="es" border="0" /></a>
        
        
          <a href="../fr/ogc/mapcontext.html"><img src="../_static/flagicons/fr.png" alt="fr" title="fr" border="0" /></a>
        
        
          <a href="../id/ogc/mapcontext.html"><img src="../_static/flagicons/id.png" alt="id" title="id" border="0" /></a>
        
        
          <a href="../it/ogc/mapcontext.html"><img src="../_static/flagicons/it.png" alt="it" title="it" border="0" /></a>
        
        
          <a href="../ja/ogc/mapcontext.html"><img src="../_static/flagicons/ja.png" alt="ja" title="ja" border="0" /></a>
        
        
          <a href="../nl_NL/ogc/mapcontext.html"><img src="../_static/flagicons/nl_NL.png" alt="nl_NL" title="nl_NL" border="0" /></a>
        
        
          <a href="../pl/ogc/mapcontext.html"><img src="../_static/flagicons/pl.png" alt="pl" title="pl" border="0" /></a>
        
        
          <a href="../ru/ogc/mapcontext.html"><img src="../_static/flagicons/ru.png" alt="ru" title="ru" border="0" /></a>
        
        
          <a href="../sq/ogc/mapcontext.html"><img src="../_static/flagicons/sq.png" alt="sq" title="sq" border="0" /></a>
        
        
          <a href="../tr/ogc/mapcontext.html"><img src="../_static/flagicons/tr.png" alt="tr" title="tr" border="0" /></a>
        

    </td>
  </tr>
</table>


    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="layer_metadata.html" title="Layer Metadata"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="wms_dimension.html" title="WMS Dimension"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../documentation.html" >MapServer 8.0.1 Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">OGC Support and Configuration</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Map Context</a></li> 
      </ul>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="map-context">
<span id="index-0"></span><span id="id1"></span><h1><a class="toc-backref" href="#contents" role="doc-backlink">Map Context</a><a class="headerlink" href="#map-context" title="Link to this heading">¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd">Author<span class="colon">:</span></dt>
<dd class="field-odd"><p>Jeff McKenna</p>
</dd>
<dt class="field-even">Contact<span class="colon">:</span></dt>
<dd class="field-even"><p>jmckenna at gatewaygeomatics.com</p>
</dd>
<dt class="field-odd">Last Updated<span class="colon">:</span></dt>
<dd class="field-odd"><p>2019-11-21</p>
</dd>
</dl>
<nav class="contents" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#map-context" id="id2">Map Context</a></p>
<ul>
<li><p><a class="reference internal" href="#introduction" id="id3">Introduction</a></p></li>
<li><p><a class="reference internal" href="#implementing-a-web-map-context" id="id4">Implementing a Web Map Context</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="introduction">
<h2><a class="toc-backref" href="#contents" role="doc-backlink">Introduction</a><a class="headerlink" href="#introduction" title="Link to this heading">¶</a></h2>
<p>The term ‘map context’ comes from the Open Geospatial Constortium’s (OGC) <a class="reference external" href="https://www.ogc.org/standards/wmc">Web
Map Context Specification v1.0.0</a>, which coincides with the OGC <a class="reference external" href="https://www.ogc.org/standards/wms">Web Map
Server Specification (WMS) v1.1.1</a>. A map context is a XML document that
describes the appearance of layers from one or more WMS servers, and can be
transferred between clients while maintaining startup views, the state of the
view (and its layers), and storing additional layer information.</p>
<p>Support for OGC Web Map Context was added to MapServer in version 3.7/4.0.
This allows client applications to load and save a map configuration in a
standard XML format. MapServer can read context documents of versions 0.1.2,
0.1.4, 0.1.7, 1.0.0, 1.1.0 and can export contents in versions 0.1.4, 0.1.7,
1.0.0, 1.1.0. Web Map Context 1.1.0 support was added to MapServer 4.10</p>
<p>This document assumes that you are already familiar with certain aspects of
MapServer:</p>
<ul class="simple">
<li><p>MapServer application development and setting up <a class="reference internal" href="../mapfile/index.html#mapfile"><span class="std std-ref">mapfiles</span></a>.</p></li>
<li><p>Familiarity with the WMS spec would be an asset. Please see the following
section for links to associated sources.</p></li>
</ul>
<section id="links-to-wms-map-context-related-information">
<h3>Links to WMS / Map Context Related Information<a class="headerlink" href="#links-to-wms-map-context-related-information" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="wms_client.html#wms-client"><span class="std std-ref">MapServer WMS Client HowTo</span></a></p></li>
<li><p><a class="reference external" href="https://www.ogc.org/">Open Geospatial Consortium (OGC)</a> home page</p></li>
<li><p><a class="reference external" href="https://www.ogc.org/standards/wms">WMS 1.1.1 specification</a></p></li>
<li><p><a class="reference external" href="https://www.ogc.org/standards/wmc">Map Context 1.0.0 specification</a></p></li>
<li><p><a class="reference external" href="http://mapserver.github.io/ms-ogc-workshop/">MapServer OGC Web Services Workshop</a></p></li>
</ul>
</section>
</section>
<section id="implementing-a-web-map-context">
<h2><a class="toc-backref" href="#contents" role="doc-backlink">Implementing a Web Map Context</a><a class="headerlink" href="#implementing-a-web-map-context" title="Link to this heading">¶</a></h2>
<section id="special-build-considerations">
<h3>Special Build Considerations<a class="headerlink" href="#special-build-considerations" title="Link to this heading">¶</a></h3>
<p>Map Context support requires PROJ4, GDAL/OGR and PHP support libraries.</p>
<p>Build/install the above libraries on your system and then build MapServer with
the <em>‘–with-wmsclient –with-proj –with-ogr –with-gdal –with-php’</em>
configure options. Also make sure that your build uses the <em>USE_WMS_LYR</em> and
<em>USE_OGR</em> flags. For more details on MapServer compilation see the appropriate
HowTo: <a class="reference internal" href="../installation/unix.html#unix"><span class="std std-ref">Unix</span></a> / <a class="reference internal" href="../installation/win32.html#win32"><span class="std std-ref">Windows</span></a></p>
<p>Windows users can use <a class="reference external" href="https://ms4w.com">MS4W</a>, which is ready for Map Context use.</p>
</section>
<section id="map-context-mapfile">
<h3>Map Context Mapfile<a class="headerlink" href="#map-context-mapfile" title="Link to this heading">¶</a></h3>
<p>A map context document can ONLY contain WMS layers (e.g. CONNECTIONTYPE WMS).
Please refer to the <a class="reference internal" href="wms_client.html#wms-client"><span class="std std-ref">MapServer WMS Client HowTo</span></a> for more
information on declaring WMS layers.</p>
<section id="mapfile-metadata">
<h4>MapFile Metadata<a class="headerlink" href="#mapfile-metadata" title="Link to this heading">¶</a></h4>
<p>The following mapfile metadata are used by MapServer to handle map context information:</p>
<p>(Note that some parameters have width, height, format, and href, and some only
have format and href. This is because width and height are only used for images
and parameters that do not have them are text or html. For consistency with the
spec MapServer supports height and width for all parameters, but they should only
be used for images)</p>
</section>
<section id="web-object-metadata">
<h4>Web Object Metadata<a class="headerlink" href="#web-object-metadata" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p><em>ows_schemas_location</em> : Location of XML schema document. Default is
<a class="reference external" href="http://schemas.opengis.net">http://schemas.opengis.net</a>. See <a class="reference external" href="http://ogc.dmsolutions.ca">http://ogc.dmsolutions.ca</a> for an example
of a valid schema tree.</p></li>
<li><p><em>wms_abstract</em> : A blurb of text providing more information about the WMS server.</p></li>
<li><p><em>wms_address</em> : If provided must also then provide wms_addresstype,
wms_city, wms_stateorprovince, wms_postcode, and wms_country)</p></li>
<li><p><em>wms_addresstype</em> : If provided must also then provide wms_address,
wms_city, wms_stateorprovince, wms_postcode, and wms_country)</p></li>
<li><p><em>wms_city</em> : If provided must also then provide wms_address,
wms_addresstype, wms_stateorprovince, wms_postcode, and wms_country)</p></li>
<li><p><em>wms_contactelectronicmailaddress</em> : contact Email address.</p></li>
<li><p><em>wms_contactfacsimiletelephone</em> : contact facsimile telephone number.</p></li>
<li><p><em>wms_contactorganization</em> :</p></li>
<li><p><em>wms_contactperson</em> :</p></li>
<li><p><em>wms_contactposition</em> :</p></li>
<li><p><em>wms_contactvoicetelephone</em> : contact voice telephone number.</p></li>
<li><p><em>wms_context_fid</em> : the feature id of the context. Set to 0 when saving if not
specified.</p></li>
<li><p><em>wms_context_version</em> : the version of the map context specification.</p></li>
<li><p><em>wms_country</em> : If provided must also then provide wms_address, wms_city,
wms_stateorprovince, wms_postcode, and wms_addresstype.</p></li>
<li><p><em>wms_descriptionurl_format</em> : Format of the webpage which contains relevant
information to the view.</p></li>
<li><p><em>wms_descriptionurl_href</em> : Reference to a webpage which contains relevant
information to the view.</p></li>
<li><p><em>wms_keywordlist</em> : A comma-separated list of keywords or keyword phrases to
help catalog searching.</p></li>
<li><p><em>wms_logourl_width</em> : Width of the context logo.</p></li>
<li><p><em>wms_logourl_height</em> : Height of the context logo.</p></li>
<li><p><em>wms_logourl_format</em> : Format of the context logo.</p></li>
<li><p><em>wms_logourl_href</em> : Location of the context logo.</p></li>
<li><p><em>wms_postcode</em> : If provided must also then provide wms_address,
wms_city, wms_stateorprovince, wms_addresstype, and wms_country.</p></li>
<li><p><em>wms_stateorprovince</em> : If provided must also then provide
wms_address, wms_city, wms_addresstype, wms_postcode, and wms_country.</p></li>
<li><p><em>wms_title</em> : (<strong>Required</strong>) A human-readable name for this Layer (this metadata does not
exist beyond version 0.1.4)</p></li>
</ul>
</section>
<section id="layer-object-metadata">
<h4>Layer Object Metadata<a class="headerlink" href="#layer-object-metadata" title="Link to this heading">¶</a></h4>
<ul>
<li><p><em>wms_abstract</em> : A blurb of text providing more information about the WMS server.</p></li>
<li><p><em>wms_dataurl_href</em> : Link to an online resource where data corresponding to the
layer can be found.</p></li>
<li><p><em>wms_dataurl_format</em> : Format of the online resource where data corresponding
to the layer can be found.</p></li>
<li><p><em>wms_dimension</em> :</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 4.10.</span></p>
</div>
<p>Current dimension used.</p>
</li>
<li><p><em>wms_dimensionlist</em> :</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 4.10.</span></p>
</div>
<p>List of available dimensions.</p>
</li>
<li><p><em>wms_dimension_%s_default</em> :</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 4.10.</span></p>
</div>
<p>Default dimension value. MapServer will check
for wms_time and wms_timedefault metadata when this is not specified. %s =
the name of the dimension.</p>
</li>
<li><p><em>wms_dimension_%s_multiplevalues</em> :</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 4.10.</span></p>
</div>
<p>Multiple dimension values. %s = the name
of the dimension.</p>
</li>
<li><p><em>wms_dimension_%s_nearestvalue</em> :</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 4.10.</span></p>
</div>
<p>Nearest dimension value. The default value
is 0. %s = the name of the dimension.</p>
</li>
<li><p><em>wms_dimension_%s_units</em> :</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 4.10.</span></p>
</div>
<p>Units for the dimension values. The default value
is ISO8601. %s = the name of the dimension.</p>
</li>
<li><p><em>wms_dimension_%s_unitsymbol</em> :</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 4.10.</span></p>
</div>
<p>Symbol for dimension units. The default
value is t. %s = the name of the dimension.</p>
</li>
<li><p><em>wms_dimension_%s_uservalue</em> :</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 4.10.</span></p>
</div>
<p>User dimension value. MapServer will check
for wms_time and wms_timedefault metadata when this is not specified. %s =
the name of the dimension.</p>
</li>
<li><p><em>wms_format</em> : Current format used.</p></li>
<li><p><em>wms_formatlist</em> : List of available formats for this layer.</p></li>
<li><p><em>wms_metadataurl_href</em> : Link to an online resource where descriptive metadata
of the corresponding layer can be found.</p></li>
<li><p><em>wms_metadataurl_format</em> : Format of the online resource where descriptive
metadata of the corresponding layer can be found.</p></li>
<li><p><em>wms_name</em> : Name of the WMS layer on the server.</p></li>
<li><p><em>wms_onlineresource</em> : <strong>Required</strong> URL to access the server.</p></li>
<li><p><em>wms_server_version</em> : The version of the web map server specification.</p></li>
<li><p><em>wms_server_title</em> : The title of the web map server.</p></li>
<li><p><em>wms_stylelist</em> : Current style used.</p></li>
<li><p><em>wms_style_%s_legendurl_width</em> : Width of an image describing the style.
%s = the name of the style.</p></li>
<li><p><em>wms_style_%s_legendurl_height</em> : Height of an image describing the style.
%s = the name of the style.</p></li>
<li><p><em>wms_style_%s_legendurl_format</em> : Format of an image describing the style.
%s = the name of the style.</p></li>
<li><p><em>wms_style_%s_legendurl_href</em> : Location of an image describing the style.
%s = the name of the style.</p></li>
<li><p><em>wms_style_%s_sld</em> : URL to the SLD document of this style. %s = the name
of the style.</p></li>
<li><p><em>wms_style_%s_sld_body</em> : SLD_BODY document of this style. %s = the name of
the style.</p></li>
<li><p><em>wms_style_%s_title</em> : Title of the layer. %s = the name of the style.</p></li>
<li><p><em>wms_title</em> : (<strong>Required</strong>) A human-readable name for this Layer.</p></li>
</ul>
</section>
<section id="sample-map-context-mapfile">
<h4>Sample Map Context Mapfile<a class="headerlink" href="#sample-map-context-mapfile" title="Link to this heading">¶</a></h4>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span>    <span class="k">MAP</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span>    <span class="k">NAME</span> <span class="s">&quot;mapcontext&quot;</span>
<span class="linenos"> 4</span>    <span class="k">STATUS</span> <span class="nb">ON</span>
<span class="linenos"> 5</span>    <span class="k">SIZE</span> <span class="mi">400</span> <span class="mi">300</span>
<span class="linenos"> 6</span>    <span class="k">SYMBOLSET</span> <span class="s">&quot;../etc/symbols.txt&quot;</span>
<span class="linenos"> 7</span>    <span class="k">EXTENT</span> <span class="p">-</span><span class="mi">180</span> <span class="p">-</span><span class="mi">90</span> <span class="mi">180</span> <span class="mi">90</span>
<span class="linenos"> 8</span>    <span class="k">UNITS</span> <span class="nb">DD</span>
<span class="linenos"> 9</span>    <span class="k">SHAPEPATH</span> <span class="s">&quot;../data&quot;</span>
<span class="linenos">10</span>    <span class="k">IMAGECOLOR</span> <span class="mi">255</span> <span class="mi">255</span> <span class="mi">255</span>
<span class="linenos">11</span>    <span class="k">FONTSET</span> <span class="s">&quot;../etc/fonts.txt&quot;</span>
<span class="linenos">12</span>
<span class="linenos">13</span>
<span class="linenos">14</span>    <span class="c">#</span>
<span class="linenos">15</span>    <span class="c"># Start of web interface definition</span>
<span class="linenos">16</span>    <span class="c">#</span>
<span class="linenos">17</span>    <span class="k">WEB</span>
<span class="linenos">18</span>      <span class="k">IMAGEPATH</span> <span class="s">&quot;/ms4w/tmp/ms_tmp/&quot;</span>
<span class="linenos">19</span>      <span class="k">IMAGEURL</span> <span class="s">&quot;/ms_tmp/&quot;</span>
<span class="linenos">20</span>      <span class="k">METADATA</span>
<span class="linenos">21</span>        <span class="s">&quot;wms_abstract&quot;</span> <span class="s">&quot;Demo for map context document. Blah blah...&quot;</span>
<span class="linenos">22</span>        <span class="s">&quot;wms_title&quot;</span> <span class="s">&quot;Map Context demo&quot;</span>   <span class="c">#### REQUIRED</span>
<span class="linenos">23</span>      <span class="k">END</span>
<span class="linenos">24</span>    <span class="k">END</span>
<span class="linenos">25</span>
<span class="linenos">26</span>    <span class="k">PROJECTION</span>
<span class="linenos">27</span>      <span class="s">&quot;init=epsg:4326&quot;</span>
<span class="linenos">28</span>    <span class="k">END</span>
<span class="linenos">29</span>
<span class="linenos">30</span>    <span class="c">#</span>
<span class="linenos">31</span>    <span class="c"># Start of layer definitions</span>
<span class="linenos">32</span>    <span class="c">#</span>
<span class="linenos">33</span>
<span class="linenos">34</span>        <span class="k">LAYER</span>
<span class="linenos">35</span>          <span class="k">NAME</span> <span class="s">&quot;country_bounds&quot;</span>
<span class="linenos">36</span>          <span class="k">TYPE</span> <span class="nb">RASTER</span>
<span class="linenos">37</span>          <span class="k">STATUS</span> <span class="nb">ON</span>
<span class="linenos">38</span>          <span class="k">CONNECTION</span> <span class="s">&quot;https://demo.mapserver.org/cgi-bin/wms?&quot;</span>
<span class="linenos">39</span>          <span class="k">CONNECTIONTYPE</span> <span class="nb">WMS</span>
<span class="linenos">40</span>          <span class="k">METADATA</span>
<span class="linenos">41</span>            <span class="s">&quot;wms_title&quot;</span>                     <span class="s">&quot;World Country Boundaries&quot;</span>  <span class="c">#### REQUIRED</span>
<span class="linenos">42</span>            <span class="s">&quot;wms_onlineresource&quot;</span>            <span class="s">&quot;https://demo.mapserver.org/cgi-bin/wms?&quot;</span>  <span class="c">#### REQUIRED</span>
<span class="linenos">43</span>            <span class="s">&quot;wms_srs&quot;</span>                       <span class="s">&quot;EPSG:4326&quot;</span>
<span class="linenos">44</span>            <span class="s">&quot;wms_name&quot;</span>                      <span class="s">&quot;country_bounds&quot;</span>
<span class="linenos">45</span>            <span class="s">&quot;wms_server_version&quot;</span>            <span class="s">&quot;1.1.1&quot;</span>
<span class="linenos">46</span>            <span class="s">&quot;wms_format&quot;</span>                    <span class="s">&quot;image/gif&quot;</span>
<span class="linenos">47</span>            <span class="s">&quot;wms_dimensionlist&quot;</span>             <span class="s">&quot;time,width&quot;</span>
<span class="linenos">48</span>            <span class="s">&quot;wms_dimension&quot;</span>                 <span class="s">&quot;time&quot;</span>
<span class="linenos">49</span>            <span class="s">&quot;wms_dimension_time_unitsymbol&quot;</span> <span class="s">&quot;t&quot;</span>
<span class="linenos">50</span>            <span class="s">&quot;wms_dimension_time_units&quot;</span>      <span class="s">&quot;ISO8601&quot;</span>
<span class="linenos">51</span>            <span class="s">&quot;wms_dimension_time_uservalue&quot;</span>  <span class="s">&quot;1310&quot;</span>
<span class="linenos">52</span>            <span class="s">&quot;wms_dimension_time_default&quot;</span>    <span class="s">&quot;1310&quot;</span>
<span class="linenos">53</span>            <span class="s">&quot;wms_dimension_time_multiplevalues&quot;</span>  <span class="s">&quot;1310,1410&quot;</span>
<span class="linenos">54</span>            <span class="s">&quot;wms_dimension_time_nearestvalue&quot;</span>  <span class="s">&quot;0&quot;</span>
<span class="linenos">55</span>          <span class="k">END</span>
<span class="linenos">56</span>        <span class="k">END</span>
<span class="linenos">57</span>
<span class="linenos">58</span>    <span class="k">END</span> <span class="c"># Map File</span>
</pre></div>
</div>
</section>
</section>
<section id="testing-map-context-support">
<h3>Testing Map Context Support<a class="headerlink" href="#testing-map-context-support" title="Link to this heading">¶</a></h3>
<ol class="arabic">
<li><p>The first thing to do is to save your mapfile using the
saveMapContext function available from the <a class="reference internal" href="../mapscript/php/index.html#php-mapscript"><span class="std std-ref">PHP/MapScript</span></a> library. An example script is shown below:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">extension_loaded</span><span class="p">(</span><span class="s2">&quot;MapScript&quot;</span><span class="p">))</span> <span class="nb">dl</span><span class="p">(</span><span class="nx">MODULE</span><span class="p">);</span>
  <span class="nv">$oMap</span> <span class="o">=</span> <span class="nx">ms_newMapObj</span><span class="p">(</span><span class="s2">&quot;mapcontext.map&quot;</span><span class="p">);</span>
  <span class="nv">$oMap</span><span class="o">-&gt;</span><span class="na">saveMapContext</span><span class="p">(</span><span class="s2">&quot;mapcontext_output.xml&quot;</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre></div>
</div>
</li>
<li><p>Scan the XML output to look for <em>&lt;!– WARNING: … –&gt;</em> comments. Then make
the necessary changes to fix every warning that you encounter. At the end of
this you should have a mapfile compatible with the Map Context specification.</p></li>
<li><p>Now you can load your new Map Context document into an application using the
<em>loadMapContext</em> function from the PHP/MapScript library.</p></li>
</ol>
</section>
<section id="sample-map-context-document">
<h3>Sample Map Context Document<a class="headerlink" href="#sample-map-context-document" title="Link to this heading">¶</a></h3>
<p>The following is a sample Map Context document:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span>    <span class="cp">&lt;?xml version=&#39;1.0&#39; encoding=&quot;ISO-8859-1&quot; standalone=&quot;no&quot; ?&gt;</span>
<span class="linenos"> 2</span>    <span class="p">&lt;</span><span class="nt">ViewContext</span> <span class="na">version</span><span class="o">=</span><span class="s">&quot;1.1.0&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;mapcontext&quot;</span> <span class="na">xmlns:xsi</span><span class="o">=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class="na">xmlns:ogc</span><span class="o">=</span><span class="s">&quot;http://www.opengis.net/ogc&quot;</span> <span class="na">xmlns:xlink</span><span class="o">=</span><span class="s">&quot;http://www.w3.org/1999/xlink&quot;</span> <span class="na">xmlns</span><span class="o">=</span><span class="s">&quot;http://www.opengis.net/context&quot;</span> <span class="na">xmlns:sld</span><span class="o">=</span><span class="s">&quot;http://www.opengis.net/sld&quot;</span> <span class="na">xsi:schemaLocation</span><span class="o">=</span><span class="s">&quot;http://www.opengis.net/context http://schemas.opengis.net/context/1.1.0/context.xsd&quot;</span><span class="p">&gt;</span>
<span class="linenos"> 3</span>      <span class="p">&lt;</span><span class="nt">General</span><span class="p">&gt;</span>
<span class="linenos"> 4</span>        <span class="p">&lt;</span><span class="nt">Window</span> <span class="na">width</span><span class="o">=</span><span class="s">&quot;400&quot;</span> <span class="na">height</span><span class="o">=</span><span class="s">&quot;300&quot;</span><span class="p">/&gt;</span>
<span class="linenos"> 5</span>        <span class="cm">&lt;!-- Bounding box corners and spatial reference system --&gt;</span>
<span class="linenos"> 6</span>        <span class="p">&lt;</span><span class="nt">BoundingBox</span> <span class="na">SRS</span><span class="o">=</span><span class="s">&quot;EPSG:4326&quot;</span> <span class="na">minx</span><span class="o">=</span><span class="s">&quot;-180.000000&quot;</span> <span class="na">miny</span><span class="o">=</span><span class="s">&quot;-90.000000&quot;</span> <span class="na">maxx</span><span class="o">=</span><span class="s">&quot;180.000000&quot;</span> <span class="na">maxy</span><span class="o">=</span><span class="s">&quot;90.000000&quot;</span><span class="p">/&gt;</span>
<span class="linenos"> 7</span>        <span class="cm">&lt;!-- Title of Context --&gt;</span>
<span class="linenos"> 8</span>        <span class="p">&lt;</span><span class="nt">Title</span><span class="p">&gt;</span>Map Context demo<span class="p">&lt;/</span><span class="nt">Title</span><span class="p">&gt;</span>
<span class="linenos"> 9</span>        <span class="p">&lt;</span><span class="nt">Abstract</span><span class="p">&gt;</span>Demo for map context document. Blah blah...<span class="p">&lt;/</span><span class="nt">Abstract</span><span class="p">&gt;</span>
<span class="linenos">10</span>        <span class="p">&lt;</span><span class="nt">ContactInformation</span><span class="p">&gt;</span>
<span class="linenos">11</span>        <span class="p">&lt;/</span><span class="nt">ContactInformation</span><span class="p">&gt;</span>
<span class="linenos">12</span>      <span class="p">&lt;/</span><span class="nt">General</span><span class="p">&gt;</span>
<span class="linenos">13</span>      <span class="p">&lt;</span><span class="nt">LayerList</span><span class="p">&gt;</span>
<span class="linenos">14</span>        <span class="p">&lt;</span><span class="nt">Layer</span> <span class="na">queryable</span><span class="o">=</span><span class="s">&quot;0&quot;</span> <span class="na">hidden</span><span class="o">=</span><span class="s">&quot;0&quot;</span><span class="p">&gt;</span>
<span class="linenos">15</span>          <span class="p">&lt;</span><span class="nt">Server</span> <span class="na">service</span><span class="o">=</span><span class="s">&quot;OGC:WMS&quot;</span> <span class="na">version</span><span class="o">=</span><span class="s">&quot;1.1.1&quot;</span> <span class="na">title</span><span class="o">=</span><span class="s">&quot;World Country Boundaries&quot;</span><span class="p">&gt;</span>
<span class="linenos">16</span>            <span class="p">&lt;</span><span class="nt">OnlineResource</span> <span class="na">xlink:type</span><span class="o">=</span><span class="s">&quot;simple&quot;</span> <span class="na">xlink:href</span><span class="o">=</span><span class="s">&quot;https://demo.mapserver.org/cgi-bin/wms?&quot;</span><span class="p">/&gt;</span>
<span class="linenos">17</span>          <span class="p">&lt;/</span><span class="nt">Server</span><span class="p">&gt;</span>
<span class="linenos">18</span>          <span class="p">&lt;</span><span class="nt">Name</span><span class="p">&gt;</span>country_bounds<span class="p">&lt;/</span><span class="nt">Name</span><span class="p">&gt;</span>
<span class="linenos">19</span>          <span class="p">&lt;</span><span class="nt">Title</span><span class="p">&gt;</span>World Country Boundaries<span class="p">&lt;/</span><span class="nt">Title</span><span class="p">&gt;</span>
<span class="linenos">20</span>          <span class="p">&lt;</span><span class="nt">SRS</span><span class="p">&gt;</span>EPSG:4326<span class="p">&lt;/</span><span class="nt">SRS</span><span class="p">&gt;</span>
<span class="linenos">21</span>          <span class="p">&lt;</span><span class="nt">FormatList</span><span class="p">&gt;</span>
<span class="linenos">22</span>            <span class="p">&lt;</span><span class="nt">Format</span> <span class="na">current</span><span class="o">=</span><span class="s">&quot;1&quot;</span><span class="p">&gt;</span>image/gif<span class="p">&lt;/</span><span class="nt">Format</span><span class="p">&gt;</span>
<span class="linenos">23</span>          <span class="p">&lt;/</span><span class="nt">FormatList</span><span class="p">&gt;</span>
<span class="linenos">24</span>          <span class="p">&lt;</span><span class="nt">DimensionList</span><span class="p">&gt;</span>
<span class="linenos">25</span>            <span class="p">&lt;</span><span class="nt">Dimension</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;time&quot;</span> <span class="na">units</span><span class="o">=</span><span class="s">&quot;ISO8601&quot;</span> <span class="na">unitSymbol</span><span class="o">=</span><span class="s">&quot;t&quot;</span> <span class="na">userValue</span><span class="o">=</span><span class="s">&quot;1310&quot;</span> <span class="na">default</span><span class="o">=</span><span class="s">&quot;1310&quot;</span> <span class="na">multipleValues</span><span class="o">=</span><span class="s">&quot;1310,1410&quot;</span> <span class="na">nearestValue</span><span class="o">=</span><span class="s">&quot;0&quot;</span> <span class="na">current</span><span class="o">=</span><span class="s">&quot;1&quot;</span><span class="p">/&gt;</span>
<span class="linenos">26</span>          <span class="p">&lt;/</span><span class="nt">DimensionList</span><span class="p">&gt;</span>
<span class="linenos">27</span>        <span class="p">&lt;/</span><span class="nt">Layer</span><span class="p">&gt;</span>
<span class="linenos">28</span>      <span class="p">&lt;/</span><span class="nt">LayerList</span><span class="p">&gt;</span>
<span class="linenos">29</span>    <span class="p">&lt;/</span><span class="nt">ViewContext</span><span class="p">&gt;</span>
</pre></div>
</div>
</section>
<section id="map-context-support-through-cgi">
<h3>Map Context Support Through CGI<a class="headerlink" href="#map-context-support-through-cgi" title="Link to this heading">¶</a></h3>
<p>MapServer CGI allows you to load a map context through the use of a CONTEXT
parameter, and you can point this parameter to a locally stored context file
or a context file accessible through a URL. For more information on MapServer
CGI see the <a class="reference internal" href="../cgi/index.html#cgi"><span class="std std-ref">CGI Reference</span></a>.</p>
<section id="support-for-local-map-context-files">
<h4>Support for Local Map Context Files<a class="headerlink" href="#support-for-local-map-context-files" title="Link to this heading">¶</a></h4>
<p>There is a new cgi parameter called <em>CONTEXT</em> that is used to specify a local
context file. The user can then use MapServer to request a map using the
following syntax:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>http://localhost/mapserver.cgi?MODE=map&amp;MAP=/path/to/mapfile.map&amp;CONTEXT=
                     /path/to/contextfile.xml&amp;LAYERS=layer_name1 layers_name2
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All layers created from a context file have their status set to ON. To be
able to display layers, the user needs to add the LAYERS argument in the
URL.</p>
</div>
</section>
<section id="support-for-context-files-accessed-through-a-url">
<h4>Support for Context Files Accessed Through a URL<a class="headerlink" href="#support-for-context-files-accessed-through-a-url" title="Link to this heading">¶</a></h4>
<p>The syntax of using a web accessible context file would be similar to accessing
a local context file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>http://localhost/mapserver.cgi?MODE=map&amp;MAP=/path/to/mapfile.map&amp;CONTEXT=
            http://URL/path/to/contextfile.xml&amp;LAYERS=layers_name1 layer_name2
</pre></div>
</div>
<p>Due to security concerns loading a file from a URL is disabled by default. To enable
this functionality, the user needs to set a CONFIG parameter called <em>CGI_CONTEXT_URL</em>
in the default mapfile that will allow this functionality. Here is an example of a
map file with the CONFIG parameter:</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="c"># Start of map file</span>
<span class="k">NAME</span> <span class="s">&quot;map-context&quot;</span>
<span class="k">STATUS</span> <span class="nb">ON</span>
<span class="k">SIZE</span> <span class="mi">400</span> <span class="mi">300</span>
<span class="k">EXTENT</span> <span class="p">-</span><span class="mi">2200000</span> <span class="p">-</span><span class="mi">712631</span> <span class="mi">3072800</span> <span class="mi">3840000</span>
<span class="k">UNITS</span> <span class="nb">METERS</span>
<span class="k">IMAGECOLOR</span> <span class="mi">255</span> <span class="mi">255</span> <span class="mi">255</span>
<span class="k">IMAGETYPE</span> <span class="nb">png</span>
<span class="k">CONFIG</span> <span class="s">&quot;CGI_CONTEXT_URL&quot;</span> <span class="s">&quot;1&quot;</span>
<span class="p">...</span>
<span class="k">WEB</span>
  <span class="p">...</span>
<span class="k">END</span>
<span class="k">LAYER</span>
  <span class="p">...</span>
<span class="k">END</span>

<span class="k">END</span>
</pre></div>
</div>
</section>
<section id="default-mapfile">
<h4>Default Mapfile<a class="headerlink" href="#default-mapfile" title="Link to this heading">¶</a></h4>
<p>To smoothly run a MapServer CGI application with a Map Context, the
application administrator needs to provide a default mapfile with at least the
basic required parameters that will be used with the Context file. This
default mapfile can contain as little information as the imagepath and
imageurl or contain a list of layers. Information coming from the context
(e.g.: layers, width, height, …) would either be appended or will replace
values found in the mapfile.</p>
<p>Here is an example of a default map file containing the minimum required
parameters:</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="k">NAME</span> <span class="s">&quot;CGI-CONTEXT-DEMO&quot;</span>
<span class="linenos"> 2</span><span class="k">STATUS</span> <span class="nb">ON</span>
<span class="linenos"> 3</span><span class="k">SIZE</span> <span class="mi">400</span> <span class="mi">300</span>
<span class="linenos"> 4</span><span class="k">EXTENT</span> <span class="p">-</span><span class="mi">2200000</span> <span class="p">-</span><span class="mi">712631</span> <span class="mi">3072800</span> <span class="mi">3840000</span>
<span class="linenos"> 5</span><span class="k">UNITS</span> <span class="nb">METERS</span>
<span class="linenos"> 6</span><span class="k">IMAGECOLOR</span> <span class="mi">255</span> <span class="mi">255</span> <span class="mi">255</span>
<span class="linenos"> 7</span><span class="k">IMAGETYPE</span> <span class="nb">png</span>
<span class="linenos"> 8</span><span class="c">#</span>
<span class="linenos"> 9</span><span class="c"># Start of web interface definition</span>
<span class="linenos">10</span><span class="c">#</span>
<span class="linenos">11</span><span class="k">WEB</span>
<span class="linenos">12</span>  <span class="k">MINSCALE</span> <span class="mi">2000000</span>
<span class="linenos">13</span>  <span class="k">MAXSCALE</span> <span class="mi">50000000</span>
<span class="linenos">14</span><span class="c">#</span>
<span class="linenos">15</span><span class="c"># On Windows systems, /tmp and /tmp/ms_tmp/ should be created at the root</span>
<span class="linenos">16</span><span class="c"># of the drive where the .MAP file resides.</span>
<span class="linenos">17</span><span class="c">#</span>
<span class="linenos">18</span>  <span class="k">IMAGEPATH</span> <span class="s">&quot;/ms4w/tmp/ms_tmp/&quot;</span>
<span class="linenos">19</span>  <span class="k">IMAGEURL</span> <span class="s">&quot;/ms_tmp/&quot;</span>
<span class="linenos">20</span><span class="k">END</span>
<span class="linenos">21</span><span class="k">END</span> <span class="c"># Map File</span>
</pre></div>
</div>
</section>
</section>
<section id="map-context-support-through-wms">
<h3>Map Context Support Through WMS<a class="headerlink" href="#map-context-support-through-wms" title="Link to this heading">¶</a></h3>
<p>MapServer can also output your WMS layers as a Context document.  MapServer
extends the WMS standard by adding a request=GetContext operation that allows
you to retrieve a context for a WMS-based mapfile with a call
like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>http://localhost/mapserver.cgi?map=/path/to/mapfile.map&amp;service=WMS&amp;
request=GetContext&amp;version=1.1.0
</pre></div>
</div>
<p>The VERSION parameter controls the version of context document to return.</p>
<p>GetContext is disabled by default because it could be
considered a security issue: it could publicly expose the URLs of WMS layers
used (cascaded) by a mapfile.</p>
<p>To enable it, set the “wms_getcontext_enabled” web metadata to “1” in your
WMS server’s mapfile.</p>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p>
<a href="../about.html" title="About">About</a><br>
<a href="../products.html" title="Products">Products</a><br>
<a href="../community/index.html" title="Community">Community</a><br>
<a href="../development/index.html" title="Development">Development</a><br>
<a href="../download.html" title="Downloads">Downloads</a><br>
<a href="../documentation.html" title="Documentation">Documentation</a><br>
<a href="../faq.html" title="FAQ">FAQ</a><br>
<a href="../psc.html" title="PSC">PSC</a><br>
<a href="https://twitter.com/mapserver_osgeo" title="Twitter">Twitter</a>
</p>
  <h3>Current Table Of Contents</h3>
  <ul>
<li><a class="reference internal" href="#">Map Context</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a><ul>
<li><a class="reference internal" href="#links-to-wms-map-context-related-information">Links to WMS / Map Context Related Information</a></li>
</ul>
</li>
<li><a class="reference internal" href="#implementing-a-web-map-context">Implementing a Web Map Context</a><ul>
<li><a class="reference internal" href="#special-build-considerations">Special Build Considerations</a></li>
<li><a class="reference internal" href="#map-context-mapfile">Map Context Mapfile</a><ul>
<li><a class="reference internal" href="#mapfile-metadata">MapFile Metadata</a></li>
<li><a class="reference internal" href="#web-object-metadata">Web Object Metadata</a></li>
<li><a class="reference internal" href="#layer-object-metadata">Layer Object Metadata</a></li>
<li><a class="reference internal" href="#sample-map-context-mapfile">Sample Map Context Mapfile</a></li>
</ul>
</li>
<li><a class="reference internal" href="#testing-map-context-support">Testing Map Context Support</a></li>
<li><a class="reference internal" href="#sample-map-context-document">Sample Map Context Document</a></li>
<li><a class="reference internal" href="#map-context-support-through-cgi">Map Context Support Through CGI</a><ul>
<li><a class="reference internal" href="#support-for-local-map-context-files">Support for Local Map Context Files</a></li>
<li><a class="reference internal" href="#support-for-context-files-accessed-through-a-url">Support for Context Files Accessed Through a URL</a></li>
<li><a class="reference internal" href="#default-mapfile">Default Mapfile</a></li>
</ul>
</li>
<li><a class="reference internal" href="#map-context-support-through-wms">Map Context Support Through WMS</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="layer_metadata.html" title="Layer Metadata"
             >next</a> |</li>
        <li class="right" >
          <a href="wms_dimension.html" title="WMS Dimension"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../documentation.html" >MapServer 8.0.1 Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >OGC Support and Configuration</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Map Context</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; <a href="../copyright.html">Copyright</a> 2023, Open Source Geospatial Foundation.
      Last updated on 2023-12-22.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.5.
    </div>
  </body>
</html>