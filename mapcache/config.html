<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Configuration File &mdash; MapServer 7.0.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '7.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/mapserver.ico"/>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="top" title="MapServer 7.0.0 documentation" href="../index.html" />
    <link rel="up" title="MapCache 1.4" href="index.html" />
    <link rel="next" title="Supported Tile Services" href="services.html" />
    <link rel="prev" title="Compilation &amp; Installation" href="install.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body role="document">

<table width="100%" style="width: 100%; background-color: white;">
  <tr>
    <td rowspan="2" style="padding: 10px 0px 10px 10px;">
      <a href="../index.html" title="Home"><img src="../_static/banner.png" alt="MapServer banner" border="0" /></a>
    </td>
    <td style="padding: 10px 10px 0px 0px; text-align: right; vertical-align: top;">
      <a href="../index.html" title="Home">Home</a> |
      <a href="../products.html" title="Products (MapServer core, MapCache, TinyOWS">Products</a> |
      <a href="https://github.com/mapserver/mapserver/issues/" title="Issue Tracker (MapServer core)">Issue Tracker</a> |
      <a href="../faq.html" title="FAQ">FAQ</a> |
      <a href="../download.html" title="Download">Download </a>
    </td>
  </tr>
  <tr>
    <td style="padding: 0px 10px 0px 0px; text-align: right; vertical-align: bottom;">
        <img src="../_static/flagicons/en.png" alt="en" title="en" border="0" width="18px" height="13px"/>
        
          <a href="../ar/mapcache/config.html"><img src="../_static/flagicons/ar.png" alt="ar" title="ar" border="0" /></a>
        
        
          <a href="../de/mapcache/config.html"><img src="../_static/flagicons/de.png" alt="de" title="de" border="0" /></a>
        
        
          <a href="../el/mapcache/config.html"><img src="../_static/flagicons/el.png" alt="el" title="el" border="0" /></a>
        
        
          <a href="../es/mapcache/config.html"><img src="../_static/flagicons/es.png" alt="es" title="es" border="0" /></a>
        
        
          <a href="../fr/mapcache/config.html"><img src="../_static/flagicons/fr.png" alt="fr" title="fr" border="0" /></a>
        
        
          <a href="../id/mapcache/config.html"><img src="../_static/flagicons/id.png" alt="id" title="id" border="0" /></a>
        
        
          <a href="../it/mapcache/config.html"><img src="../_static/flagicons/it.png" alt="it" title="it" border="0" /></a>
        
        
          <a href="../ja/mapcache/config.html"><img src="../_static/flagicons/ja.png" alt="ja" title="ja" border="0" /></a>
        
        
          <a href="../nl_NL/mapcache/config.html"><img src="../_static/flagicons/nl_NL.png" alt="nl_NL" title="nl_NL" border="0" /></a>
        
        
          <a href="../pl/mapcache/config.html"><img src="../_static/flagicons/pl.png" alt="pl" title="pl" border="0" /></a>
        
        
          <a href="../ru/mapcache/config.html"><img src="../_static/flagicons/ru.png" alt="ru" title="ru" border="0" /></a>
        
        
          <a href="../sq/mapcache/config.html"><img src="../_static/flagicons/sq.png" alt="sq" title="sq" border="0" /></a>
        
        
          <a href="../tr/mapcache/config.html"><img src="../_static/flagicons/tr.png" alt="tr" title="tr" border="0" /></a>
        
        
          <a href="../uk/mapcache/config.html"><img src="../_static/flagicons/uk.png" alt="uk" title="uk" border="0" /></a>
        

    </td>
  </tr>
</table>


    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="services.html" title="Supported Tile Services"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="install.html" title="Compilation &amp; Installation"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../documentation.html" >MapServer 7.0.0 Documentation</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">MapCache 1.4</a> &raquo;</li> 
      </ul>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="configuration-file">
<span id="mapcache-config"></span><h1>Configuration File<a class="headerlink" href="#configuration-file" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Author:</th><td class="field-body">Thomas Bonfort</td>
</tr>
<tr class="field-even field"><th class="field-name">Contact:</th><td class="field-body">tbonfort at terriscope.fr</td>
</tr>
</tbody>
</table>
<p>The configuration file determines how mod-mapcache will serve incoming requests.
It is an XML file comprising a list of entries, as outlined here:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;mapcache&gt;</span>
   <span class="nt">&lt;grid&gt;</span>....<span class="nt">&lt;/grid&gt;</span>
   <span class="nt">&lt;source&gt;</span>....<span class="nt">&lt;/source&gt;</span>
   <span class="nt">&lt;cache&gt;</span>...<span class="nt">&lt;/cache&gt;</span>
   <span class="nt">&lt;format&gt;</span>...<span class="nt">&lt;/format&gt;</span>
   <span class="nt">&lt;tileset&gt;</span>...<span class="nt">&lt;/tileset&gt;</span>
   <span class="nt">&lt;services&gt;</span>...<span class="nt">&lt;/services&gt;</span>
<span class="nt">&lt;/mapcache&gt;</span>
</pre></div>
</div>
<div class="section" id="source">
<span id="mapcache-config-source"></span><h2>Source<a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>A source is a service mod-mapcache can query to obtain image data. This is
typically a WMS server accessible by a URL. (There are currently no sources
other than WMS implemented, though others may be added later if the need
arises).</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;source</span> <span class="na">name=</span><span class="s">&quot;vmap0&quot;</span> <span class="na">type=</span><span class="s">&quot;wms&quot;</span><span class="nt">&gt;</span>

   <span class="c">&lt;!--</span>
<span class="c">      Extra parameters that will be added to the GetMap request. You can</span>
<span class="c">      specify any parameter here, e.g. VERSION if you want to override the</span>
<span class="c">      version of the WMS request.</span>

<span class="c">      The LAYERS parameter is mandatory.</span>

<span class="c">      Usual parameters here are FORMAT, or MAP if using MapServer.</span>
<span class="c">   --&gt;</span>
   <span class="nt">&lt;getmap&gt;</span>
      <span class="nt">&lt;params&gt;</span>
         <span class="nt">&lt;FORMAT&gt;</span>image/png<span class="nt">&lt;/FORMAT&gt;</span>
         <span class="nt">&lt;LAYERS&gt;</span>basic<span class="nt">&lt;/LAYERS&gt;</span>
      <span class="nt">&lt;/params&gt;</span>
   <span class="nt">&lt;/getmap&gt;</span>

   <span class="c">&lt;!-- HTTP URL and parameters to be used when making WMS requests --&gt;</span>
   <span class="nt">&lt;http&gt;</span>

      <span class="c">&lt;!-- URL of the WMS service, without any parameters --&gt;</span>
      <span class="nt">&lt;url&gt;</span>http://vmap0.tiles.osgeo.org/wms/vmap0<span class="nt">&lt;/url&gt;</span>

      <span class="c">&lt;!--</span>
<span class="c">         HTTP headers added to the request. Make sure you know what you are</span>
<span class="c">         doing when adding headers here, as they take precedence over any</span>
<span class="c">         default headers curl will be adding to the request.</span>

<span class="c">         Typical headers that can be added here are User-Agent and Referer.</span>

<span class="c">         When adding a &lt;key&gt;value&lt;/key&gt; element here, the request to the WMS</span>
<span class="c">         source will contain the</span>

<span class="c">         key: value\r\n</span>

<span class="c">         HTTP header.</span>

<span class="c">         You may also forward a header from the incoming client request using</span>
<span class="c">         the &lt;MyHeader&gt;{X-Header-To-Forward}&lt;MyHeader&gt; syntax.</span>
<span class="c">      --&gt;</span>
      <span class="nt">&lt;headers&gt;</span>
         <span class="nt">&lt;User-Agent&gt;</span>mod-mapcache/r175<span class="nt">&lt;/User-Agent&gt;</span>
         <span class="nt">&lt;Referer&gt;</span>http://www.mysite.com?param=2<span class="ni">&amp;amp;</span>par=4<span class="nt">&lt;/Referer&gt;</span>
      <span class="nt">&lt;/headers&gt;</span>

      <span class="c">&lt;!-- Timeout in seconds before bailing out from a request --&gt;</span>
      <span class="nt">&lt;connection_timeout&gt;</span>30<span class="nt">&lt;/connection_timeout&gt;</span>
   <span class="nt">&lt;/http&gt;</span>
<span class="nt">&lt;/source&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li>The name and type attributes are straightforward: <cite>type</cite> is &#8220;wms&#8221;, and <cite>name</cite></li>
<li>is the key by which this source will be referenced; <cite>&lt;url&gt;</cite> is the HTTP</li>
<li>location where the service can be accessed; and <cite>&lt;wmsparams&gt;</cite> is a list of</li>
<li>parameters that will be added to the WMS request. You should probably at the</li>
<li>very least add the FORMAT and LAYERS parameters. By convention(?), WMS</li>
<li>parameters are uppercase, and you should respect this convention in your</li>
<li>configuration file.</li>
<li></li>
<li>This is where you can also override some default WMS parameters if needed. By</li>
<li>default, the parameters that will be used are: <cite>&lt;REQUEST&gt;GetMap&lt;/REQUEST&gt;</cite></li>
<li><cite>&lt;SERVICE&gt;WMS&lt;/SERVICE&gt;</cite> <cite>&lt;STYLES&gt;&lt;/STYLES&gt;</cite> <cite>&lt;VERSION&gt;1.1.0&lt;/VERSION&gt;</cite></li>
</ul>
</div>
<div class="section" id="cache">
<h2>Cache<a class="headerlink" href="#cache" title="Permalink to this headline">¶</a></h2>
<p>A cache is a location where received tiles will be stored.</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;cache</span> <span class="na">name=</span><span class="s">&quot;disk&quot;</span> <span class="na">type=</span><span class="s">&quot;disk&quot;</span><span class="nt">&gt;</span>

   <span class="c">&lt;!-- base</span>

<span class="c">        Absolute filesystem path where the tile structure will be stored.</span>

<span class="c">        This directory needs to be readable and writable by the user running</span>
<span class="c">        Apache.</span>
<span class="c">   --&gt;</span>
   <span class="nt">&lt;base&gt;</span>/tmp<span class="nt">&lt;/base&gt;</span>

   <span class="c">&lt;!-- symlink_blank</span>

<span class="c">        Enable blank (i.e. uniform color) tile detection. Blank tiles will be</span>
<span class="c">        detected at creation time and linked to a single blank tile on disk</span>
<span class="c">        to preserve disk space.</span>
<span class="c">   --&gt;</span>
   <span class="nt">&lt;symlink_blank/&gt;</span>
<span class="nt">&lt;/cache&gt;</span>

<span class="nt">&lt;cache</span> <span class="na">name=</span><span class="s">&quot;tmpl&quot;</span> <span class="na">type=</span><span class="s">&quot;disk&quot;</span> <span class="na">layout=</span><span class="s">&quot;template&quot;</span><span class="nt">&gt;</span>
   <span class="c">&lt;!-- template</span>

<span class="c">        String template that will be used to map a tile (by tileset, grid</span>
<span class="c">        name, dimension, format, x, y, and z) to a filename on the filesystem.</span>

<span class="c">        The following replacements are performed:</span>

<span class="c">        - {tileset}               : the tileset name</span>
<span class="c">        - {grid}                  : the grid name</span>
<span class="c">        - {dim}                   : string concatenating the tile&#39;s dimension</span>
<span class="c">        - {ext}                   : tile&#39;s image-format filename extension</span>
<span class="c">        - {x},{y},{z}             : tile&#39;s x,y,z values</span>
<span class="c">        - {inv_x},{inv_y},{inv_z} : inverted x,y,z values</span>

<span class="c">        (For inverted x,y,z values, (inv_x = level-&gt;maxx - x - 1). This is</span>
<span class="c">        mainly used to support grids where one axis is inverted (e.g. the</span>
<span class="c">        Google schema) and you want to create on offline cache.)</span>

<span class="c">      * Note that this type of cache does not support blank-tile detection</span>
<span class="c">        and symlinking.</span>

<span class="c">      * Warning: It is up to you to make sure that the template you choose</span>
<span class="c">        creates a unique filename for your given tilesets (e.g. do not ommit</span>
<span class="c">        the {grid} parameter if your tilesets reference multiple grids.)</span>
<span class="c">        Failure to do so will result in filename collisions!</span>

<span class="c">   --&gt;</span>
   <span class="nt">&lt;template&gt;</span>/tmp/template-test/{tileset}#{grid}#{dim}/{z}/{x}/{y}.{ext}<span class="nt">&lt;/template&gt;</span>
<span class="nt">&lt;/cache&gt;</span>

<span class="c">&lt;!-- memcache cache</span>

<span class="c">     Entry accepts multiple &lt;server&gt; entries.</span>

<span class="c">     Requires a fairly recent apr-util library and headers.</span>
<span class="c">--&gt;</span>
<span class="nt">&lt;cache</span> <span class="na">name=</span><span class="s">&quot;memcache&quot;</span> <span class="na">type=</span><span class="s">&quot;memcache&quot;</span><span class="nt">&gt;</span>
   <span class="nt">&lt;server&gt;</span>
      <span class="nt">&lt;host&gt;</span>localhost<span class="nt">&lt;/host&gt;</span>
      <span class="nt">&lt;port&gt;</span>11211<span class="nt">&lt;/port&gt;</span>
   <span class="nt">&lt;/server&gt;</span>
<span class="nt">&lt;/cache&gt;</span>

<span class="c">&lt;!-- sqlite cache</span>

<span class="c">     Requires building with &quot;with-sqlite&quot;.</span>
<span class="c">--&gt;</span>
<span class="nt">&lt;cache</span> <span class="na">name=</span><span class="s">&quot;sqlite&quot;</span> <span class="na">type=</span><span class="s">&quot;sqlite3&quot;</span><span class="nt">&gt;</span>
   <span class="c">&lt;!-- dbfile</span>

<span class="c">        Absolute filename path of the SQLite database file to use.</span>

<span class="c">        This file needs to be readable and writable by the user running the</span>
<span class="c">        MapCache instance.</span>
<span class="c">   --&gt;</span>
<span class="nt">&lt;/cache&gt;</span>

<span class="nt">&lt;cache</span> <span class="na">name=</span><span class="s">&quot;mbtiles&quot;</span> <span class="na">type=</span><span class="s">&quot;mbtiles&quot;</span><span class="nt">&gt;</span>
   <span class="nt">&lt;dbfile&gt;</span>/path/to/MapBox/tiles/natural-earth-1.mbtiles<span class="nt">&lt;/dbfile&gt;</span>
<span class="nt">&lt;/cache&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="format">
<h2>Format<a class="headerlink" href="#format" title="Permalink to this headline">¶</a></h2>
<p>A format is an image format that will be used to return tile data to clients,
and to store tile data on disk.</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;format</span> <span class="na">name=</span><span class="s">&quot;PNGQ_FAST&quot;</span> <span class="na">type =</span><span class="s">&quot;PNG&quot;</span><span class="nt">&gt;</span>

   <span class="c">&lt;!-- compression</span>

<span class="c">        PNG compression: best or fast</span>

<span class="c">        Note that &quot;best&quot; compression is CPU intensive for little gain over</span>
<span class="c">        the default default compression obtained by leaving out this tag.</span>
<span class="c">   --&gt;</span>
   <span class="nt">&lt;compression&gt;</span>fast<span class="nt">&lt;/compression&gt;</span>

   <span class="c">&lt;!-- colors</span>

<span class="c">        If supplied, this enables PNG quantization which reduces the number</span>
<span class="c">        of colors in an image to attain higher compression. This operation is</span>
<span class="c">        destructive, and can cause artifacts in the stored image.</span>

<span class="c">        The number of colors can be between 2 and 256.</span>
<span class="c">  --&gt;</span>
  <span class="nt">&lt;colors&gt;</span>256<span class="nt">&lt;/colors&gt;</span>
<span class="nt">&lt;/format&gt;</span>
<span class="nt">&lt;format</span> <span class="na">name=</span><span class="s">&quot;myjpeg&quot;</span> <span class="na">type =</span><span class="s">&quot;JPEG&quot;</span><span class="nt">&gt;</span>

   <span class="c">&lt;!-- quality</span>

<span class="c">        JPEG compression quality, ranging from 0 to 100.</span>

<span class="c">        95 produces high quality images with few visual artifacts. Values</span>
<span class="c">        under around 80 produce small images but with visible artifacts.</span>
<span class="c">        YMMV.</span>
<span class="c">   --&gt;</span>
   <span class="nt">&lt;quality&gt;</span>75<span class="nt">&lt;/quality&gt;</span>

   <span class="c">&lt;!-- photometric</span>

<span class="c">       Photometric interpretation of the bands created in the JPEG image.</span>

<span class="c">       Default is &quot;ycbcr&quot;, which produces the smallest images. Can also be</span>
<span class="c">       &quot;rgb&quot;, which usually results in x2 or x3 image sizes.</span>
<span class="c">   --&gt;</span>
   <span class="nt">&lt;photometric&gt;</span>ycbcr<span class="nt">&lt;/photometric&gt;</span>

<span class="nt">&lt;/format&gt;</span>

<span class="nt">&lt;format</span> <span class="na">name=</span><span class="s">&quot;PNG_BEST&quot;</span> <span class="na">type =</span><span class="s">&quot;PNG&quot;</span><span class="nt">&gt;</span>
   <span class="nt">&lt;compression&gt;</span>best<span class="nt">&lt;/compression&gt;</span>
<span class="nt">&lt;/format&gt;</span>

<span class="nt">&lt;format</span> <span class="na">name=</span><span class="s">&quot;mixed&quot;</span> <span class="na">type=</span><span class="s">&quot;MIXED&quot;</span><span class="nt">&gt;</span>
   <span class="nt">&lt;transparent&gt;</span>PNG_BEST<span class="nt">&lt;/transparent&gt;</span>
   <span class="nt">&lt;opaque&gt;</span>JPEG<span class="nt">&lt;/opaque&gt;</span>
<span class="nt">&lt;/format&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="grid">
<span id="mapcache-grids"></span><h2>Grid<a class="headerlink" href="#grid" title="Permalink to this headline">¶</a></h2>
<p>A grid is the matrix that maps tiles onto an area, and consists of a spatial
reference, a geographic extent, resolutions, and tile sizes.</p>
<div class="section" id="mandatory-configuration-options">
<h3>Mandatory Configuration Options<a class="headerlink" href="#mandatory-configuration-options" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first"><strong>&lt;size&gt;</strong>: The width and height of an individual tile, in pixels. Must be
specified as positive integers separated by a space character. The most common
tile size is:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;size&gt;</span>256 256<span class="nt">&lt;/size&gt;</span>
</pre></div>
</div>
</li>
<li><p class="first"><strong>&lt;extent&gt;</strong>: The geographical extent covered by the grid, in ground units
(e.g. meters, degrees, feet, etc.). Must be specified as 4 floating point
numbers separated by spaces, ordered as minx, miny, maxx, maxy.</p>
<p>MapCache expects all of its extents to be given in lonlat, and does the
translation to latlon at request time if needed.</p>
<p>The (minx,miny) point defines the origin of the grid, i.e. the pixel at the
bottom left of the bottom-left most tile is always placed on the (minx,miny)
geographical point.</p>
<p>The (maxx,maxy) point is used to determine how many tiles there are for each
zoom level.</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;extent&gt;</span>-180 -90 180 90<span class="nt">&lt;/extent&gt;</span>
</pre></div>
</div>
</li>
<li><p class="first"><strong>&lt;srs&gt;</strong>: The projection of the grid, usually given by it EPSG identifier.
This value isn&#8217;t used directly by MapCache to compute reprojections; it is
only used to look up which grid to use when receiving WMS requests.</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;srs&gt;</span>epsg:4326<span class="nt">&lt;/srs&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This is the value that is passed on to the <a class="reference internal" href="sources.html#mapcache-sources"><span>source</span></a>
when requesting a tile that is not already cached for the current grid. You
must make sure that the source that is queried is capable of returning image
data for this SRS.</p>
</div>
</li>
<li><p class="first"><strong>&lt;units&gt;</strong>: The ground units used by the grid&#8217;s projection. This entry is not
used directly by MapCache aside from calculating scales for the WMTS
capabilities document. Allowed values are:</p>
<ul class="simple">
<li><strong>m</strong>  : meters</li>
<li><strong>dd</strong> : decimal degrees</li>
<li><strong>ft</strong> : feet</li>
</ul>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;units&gt;</span>dd<span class="nt">&lt;/units&gt;</span>
</pre></div>
</div>
</li>
<li><p class="first"><strong>&lt;resolutions&gt;</strong>: This is a list of resolutions for each of the zoom levels
defined by the grid. This must be supplied as a list of positive floating
point values, separated by spaces and ordered from largest to smallest. The
largest value will correspond to the grid&#8217;s zoom level 0. Resolutions are
expressed in &#8220;units-per-pixel&#8221;, depending on the unit used by the grid (e.g.
resolutions are in meters per pixel for most grids used in webmapping).</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;resolutions&gt;</span>0.703125000000000 0.351562500000000 0.175781250000000 8.78906250000000e-2 4.39453125000000e-2 2.19726562500000e-2 1.09863281250000e-2 5.49316406250000e-3 2.74658203125000e-3 1.37329101562500e-3 6.86645507812500e-4 3.43322753906250e-4 1.71661376953125e-4 8.58306884765625e-5 4.29153442382812e-5 2.14576721191406e-5 1.07288360595703e-5 5.36441802978516e-6<span class="nt">&lt;/resolutions&gt;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="optional-configuration-options">
<h3>Optional Configuration Options<a class="headerlink" href="#optional-configuration-options" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first"><strong>&lt;srsalias&gt;</strong>: This tag can be specified multiple times, and allows the user
to add multiple SRS entries for a given grid. This is especially useful if
the EPSG id for a given projection has evolved over time, or to support
catalogs other than the EPSG one (which is the only catalog supported by the
WMS specification).</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;srs&gt;</span>EPSG:310024802<span class="nt">&lt;/srs&gt;</span>
<span class="nt">&lt;srsalias&gt;</span>IGNF:GEOPORTALFXX<span class="nt">&lt;/srsalias&gt;</span>
<span class="nt">&lt;srsalias&gt;</span>EPSG:310024001<span class="nt">&lt;/srsalias&gt;</span>
</pre></div>
</div>
</li>
<li><p class="first"><strong>&lt;metadata&gt;</strong>:</p>
<ul>
<li><p class="first"><strong>&lt;title&gt;</strong>: The name of the grid, in human readable form. Appears in the
capabilities documents.</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;title&gt;</span>This grid covers the area blah blah blah<span class="nt">&lt;/title&gt;</span>
</pre></div>
</div>
</li>
<li><p class="first"><strong>&lt;WellKnownScaleSet&gt;</strong>: See the WMTS keyword. This will add a
WellKnownScaleSet entry to the WMTS capabilities document. It is up to the
user to make sure that the supplied resolutions for the grid actually match
the pre-defined WellKnownScaleSet.</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;WellKnownScaleSet&gt;</span>urn:ogc:def:wkss:OGC:1.0:GoogleCRS84Quad<span class="nt">&lt;/WellKnownScaleSet&gt;</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p class="first"><strong>&lt;origin&gt;</strong>: Specifies the origin of the grid. Valid values are <cite>top-left</cite>,
<cite>bottom-left</cite>, <cite>top-right</cite> and <cite>bottom-right</cite>.</p>
<p>If not used, the grid will have the bottom-left corner as reference point.</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;origin&gt;</span>top-left<span class="nt">&lt;/origin&gt;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="preconfigured-grids">
<h3>Preconfigured Grids<a class="headerlink" href="#preconfigured-grids" title="Permalink to this headline">¶</a></h3>
<p>There are three predefined grids you can use without defining them in the
mapcache.xml file:</p>
<ul>
<li><p class="first">The &#8220;WGS84&#8221; grid corresponds to a grid where the whole world is rendered on
two 256x256-pixel tiles at level 0 (i.e. the (-180,-90,180,90) extent fits on
a 512x256 image). It goes down to zoom level 17.</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;grid</span> <span class="na">name=</span><span class="s">&quot;WGS84&quot;</span><span class="nt">&gt;</span>
   <span class="nt">&lt;metadata&gt;</span>
      <span class="nt">&lt;title&gt;</span>GoogleCRS84Quad<span class="nt">&lt;/title&gt;</span>
      <span class="nt">&lt;WellKnownScaleSet&gt;</span>urn:ogc:def:wkss:OGC:1.0:GoogleCRS84Quad<span class="nt">&lt;/WellKnownScaleSet&gt;</span>
   <span class="nt">&lt;/metadata&gt;</span>
   <span class="nt">&lt;extent&gt;</span>-180 -90 180 90<span class="nt">&lt;/extent&gt;</span>
   <span class="nt">&lt;srs&gt;</span>EPSG:4326<span class="nt">&lt;/srs&gt;</span>
   <span class="nt">&lt;units&gt;</span>dd<span class="nt">&lt;/units&gt;</span>
   <span class="nt">&lt;size&gt;</span>256 256<span class="nt">&lt;/size&gt;</span>
   <span class="nt">&lt;resolutions&gt;</span>0.703125000000000 0.351562500000000 0.175781250000000 8.78906250000000e-2 4.39453125000000e-2 2.19726562500000e-2 1.09863281250000e-2 5.49316406250000e-3 2.74658203125000e-3 1.37329101562500e-3 6.86645507812500e-4 3.43322753906250e-4 1.71661376953125e-4 8.58306884765625e-5 4.29153442382812e-5 2.14576721191406e-5 1.07288360595703e-5 5.36441802978516e-6<span class="nt">&lt;/resolutions&gt;</span>
<span class="nt">&lt;/grid&gt;</span>
</pre></div>
</div>
</li>
<li><p class="first">The &#8220;g&#8221; grid may be used to overlay tiles on top of GoogleMaps, and is the
default tiling scheme used in webmapping applications. This grid goes down to
zoom level 18. Level 0 is a single 256x256 tile. This grid&#8217;s default SRS is
EPSG:900913, which is non-standard but in wider use than than its official
EPSG:3857 entry.</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;grid</span> <span class="na">name=</span><span class="s">&quot;g&quot;</span><span class="nt">&gt;</span>
   <span class="nt">&lt;metadata&gt;</span>
      <span class="nt">&lt;title&gt;</span>GoogleMapsCompatible<span class="nt">&lt;/title&gt;</span>
      <span class="nt">&lt;WellKnownScaleSet&gt;</span>urn:ogc:def:wkss:OGC:1.0:GoogleMapsCompatible<span class="nt">&lt;/WellKnownScaleSet&gt;</span>
   <span class="nt">&lt;/metadata&gt;</span>
   <span class="nt">&lt;extent&gt;</span>-20037508.3427892480 -20037508.3427892480 20037508.3427892480 20037508.3427892480<span class="nt">&lt;/extent&gt;</span>
   <span class="nt">&lt;srs&gt;</span>EPSG:900913<span class="nt">&lt;/srs&gt;</span>
   <span class="nt">&lt;srsalias&gt;</span>EPSG:3857<span class="nt">&lt;/srsalias&gt;</span>
   <span class="nt">&lt;units&gt;</span>m<span class="nt">&lt;/units&gt;</span>
   <span class="nt">&lt;size&gt;</span>256 256<span class="nt">&lt;/size&gt;</span>
   <span class="nt">&lt;resolutions&gt;</span>156543.0339280410 78271.51696402048 39135.75848201023 19567.87924100512 9783.939620502561 4891.969810251280 2445.984905125640 1222.992452562820 611.4962262814100 305.7481131407048 152.8740565703525 76.43702828517624 38.21851414258813 19.10925707129406 9.554628535647032 4.777314267823516 2.388657133911758 1.194328566955879 0.5971642834779395<span class="nt">&lt;/resolutions&gt;</span>
<span class="nt">&lt;/grid&gt;</span>
</pre></div>
</div>
</li>
<li><p class="first">The &#8220;GoogleMapsCompatible&#8221; grid is nearly identical to the &#8220;g&#8221; grid, except
that its default SRS is EPSG:3857 instead of EPSG:900913.</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;grid</span> <span class="na">name=</span><span class="s">&quot;GoogleMapsCompatible&quot;</span><span class="nt">&gt;</span>
   <span class="nt">&lt;metadata&gt;</span>
      <span class="nt">&lt;title&gt;</span>GoogleMapsCompatible<span class="nt">&lt;/title&gt;</span>
      <span class="nt">&lt;WellKnownScaleSet&gt;</span>urn:ogc:def:wkss:OGC:1.0:GoogleMapsCompatible<span class="nt">&lt;/WellKnownScaleSet&gt;</span>
   <span class="nt">&lt;/metadata&gt;</span>
   <span class="nt">&lt;extent&gt;</span>-20037508.3427892480 -20037508.3427892480 20037508.3427892480 20037508.3427892480<span class="nt">&lt;/extent&gt;</span>
   <span class="nt">&lt;srs&gt;</span>EPSG:3857<span class="nt">&lt;/srs&gt;</span>
   <span class="nt">&lt;srsalias&gt;</span>EPSG:900913<span class="nt">&lt;/srsalias&gt;</span>
   <span class="nt">&lt;units&gt;</span>m<span class="nt">&lt;/units&gt;</span>
   <span class="nt">&lt;size&gt;</span>256 256<span class="nt">&lt;/size&gt;</span>
   <span class="nt">&lt;resolutions&gt;</span>156543.0339280410 78271.51696402048 39135.75848201023 19567.87924100512 9783.939620502561 4891.969810251280 2445.984905125640 1222.992452562820 611.4962262814100 305.7481131407048 152.8740565703525 76.43702828517624 38.21851414258813 19.10925707129406 9.554628535647032 4.777314267823516 2.388657133911758 1.194328566955879 0.5971642834779395<span class="nt">&lt;/resolutions&gt;</span>
<span class="nt">&lt;/grid&gt;</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="tileset">
<span id="mapcache-config-tileset"></span><h2>Tileset<a class="headerlink" href="#tileset" title="Permalink to this headline">¶</a></h2>
<p>A tileset is the essential configuration item for mod-mapcache, and corresponds
to a set of tiles coming from a <em>source</em>, stored in a <em>cache</em>, and returned to
the client in a given <em>format</em>.</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;tileset</span> <span class="na">name=</span><span class="s">&quot;test&quot;</span><span class="nt">&gt;</span>

   <span class="c">&lt;!-- source</span>

<span class="c">        The &quot;name&quot; attribute of a preconfigured &lt;source&gt;.</span>

<span class="c">        If the tileset does not contain a &lt;source&gt; element, then it is</span>
<span class="c">        considered read-only and its cache will never be updated. In this</span>
<span class="c">        case, your seeder and webserver would have slightly different</span>
<span class="c">        mapcache.xml files.</span>

<span class="c">        Blank tiles may be dealt with by setting the &lt;errors&gt; directive to</span>
<span class="c">        &quot;empty_img&quot;.</span>
<span class="c">   --&gt;</span>
   <span class="nt">&lt;source&gt;</span>vmap0<span class="nt">&lt;/source&gt;</span>

   <span class="c">&lt;!-- cache</span>

<span class="c">        The &quot;name&quot; attribute of a preconfigured &lt;cache&gt;</span>
<span class="c">   --&gt;</span>
   <span class="nt">&lt;cache&gt;</span>sqlite<span class="nt">&lt;/cache&gt;</span>

   <span class="c">&lt;!-- grid</span>

<span class="c">        The &quot;name&quot; attribute of a preconfigured &lt;grid&gt;.</span>

<span class="c">        You can also use the following notation to limit the area that will</span>
<span class="c">        be cached and served to clients:</span>

<span class="c">        &lt;grid restricted_extent=&quot;-10 40 10 50&quot;&gt;WGS84&lt;/grid&gt;</span>

<span class="c">        This is better than using a grid with a limited extent, as in this</span>
<span class="c">        way the tiles that are already cached are not invalidated should you</span>
<span class="c">        want to modify the restricted extent in the future. When using the</span>
<span class="c">        restricted_extent attribute, you should give the corresponding</span>
<span class="c">        information to the client that will be using the service.</span>

<span class="c">        You can also limit the zoom levels that are cached/accessible by</span>
<span class="c">        using the minzoom and maxzoom attributes.</span>

<span class="c">        NOTE: When adding a &lt;grid&gt; element, you *MUST* make sure that the</span>
<span class="c">        source you have selected is able to return images in the grid&#39;s SRS.</span>
<span class="c">   --&gt;</span>
   <span class="nt">&lt;grid</span> <span class="na">restricted_extent=</span><span class="s">&quot;-10 40 10 50&quot;</span> <span class="na">minzoom=</span><span class="s">&quot;4&quot;</span> <span class="na">maxzoom=</span><span class="s">&quot;17&quot;</span><span class="nt">&gt;</span>WGS84<span class="nt">&lt;/grid&gt;</span>
   <span class="nt">&lt;grid&gt;</span>g<span class="nt">&lt;/grid&gt;</span>

   <span class="c">&lt;!-- You may store hidden intermediate levels of tiles to enable higher</span>
<span class="c">        quality output when reassembling tiles. This may be needed when</span>
<span class="c">        caching maps containing labels to avoid the text from becoming too</span>
<span class="c">        small or too blurry when requesting resolutions that are far away</span>
<span class="c">        from the native grid resolutions.</span>

<span class="c">        Supposing grid &quot;mygrid&quot; consists of 256x256 pixel tiles, with</span>
<span class="c">        resolutions r1,r2,r3,r4,...rn, MapCache will populate a hidden grid</span>
<span class="c">        called &quot;mygrid_intermediate_0.5&quot; containing tiles of size</span>
<span class="c">        256+256*0.5=384 with resolutions r1+(r2-r1)*0.5, r2+(r3-r2)*0.5, ...</span>
<span class="c">        r(n-1)+(r(n)-r(n-1)*0.5. That is, a tile with a given extent will be</span>
<span class="c">        stored once in a 256x256 tile, and once in a 384x384 one.</span>

<span class="c">        This intermediate grid is private to MapCache and will not be exposed</span>
<span class="c">        to tiled requests. It will only be used for WMS requests that require</span>
<span class="c">        horizontal assembling.</span>
<span class="c">   --&gt;</span>
   <span class="nt">&lt;grid</span> <span class="na">use_wms_intermediate_resolutions=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>mygrid<span class="nt">&lt;/grid&gt;</span>

   <span class="c">&lt;!-- metadata</span>

<span class="c">        Optional metadata tags used for responding to GetCapabilities</span>
<span class="c">        requests. You can put anything here, but only the title and abstract</span>
<span class="c">        tags are currently used to populate the GetCapabilities document.</span>
<span class="c">   --&gt;</span>
   <span class="nt">&lt;metadata&gt;</span>
      <span class="nt">&lt;title&gt;</span>vmap0 map<span class="nt">&lt;/title&gt;</span>
      <span class="nt">&lt;abstract&gt;</span>blabla<span class="nt">&lt;/abstract&gt;</span>
   <span class="nt">&lt;/metadata&gt;</span>

   <span class="c">&lt;!-- watermark</span>

<span class="c">        Optional tag to add a watermark to the tiles *before* storing them to</span>
<span class="c">        cache. The supplied image MUST be exactly the same size as the size</span>
<span class="c">        as the tiles configured in the &lt;grid&gt;.</span>

<span class="c">        The supplied image is read when the configuration is loaded. If you</span>
<span class="c">        make changes to the image, they will NOT be reflected in tiles</span>
<span class="c">        already stored in the cache, nor on newly stored tiles, until the</span>
<span class="c">        server is restarted.</span>
<span class="c">   --&gt;</span>
   <span class="nt">&lt;watermark&gt;</span>/path/to/static/watermark.png<span class="nt">&lt;/watermark&gt;</span>

   <span class="c">&lt;!-- format</span>

<span class="c">       (Optional) format to use when storing a tile. This should be a format</span>
<span class="c">       with high compression, e.g. PNG with compression &quot;best&quot;, as the</span>
<span class="c">       compression operation is only done once at tile creation time. If</span>
<span class="c">       omitted, no recompression is applied to the image and mod-mapcache</span>
<span class="c">       will store the exact image received from the &lt;source&gt;.</span>

<span class="c">       Note that the &lt;format&gt; tag is mandatory if &lt;metatile&gt;, &lt;metabuffer&gt; or</span>
<span class="c">       &lt;watermark&gt; are supplied, as in those cases recompression must be</span>
<span class="c">       done.</span>
<span class="c">   --&gt;</span>
   <span class="nt">&lt;format&gt;</span>PNG<span class="nt">&lt;/format&gt;</span>

   <span class="c">&lt;!-- metatile</span>

<span class="c">        Number of columns and rows to use for metatiling. See</span>
<span class="c">        http://geowebcache.org/docs/current/concepts/metatiles.html</span>
<span class="c">   --&gt;</span>
   <span class="nt">&lt;metatile&gt;</span>5 5<span class="nt">&lt;/metatile&gt;</span>

   <span class="c">&lt;!-- metabuffer</span>

<span class="c">        Area around the tile or metatile that will be cut off to prevent some</span>
<span class="c">        edge artifacts. If this is specified, the configured source must be</span>
<span class="c">        instructed not to put any labels inside this area, as otherwise</span>
<span class="c">        labels will be truncated. (For MapServer, use the</span>
<span class="c">        &quot;labelcache_map_edge_buffer&quot; &quot;-10&quot; metadata entry, along with label</span>
<span class="c">        PARTIALS FALSE.)</span>
<span class="c">   --&gt;</span>
   <span class="nt">&lt;metabuffer&gt;</span>10<span class="nt">&lt;/metabuffer&gt;</span>

   <span class="c">&lt;!-- expires</span>

<span class="c">        Optional tile expiration value in seconds. This is expressed as</span>
<span class="c">        number of seconds after creation date of the tile. This is the value</span>
<span class="c">        that will be set in the HTTP Expires and Cache-Control headers, and</span>
<span class="c">        has no effect on the actual expiration of tiles in the caches (see</span>
<span class="c">        &lt;auto_expire&gt; for that).</span>
<span class="c">   --&gt;</span>
   <span class="nt">&lt;expires&gt;</span>3600<span class="nt">&lt;/expires&gt;</span>

   <span class="c">&lt;!-- auto_expire</span>

<span class="c">        Tiles older (in seconds) than this value will be re-requested and</span>
<span class="c">        updated in the cache. Note that this will only delete tiles from the</span>
<span class="c">        cache when they are accessed: You cannot use this configuration to</span>
<span class="c">        limit the size of the created cache. Note that, if set, this value</span>
<span class="c">        overrides the value given by &lt;expires&gt;.</span>
<span class="c">   --&gt;</span>
   <span class="nt">&lt;auto_expire&gt;</span>86400<span class="nt">&lt;/auto_expire&gt;</span>

   <span class="c">&lt;!-- dimensions</span>

<span class="c">        Optional dimensions that should be cached.</span>

<span class="c">        The order of the &lt;dimension&gt; tags inside the &lt;dimensions&gt; block is</span>
<span class="c">        important, as it is used to create the directory structure for the</span>
<span class="c">        disk cache. That is, if you change the order of these values, any</span>
<span class="c">        tiles that have been previously cached are invalidated: They are not</span>
<span class="c">        removed from the cache, but they no longer exist for mod-mapcache.</span>
<span class="c">   --&gt;</span>
   <span class="nt">&lt;dimensions&gt;</span>
      <span class="c">&lt;!-- values dimension</span>

<span class="c">           The example here creates a DIM1 dimension.</span>

<span class="c">           * WMS and WMTS clients can now add a &amp;DIM1=value to their request</span>
<span class="c">             string. If they don&#39;t specify this key/value, the default will</span>
<span class="c">             be to use DIM1=foobar.</span>
<span class="c">           * The allowed values for DIM1= are foobar (it is important to add</span>
<span class="c">             the default value to the allowed values entry), foobarbaz, foo</span>
<span class="c">             and bar.</span>
<span class="c">           * The value specified for DIM1 will be forwarded to the WMS</span>
<span class="c">             source.</span>
<span class="c">           * The produced tile will be stored in the file</span>
<span class="c">             base/gridname/DIM1/value/xx/xx/xx/xx/xx/xx.png. That is, there</span>
<span class="c">             are as many different caches created as there are values in the</span>
<span class="c">             &lt;values&gt; tag.</span>
<span class="c">      --&gt;</span>
      <span class="nt">&lt;dimension</span> <span class="na">type=</span><span class="s">&quot;values&quot;</span> <span class="na">name=</span><span class="s">&quot;DIM1&quot;</span> <span class="na">default=</span><span class="s">&quot;foobar&quot;</span><span class="nt">&gt;</span>foobar,foobarbaz,foo,bar<span class="nt">&lt;/dimension&gt;</span>

      <span class="c">&lt;!-- regex dimension</span>

<span class="c">           The following creates a MAPFILE dimension, for using the same</span>
<span class="c">           mod-mapcache tileset with different MapServer mapfiles. The name</span>
<span class="c">           of the mapfiles need not be known to mod-mapcache, and can</span>
<span class="c">           therefore be created even after mod-mapcache has been started.</span>

<span class="c">           When a user passes a MAPFILE=/path/to/mapfile, the string</span>
<span class="c">           &quot;/path/to/mapfile&quot; is validated against the supplied (PCRE)</span>
<span class="c">           regular expression. The one in this example allows a name composed</span>
<span class="c">           of aphanumeric characters separated by slashes (/) and ending in</span>
<span class="c">           &quot;.map&quot; ( [a-zA-Z0-9\./]*\.map$ ), but will fail if there are two</span>
<span class="c">           consecutive dots (..) in the path, to prevent filesystem traversal</span>
<span class="c">           ( (?!.*\.\.) ).</span>
<span class="c">      --&gt;</span>
      <span class="nt">&lt;dimension</span> <span class="na">type=</span><span class="s">&quot;regex&quot;</span> <span class="na">name=</span><span class="s">&quot;MAPFILE&quot;</span> <span class="na">default=</span><span class="s">&quot;/path/to/mapfile.map&quot;</span><span class="nt">&gt;</span>^(?!.*\.\.)[a-zA-Z0-9\./]*\.map$<span class="nt">&lt;/dimension&gt;</span>

      <span class="c">&lt;!-- intervals dimension</span>

<span class="c">           The syntax is the same as common-ows, i.e. a comma-separated list</span>
<span class="c">           of &quot;min/max/resolution&quot; entries, e.g:</span>

<span class="c">           * 0/5000/1000 allows the values 0,1000,2000,3000,4000 and 5000.</span>
<span class="c">           * 0/100/0 allows any values between 0 and 100.</span>
<span class="c">           * Both values can be combined: 0/5000/1000,0/100/0.</span>
<span class="c">      --&gt;</span>
      <span class="nt">&lt;dimension</span> <span class="na">name=</span><span class="s">&quot;ELEVATION&quot;</span> <span class="na">type=</span><span class="s">&quot;intervals&quot;</span> <span class="na">default=</span><span class="s">&quot;0&quot;</span><span class="nt">&gt;</span>0/5000/1000<span class="nt">&lt;/dimension&gt;</span>

      <span class="c">&lt;!-- Coming in a future version: support for ISO8601 date/time dimensions --&gt;</span>

   <span class="nt">&lt;/dimensions&gt;</span>
<span class="nt">&lt;/tileset&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="services">
<h2>Services<a class="headerlink" href="#services" title="Permalink to this headline">¶</a></h2>
<p>Services are the type of request that mod-mapcache will respond to. You should,
of course, enable at least one.</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;service</span> <span class="na">type=</span><span class="s">&quot;wms&quot;</span> <span class="na">enabled=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>
   <span class="c">&lt;!--</span>
<span class="c">        This service should actually be called &quot;ogc&quot;. It is different from</span>
<span class="c">        the other services as it does not listen on the /wms endpoint, but</span>
<span class="c">        directly on /. It will intercept WMS GetMap requests that can be</span>
<span class="c">        satisfied from configured tilesets, and can optionally forward all</span>
<span class="c">        the rest to (an)other server(s).</span>

<span class="c">        TODO: This needs way more documenting.</span>

<span class="c">   &lt;forwarding_rule name=&quot;foo rule&quot;&gt;</span>
<span class="c">     &lt;append_pathinfo&gt;true&lt;/append_pathinfo&gt;</span>
<span class="c">     &lt;http&gt;</span>
<span class="c">       &lt;url&gt;http://localhost/mapcacheproxy&lt;/url&gt;</span>
<span class="c">     &lt;/http&gt;</span>
<span class="c">   &lt;/forwarding_rule&gt;</span>
<span class="c">   --&gt;</span>

   <span class="c">&lt;!-- full_wms</span>

<span class="c">        Configure response to WMS requests that are not aligned to a</span>
<span class="c">        tileset&#39;s grids. Responding to requests that are not in the SRS of a</span>
<span class="c">        configured grid is not supported, but this should never happen as</span>
<span class="c">        only the supported SRSs are publicized in the capabilities document.</span>

<span class="c">        Allowed values are:</span>

<span class="c">        - error    : Return a 404 error (default).</span>
<span class="c">        - assemble : Build the full image by assembling cached tiles.</span>
<span class="c">        - forward  : Forward the request to the configured source.</span>
<span class="c">   --&gt;</span>
   <span class="nt">&lt;full_wms&gt;</span>assemble<span class="nt">&lt;/full_wms&gt;</span>

   <span class="c">&lt;!-- resample mode</span>

<span class="c">        Filter applied when resampling tiles for full WMS requests. Can be</span>
<span class="c">        either:</span>

<span class="c">        - nearest  : Fastest, poor quality.</span>
<span class="c">        - bilinear : Slower, higher qulity.</span>
<span class="c">   --&gt;</span>
   <span class="nt">&lt;resample_mode&gt;</span>bilinear<span class="nt">&lt;/resample_mode&gt;</span>

   <span class="c">&lt;!-- format</span>

<span class="c">        Image format to use when assembling tiles.</span>
<span class="c">   --&gt;</span>
   <span class="nt">&lt;format</span> <span class="na">allow_client_override=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>myjpeg<span class="nt">&lt;/format&gt;</span>

<span class="nt">&lt;/service&gt;</span>
<span class="nt">&lt;service</span> <span class="na">type=</span><span class="s">&quot;wmts&quot;</span> <span class="na">enabled=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;service</span> <span class="na">type=</span><span class="s">&quot;tms&quot;</span> <span class="na">enabled=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;service</span> <span class="na">type=</span><span class="s">&quot;kml&quot;</span> <span class="na">enabled=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;service</span> <span class="na">type=</span><span class="s">&quot;gmaps&quot;</span> <span class="na">enabled=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;service</span> <span class="na">type=</span><span class="s">&quot;ve&quot;</span> <span class="na">enabled=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;service</span> <span class="na">type=</span><span class="s">&quot;demo&quot;</span> <span class="na">enabled=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="miscellaneous">
<h2>Miscellaneous<a class="headerlink" href="#miscellaneous" title="Permalink to this headline">¶</a></h2>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="c">&lt;!-- default_format</span>

<span class="c">     Format to use when a client asks for an image that is dynamically</span>
<span class="c">     created from multiple cached tiles. Note that using a PNG format with</span>
<span class="c">     &quot;best&quot; compression is not recommended here as it is computationally</span>
<span class="c">     expensive. It is better to use a PNG format with &quot;fast&quot;compression here,</span>
<span class="c">     unless you have plenty of server CPU power and/or limited bandwidth.</span>
<span class="c">--&gt;</span>
<span class="nt">&lt;default_format&gt;</span>JPEG<span class="nt">&lt;/default_format&gt;</span>

<span class="c">&lt;!-- services</span>

<span class="c">     Services that mod-mapcache will respond to. Each service is accessible</span>
<span class="c">     at the URL http://host/path/to/mapcache/{service}, e.g.</span>
<span class="c">     http://myhost/mapcache/wms for OGC WMS.</span>
<span class="c">--&gt;</span>

<span class="c">&lt;!-- errors</span>

<span class="c">     Configure how errors will be reported back to a client:</span>

<span class="c">     - log        : No error is reported back, except an HTTP error code.</span>
<span class="c">     - report     : Return the error message to the client in textual format.</span>
<span class="c">     - empty_img  : Return an empty image to the client. The actual error</span>
<span class="c">                    code is in the X-Mapcache-Error HTTP header.</span>
<span class="c">     - report_img : Return an image with the error text included inside. (Not</span>
<span class="c">                    implemented yet.)</span>

<span class="c">     The default setting is to report the error message back to the user. In</span>
<span class="c">     production, you might want to set this to &quot;log&quot; if you&#39;re paranoid, or</span>
<span class="c">     to &quot;empty_img&quot; if you want to play nice with non-conforming clients.</span>
<span class="c">--&gt;</span>
<span class="nt">&lt;errors&gt;</span>report<span class="nt">&lt;/errors&gt;</span>
</pre></div>
</div>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;locker</span> <span class="na">type=</span><span class="s">&quot;disk&quot;</span><span class="nt">&gt;</span>  <span class="c">&lt;!-- this is the default --&gt;</span>
<span class="c">&lt;!--</span>
<span class="c">     Where to put lockfiles (to block other clients while a metatile is being</span>
<span class="c">     rendered). Defaults to /tmp. This location should be writable by the</span>
<span class="c">     Apache user.</span>
<span class="c">--&gt;</span>
  <span class="nt">&lt;directory&gt;</span>/tmp<span class="nt">&lt;/directory&gt;</span>
  <span class="nt">&lt;retry&gt;</span>0.01<span class="nt">&lt;/retry&gt;</span> <span class="c">&lt;!-- check back every .01 seconds --&gt;</span>
  <span class="nt">&lt;timeout&gt;</span>60<span class="nt">&lt;/timeout&gt;</span> <span class="c">&lt;!-- Consider a lock stale after this many seconds.</span>
<span class="c">                             May cause issues if WMS rendering time exceeds</span>
<span class="c">                             this value. --&gt;</span>
<span class="nt">&lt;/locker&gt;</span>
</pre></div>
</div>
<p>For specific information about locking, read <a class="reference internal" href="locks.html#mapcache-locks"><span>this</span></a>.</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="c">&lt;!-- log_level</span>

<span class="c">     For CGI/FastCGI only; For the Apache module use the httpd.conf LogLevel</span>
<span class="c">     key.</span>

<span class="c">     Defines the verbosity of logged information. Valid values are:</span>

<span class="c">     - debug</span>
<span class="c">     - info</span>
<span class="c">     - notice</span>
<span class="c">     - warn (default)</span>
<span class="c">     - error</span>
<span class="c">     - crit</span>
<span class="c">     - alert</span>
<span class="c">     - emerg</span>
<span class="c">--&gt;</span>
<span class="nt">&lt;log_level&gt;</span>warn<span class="nt">&lt;/log_level&gt;</span>

<span class="c">&lt;!-- auto_reload</span>

<span class="c">     For FastCGI only. If set to true, the configuration will be</span>
<span class="c">     automatically reloaded if the configuration file has changed. Default is</span>
<span class="c">     false.</span>
<span class="c">--&gt;</span>
<span class="nt">&lt;auto_reload&gt;</span>true<span class="nt">&lt;/auto_reload&gt;</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><h3>Navigation</h3>
<p>
<a href="../about.html" title="About">About</a><br>
<a href="../products.html" title="Products">Products</a><br>
<a href="../community/index.html" title="Community">Community</a><br>
<a href="../development/index.html" title="Development">Development</a><br>
<a href="../download.html" title="Downloads">Downloads</a><br>
<a href="../documentation.html" title="Documentation">Documentation</a><br>
<a href="../faq.html" title="FAQ">FAQ</a>
</p>
  <h3>Current Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Configuration File</a><ul>
<li><a class="reference internal" href="#source">Source</a></li>
<li><a class="reference internal" href="#cache">Cache</a></li>
<li><a class="reference internal" href="#format">Format</a></li>
<li><a class="reference internal" href="#grid">Grid</a><ul>
<li><a class="reference internal" href="#mandatory-configuration-options">Mandatory Configuration Options</a></li>
<li><a class="reference internal" href="#optional-configuration-options">Optional Configuration Options</a></li>
<li><a class="reference internal" href="#preconfigured-grids">Preconfigured Grids</a></li>
</ul>
</li>
<li><a class="reference internal" href="#tileset">Tileset</a></li>
<li><a class="reference internal" href="#services">Services</a></li>
<li><a class="reference internal" href="#miscellaneous">Miscellaneous</a></li>
</ul>
</li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, Open Source Geospatial Foundation.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.3.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.4</a>
      
    </div>

    

    
  </body>
</html>