
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Image Formats &#8212; MapServer 7.6.4 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx.css" />
    
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    
    <link rel="shortcut icon" href="../_static/mapserver.ico"/>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="Tileset Dimensions" href="dimensions.html" />
    <link rel="prev" title="Cache Types" href="caches.html" /> 
  </head><body>

<table width="100%" style="width: 100%; background-color: white;">
  <tr>
    <td rowspan="2" style="padding: 10px 0px 10px 10px;">
      <a href="../index.html" title="Home"><img src="../_static/banner.png" alt="MapServer banner" border="0" /></a>
    </td>
    <td style="padding: 10px 10px 0px 0px; text-align: right; vertical-align: top;">
      <a href="../index.html" title="Home">Home</a> |
      <a href="../products.html" title="Products (MapServer core, MapCache, TinyOWS">Products</a> |
      <a href="https://github.com/mapserver/mapserver/issues/" title="Issue Tracker (MapServer core)">Issue Tracker</a> |
      <a href="../community/service_providers.html" title="Professional Service Providers">Service Providers</a> |      
      <a href="../faq.html" title="Frequently Asked Questions">FAQ</a> |
      <a href="https://twitter.com/mapserver_osgeo" title="Twitter" target="_blank">Twitter</a> |
      <a href="../download.html" title="Download Source or Binaries">Download </a> |
      <a class="badge" href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=KRJ2X44N3HA6U&source=url" target="_blank">
        <img src="https://img.shields.io/badge/donate-%E2%9D%A4%C2%A0-ff69b4.svg?style=flat" alt="Donate to MapServer">
      </a>
    </td>
  </tr>
  <tr>
    <td style="padding: 0px 10px 0px 0px; text-align: right; vertical-align: bottom;">
        <img src="../_static/flagicons/en.png" alt="en" title="en" border="0" width="18px" height="13px"/>
        
          <a href="../ar/mapcache/formats.html"><img src="../_static/flagicons/ar.png" alt="ar" title="ar" border="0" /></a>
        
        
          <a href="../de/mapcache/formats.html"><img src="../_static/flagicons/de.png" alt="de" title="de" border="0" /></a>
        
        
          <a href="../el/mapcache/formats.html"><img src="../_static/flagicons/el.png" alt="el" title="el" border="0" /></a>
        
        
          <a href="../es/mapcache/formats.html"><img src="../_static/flagicons/es.png" alt="es" title="es" border="0" /></a>
        
        
          <a href="../fr/mapcache/formats.html"><img src="../_static/flagicons/fr.png" alt="fr" title="fr" border="0" /></a>
        
        
          <a href="../id/mapcache/formats.html"><img src="../_static/flagicons/id.png" alt="id" title="id" border="0" /></a>
        
        
          <a href="../it/mapcache/formats.html"><img src="../_static/flagicons/it.png" alt="it" title="it" border="0" /></a>
        
        
          <a href="../ja/mapcache/formats.html"><img src="../_static/flagicons/ja.png" alt="ja" title="ja" border="0" /></a>
        
        
          <a href="../nl_NL/mapcache/formats.html"><img src="../_static/flagicons/nl_NL.png" alt="nl_NL" title="nl_NL" border="0" /></a>
        
        
          <a href="../pl/mapcache/formats.html"><img src="../_static/flagicons/pl.png" alt="pl" title="pl" border="0" /></a>
        
        
          <a href="../ru/mapcache/formats.html"><img src="../_static/flagicons/ru.png" alt="ru" title="ru" border="0" /></a>
        
        
          <a href="../sq/mapcache/formats.html"><img src="../_static/flagicons/sq.png" alt="sq" title="sq" border="0" /></a>
        
        
          <a href="../tr/mapcache/formats.html"><img src="../_static/flagicons/tr.png" alt="tr" title="tr" border="0" /></a>
        

    </td>
  </tr>
</table>


    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="dimensions.html" title="Tileset Dimensions"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="caches.html" title="Cache Types"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../documentation.html" >MapServer 7.6.4 Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">MapCache 1.10.0</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Image Formats</a></li> 
      </ul>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="image-formats">
<span id="mapcache-formats"></span><h1>Image Formats<a class="headerlink" href="#image-formats" title="Permalink to this headline">¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd">Author</dt>
<dd class="field-odd"><p>Thomas Bonfort</p>
</dd>
<dt class="field-even">Contact</dt>
<dd class="field-even"><p>tbonfort at terriscope.fr</p>
</dd>
</dl>
<p>MapCache allows you to configure how the image should be saved to a cache once
it has been requested from a source. The JPEG format should mostly be used for
raster imagery, whereas the PNG format is most useful for vector based imagery
where there are large uniform areas.</p>
<section id="jpeg-format">
<span id="mapcache-jpeg-format"></span><h2>JPEG Format<a class="headerlink" href="#jpeg-format" title="Permalink to this headline">¶</a></h2>
<p>The JPEG format saves tiles to JPEG. You can configure the JPEG compression
level (from 1 to 100) and the colorspace that should be used (RGB or YCbCr)</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;format</span> <span class="na">name=</span><span class="s">&quot;myjpeg&quot;</span> <span class="na">type=</span><span class="s">&quot;JPEG&quot;</span><span class="nt">&gt;</span>
   <span class="nt">&lt;quality&gt;</span>85<span class="nt">&lt;/quality&gt;</span>
   <span class="nt">&lt;photometric&gt;</span>ycbcr<span class="nt">&lt;/photometric&gt;</span>
<span class="nt">&lt;/format&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li><p><em>quality</em>: This is the typical JPEG quality setting. Values under 50 produce
lighter images but with notable compression artifacts. 100 should be avoided
as it produces very heavy images.</p></li>
<li><p><em>photometric</em>: By default the YCbCr colorspace is used as it produces images
that tend to be 2 to 3 times lighter. Use RGB if you don’t want the default.</p></li>
</ul>
</section>
<section id="png-format">
<span id="mapcache-png-format"></span><h2>PNG Format<a class="headerlink" href="#png-format" title="Permalink to this headline">¶</a></h2>
<p>The PNG format creates PNG images, with optional quantization (reduction of
the number of colors to create an 8-bit palleted PNG).</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;format</span> <span class="na">name=</span><span class="s">&quot;mypng&quot;</span> <span class="na">type=</span><span class="s">&quot;PNG&quot;</span><span class="nt">&gt;</span>
   <span class="nt">&lt;compression&gt;</span>fast<span class="nt">&lt;/compression&gt;</span>
   <span class="nt">&lt;colors&gt;</span>256<span class="nt">&lt;/colors&gt;</span>
<span class="nt">&lt;/format&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li><p><em>compression</em>: Choose which zlib compression to apply to the image data.
Recognized values are “fast” and “best”. Omit the key to use the default
zlib compression.</p></li>
<li><p><em>colors</em>: Number of colors to use for quantization. Omit this key to
produce 24 or 32 bit RGB/RGBA PNGs, or set to a value between 2 and 256
to create an 8-bit palleted PNG. The quantization step is destructive:
There is no guarantee that pixels will not have a noticeable shift in color
in the case when the tile contains many colors.</p></li>
</ul>
</section>
<section id="mixed-format">
<span id="mapcache-mixed-format"></span><h2>Mixed Format<a class="headerlink" href="#mixed-format" title="Permalink to this headline">¶</a></h2>
<p>There is a third special format which mixes JPEG and PNG compression depending
on the contents of the image. This format allows creation of caches for raster
imagery using JPEG compression (which is more efficient) on zones with imagery
data, and PNG compression (which supports transparency) on zones with no
imagery or on a boundary between imagery and emptiness.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;format</span> <span class="na">name=</span><span class="s">&quot;mymixed&quot;</span> <span class="na">type=</span><span class="s">&quot;MIXED&quot;</span><span class="nt">&gt;</span>
   <span class="nt">&lt;opaque&gt;</span>myjpeg<span class="nt">&lt;/opaque&gt;</span>
   <span class="nt">&lt;transparent&gt;</span>mypng<span class="nt">&lt;/transparent&gt;</span>
<span class="nt">&lt;/format&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li><p><em>opaque</em>: The format to use when the image has only fully opaque pixels</p></li>
<li><p><em>transparent</em>: The format to use when the image has some transparent or
semi-opaque pixels.</p></li>
</ul>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script><h3>Navigation</h3>
<p>
<a href="../about.html" title="About">About</a><br>
<a href="../products.html" title="Products">Products</a><br>
<a href="../community/index.html" title="Community">Community</a><br>
<a href="../development/index.html" title="Development">Development</a><br>
<a href="../download.html" title="Downloads">Downloads</a><br>
<a href="../documentation.html" title="Documentation">Documentation</a><br>
<a href="../faq.html" title="FAQ">FAQ</a><br>
<a href="../psc.html" title="PSC">PSC</a><br>
<a href="https://twitter.com/mapserver_osgeo" title="Twitter">Twitter</a>
</p>
  <h3>Current Table Of Contents</h3>
  <ul>
<li><a class="reference internal" href="#">Image Formats</a><ul>
<li><a class="reference internal" href="#jpeg-format">JPEG Format</a></li>
<li><a class="reference internal" href="#png-format">PNG Format</a></li>
<li><a class="reference internal" href="#mixed-format">Mixed Format</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="dimensions.html" title="Tileset Dimensions"
             >next</a> |</li>
        <li class="right" >
          <a href="caches.html" title="Cache Types"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../documentation.html" >MapServer 7.6.4 Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >MapCache 1.10.0</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Image Formats</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; <a href="../copyright.html">Copyright</a> 2022, Open Source Geospatial Foundation.
      Last updated on 2022-02-22.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.4.0.
    </div>
  </body>
</html>