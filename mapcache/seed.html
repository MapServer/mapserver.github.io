<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Seeder &#8212; MapServer 8.0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx.css?v=6c7b17ac" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=dd298242" />
    <link rel="stylesheet" type="text/css" href="../_static/ribbon.css?v=ea091bf4" />
    
    <script src="../_static/documentation_options.js?v=521b6f53"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    
    <link rel="icon" href="../_static/mapserver.ico"/>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="Cache Types" href="caches.html" />
    <link rel="prev" title="Supported Tile Services" href="services.html" /> 
  </head><body>


<!-- for main branch only, do not backport this -->

<table width="100%" style="width: 100%; background-color: white;">
  <tr>
    <td rowspan="2" style="padding: 10px 0px 10px 10px;">
      <a href="../index.html" title="Home"><img src="../_static/banner.png" alt="MapServer banner" border="0" /></a>
    </td>
    <td style="padding: 10px 10px 0px 0px; text-align: right; vertical-align: top;">
      <a href="../index.html" title="Home">Home</a> |
      <a href="../products.html" title="Products (MapServer core, MapCache, TinyOWS">Products</a> |
      <a href="https://github.com/mapserver/mapserver/issues/" title="Issue Tracker (MapServer core)">Issue Tracker</a> |
      <a href="../community/service_providers.html" title="Professional Service Providers">Service Providers</a> |      
      <a href="../faq.html" title="Frequently Asked Questions">FAQ</a> |
      <a href="https://twitter.com/mapserver_osgeo" title="Twitter" target="_blank">Twitter</a> |
      <a href="../download.html" title="Download Source or Binaries">Download </a> |
      <a class="badge" href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=KRJ2X44N3HA6U&source=url" target="_blank">
        <img src="https://img.shields.io/badge/donate-%E2%9D%A4%C2%A0-ff69b4.svg?style=flat" alt="Donate to MapServer">
      </a>
    </td>
  </tr>
  <tr>
    <td style="padding: 0px 10px 0px 0px; text-align: right; vertical-align: bottom;">
        <img src="../_static/flagicons/en.png" alt="en" title="en" border="0" width="18px" height="13px"/>
        
          <a href="../ar/mapcache/seed.html"><img src="../_static/flagicons/ar.png" alt="ar" title="ar" border="0" /></a>
        
        
          <a href="../de/mapcache/seed.html"><img src="../_static/flagicons/de.png" alt="de" title="de" border="0" /></a>
        
        
          <a href="../el/mapcache/seed.html"><img src="../_static/flagicons/el.png" alt="el" title="el" border="0" /></a>
        
        
          <a href="../es/mapcache/seed.html"><img src="../_static/flagicons/es.png" alt="es" title="es" border="0" /></a>
        
        
          <a href="../fr/mapcache/seed.html"><img src="../_static/flagicons/fr.png" alt="fr" title="fr" border="0" /></a>
        
        
          <a href="../id/mapcache/seed.html"><img src="../_static/flagicons/id.png" alt="id" title="id" border="0" /></a>
        
        
          <a href="../it/mapcache/seed.html"><img src="../_static/flagicons/it.png" alt="it" title="it" border="0" /></a>
        
        
          <a href="../ja/mapcache/seed.html"><img src="../_static/flagicons/ja.png" alt="ja" title="ja" border="0" /></a>
        
        
          <a href="../nl_NL/mapcache/seed.html"><img src="../_static/flagicons/nl_NL.png" alt="nl_NL" title="nl_NL" border="0" /></a>
        
        
          <a href="../pl/mapcache/seed.html"><img src="../_static/flagicons/pl.png" alt="pl" title="pl" border="0" /></a>
        
        
          <a href="../ru/mapcache/seed.html"><img src="../_static/flagicons/ru.png" alt="ru" title="ru" border="0" /></a>
        
        
          <a href="../sq/mapcache/seed.html"><img src="../_static/flagicons/sq.png" alt="sq" title="sq" border="0" /></a>
        
        
          <a href="../tr/mapcache/seed.html"><img src="../_static/flagicons/tr.png" alt="tr" title="tr" border="0" /></a>
        

    </td>
  </tr>
</table>


    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="caches.html" title="Cache Types"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="services.html" title="Supported Tile Services"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../documentation.html" >MapServer 8.0.1 Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">MapCache 1.14.0</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Seeder</a></li> 
      </ul>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="seeder">
<span id="mapcache-seed"></span><h1>Seeder<a class="headerlink" href="#seeder" title="Link to this heading">¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd">Author<span class="colon">:</span></dt>
<dd class="field-odd"><p>Thomas Bonfort</p>
</dd>
<dt class="field-even">Contact<span class="colon">:</span></dt>
<dd class="field-even"><p>tbonfort at terriscope.fr</p>
</dd>
<dt class="field-odd">Author<span class="colon">:</span></dt>
<dd class="field-odd"><p>Mathieu Coudert</p>
</dd>
<dt class="field-even">Contact<span class="colon">:</span></dt>
<dd class="field-even"><p>mathieu.coudert at gmail.com</p>
</dd>
</dl>
<dl class="simple">
<dt>Mod-mapcache ships with an advanced seeding tool, whose main features are:</dt><dd><ul class="simple">
<li><p>configurable number of seeding threads, to speed up the rendering</p></li>
<li><p>ability to reseed tiles older than a certain timestamp</p></li>
<li><p>ability to seed tiles given a shapefile/OGR datasource</p></li>
</ul>
</dd>
</dl>
<section id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Link to this heading">¶</a></h2>
<p>The seeding utility is named mapcache_seed, and is located under your install
directory (default is /usr/local/bin).</p>
<section id="commandline-options">
<h3>Commandline Options<a class="headerlink" href="#commandline-options" title="Link to this heading">¶</a></h3>
<p>Options are available in short and long versions (e.g. -c or –config).</p>
<p><strong>-b | –non-interactive</strong>: <em>(added in MapCache 1.12.0)</em> print progress messages
on new lines.</p>
<p><strong>-c | –config [file]</strong>: path to the mapcache.xml configuration file that
contains the tilesets that need to be seeded.</p>
<p><strong>-C | –cache [override]</strong>: Override cache used by selected tileset
(useful for selectively seeding fallback/multitier caches).</p>
<p><strong>-D | –dimension “DIMENSION=VALUE”</strong>: used to specify which dimension to use
if the tileset supports dimensions. Can be used multiple times to set multiple
dimensions, e.g. -D “DIM1=VAL1” -D “DIM2=VAL2”.</p>
<p><strong>-e | –extent minx,miny,maxx,maxy</strong>: bounding box of the area to seed.</p>
<p><strong>-f | –force</strong>: force recreation of existing tiles.</p>
<p><strong>-g | –grid [grid]</strong>: name of the grid that must be seeded (the selected
tileset must reference the given grid).</p>
<p><strong>-h | –help</strong>: show help.</p>
<p><strong>-H | –header “HEADER=VALUE”</strong>: <em>(added in MapCache 1.12.0)</em> used to specify a
key-value pair to set an HTTP header in a forwarding rule or HTTP request. Can be
used multiple times to set multiple headers, e.g. <em>-H “CUSTOM-HEADER1=VAL1”
-H “CUSTOM-HEADER2=VAL2”.</em></p>
<p><strong>-i | –iteration-mode</strong>: either “<em>drill-down</em>” or “<em>scanline</em>”.
Default is to use drill-down for g, WGS84 and GoogleMapsCompatible grids, and
scanline for others. Use this flag to override. (scanline was formerly
referred to as “level-by-level”)</p>
<p><strong>-L | –log-failed [file]</strong>: Log failed tiles to file.</p>
<p><strong>-m | –mode</strong>: the mode to use the seeder: “<em>seed</em>”, “<em>delete</em>” or
“<em>transfer</em>”.
Default is seed (<em>mode: seed</em>).</p>
<p><strong>-M | –metasize</strong>: override metatile size while seeding, e.g. 8,8.</p>
<p><strong>-n | –nthreads</strong>: number of parallel threads that should be used to request
tiles from the WMS source. The default is 1, but can be set higher if the WMS
server can withstand parallel requests. (As a rule of thumb, the value chosen
here should never be much higher than the number of CPUs on the WMS server.)</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This option is incompatible with the <strong>-p | –nprocesses</strong> option.</p>
</div>
<p><strong>-o | –older [timestamp|now]</strong>: only seed tiles that are older than the given
value. The value can either be the string “<em>now</em>”, or a date formatted like
year/month/day hour:minute, e.g. “2011/01/31 20:45”.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A full timestamp should be quoted.</p>
</div>
<p><strong>-p | –nprocesses</strong>: number of parallel processes that should be used to
request tiles from the WMS source.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This option is incompatible with the <strong>-n | –nthreads</strong> option.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>When working with multiple processes (-p switch) and SQLite cache
backends, some errors may appear under high concurrency when writing to the
SQLite database (error: SQL logic error or missing database (1)).
Upgrading to SQLite &gt;= 3.7.15 seems to resolve this issue.</p>
</div>
<p><strong>-P | –percent [number]</strong>: Percent of failed requests allowed from the last 1000
before we abort (default: 1%, set to 0 to abort on first error).</p>
<p><strong>-q | –quiet</strong>: don’t print progress messages to the standard output.</p>
<p><strong>-R | –retry-failed [file]</strong>: Retry failed requests logged to file by –log-failed.</p>
<p><strong>-t | –tileset [tileset]</strong>: name of the tileset that must be seeded.</p>
<p><strong>-v | –verbose</strong>: print verbose debugging info (if compiled in).</p>
<p><strong>-x | –transfer</strong>: the tileset to transfer when seeder is run in transfer
mode.</p>
<p><strong>-z | –zoom minzoom,maxzoom</strong>: start and end zoom levels that must be seeded.</p>
</section>
<section id="optional-commandline-options-when-using-ogr-geos">
<h3>Optional Commandline Options When Using OGR/GEOS<a class="headerlink" href="#optional-commandline-options-when-using-ogr-geos" title="Link to this heading">¶</a></h3>
<p>At compile time, if OGR and GEOS are found on the system, the seeder tool will
support additional options to seed only the tiles that cover an arbitrary
geographical area. <em>Important:</em> Note that, for the time being, the OGR
datasource should be in the same projection as the grid you are seeding, as
there is no automatic reprojection from the datasource projection to the grid
projection.</p>
<p><strong>-d | –ogr-datasource [ogr_datasource]</strong>: OGR connection to the spatial source.
Consult the OGR documentation for all that is supported. In the simplest case
(e.g. a Shapefile), this is just the full filename of the shapefile.</p>
<p><strong>-l | –ogr-layer [ogr_layer]</strong>: for datasources that contain multiple layers
(e.g. PostGIS, with multiple tables), determines which layer will be used.</p>
<p><strong>-s | –ogr-sql [ogr_sql]</strong>: OGR SQL expression that can be applied (see <a class="reference external" href="https://gdal.org/user/ogr_sql_dialect.html">OGR SQL</a>).</p>
<p><strong>-w | –ogr-where [ogr_where]</strong>: SQL “where” expression to filter out returned values.
This would typically be used to select only the geometry of a given country if the
datasource contains all the world contours.</p>
</section>
<section id="important-note">
<h3>Important Note<a class="headerlink" href="#important-note" title="Link to this heading">¶</a></h3>
<p>The seeding utility must be run under the same user account as the
user running the webserver. This is required so the permissions on the tiles
created by the seeder are accessible by the webserver, and conversely so the
seeder has the rights to write files to directories created by the webserver.</p>
<p>A sample seeding session goes like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[user@host]$ sudo www-data
[www-data@host]$ /path/to/mapcache/src/mapcache_seed -c /path/to/www/conf/mapcache.xml [[options]]
[www-data@host]$ logout
[user@host]$
</pre></div>
</div>
</section>
<section id="examples">
<h3>Examples<a class="headerlink" href="#examples" title="Link to this heading">¶</a></h3>
<p>Seed the “osm” tileset with the “g” (Google / Web Mercator) grid:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">src</span><span class="o">/</span><span class="n">mapcache_seed</span> <span class="o">-</span><span class="n">c</span> <span class="n">mapcache</span><span class="o">.</span><span class="n">xml</span> <span class="o">-</span><span class="n">t</span> <span class="n">osm</span> <span class="o">-</span><span class="n">g</span> <span class="n">g</span>
</pre></div>
</div>
<p>Seed levels 0 through 12:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">src</span><span class="o">/</span><span class="n">mapcache_seed</span> <span class="o">-</span><span class="n">c</span> <span class="n">mapcache</span><span class="o">.</span><span class="n">xml</span> <span class="o">-</span><span class="n">t</span> <span class="n">osm</span> <span class="o">-</span><span class="n">g</span> <span class="n">g</span> <span class="o">-</span><span class="n">z</span> <span class="mi">0</span><span class="p">,</span><span class="mi">12</span>
</pre></div>
</div>
<p>Given a shapefile that contains the world country contours, seed only the
areas that are covered by land (i.e. skip the oceans). Also, use 4 request
threads in parallel:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">src</span><span class="o">/</span><span class="n">mapcache_seed</span> <span class="o">-</span><span class="n">c</span> <span class="n">mapcache</span><span class="o">.</span><span class="n">xml</span> <span class="o">-</span><span class="n">t</span> <span class="n">osm</span> <span class="o">-</span><span class="n">g</span> <span class="n">g</span> <span class="o">-</span><span class="n">z</span> <span class="mi">0</span><span class="p">,</span><span class="mi">12</span> <span class="o">-</span><span class="n">n</span> <span class="mi">4</span> <span class="o">-</span><span class="n">d</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">seed</span><span class="o">.</span><span class="n">shp</span>
</pre></div>
</div>
<p>Same as beforehand, but only seed the USA (notice the quote usage, required to
create valid SQL with a single-quoted ‘US’:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">src</span><span class="o">/</span><span class="n">mapcache_seed</span> <span class="o">-</span><span class="n">c</span> <span class="n">mapcache</span><span class="o">.</span><span class="n">xml</span> <span class="o">-</span><span class="n">t</span> <span class="n">osm</span> <span class="o">-</span><span class="n">g</span> <span class="n">g</span> <span class="o">-</span><span class="n">z</span> <span class="mi">0</span><span class="p">,</span><span class="mi">12</span> <span class="o">-</span><span class="n">n</span> <span class="mi">4</span> <span class="o">-</span><span class="n">d</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">seed</span><span class="o">.</span><span class="n">shp</span> <span class="o">-</span><span class="n">w</span> <span class="s2">&quot;FIPS_A2=&#39;US&#39;&quot;</span>
</pre></div>
</div>
<p>Reseed levels 0 to 12 (this could also be done by deleting the cache for levels
0 to 12 and doing a classic seed, but doing so this way does not slow down
access from web clients):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">src</span><span class="o">/</span><span class="n">mapcache_seed</span> <span class="o">-</span><span class="n">c</span> <span class="n">mapcache</span><span class="o">.</span><span class="n">xml</span> <span class="o">-</span><span class="n">t</span> <span class="n">osm</span> <span class="o">-</span><span class="n">g</span> <span class="n">g</span> <span class="o">-</span><span class="n">z</span> <span class="mi">0</span><span class="p">,</span><span class="mi">12</span> <span class="o">-</span><span class="n">o</span> <span class="n">now</span>
</pre></div>
</div>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p>
<a href="../about.html" title="About">About</a><br>
<a href="../products.html" title="Products">Products</a><br>
<a href="../community/index.html" title="Community">Community</a><br>
<a href="../development/index.html" title="Development">Development</a><br>
<a href="../download.html" title="Downloads">Downloads</a><br>
<a href="../documentation.html" title="Documentation">Documentation</a><br>
<a href="../faq.html" title="FAQ">FAQ</a><br>
<a href="../psc.html" title="PSC">PSC</a><br>
<a href="https://twitter.com/mapserver_osgeo" title="Twitter">Twitter</a>
</p>
  <h3>Current Table Of Contents</h3>
  <ul>
<li><a class="reference internal" href="#">Seeder</a><ul>
<li><a class="reference internal" href="#usage">Usage</a><ul>
<li><a class="reference internal" href="#commandline-options">Commandline Options</a></li>
<li><a class="reference internal" href="#optional-commandline-options-when-using-ogr-geos">Optional Commandline Options When Using OGR/GEOS</a></li>
<li><a class="reference internal" href="#important-note">Important Note</a></li>
<li><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="caches.html" title="Cache Types"
             >next</a> |</li>
        <li class="right" >
          <a href="services.html" title="Supported Tile Services"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../documentation.html" >MapServer 8.0.1 Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >MapCache 1.14.0</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Seeder</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; <a href="../copyright.html">Copyright</a> 2023, Open Source Geospatial Foundation.
      Last updated on 2023-12-22.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.5.
    </div>
  </body>
</html>