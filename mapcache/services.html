<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Supported Tile Services &mdash; MapServer 7.0.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '7.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/mapserver.ico"/>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="top" title="MapServer 7.0.0 documentation" href="../index.html" />
    <link rel="up" title="MapCache 1.4" href="index.html" />
    <link rel="next" title="Seeder" href="seed.html" />
    <link rel="prev" title="Configuration File" href="config.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body role="document">

<table width="100%" style="width: 100%; background-color: white;">
  <tr>
    <td rowspan="2" style="padding: 10px 0px 10px 10px;">
      <a href="../index.html" title="Home"><img src="../_static/banner.png" alt="MapServer banner" border="0" /></a>
    </td>
    <td style="padding: 10px 10px 0px 0px; text-align: right; vertical-align: top;">
      <a href="../index.html" title="Home">Home</a> |
      <a href="../products.html" title="Products (MapServer core, MapCache, TinyOWS">Products</a> |
      <a href="https://github.com/mapserver/mapserver/issues/" title="Issue Tracker (MapServer core)">Issue Tracker</a> |
      <a href="../faq.html" title="FAQ">FAQ</a> |
      <a href="../download.html" title="Download">Download </a>
    </td>
  </tr>
  <tr>
    <td style="padding: 0px 10px 0px 0px; text-align: right; vertical-align: bottom;">
        <img src="../_static/flagicons/en.png" alt="en" title="en" border="0" width="18px" height="13px"/>
        
          <a href="../ar/mapcache/services.html"><img src="../_static/flagicons/ar.png" alt="ar" title="ar" border="0" /></a>
        
        
          <a href="../de/mapcache/services.html"><img src="../_static/flagicons/de.png" alt="de" title="de" border="0" /></a>
        
        
          <a href="../el/mapcache/services.html"><img src="../_static/flagicons/el.png" alt="el" title="el" border="0" /></a>
        
        
          <a href="../es/mapcache/services.html"><img src="../_static/flagicons/es.png" alt="es" title="es" border="0" /></a>
        
        
          <a href="../fr/mapcache/services.html"><img src="../_static/flagicons/fr.png" alt="fr" title="fr" border="0" /></a>
        
        
          <a href="../id/mapcache/services.html"><img src="../_static/flagicons/id.png" alt="id" title="id" border="0" /></a>
        
        
          <a href="../it/mapcache/services.html"><img src="../_static/flagicons/it.png" alt="it" title="it" border="0" /></a>
        
        
          <a href="../ja/mapcache/services.html"><img src="../_static/flagicons/ja.png" alt="ja" title="ja" border="0" /></a>
        
        
          <a href="../nl_NL/mapcache/services.html"><img src="../_static/flagicons/nl_NL.png" alt="nl_NL" title="nl_NL" border="0" /></a>
        
        
          <a href="../pl/mapcache/services.html"><img src="../_static/flagicons/pl.png" alt="pl" title="pl" border="0" /></a>
        
        
          <a href="../ru/mapcache/services.html"><img src="../_static/flagicons/ru.png" alt="ru" title="ru" border="0" /></a>
        
        
          <a href="../sq/mapcache/services.html"><img src="../_static/flagicons/sq.png" alt="sq" title="sq" border="0" /></a>
        
        
          <a href="../tr/mapcache/services.html"><img src="../_static/flagicons/tr.png" alt="tr" title="tr" border="0" /></a>
        
        
          <a href="../uk/mapcache/services.html"><img src="../_static/flagicons/uk.png" alt="uk" title="uk" border="0" /></a>
        

    </td>
  </tr>
</table>


    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="seed.html" title="Seeder"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="config.html" title="Configuration File"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../documentation.html" >MapServer 7.0.0 Documentation</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">MapCache 1.4</a> &raquo;</li> 
      </ul>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="supported-tile-services">
<span id="mapcache-services"></span><h1>Supported Tile Services<a class="headerlink" href="#supported-tile-services" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Author:</th><td class="field-body">Thomas Bonfort</td>
</tr>
<tr class="field-even field"><th class="field-name">Contact:</th><td class="field-body">tbonfort at terriscope.fr</td>
</tr>
<tr class="field-odd field"><th class="field-name">Author:</th><td class="field-body">Stephen Woodbridge</td>
</tr>
</tbody>
</table>
<p>MapCache has the ability to serve tiles using a variety of different
request protocols and tile-naming conventions. This document describes
these. The various services must be turned on in the mapcache.xml file for
MapCache to respond to these specific requests.</p>
<p>All services are available on the demo interface, from which you are highly
encouraged to copy/paste the JavaScript code to get started when creating
your own pages accessing the MapCache tiles.</p>
<p>The following notation is used on this page and refers to object names in the
mapcache.xml configuration file.</p>
<blockquote>
<div><ul class="simple">
<li>&lt;tileset_name&gt; - name of a configured tileset</li>
<li>&lt;grid_name&gt; - name of explicitly or implicitly defined grid</li>
<li>&lt;quadkey&gt; - specific to the Virtual Earth tile service</li>
<li>&lt;z&gt; - zoom level in zxy naming scheme</li>
<li>&lt;y&gt; - row number in zxy naming scheme</li>
<li>&lt;x&gt; - column number in zxy naming scheme</li>
</ul>
</div></blockquote>
<div class="section" id="tms-service">
<span id="mapcache-tms"></span><h2>TMS Service<a class="headerlink" href="#tms-service" title="Permalink to this headline">¶</a></h2>
<p>The TMS service uses a z/x/y tile naming scheme where:</p>
<blockquote>
<div><ul class="simple">
<li><em>z</em> is the zoom level</li>
<li><em>x</em> is the column number</li>
<li><em>y</em> is the row number</li>
</ul>
</div></blockquote>
<p>To activate the TMS service, add these lines to the mapcache.xml configuration
file:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;service</span> <span class="na">type=</span><span class="s">&quot;tms&quot;</span> <span class="na">enabled=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>A &#8220;capabilities&#8221; document can be fetched via:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>http://myhost.com/mapcache/tms/1.0.0/
</pre></div>
</div>
<p>Tiles are requested using this scheme:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>http://myhost.com/mapcache/tms/1.0.0/&lt;tileset_name&gt;@&lt;grid_name&gt;/&lt;z&gt;/&lt;x&gt;/&lt;y&gt;.png
</pre></div>
</div>
<p>For EPSG:3857, EPSG:900913, or GoogleMapsCompatible grids, with cell = [z/x/y]:</p>
<p>z0:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">[</span><span class="mi">0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
<p>z1:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">[</span><span class="mi">1</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="o">/</span><span class="mi">1</span><span class="o">/</span><span class="mi">0</span><span class="p">]</span>
<span class="p">[</span><span class="mi">1</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="o">/</span><span class="mi">1</span><span class="o">/</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
<p>z2:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>[2/0/0][2/1/0][2/2/0][2/3/0]
[2/0/1][2/1/1][2/2/1][2/3/1]
[2/0/2]...
[2/0/3]...
</pre></div>
</div>
<p>etc...</p>
<p>For EPSG:4326 or WGS84 grids:</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The OGC WMTS specification rather absurdly requires the GoogleCRS84Quad
WellKnownScaleset to have a level 0 whose extent is -180,-180,180,180. The
default &#8220;WGS84&#8221; MapCache grid honors this, which may cause some
incompatibilities with software that expects level 0 to be 2x1 tiles with
extent -180,-90,180,90</p>
</div>
<p>z0:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">[</span><span class="mi">0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
<p>z1:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">[</span><span class="mi">1</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="o">/</span><span class="mi">1</span><span class="o">/</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
<p>z2:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">[</span><span class="mi">2</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="o">/</span><span class="mi">1</span><span class="o">/</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="o">/</span><span class="mi">2</span><span class="o">/</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="o">/</span><span class="mi">3</span><span class="o">/</span><span class="mi">0</span><span class="p">]</span>
<span class="p">[</span><span class="mi">2</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="o">/</span><span class="mi">1</span><span class="o">/</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="o">/</span><span class="mi">2</span><span class="o">/</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="o">/</span><span class="mi">3</span><span class="o">/</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
<p>etc.</p>
</div>
<div class="section" id="kml-service">
<span id="mapcache-kml"></span><h2>KML Service<a class="headerlink" href="#kml-service" title="Permalink to this headline">¶</a></h2>
<p>The KML service produces <a class="reference external" href="http://code.google.com/apis/kml/documentation/kml_21tutorial.html#superoverlays">Super-Overlays</a>
for tilesets that are aligned to the WGS84 / EPSG:4326 grids. A Super-Overlay
is a KML file that links to an image URL, and to a set of other KML URLs
corresponding to neighboring resolutions. The KML service uses a z/x/y tile
naming scheme where:</p>
<blockquote>
<div><ul class="simple">
<li><em>z</em> is the zoom level</li>
<li><em>x</em> is the column number</li>
<li><em>y</em> is the row number</li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For the KML service to be functional, the TMS service must also be activated, as
the KML super-overlays link to images using this spec.</p>
</div>
<p>To activate the KML service, add these lines to the mapcache.xml configuration
file:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;service</span> <span class="na">type=</span><span class="s">&quot;tms&quot;</span> <span class="na">enabled=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;service</span> <span class="na">type=</span><span class="s">&quot;kml&quot;</span> <span class="na">enabled=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>Tiles are requested using this scheme:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>http://myhost.com/mapcache/kml/&lt;tileset_name&gt;@&lt;grid_name&gt;/&lt;z&gt;/&lt;x&gt;/&lt;y&gt;.kml
</pre></div>
</div>
</div>
<div class="section" id="ogc-wmts-service">
<span id="mapcache-wmts"></span><h2>OGC WMTS Service<a class="headerlink" href="#ogc-wmts-service" title="Permalink to this headline">¶</a></h2>
<p>To activate the WMTS service, add these lines to the mapcache.xml configuration
file:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;service</span> <span class="na">type=</span><span class="s">&quot;wmts&quot;</span> <span class="na">enabled=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>This service follows the standard OGC WMTS requests and supports both the
classical OGC-style key-value-pair encoded and REST-style requests.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>http://myhost.com/mapcache/wmts?SERVICE=WMTS&amp;VERSION=1.0.0&amp;...
http://myhost.com/mapcache/wmts/1.0.0/....
</pre></div>
</div>
<p>The capabilities are obtained through:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>http://myhost.com/mapcache/wmts?service=wmts&amp;request=getcapabilities&amp;version=1.0.0
http://myhost.com/mapcache/wmts/1.0.0/WMTSCapabilities.xml
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="featureinfo.html#mapcache-featureinfo"><span>FeatureInfo Requests</span></a></p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="dimensions.html#mapcache-dimensions"><span>Tileset Dimensions</span></a></p>
</div>
</div>
<div class="section" id="ogc-wms-service">
<span id="mapcache-wms"></span><h2>OGC WMS Service<a class="headerlink" href="#ogc-wms-service" title="Permalink to this headline">¶</a></h2>
<p>MapCache responds to WMS version 1.1.1 requests, and has limited support for
version 1.3.0 ones.</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;service</span> <span class="na">type=</span><span class="s">&quot;wms&quot;</span> <span class="na">enabled=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Note that the WMS service is a little different than the
other MapCache services, as it listens on the root of the configured instance
instead of on an additional endpoint (i.e. the service replies on
<a class="reference external" href="http://server/mapcache/">http://server/mapcache/</a>? and not on <a class="reference external" href="http://server/mapcache/wms">http://server/mapcache/wms</a>?). This
behavior is required in order to enable <a class="reference internal" href="proxying.html#mapcache-proxying"><span>proxying of unsupported requests</span></a> while offering a single endpoint for all OGC services.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">MapCache primarily supports version 1.1.1 WMS requests, but has limited
support for the newer version 1.3.0 ones. For 1.3.0 requests,
MapCache will determine which <a class="reference internal" href="config.html#mapcache-grids"><span>grid</span></a> to use by using
the CRS= parameter instead of the SRS= one, and will correctly honor axis
ordering for the EPSG reference systems that switch the usual x/y ordering
of the BBOX parameter.</p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="featureinfo.html#mapcache-featureinfo"><span>FeatureInfo Requests</span></a></p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="dimensions.html#mapcache-dimensions"><span>Tileset Dimensions</span></a></p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="tile_assembling.html#mapcache-tile-assembling"><span>Tile Assembling</span></a></p>
</div>
<p>WMS requests follow the classical key-value-pair encoded style:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>http://myhost.com/mapcache?SERVICE=WMS&amp;VERSION=1.1.1&amp;REQUEST=....
</pre></div>
</div>
<p>The capabilities document is returned by:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>http://myhost.com/mapcache?service=wms&amp;request=getcapabilities
</pre></div>
</div>
<div class="section" id="optional-wms-configuration-options">
<h3>Optional WMS Configuration Options<a class="headerlink" href="#optional-wms-configuration-options" title="Permalink to this headline">¶</a></h3>
<div class="section" id="untiled-getmap-support">
<h4>Untiled GetMap Support<a class="headerlink" href="#untiled-getmap-support" title="Permalink to this headline">¶</a></h4>
<p>Support for untiled (non WMS-C) GetMap requests can be enabled or disabled:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;service</span> <span class="na">type=</span><span class="s">&quot;wms&quot;</span> <span class="na">enabled=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>
   <span class="c">&lt;!-- full_wms</span>
<span class="c">        Configure response to WMS requests that are not aligned to a tileset&#39;s grids.</span>
<span class="c">        Responding to requests that are not in the SRS of a configured grid is not supported, but</span>
<span class="c">        this should never happen as only the supported SRSs are publicized in the capabilities</span>
<span class="c">        document.</span>

<span class="c">        Allowed values are:</span>
<span class="c">          - error: return a 404 error (default)</span>
<span class="c">          - assemble: build the full image by assembling the tiles from the cache</span>
<span class="c">          - forward: forward the request to the configured source.</span>
<span class="c">   --&gt;</span>
   <span class="nt">&lt;full_wms&gt;</span>assemble<span class="nt">&lt;/full_wms&gt;</span>
<span class="nt">&lt;/service&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="getmap-image-format">
<span id="mapcache-getmap-format"></span><h4>GetMap Image Format<a class="headerlink" href="#getmap-image-format" title="Permalink to this headline">¶</a></h4>
<p>You may explicitly set which image format should be returned to the client for
an untiled WMS request (i.e. whenever the tile data cannot be served directly
from the caches but needs to go through a decompression/recompression phase).</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;service</span> <span class="na">type=</span><span class="s">&quot;wms&quot;</span> <span class="na">enabled=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;format</span> <span class="na">allow_client_override=</span><span class="s">&quot;true/false&quot;</span><span class="nt">&gt;</span>myjpegformat<span class="nt">&lt;/format&gt;</span>
<span class="nt">&lt;/service&gt;</span>
</pre></div>
</div>
<p>If the <cite>allow_client_override</cite> attribute is set to true, then MapCache will honor
the <cite>FORMAT=...</cite> parameter sent by the client. By default MapCache ignores this
parameter and uses its configured image format.</p>
</div>
<div class="section" id="image-resampling-quality">
<h4>Image Resampling Quality<a class="headerlink" href="#image-resampling-quality" title="Permalink to this headline">¶</a></h4>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;service</span> <span class="na">type=</span><span class="s">&quot;wms&quot;</span> <span class="na">enabled=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>
   <span class="c">&lt;!-- resample mode</span>
<span class="c">   Filter applied when resampling tiles for full WMS requests.</span>
<span class="c">   Can be either:</span>
<span class="c">   - nearest : fastest, poor quality</span>
<span class="c">   - bilinear: slower, higher qulity</span>
<span class="c">   --&gt;</span>
   <span class="nt">&lt;resample_mode&gt;</span>bilinear<span class="nt">&lt;/resample_mode&gt;</span>
<span class="nt">&lt;/service&gt;</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="googlemaps-xyz-service">
<span id="mapcache-gmaps"></span><h2>GoogleMaps XYZ Service<a class="headerlink" href="#googlemaps-xyz-service" title="Permalink to this headline">¶</a></h2>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;service</span> <span class="na">type=</span><span class="s">&quot;gmaps&quot;</span> <span class="na">enabled=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>Prerequisites: Your WMS should be capable of producing images in the
EPSG:900913 or EPSG:3857 SRS, i.e. it should reference the &#8220;g&#8221; or
&#8220;GoogleMapsCompatible&#8221; grid.</p>
<p>This is the minimal HTML page that should get you going. The important bits are
in the urlTemplate (for V2) and getTileURL (for V3) variables:</p>
<ul class="simple">
<li>/mapcache is the Apache path where MapCache handles requests.</li>
<li>test&#64;g is the tileset and grid name to use, joined by a &#8216;&#64;&#8217; - the {Z}/{X}/{Y}
should be left alone.</li>
<li>The final extension should be changed to &#8220;jpg&#8221; if you are using a JPEG format
with your tileset.</li>
</ul>
<div class="section" id="v2-api">
<h3>V2 API<a class="headerlink" href="#v2-api" title="Permalink to this headline">¶</a></h3>
<div class="highlight-html"><div class="highlight"><pre><span></span><span class="cp">&lt;!DOCTYPE html</span>
<span class="cp">  PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot;</span>
<span class="cp">  &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">xmlns</span><span class="o">=</span><span class="s">&quot;http://www.w3.org/1999/xhtml&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">meta</span> <span class="na">http-equiv</span><span class="o">=</span><span class="s">&quot;content-type&quot;</span> <span class="na">content</span><span class="o">=</span><span class="s">&quot;text/html; charset=utf-8&quot;</span><span class="p">/&gt;</span>
<span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Google/MapServer Tile Example<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;http://maps.google.com/maps?file=api&amp;v=2&amp;key=ABQIAAAAnfs7bKE82qgb3Zc2YyS-oBT2yXp_ZAY8_ufC3CFXhHIE1NvwkxSySz_REpPq-4WZA27OwgbtyR3VcA&quot;</span>
        <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>

<span class="kd">function</span> <span class="nx">load</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">GBrowserIsCompatible</span><span class="p">())</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">urlTemplate</span> <span class="o">=</span> <span class="s1">&#39;/mapcache/gmaps/test@g/{Z}/{X}/{Y}.png&#39;</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">myLayer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GTileLayer</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">18</span><span class="p">,{</span>
                                 <span class="nx">tileUrlTemplate</span><span class="o">:</span><span class="nx">urlTemplate</span><span class="p">,</span>
                                 <span class="nx">isPng</span><span class="o">:</span><span class="kc">true</span><span class="p">,</span>
                                 <span class="nx">opacity</span><span class="o">:</span><span class="mf">0.8</span> <span class="p">});</span>
    <span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GMap2</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;map&quot;</span><span class="p">));</span>
    <span class="nx">map</span><span class="p">.</span><span class="nx">addControl</span><span class="p">(</span><span class="k">new</span> <span class="nx">GLargeMapControl</span><span class="p">());</span>
    <span class="nx">map</span><span class="p">.</span><span class="nx">addControl</span><span class="p">(</span><span class="k">new</span> <span class="nx">GMapTypeControl</span><span class="p">());</span>
    <span class="nx">map</span><span class="p">.</span><span class="nx">setCenter</span><span class="p">(</span><span class="k">new</span> <span class="nx">GLatLng</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="mi">1</span><span class="p">);</span>
    <span class="nx">map</span><span class="p">.</span><span class="nx">addOverlay</span><span class="p">(</span><span class="k">new</span> <span class="nx">GTileLayerOverlay</span><span class="p">(</span><span class="nx">myLayer</span><span class="p">));</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span> <span class="na">onload</span><span class="o">=</span><span class="s">&quot;load()&quot;</span> <span class="na">onunload</span><span class="o">=</span><span class="s">&quot;GUnload()&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;map&quot;</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;width: 500px; height: 500px&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="v3-api">
<h3>V3 API<a class="headerlink" href="#v3-api" title="Permalink to this headline">¶</a></h3>
<p>The previous JavaScript for the V2 example should be slightly changed to:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">google</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">Map</span><span class="p">(</span><span class="s2">&quot;&lt;element-id&gt;&quot;</span><span class="p">,</span> <span class="p">{</span> <span class="cm">/*options*/</span> <span class="p">});</span>
<span class="kd">var</span> <span class="nx">layerOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">getTileUrl</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">coord</span><span class="p">,</span> <span class="nx">zoom</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s2">&quot;/mapcache/gmaps/test@g/&quot;</span> <span class="o">+</span> <span class="nx">zoom</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nx">coord</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nx">coord</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="s2">&quot;.png&quot;</span><span class="p">;</span>
  <span class="p">},</span>
  <span class="nx">tileSize</span><span class="o">:</span> <span class="k">new</span> <span class="nx">google</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">Size</span><span class="p">(</span><span class="mi">256</span><span class="p">,</span><span class="mi">256</span><span class="p">)</span> <span class="c1">// or whatever</span>
<span class="p">};</span>
<span class="nx">map</span><span class="p">.</span><span class="nx">overlayMapTypes</span><span class="p">.</span><span class="nx">insertAt</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="k">new</span> <span class="nx">google</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">ImageMapType</span><span class="p">(</span><span class="nx">layerOptions</span><span class="p">));</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="virtual-earth-tile-service">
<span id="mapcache-ve"></span><h2>Virtual Earth tile service<a class="headerlink" href="#virtual-earth-tile-service" title="Permalink to this headline">¶</a></h2>
<p>Tiles are organized in one of two different layouts depending on whether they
are using a Spherical Mercator projection, like EPSG:3857 or EPSG:900913, or if
they are using a geographical projection, like EPSG:4326.</p>
<p>Tiles are requested using this scheme:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>http://myhost.com/mapcache/ve?LAYER=&lt;tileset_name&gt;@&lt;grid_name&gt;&amp;tile=&lt;quadkey&gt;
</pre></div>
</div>
<p>For EPSG:3857,  EPSG:900913, or GoogleMapsCompatible grids, &lt;quadkey&gt; are
arranged:</p>
<p>z0:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>[0]

http://myhost.com/mapcache/ve?LAYER=osm@GoogleMapsCompatible&amp;tile=0
</pre></div>
</div>
<p>z1:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>[00][01]
[02][03]

http://myhost.com/mapcache/ve?LAYER=osm@GoogleMapsCompatible&amp;tile=00
http://myhost.com/mapcache/ve?LAYER=osm@GoogleMapsCompatible&amp;tile=01
http://myhost.com/mapcache/ve?LAYER=osm@GoogleMapsCompatible&amp;tile=02
http://myhost.com/mapcache/ve?LAYER=osm@GoogleMapsCompatible&amp;tile=03
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span>etc.
</pre></div>
</div>
<p>For EPSG:4326 or WGS84 grids, &lt;quadkey&gt; are arranged:</p>
<p>z1:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>[0][1]

http://myhost.com/mapcache/ve?LAYER=osm@WGS84&amp;tile=0
http://myhost.com/mapcache/ve?LAYER=osm@WGS84&amp;tile=1
</pre></div>
</div>
<p>z2:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>[00][01][10][11]
[02][03][12][13]

http://myhost.com/mapcache/ve?LAYER=osm@WGS84&amp;tile=00
http://myhost.com/mapcache/ve?LAYER=osm@WGS84&amp;tile=01
http://myhost.com/mapcache/ve?LAYER=osm@WGS84&amp;tile=02
http://myhost.com/mapcache/ve?LAYER=osm@WGS84&amp;tile=03
http://myhost.com/mapcache/ve?LAYER=osm@WGS84&amp;tile=10
http://myhost.com/mapcache/ve?LAYER=osm@WGS84&amp;tile=11
http://myhost.com/mapcache/ve?LAYER=osm@WGS84&amp;tile=12
http://myhost.com/mapcache/ve?LAYER=osm@WGS84&amp;tile=13
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span>etc.
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><h3>Navigation</h3>
<p>
<a href="../about.html" title="About">About</a><br>
<a href="../products.html" title="Products">Products</a><br>
<a href="../community/index.html" title="Community">Community</a><br>
<a href="../development/index.html" title="Development">Development</a><br>
<a href="../download.html" title="Downloads">Downloads</a><br>
<a href="../documentation.html" title="Documentation">Documentation</a><br>
<a href="../faq.html" title="FAQ">FAQ</a>
</p>
  <h3>Current Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Supported Tile Services</a><ul>
<li><a class="reference internal" href="#tms-service">TMS Service</a></li>
<li><a class="reference internal" href="#kml-service">KML Service</a></li>
<li><a class="reference internal" href="#ogc-wmts-service">OGC WMTS Service</a></li>
<li><a class="reference internal" href="#ogc-wms-service">OGC WMS Service</a><ul>
<li><a class="reference internal" href="#optional-wms-configuration-options">Optional WMS Configuration Options</a><ul>
<li><a class="reference internal" href="#untiled-getmap-support">Untiled GetMap Support</a></li>
<li><a class="reference internal" href="#getmap-image-format">GetMap Image Format</a></li>
<li><a class="reference internal" href="#image-resampling-quality">Image Resampling Quality</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#googlemaps-xyz-service">GoogleMaps XYZ Service</a><ul>
<li><a class="reference internal" href="#v2-api">V2 API</a></li>
<li><a class="reference internal" href="#v3-api">V3 API</a></li>
</ul>
</li>
<li><a class="reference internal" href="#virtual-earth-tile-service">Virtual Earth tile service</a></li>
</ul>
</li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, Open Source Geospatial Foundation.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.3.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.4</a>
      
    </div>

    

    
  </body>
</html>