
<!DOCTYPE html>

<html lang="nl_NL">
  <head>
    <meta charset="utf-8" />
    <title>Tile Indexes &#8212; MapServer 7.6.0 documentation</title>
    <link rel="stylesheet" href="../_static/sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    
    <link rel="shortcut icon" href="../_static/mapserver.ico"/>
    <link rel="author" title="Over deze documenten" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Zoeken" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="Vector" href="vector.html" />
    <link rel="prev" title="Raster" href="raster.html" /> 
  </head><body>

<table width="100%" style="width: 100%; background-color: white;">
  <tr>
    <td rowspan="2" style="padding: 10px 0px 10px 10px;">
      <a href="../index.html" title="Home"><img src="../_static/banner.png" alt="MapServer banner" border="0" /></a>
    </td>
    <td style="padding: 10px 10px 0px 0px; text-align: right; vertical-align: top;">
      <a href="../index.html" title="Home">Home</a> |
      <a href="../products.html" title="Products (MapServer core, MapCache, TinyOWS">Products</a> |
      <a href="https://github.com/mapserver/mapserver/issues/" title="Issue Tracker (MapServer core)">Issue Tracker</a> |
      <a href="../community/service_providers.html" title="Professional Service Providers">Service Providers</a> |      
      <a href="../faq.html" title="Frequently Asked Questions">FAQ</a> |
      <a href="https://twitter.com/mapserver_osgeo" title="Twitter">Twitter</a> |
      <a href="../download.html" title="Download Source or Binaries">Download </a>
    </td>
  </tr>
  <tr>
    <td style="padding: 0px 10px 0px 0px; text-align: right; vertical-align: bottom;">
        
          
            <a href="../../optimization/tileindex.html"><img src="../_static/flagicons/en.png" alt="en" title="en" border="0" /></a>
          
        
        
          
            <a href="../../ar/optimization/tileindex.html"><img src="../_static/flagicons/ar.png" alt="ar" title="ar" border="0" /></a>
          
        
        
          
            <a href="../../de/optimization/tileindex.html"><img src="../_static/flagicons/de.png" alt="de" title="de" border="0" /></a>
          
        
        
          
            <a href="../../el/optimization/tileindex.html"><img src="../_static/flagicons/el.png" alt="el" title="el" border="0" /></a>
          
        
        
          
            <a href="../../es/optimization/tileindex.html"><img src="../_static/flagicons/es.png" alt="es" title="es" border="0" /></a>
          
        
        
          
            <a href="../../fr/optimization/tileindex.html"><img src="../_static/flagicons/fr.png" alt="fr" title="fr" border="0" /></a>
          
        
        
          
            <a href="../../id/optimization/tileindex.html"><img src="../_static/flagicons/id.png" alt="id" title="id" border="0" /></a>
          
        
        
          
            <a href="../../it/optimization/tileindex.html"><img src="../_static/flagicons/it.png" alt="it" title="it" border="0" /></a>
          
        
        
          
            <a href="../../ja/optimization/tileindex.html"><img src="../_static/flagicons/ja.png" alt="ja" title="ja" border="0" /></a>
          
        
        <img src="../_static/flagicons/nl_NL.png" alt="nl_NL" title="nl_NL" border="0" width="18px" height="13px"/>
        
          
            <a href="../../pl/optimization/tileindex.html"><img src="../_static/flagicons/pl.png" alt="pl" title="pl" border="0" /></a>
          
        
        
          
            <a href="../../ru/optimization/tileindex.html"><img src="../_static/flagicons/ru.png" alt="ru" title="ru" border="0" /></a>
          
        
        
          
            <a href="../../sq/optimization/tileindex.html"><img src="../_static/flagicons/sq.png" alt="sq" title="sq" border="0" /></a>
          
        
        
          
            <a href="../../tr/optimization/tileindex.html"><img src="../_static/flagicons/tr.png" alt="tr" title="tr" border="0" /></a>
          
        

    </td>
  </tr>
</table>


    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigatie</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Algemene index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="vector.html" title="Vector"
             accesskey="N">volgende</a> |</li>
        <li class="right" >
          <a href="raster.html" title="Raster"
             accesskey="P">vorige</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../documentation.html" >MapServer 7.6.0 Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">Optimization</a> &#187;</li> 
      </ul>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="tile-indexes">
<span id="tileindex"></span><span id="index-0"></span><h1><a class="toc-backref" href="#table-of-contents">Tile Indexes</a><a class="headerlink" href="#tile-indexes" title="Permalink naar deze titel">¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd">Author</dt>
<dd class="field-odd"><p>HostGIS</p>
</dd>
<dt class="field-even">Last Updated</dt>
<dd class="field-even"><p>2013/07/04</p>
</dd>
</dl>
<div class="contents topic" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#tile-indexes" id="id1">Tile Indexes</a></p>
<ul>
<li><p><a class="reference internal" href="#introduction" id="id2">Introduction</a></p></li>
<li><p><a class="reference internal" href="#what-is-a-tileindex-and-how-do-i-make-one" id="id3">What is a tileindex and how do I make one?</a></p></li>
<li><p><a class="reference internal" href="#using-the-tileindex-in-your-mapfile" id="id4">Using the tileindex in your mapfile</a></p></li>
<li><p><a class="reference internal" href="#tileindexes-may-make-your-map-faster" id="id5">Tileindexes may make your map faster</a></p></li>
<li><p><a class="reference internal" href="#tileindexes-with-tiles-in-different-projections" id="id6">Tileindexes with tiles in different projections</a></p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#table-of-contents">Introduction</a><a class="headerlink" href="#introduction" title="Permalink naar deze titel">¶</a></h2>
<p>An introduction to tileindexes, MapServer’s method for doing on-the-fly mosaicing.</p>
</div>
<div class="section" id="what-is-a-tileindex-and-how-do-i-make-one">
<h2><a class="toc-backref" href="#table-of-contents">What is a tileindex and how do I make one?</a><a class="headerlink" href="#what-is-a-tileindex-and-how-do-i-make-one" title="Permalink naar deze titel">¶</a></h2>
<p>A tileindex is a shapefile that ties together several datasets into a single
layer. Therefore, you don’t need to create separate layers for each piece of
imagery or each county’s road data; make a tileindex and let MapServer piece
the mosaic together on the fly.</p>
<p>Making a tileindex is easy using <a class="reference external" href="https://gdal.org/programs/gdaltindex.html">gdaltindex</a> for GDAL data sources (rasters)
and <a class="reference external" href="https://gdal.org/programs/ogrtindex.html">ogrtindex</a> for OGR data sources (vectors). You just run them, specifying
the index file to create and the list of data sources to add to the index.</p>
<p id="index-1">For example, to make a mosaic of several TIFFs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gdaltindex</span> <span class="n">imagery</span><span class="o">.</span><span class="n">shp</span> <span class="n">imagery</span><span class="o">/*.</span><span class="n">tif</span>
</pre></div>
</div>
<p id="index-2">And to make a mosaic of vectors:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ogrtindex</span> <span class="n">strees</span><span class="o">.</span><span class="n">shp</span> <span class="n">tiger</span><span class="o">/</span><span class="n">CA</span><span class="o">/*.</span><span class="n">shp</span> <span class="n">tiger</span><span class="o">/</span><span class="n">NV</span><span class="o">/*.</span><span class="n">shp</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Notitie</p>
<p>ogrtindex and gdaltindex <strong>add</strong> the specified files to the index.
Sometimes you’ll have to delete the index file to avoid creating duplicate
entries.</p>
</div>
</div>
<div class="section" id="using-the-tileindex-in-your-mapfile">
<span id="index-3"></span><h2><a class="toc-backref" href="#table-of-contents">Using the tileindex in your mapfile</a><a class="headerlink" href="#using-the-tileindex-in-your-mapfile" title="Permalink naar deze titel">¶</a></h2>
<p>Using a tileindex as a layer is best explained by an example:</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">LAYER</span>
    <span class="k">NAME</span> <span class="s">&quot;Roads&quot;</span>
    <span class="k">STATUS</span> <span class="nb">ON</span>
    <span class="k">TYPE</span> <span class="nb">LINE</span>
    <span class="k">TILEINDEX</span> <span class="s">&quot;tiger/index.shp&quot;</span>
    <span class="k">TILEITEM</span> <span class="s">&quot;LOCATION&quot;</span>
<span class="k">END</span>
</pre></div>
</div>
<p>There are two items of note here: <a class="reference internal" href="../mapfile/layer.html#tileindex-keyword"><span class="std std-ref">TILEINDEX</span></a> and
<a class="reference internal" href="../mapfile/layer.html#tileitem"><span class="std std-ref">TILEITEM</span></a>. TILEINDEX is simply
the path to the index file, and TILEITEM specifies the field in the shapefile
which contains the filenames referenced by the index. The TILEITEM will
usually be “LOCATION” unless you specified the <em>-tileindex</em> option when
running gdaltindex or ogrtindex.</p>
<p>Two important notes about the pathnames:</p>
<blockquote>
<div><ul class="simple">
<li><p>The path to TILEINDEX follows the same conventions as for any other data
source, e.g. using the SHAPEPATH or else being relative to the location of
the mapfile.</p></li>
<li><p>The filenames specified on the command line to gdaltindex or ogrtindex will
be used with the same conventions as well, following the SHAPEPATH or else
being relative to the mapfile’s location. I find it very useful to change
into the SHAPEPATH directory and then run ogrtindex/gdaltindex from there;
this ensures that I specify the correct pathnames.</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="tileindexes-may-make-your-map-faster">
<h2><a class="toc-backref" href="#table-of-contents">Tileindexes may make your map faster</a><a class="headerlink" href="#tileindexes-may-make-your-map-faster" title="Permalink naar deze titel">¶</a></h2>
<p>A tileindex is often a performance boost for two reasons:</p>
<blockquote>
<div><ul class="simple">
<li><p>It’s more efficient than having several separate layers.</p></li>
<li><p>MapServer will examine the tileindex to determine which datasets fall into
the map’s view, and will open only those datasets. This can result in a
great savings for a large dataset, especially for use cases where most of
the time only a very small spatial region of the data is being used. (for
example, citywide maps with nationwide street imagery)</p></li>
</ul>
</div></blockquote>
<p>A tileindex will not help in the case where all/most of the data sources will
usually be opened anyway (e.g. street data by county, showing states or larger
regions). In that case, it may even result in a decrease in performance, since
it may be slower to open 100 files than to open one giant file.</p>
<p>The ideal case for a tileindex is when the most typically requested map areas
fall into very few tiles. For example, if you’re showing state and larger
regions, try fitting your data into state-sized blocks instead of county-sized
blocks; and if you’re showing cities and counties, go for county-sized blocks.</p>
<p>You’ll just have to experiment with it and see what works best for your use
cases.</p>
</div>
<div class="section" id="tileindexes-with-tiles-in-different-projections">
<span id="tileindex-mixed-srs"></span><h2><a class="toc-backref" href="#table-of-contents">Tileindexes with tiles in different projections</a><a class="headerlink" href="#tileindexes-with-tiles-in-different-projections" title="Permalink naar deze titel">¶</a></h2>
<p>Starting with MapServer 6.4 for raster layers, and MapServer 7.2 for vector
layers, a tileindex can contain rasters/layers in
different projections. Such tileindex can be generated with <a class="reference external" href="https://gdal.org/programs/gdaltindex.html">gdaltindex</a> (GDAL
1.11 or later) and <a class="reference external" href="https://gdal.org/programs/ogrtindex.html">ogrtindex</a> (GDAL 2.2 or later), with the -t_srs and
-src_srs_name options. The -t_srs instructs
gdaltindex/ogrtindex to write the envelope of each tile into a common target
projection, so that the geometries written in the tile index are consistent.
This common projection must be the projection of the raster/vector layer.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gdaltindex</span> <span class="o">-</span><span class="n">t_srs</span> <span class="n">EPSG</span><span class="p">:</span><span class="mi">4326</span> <span class="o">-</span><span class="n">src_srs_name</span> <span class="n">src_srs</span> <span class="n">imagery</span><span class="o">.</span><span class="n">shp</span> <span class="n">imagery</span><span class="o">/*.</span><span class="n">tif</span>
</pre></div>
</div>
<p>The corresponding LAYER definition will need to specify the
<a class="reference internal" href="../mapfile/layer.html#tilesrs"><span class="std std-ref">TILESRS</span></a> keyword with the value of the -src_srs_name option.</p>
<p>e.g:</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">LAYER</span>
    <span class="k">NAME</span> <span class="s">&quot;My Imagery&quot;</span>
    <span class="k">STATUS</span> <span class="nb">ON</span>
    <span class="k">TYPE</span> <span class="nb">RASTER</span>
    <span class="k">TILEINDEX</span> <span class="s">&quot;imagery.shp&quot;</span>
    <span class="k">TILEITEM</span> <span class="s">&quot;LOCATION&quot;</span>
    <span class="k">TILESRS</span> <span class="s">&quot;src_srs&quot;</span>
    <span class="k">PROJECTION</span>
        <span class="nb">AUTO</span>
        <span class="c"># or :</span>
        <span class="c"># &quot;+init=EPSG:4326&quot;</span>
    <span class="k">END</span>
<span class="k">END</span>
</pre></div>
</div>
<p>MapServer will then be able to proceed to on-the-fly mosaicing and reprojection.</p>
<p>For layers that must be exposed as WCS layers, a few metadata fields
(“wcs_extent”, “wcs_size”, “wcs_resolution”) must be specified in the LAYER
definition, so as to define a “virtual dataset” coverage (see <a class="reference internal" href="../ogc/wcs_server.html#wcs-server"><span class="std std-ref">WCS Server</span></a>).
The GDAL wcs_virtds_params.py sample script can help generating those metadata
fields.</p>
<p>Note: this support of tileindex with mixed projections is only available for
raster layers for now.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Snel zoeken</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Zoek" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script><h3>Navigation</h3>
<p>
<a href="../about.html" title="About">About</a><br>
<a href="../products.html" title="Products">Products</a><br>
<a href="../community/index.html" title="Community">Community</a><br>
<a href="../development/index.html" title="Development">Development</a><br>
<a href="../download.html" title="Downloads">Downloads</a><br>
<a href="../documentation.html" title="Documentation">Documentation</a><br>
<a href="../faq.html" title="FAQ">FAQ</a><br>
<a href="../psc.html" title="PSC">PSC</a><br>
<a href="https://twitter.com/mapserver_osgeo" title="Twitter">Twitter</a>
</p>
  <h3>Current Table Of Contents</h3>
  <ul>
<li><a class="reference internal" href="#">Tile Indexes</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#what-is-a-tileindex-and-how-do-i-make-one">What is a tileindex and how do I make one?</a></li>
<li><a class="reference internal" href="#using-the-tileindex-in-your-mapfile">Using the tileindex in your mapfile</a></li>
<li><a class="reference internal" href="#tileindexes-may-make-your-map-faster">Tileindexes may make your map faster</a></li>
<li><a class="reference internal" href="#tileindexes-with-tiles-in-different-projections">Tileindexes with tiles in different projections</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigatie</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Algemene index"
             >index</a></li>
        <li class="right" >
          <a href="vector.html" title="Vector"
             >volgende</a> |</li>
        <li class="right" >
          <a href="raster.html" title="Raster"
             >vorige</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../documentation.html" >MapServer 7.6.0 Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >Optimization</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; <a href="../copyright.html">Copyright</a> 2020, Open Source Geospatial Foundation.
      Laatste aanpassing op 2020-05-26.
      Aangemaakt met <a href="http://sphinx-doc.org/">Sphinx</a> 3.0.4.
    </div>
  </body>
</html>