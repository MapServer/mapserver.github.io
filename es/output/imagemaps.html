
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="es">
  <head>
    <meta charset="utf-8" />
    <title>HTML Imagemaps &#8212; MapServer 7.2.2 documentation</title>
    <link rel="stylesheet" href="../_static/sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    
    <link rel="shortcut icon" href="../_static/mapserver.ico"/>
    <link rel="author" title="Sobre este documento" href="../about.html" />
    <link rel="index" title="Índice" href="../genindex.html" />
    <link rel="search" title="Búsqueda" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="Kernel Density Estimation (Dynamic Heatmap)" href="kerneldensity.html" />
    <link rel="prev" title="HTML Legends with MapServer" href="html_legend.html" /> 
  </head><body>

<table width="100%" style="width: 100%; background-color: white;">
  <tr>
    <td rowspan="2" style="padding: 10px 0px 10px 10px;">
      <a href="../index.html" title="Home"><img src="../_static/banner.png" alt="MapServer banner" border="0" /></a>
    </td>
    <td style="padding: 10px 10px 0px 0px; text-align: right; vertical-align: top;">
      <a href="../index.html" title="Home">Home</a> |
      <a href="../products.html" title="Products (MapServer core, MapCache, TinyOWS">Products</a> |
      <a href="https://github.com/mapserver/mapserver/issues/" title="Issue Tracker (MapServer core)">Issue Tracker</a> |
      <a href="../community/service_providers.html" title="Professional Service Providers">Service Providers</a> |      
      <a href="../faq.html" title="Frequently Asked Questions">FAQ</a> |
      <a href="https://twitter.com/mapserver_osgeo" title="Twitter">Twitter</a> |
      <a href="../download.html" title="Download Source or Binaries">Download </a>
    </td>
  </tr>
  <tr>
    <td style="padding: 0px 10px 0px 0px; text-align: right; vertical-align: bottom;">
        
          
            <a href="../../output/imagemaps.html"><img src="../_static/flagicons/en.png" alt="en" title="en" border="0" /></a>
          
        
        
          
            <a href="../../ar/output/imagemaps.html"><img src="../_static/flagicons/ar.png" alt="ar" title="ar" border="0" /></a>
          
        
        
          
            <a href="../../de/output/imagemaps.html"><img src="../_static/flagicons/de.png" alt="de" title="de" border="0" /></a>
          
        
        
          
            <a href="../../el/output/imagemaps.html"><img src="../_static/flagicons/el.png" alt="el" title="el" border="0" /></a>
          
        
        <img src="../_static/flagicons/es.png" alt="es" title="es" border="0" width="18px" height="13px"/>
        
          
            <a href="../../fr/output/imagemaps.html"><img src="../_static/flagicons/fr.png" alt="fr" title="fr" border="0" /></a>
          
        
        
          
            <a href="../../id/output/imagemaps.html"><img src="../_static/flagicons/id.png" alt="id" title="id" border="0" /></a>
          
        
        
          
            <a href="../../it/output/imagemaps.html"><img src="../_static/flagicons/it.png" alt="it" title="it" border="0" /></a>
          
        
        
          
            <a href="../../ja/output/imagemaps.html"><img src="../_static/flagicons/ja.png" alt="ja" title="ja" border="0" /></a>
          
        
        
          
            <a href="../../nl_NL/output/imagemaps.html"><img src="../_static/flagicons/nl_NL.png" alt="nl_NL" title="nl_NL" border="0" /></a>
          
        
        
          
            <a href="../../pl/output/imagemaps.html"><img src="../_static/flagicons/pl.png" alt="pl" title="pl" border="0" /></a>
          
        
        
          
            <a href="../../ru/output/imagemaps.html"><img src="../_static/flagicons/ru.png" alt="ru" title="ru" border="0" /></a>
          
        
        
          
            <a href="../../sq/output/imagemaps.html"><img src="../_static/flagicons/sq.png" alt="sq" title="sq" border="0" /></a>
          
        
        
          
            <a href="../../tr/output/imagemaps.html"><img src="../_static/flagicons/tr.png" alt="tr" title="tr" border="0" /></a>
          
        

    </td>
  </tr>
</table>


    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Índice General"
             accesskey="I">índice</a></li>
        <li class="right" >
          <a href="kerneldensity.html" title="Kernel Density Estimation (Dynamic Heatmap)"
             accesskey="N">siguiente</a> |</li>
        <li class="right" >
          <a href="html_legend.html" title="HTML Legends with MapServer"
             accesskey="P">anterior</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../documentation.html" >MapServer 7.2.2 Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">Output Generation</a> &#187;</li> 
      </ul>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="html-imagemaps">
<span id="imagemaps"></span><h1><a class="toc-backref" href="#contenido">HTML Imagemaps</a><a class="headerlink" href="#html-imagemaps" title="Enlazar permanentemente con este título">¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd">Author</dt>
<dd class="field-odd"><p>David Fawcett</p>
</dd>
<dt class="field-even">Contact</dt>
<dd class="field-even"><p>david.fawcett at gmail.com</p>
</dd>
<dt class="field-odd">Last Updated</dt>
<dd class="field-odd"><p>2008-10-08</p>
</dd>
</dl>
<div class="contents topic" id="contenido">
<p class="topic-title first">Contenido</p>
<ul class="simple">
<li><p><a class="reference internal" href="#html-imagemaps" id="id1">HTML Imagemaps</a></p>
<ul>
<li><p><a class="reference internal" href="#introduction" id="id2">Introduction</a></p></li>
<li><p><a class="reference internal" href="#mapfile-layer-definition" id="id3">Mapfile Layer Definition</a></p></li>
<li><p><a class="reference internal" href="#templates" id="id4">Templates</a></p></li>
<li><p><a class="reference internal" href="#request-url" id="id5">Request URL</a></p></li>
<li><p><a class="reference internal" href="#additional-notes" id="id6">Additional Notes</a></p></li>
<li><p><a class="reference internal" href="#more-information" id="id7">More Information</a></p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#contenido">Introduction</a><a class="headerlink" href="#introduction" title="Enlazar permanentemente con este título">¶</a></h2>
<p>The shpxy method of creating imagemaps uses MapServer query functionality to
build a html imagemap.  Just like a regular MapServer query, you send a query
request and MapServer uses the templates to build a block of html that it sends
back to the browser.  The first example shows you how to build an imagemap
based on a point layer.  An example template for a polygon layer is also
included.</p>
<p><strong>Components</strong></p>
<ul class="simple">
<li><p>MapServer mapfile</p></li>
<li><p>query template file</p></li>
<li><p>query header template</p></li>
<li><p>query footer template</p></li>
</ul>
</div>
<div class="section" id="mapfile-layer-definition">
<h2><a class="toc-backref" href="#contenido">Mapfile Layer Definition</a><a class="headerlink" href="#mapfile-layer-definition" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Here is a simple mapfile for our example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">MAP</span>
<span class="n">NAME</span> <span class="s2">&quot;myMapFile</span>
<span class="n">STATUS</span> <span class="n">ON</span>
<span class="n">SIZE</span> <span class="mi">200</span> <span class="mi">200</span>
<span class="n">EXTENT</span> <span class="mi">178784</span> <span class="mi">4804000</span> <span class="mi">772653</span> <span class="mi">5483346</span>

<span class="n">UNITS</span> <span class="n">METERS</span>
<span class="n">STATUS</span> <span class="n">ON</span>
<span class="n">SHAPEPATH</span> <span class="s2">&quot;/web/maps/data&quot;</span>
<span class="n">IMAGECOLOR</span> <span class="mi">255</span> <span class="mi">255</span> <span class="mi">255</span>

<span class="n">WEB</span>
  <span class="n">IMAGEPATH</span> <span class="s2">&quot;/web/maps/tmp/&quot;</span>
  <span class="n">IMAGEURL</span> <span class="s2">&quot;/maps/tmp/&quot;</span>
<span class="n">END</span>

<span class="n">QUERYMAP</span>
  <span class="n">STATUS</span> <span class="n">ON</span>
  <span class="n">STYLE</span> <span class="n">NORMAL</span>
<span class="n">END</span>

<span class="n">LAYER</span>
  <span class="n">NAME</span> <span class="s2">&quot;sites&quot;</span>
  <span class="n">STATUS</span> <span class="n">DEFAULT</span>
  <span class="n">TYPE</span> <span class="n">point</span>
  <span class="n">DATA</span> <span class="s1">&#39;aqiAreas&#39;</span>
      <span class="n">TEMPLATE</span> <span class="s2">&quot;bodytemplate.html&quot;</span>
      <span class="n">HEADER</span> <span class="s2">&quot;imapheader.html&quot;</span>
      <span class="n">FOOTER</span> <span class="s2">&quot;imapfooter.html&quot;</span>
<span class="n">END</span>
<span class="n">END</span>
</pre></div>
</div>
<p>You can see that we have a mapfile with one point layer, and that it
contains references to three query templates.</p>
</div>
<div class="section" id="templates">
<h2><a class="toc-backref" href="#contenido">Templates</a><a class="headerlink" href="#templates" title="Enlazar permanentemente con este título">¶</a></h2>
<p>In MapServer, the query header and footers get processed only once.  The
main query template, “bodytemplate.html” in this example, gets processed
once for each record in the record set returned by the query.</p>
<div class="section" id="point-layers">
<h3>Point Layers<a class="headerlink" href="#point-layers" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Here is the query header, “imapheader.html”.  It creates the opening tag
for your html imagemap.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="nb">map</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;mymap&quot;</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;mymap&quot;</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Here is the query template, “bodytemplate.html”.  It creates the body of
the html imagemap.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">area</span> <span class="n">shape</span><span class="o">=</span><span class="s2">&quot;circle&quot;</span> <span class="n">coords</span><span class="o">=</span><span class="s2">&quot;[shpxy precision=0 proj=image yf=&quot;</span><span class="p">,</span><span class="mi">7</span><span class="s2">&quot; xf=&quot;</span><span class="p">,</span><span class="s2">&quot;]&quot;</span> <span class="n">href</span><span class="o">=</span><span class="s2">&quot;http://my.url/mypage.cfm?region=[NAME]&quot;</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;[NAME]&quot;</span> <span class="n">alt</span><span class="o">=</span><span class="s2">&quot;[NAME]&quot;</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>This template is used to create circular imagemap elements for a point layer.
NAME is a fieldname in the data source, the value for NAME for each
individual record gets substituted as the template is processed.  The
href specifies the URL link if the element is clicked.  Title and alt will
display the value when an element is moused over.</p>
<p>The resulting html element looks like</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">area</span> <span class="n">shape</span><span class="o">=</span><span class="s2">&quot;circle&quot;</span> <span class="n">coords</span><span class="o">=</span><span class="s2">&quot;80,103,7&quot;</span> <span class="n">href</span><span class="o">=</span><span class="s2">&quot;http://my.url/mypage.cfm?region=Northern&quot;</span> <span class="o">&gt;</span>
</pre></div>
</div>
<p>The key part here is</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">coords</span><span class="o">=</span><span class="s2">&quot;[shpxy precision=0 proj=image xf=&quot;</span><span class="p">,</span><span class="s2">&quot; yf=&quot;</span><span class="p">,</span><span class="mi">7</span><span class="s2">&quot;]&quot;</span>
</pre></div>
</div>
<p>This is where MapServer will substitute the image coordinates for that
query record.  With Precision=0, the coordinates will be integers.</p>
<p>You also see shpxy template formatting options “xf” and “yf”.  “xf=»,»
tells MapServer to place a comma after the x coordinate.  “yf=»,7» after
the y coordinate.  This is done to specify a radius of 7 pixels for the
circle.  More options can be found in the <a class="reference internal" href="../mapfile/template.html#template"><span class="std std-ref">Template Reference</span></a>.</p>
<p>The query footer template simply adds the closing tag for the html imagemap</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;/</span><span class="nb">map</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="polygon-layers">
<h3>Polygon Layers<a class="headerlink" href="#polygon-layers" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Here is a query template for a polygon layer</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">area</span> <span class="n">shape</span><span class="o">=</span><span class="s2">&quot;poly&quot;</span> <span class="n">coords</span><span class="o">=</span><span class="s2">&quot;[shpxy precision=0 proj=image]&quot;</span> <span class="n">href</span><span class="o">=</span><span class="s2">&quot;http://my.url/mypage.cfm?ID=[SITE_ID]&quot;</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;[NAME]&quot;</span> <span class="n">alt</span><span class="o">=</span><span class="s2">&quot;[NAME]&quot;</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="request-url">
<h2><a class="toc-backref" href="#contenido">Request URL</a><a class="headerlink" href="#request-url" title="Enlazar permanentemente con este título">¶</a></h2>
<p>To get the imagemap, you need to send a GET or POST request to MapServer
with several URL variables defined.  The below URL tells MapServer where
the mapfile is located, what layer we are querying, and that we are
using nquery mode to return multiple results.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>http://myurl/cgi-bin/mapserv?map=/web/maps/demoimap.map&amp;qlayer=sites&amp;mode=nquery&amp;searchmap=true
</pre></div>
</div>
</div>
<div class="section" id="additional-notes">
<h2><a class="toc-backref" href="#contenido">Additional Notes</a><a class="headerlink" href="#additional-notes" title="Enlazar permanentemente con este título">¶</a></h2>
<p>If you use separate map files to generate your imagemap and your map
image, make sure that the EXTENT and SIZE specified in both mapfiles
are identical.  If they are not, your features will not align properly.</p>
</div>
<div class="section" id="more-information">
<h2><a class="toc-backref" href="#contenido">More Information</a><a class="headerlink" href="#more-information" title="Enlazar permanentemente con este título">¶</a></h2>
<blockquote>
<div><p><a class="reference external" href="http://maps.dnr.state.mn.us/cgi-bin/mapserv56?map=/usr/local/www/docs_maps/eco/rsg/search/search_example.map&amp;qlayer=county&amp;mode=nquery&amp;searchmap=true">Steve Lime’s SHPXY Example</a></p>
</div></blockquote>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3>Búsqueda rápida</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Ir a" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><h3>Navigation</h3>
<p>
<a href="../about.html" title="About">About</a><br>
<a href="../products.html" title="Products">Products</a><br>
<a href="../community/index.html" title="Community">Community</a><br>
<a href="../development/index.html" title="Development">Development</a><br>
<a href="../download.html" title="Downloads">Downloads</a><br>
<a href="../documentation.html" title="Documentation">Documentation</a><br>
<a href="../faq.html" title="FAQ">FAQ</a><br>
<a href="../psc.html" title="PSC">PSC</a><br>
<a href="https://twitter.com/mapserver_osgeo" title="Twitter">Twitter</a>
</p>
  <h3>Current Table Of Contents</h3>
  <ul>
<li><a class="reference internal" href="#">HTML Imagemaps</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#mapfile-layer-definition">Mapfile Layer Definition</a></li>
<li><a class="reference internal" href="#templates">Templates</a><ul>
<li><a class="reference internal" href="#point-layers">Point Layers</a></li>
<li><a class="reference internal" href="#polygon-layers">Polygon Layers</a></li>
</ul>
</li>
<li><a class="reference internal" href="#request-url">Request URL</a></li>
<li><a class="reference internal" href="#additional-notes">Additional Notes</a></li>
<li><a class="reference internal" href="#more-information">More Information</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Índice General"
             >índice</a></li>
        <li class="right" >
          <a href="kerneldensity.html" title="Kernel Density Estimation (Dynamic Heatmap)"
             >siguiente</a> |</li>
        <li class="right" >
          <a href="html_legend.html" title="HTML Legends with MapServer"
             >anterior</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../documentation.html" >MapServer 7.2.2 Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >Output Generation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; <a href="../copyright.html">Derechos de autor</a> 2019, Open Source Geospatial Foundation.
      Actualizado por última vez en 2019-05-11.
      Creado con <a href="http://sphinx-doc.org/">Sphinx</a> 2.0.0.
    </div>
  </body>
</html>