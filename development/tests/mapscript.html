<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>MapScript Unit Testing &#8212; MapServer 8.0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx.css?v=6c7b17ac" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=dd298242" />
    <link rel="stylesheet" type="text/css" href="../../_static/ribbon.css?v=ea091bf4" />
    
    <script src="../../_static/documentation_options.js?v=521b6f53"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    
    <link rel="icon" href="../../_static/mapserver.ico"/>
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="copyright" title="Copyright" href="../../copyright.html" />
    <link rel="next" title="Mapfile Editing" href="../editing/index.html" />
    <link rel="prev" title="Regression Testing (msautotest)" href="autotest.html" /> 
  </head><body>


<!-- for main branch only, do not backport this -->

<table width="100%" style="width: 100%; background-color: white;">
  <tr>
    <td rowspan="2" style="padding: 10px 0px 10px 10px;">
      <a href="../../index.html" title="Home"><img src="../../_static/banner.png" alt="MapServer banner" border="0" /></a>
    </td>
    <td style="padding: 10px 10px 0px 0px; text-align: right; vertical-align: top;">
      <a href="../../index.html" title="Home">Home</a> |
      <a href="../../products.html" title="Products (MapServer core, MapCache, TinyOWS">Products</a> |
      <a href="https://github.com/mapserver/mapserver/issues/" title="Issue Tracker (MapServer core)">Issue Tracker</a> |
      <a href="../../community/service_providers.html" title="Professional Service Providers">Service Providers</a> |      
      <a href="../../faq.html" title="Frequently Asked Questions">FAQ</a> |
      <a href="https://twitter.com/mapserver_osgeo" title="Twitter" target="_blank">Twitter</a> |
      <a href="../../download.html" title="Download Source or Binaries">Download </a> |
      <a class="badge" href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=KRJ2X44N3HA6U&source=url" target="_blank">
        <img src="https://img.shields.io/badge/donate-%E2%9D%A4%C2%A0-ff69b4.svg?style=flat" alt="Donate to MapServer">
      </a>
    </td>
  </tr>
  <tr>
    <td style="padding: 0px 10px 0px 0px; text-align: right; vertical-align: bottom;">
        <img src="../../_static/flagicons/en.png" alt="en" title="en" border="0" width="18px" height="13px"/>
        
          <a href="../../ar/development/tests/mapscript.html"><img src="../../_static/flagicons/ar.png" alt="ar" title="ar" border="0" /></a>
        
        
          <a href="../../de/development/tests/mapscript.html"><img src="../../_static/flagicons/de.png" alt="de" title="de" border="0" /></a>
        
        
          <a href="../../el/development/tests/mapscript.html"><img src="../../_static/flagicons/el.png" alt="el" title="el" border="0" /></a>
        
        
          <a href="../../es/development/tests/mapscript.html"><img src="../../_static/flagicons/es.png" alt="es" title="es" border="0" /></a>
        
        
          <a href="../../fr/development/tests/mapscript.html"><img src="../../_static/flagicons/fr.png" alt="fr" title="fr" border="0" /></a>
        
        
          <a href="../../id/development/tests/mapscript.html"><img src="../../_static/flagicons/id.png" alt="id" title="id" border="0" /></a>
        
        
          <a href="../../it/development/tests/mapscript.html"><img src="../../_static/flagicons/it.png" alt="it" title="it" border="0" /></a>
        
        
          <a href="../../ja/development/tests/mapscript.html"><img src="../../_static/flagicons/ja.png" alt="ja" title="ja" border="0" /></a>
        
        
          <a href="../../nl_NL/development/tests/mapscript.html"><img src="../../_static/flagicons/nl_NL.png" alt="nl_NL" title="nl_NL" border="0" /></a>
        
        
          <a href="../../pl/development/tests/mapscript.html"><img src="../../_static/flagicons/pl.png" alt="pl" title="pl" border="0" /></a>
        
        
          <a href="../../ru/development/tests/mapscript.html"><img src="../../_static/flagicons/ru.png" alt="ru" title="ru" border="0" /></a>
        
        
          <a href="../../sq/development/tests/mapscript.html"><img src="../../_static/flagicons/sq.png" alt="sq" title="sq" border="0" /></a>
        
        
          <a href="../../tr/development/tests/mapscript.html"><img src="../../_static/flagicons/tr.png" alt="tr" title="tr" border="0" /></a>
        

    </td>
  </tr>
</table>


    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../editing/index.html" title="Mapfile Editing"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="autotest.html" title="Regression Testing (msautotest)"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Development</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">Testing</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">MapScript Unit Testing</a></li> 
      </ul>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="mapscript-unit-testing">
<span id="mapscript-tests"></span><h1>MapScript Unit Testing<a class="headerlink" href="#mapscript-unit-testing" title="Link to this heading">¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd">Date<span class="colon">:</span></dt>
<dd class="field-odd"><p>2005-11-20</p>
</dd>
<dt class="field-even">Author<span class="colon">:</span></dt>
<dd class="field-even"><p>Sean Gillies</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <a class="reference internal" href="autotest.html#autotest"><span class="std std-ref">msautotest</span></a> infrastructure is recommended, as it is
run for each commit/pull request to the MapServer repository.</p>
</div>
<section id="test-driven-development">
<h2>Test Driven Development<a class="headerlink" href="#test-driven-development" title="Link to this heading">¶</a></h2>
<p>In 2003, I began to commit to test driven development of the mapscript module.
TDD simply means development through repetition of two activities:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>add a test, cause failure, and write code to pass the test</p></li>
<li><p>remove duplication</p></li>
</ol>
</div></blockquote>
<p>Test Driven Development is also a book by Kent Beck.</p>
<p>New features that I develop for MapServer begin as test expressions. There are
a bazillion good reasons for working this way. The most obvious are</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>accumulation of automated unit tests</p></li>
<li><p>accumulation of excellent usage examples</p></li>
<li><p>that i’m prevented from starting work on flaky ideas that can’t be tested</p></li>
</ol>
</div></blockquote>
</section>
<section id="about-the-tests">
<h2>About the tests<a class="headerlink" href="#about-the-tests" title="Link to this heading">¶</a></h2>
<p>Tests are committed to the MapServer CVS under mapscript/python/tests. They
are written in Python using the JUnit inspired unittest module. A good
introduction to unit testing with Python is found at
<a class="reference external" href="http://diveintopython.org/unit_testing/index.html">http://diveintopython.org/unit_testing/index.html</a>.</p>
<p>The test framework imports mapscript from python/tests/cases/testing.py.  This
allows us to test the module before installation</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[sean@lenny python]$ python setup.py build
[sean@lenny python]$ python tests/runtests.py -v
</pre></div>
</div>
<p>Test cases are implemented as Python classes, and individual tests as class
methods named beginning with test*. The special setUp() and tearDown() methods
are for test fixtures and are called before and after every individual test.</p>
<p>Since version 4.2, MapServer includes a very lightweight testing dataset under
mapserver/tests. The set consists of symbols, fonts, three single-feature
shapefiles, and a test.map mapfile. This is the only data used by the unit
tests.</p>
<p>Many tests that require a mapObj derive from testing.MapTestCase:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MapTestCase</span><span class="p">(</span><span class="n">MapPrimitivesTestCase</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base class for testing with a map fixture&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">map</span> <span class="o">=</span> <span class="n">mapscript</span><span class="o">.</span><span class="n">mapObj</span><span class="p">(</span><span class="n">TESTMAPFILE</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">tearDown</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">map</span> <span class="o">=</span> <span class="kc">None</span>
</pre></div>
</div>
<p>One example is the MapSymbolSetTestCase, the test case I used for development
of the expanded symbolset functionality present in the 4.2 release:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MapSymbolSetTestCase</span><span class="p">(</span><span class="n">MapTestCase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">testGetNumSymbols</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;expect getNumSymbols == 2 from test fixture test.map&quot;&quot;&quot;</span>
        <span class="n">num</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">map</span><span class="o">.</span><span class="n">getNumSymbols</span><span class="p">()</span>
        <span class="k">assert</span> <span class="n">num</span> <span class="o">==</span> <span class="mi">2</span><span class="p">,</span> <span class="n">num</span>

    <span class="o">...</span>
</pre></div>
</div>
</section>
<section id="status">
<h2>Status<a class="headerlink" href="#status" title="Link to this heading">¶</a></h2>
<p>This unit testing framework only covers functionality that is exposed
to the Python mapscript module. It can help to check on pieces of the
core MapServer code, but is no guarantor of the <a class="reference internal" href="../../cgi/mapserv.html#mapserv"><span class="std std-ref">mapserv</span></a> program
or of the <a class="reference internal" href="../../mapscript/php/index.html#php-mapscript"><span class="std std-ref">PHP MapScript</span></a> module. As of this
writing, there are 159 tests in the suite.  These are tests of
features added since mid-2003. Much of MapServer’s older stuff remains
untested and it is doubtful that we’ll make the time to go back and
fill in.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p>
<a href="../../about.html" title="About">About</a><br>
<a href="../../products.html" title="Products">Products</a><br>
<a href="../../community/index.html" title="Community">Community</a><br>
<a href="../index.html" title="Development">Development</a><br>
<a href="../../download.html" title="Downloads">Downloads</a><br>
<a href="../../documentation.html" title="Documentation">Documentation</a><br>
<a href="../../faq.html" title="FAQ">FAQ</a><br>
<a href="../../psc.html" title="PSC">PSC</a><br>
<a href="https://twitter.com/mapserver_osgeo" title="Twitter">Twitter</a>
</p>
  <h3>Current Table Of Contents</h3>
  <ul>
<li><a class="reference internal" href="#">MapScript Unit Testing</a><ul>
<li><a class="reference internal" href="#test-driven-development">Test Driven Development</a></li>
<li><a class="reference internal" href="#about-the-tests">About the tests</a></li>
<li><a class="reference internal" href="#status">Status</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../editing/index.html" title="Mapfile Editing"
             >next</a> |</li>
        <li class="right" >
          <a href="autotest.html" title="Regression Testing (msautotest)"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Development</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >Testing</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">MapScript Unit Testing</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; <a href="../../copyright.html">Copyright</a> 2023, Open Source Geospatial Foundation.
      Last updated on 2023-12-22.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.5.
    </div>
  </body>
</html>