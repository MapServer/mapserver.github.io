<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>MS RFC 67: Enable/Disable Layers in OGC Web Services &#8212; MapServer 8.0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx.css?v=6c7b17ac" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=dd298242" />
    <link rel="stylesheet" type="text/css" href="../../_static/ribbon.css?v=ea091bf4" />
    
    <script src="../../_static/documentation_options.js?v=521b6f53"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    
    <link rel="icon" href="../../_static/mapserver.ico"/>
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="copyright" title="Copyright" href="../../copyright.html" />
    <link rel="next" title="MS RFC 68: Support for combining features from multiple layers" href="ms-rfc-68.html" />
    <link rel="prev" title="MS RFC 66: Better handling of temporary files" href="ms-rfc-66.html" /> 
  </head><body>


<!-- for main branch only, do not backport this -->

<table width="100%" style="width: 100%; background-color: white;">
  <tr>
    <td rowspan="2" style="padding: 10px 0px 10px 10px;">
      <a href="../../index.html" title="Home"><img src="../../_static/banner.png" alt="MapServer banner" border="0" /></a>
    </td>
    <td style="padding: 10px 10px 0px 0px; text-align: right; vertical-align: top;">
      <a href="../../index.html" title="Home">Home</a> |
      <a href="../../products.html" title="Products (MapServer core, MapCache, TinyOWS">Products</a> |
      <a href="https://github.com/mapserver/mapserver/issues/" title="Issue Tracker (MapServer core)">Issue Tracker</a> |
      <a href="../../community/service_providers.html" title="Professional Service Providers">Service Providers</a> |      
      <a href="../../faq.html" title="Frequently Asked Questions">FAQ</a> |
      <a href="https://twitter.com/mapserver_osgeo" title="Twitter" target="_blank">Twitter</a> |
      <a href="../../download.html" title="Download Source or Binaries">Download </a> |
      <a class="badge" href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=KRJ2X44N3HA6U&source=url" target="_blank">
        <img src="https://img.shields.io/badge/donate-%E2%9D%A4%C2%A0-ff69b4.svg?style=flat" alt="Donate to MapServer">
      </a>
    </td>
  </tr>
  <tr>
    <td style="padding: 0px 10px 0px 0px; text-align: right; vertical-align: bottom;">
        <img src="../../_static/flagicons/en.png" alt="en" title="en" border="0" width="18px" height="13px"/>
        
          <a href="../../ar/development/rfc/ms-rfc-67.html"><img src="../../_static/flagicons/ar.png" alt="ar" title="ar" border="0" /></a>
        
        
          <a href="../../de/development/rfc/ms-rfc-67.html"><img src="../../_static/flagicons/de.png" alt="de" title="de" border="0" /></a>
        
        
          <a href="../../el/development/rfc/ms-rfc-67.html"><img src="../../_static/flagicons/el.png" alt="el" title="el" border="0" /></a>
        
        
          <a href="../../es/development/rfc/ms-rfc-67.html"><img src="../../_static/flagicons/es.png" alt="es" title="es" border="0" /></a>
        
        
          <a href="../../fr/development/rfc/ms-rfc-67.html"><img src="../../_static/flagicons/fr.png" alt="fr" title="fr" border="0" /></a>
        
        
          <a href="../../id/development/rfc/ms-rfc-67.html"><img src="../../_static/flagicons/id.png" alt="id" title="id" border="0" /></a>
        
        
          <a href="../../it/development/rfc/ms-rfc-67.html"><img src="../../_static/flagicons/it.png" alt="it" title="it" border="0" /></a>
        
        
          <a href="../../ja/development/rfc/ms-rfc-67.html"><img src="../../_static/flagicons/ja.png" alt="ja" title="ja" border="0" /></a>
        
        
          <a href="../../nl_NL/development/rfc/ms-rfc-67.html"><img src="../../_static/flagicons/nl_NL.png" alt="nl_NL" title="nl_NL" border="0" /></a>
        
        
          <a href="../../pl/development/rfc/ms-rfc-67.html"><img src="../../_static/flagicons/pl.png" alt="pl" title="pl" border="0" /></a>
        
        
          <a href="../../ru/development/rfc/ms-rfc-67.html"><img src="../../_static/flagicons/ru.png" alt="ru" title="ru" border="0" /></a>
        
        
          <a href="../../sq/development/rfc/ms-rfc-67.html"><img src="../../_static/flagicons/sq.png" alt="sq" title="sq" border="0" /></a>
        
        
          <a href="../../tr/development/rfc/ms-rfc-67.html"><img src="../../_static/flagicons/tr.png" alt="tr" title="tr" border="0" /></a>
        

    </td>
  </tr>
</table>


    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="ms-rfc-68.html" title="MS RFC 68: Support for combining features from multiple layers"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="ms-rfc-66.html" title="MS RFC 66: Better handling of temporary files"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Development</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">Request for Comments</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">MS RFC 67:  Enable/Disable Layers in OGC Web Services</a></li> 
      </ul>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="ms-rfc-67-enable-disable-layers-in-ogc-web-services">
<span id="rfc67"></span><h1>MS RFC 67:  Enable/Disable Layers in OGC Web Services<a class="headerlink" href="#ms-rfc-67-enable-disable-layers-in-ogc-web-services" title="Link to this heading">¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd">Date<span class="colon">:</span></dt>
<dd class="field-odd"><p>2011-02-01</p>
</dd>
<dt class="field-even">Author<span class="colon">:</span></dt>
<dd class="field-even"><p>Alan Boudreault (aboudreault at mapgears.com)</p>
</dd>
<dt class="field-odd">Author<span class="colon">:</span></dt>
<dd class="field-odd"><p>Daniel Morissette (dmorissette at mapgears.com)</p>
</dd>
<dt class="field-even">Author<span class="colon">:</span></dt>
<dd class="field-even"><p>Yewondwossen Assefa (yassefa at dmsolutions.ca)</p>
</dd>
<dt class="field-odd">Last Edited<span class="colon">:</span></dt>
<dd class="field-odd"><p>2011-02-10</p>
</dd>
<dt class="field-even">Status<span class="colon">:</span></dt>
<dd class="field-even"><p>Adopted on 2010-02-25 and implemented in MapServer 6.0</p>
</dd>
<dt class="field-odd">Version<span class="colon">:</span></dt>
<dd class="field-odd"><p>MapServer 6.0</p>
</dd>
</dl>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading">¶</a></h2>
<p>At the moment, it is not possible to hide/disable a layer in OGC Web
Services. Everybody recognizes the need to be able to hide layers from a
given mapfile from some or all OGC Web Service (OWS) requests.</p>
<p>This is a proposal to add the ability to enable/disable layers in OGC Web Services in
MapServer.</p>
<p>There was also a discussion on this topic in the wiki at <a class="reference external" href="http://trac.osgeo.org/mapserver/wiki/HidingLayersInOGCWebServices">http://trac.osgeo.org/mapserver/wiki/HidingLayersInOGCWebServices</a></p>
</section>
<section id="use-cases">
<h2>Use Cases<a class="headerlink" href="#use-cases" title="Link to this heading">¶</a></h2>
<p>Here are some use cases to demonstrate the need of hiding layers:</p>
<ul class="simple">
<li><p>One needs the ability to hide tileindex layers to all OGC services</p></li>
<li><p>In a WMS mapfile where multiple scale-dependent layers are in a common group, we want only the group to appear in GetCapabilities? and not the individual layers. However the layers should not be completely turned off since we want them to be visible in GetMap and queryable with GetFeatureInfo when the group is selected. This use case is common for WMS and may (or may not) apply to other OGC services.</p></li>
<li><p>One may want to offer a given layer via WMS but not via WFS (or any combination of services). In other words, we need the ability to select in which OGC services a given layer is exposed.</p></li>
<li><p>The copyright notice (i.e. layer with STATUS DEFAULT) shall not appear in the GetCapabilities output and shall not be queryable.</p></li>
<li><p>Not about hiding a full layer, but setting the ability to say that one wants a certain layer to return the geometry as gml in a wms-getfeatureinfo-response (at this moment it is never returned)</p></li>
<li><p>Handle wms_group_layers as real layers (relevant for INSPIRE), but move the rendering part into hidden layers in order to avoid redundant style configurations in the group layer and the sub layer.</p></li>
</ul>
</section>
<section id="proposed-solution">
<h2>Proposed Solution<a class="headerlink" href="#proposed-solution" title="Link to this heading">¶</a></h2>
<p>The main concern was to minimalize user’s changes in their
mapfiles. It seems that the easier way to go would be to use metadata,
as we already do currently for some ows settings.</p>
<p>All OWS services will be disabled by default unless enabled at map or layer
level. The OWS services can be enabled using the following metadata:</p>
<ul class="simple">
<li><p>ows_enable_request: Apply to all OGC Web Services</p></li>
<li><p>wms_enable_request: Apply to Web Map Service (WMS)</p></li>
<li><p>wfs_enable_request: Apply to Web Feature Service (WFS)</p></li>
<li><p>sos_enable_request: Apply to Sensor Observation Service (SOS)</p></li>
<li><p>wcs_enable_request: Apply to Web Coverage Service (WCS)</p></li>
</ul>
<p>The value of the metadata is a list of the requests to enable:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;GetMap GetFeature GetFeatureInfo&quot;</span>
</pre></div>
</div>
<p>The possible values are the request names for each service type as defined
in the corresponding OGC specification.</p>
<p>For convenience, there are also two special characters we can use in the
requests list:</p>
<ul class="simple">
<li><p>*: Used alone, means all requests</p></li>
<li><p>!: Placed before a request name, means disable this request</p></li>
<li><p>!*: Means disable all requests</p></li>
</ul>
<p>Examples:</p>
<p>Fully enable WMS:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">wms_enable_request</span> <span class="s2">&quot;*&quot;</span>
</pre></div>
</div>
<p>Enable WMS, all requests except GetFeatureInfo:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">wms_enable_request</span> <span class="s2">&quot;* !GetFeatureInfo&quot;</span>
</pre></div>
</div>
<p>Enable WMS with only GetMap and GetFeatureInfo:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">wms_enable_request</span> <span class="s2">&quot;GetMap GetFeatureInfo&quot;</span>
</pre></div>
</div>
<p>Enable any/all OGC Web Service request types:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ows_enable_request</span> <span class="s2">&quot;*&quot;</span>
</pre></div>
</div>
<p>Disable any/all OGC Web Service request types, mostly useful at the layer level to hide a specific layer:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ows_enable_request</span> <span class="s2">&quot;!*&quot;</span>
</pre></div>
</div>
</section>
<section id="inheritance">
<h2>Inheritance<a class="headerlink" href="#inheritance" title="Link to this heading">¶</a></h2>
<p>A particularity of the proposed solution is the inheritance of settings between the
map and the layer level. The settings at the map level apply to all layers
unless they are overridden at the layer level. Example:</p>
<p>Fully enable WFS for all layers at the map level:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">wfs_enable_request</span> <span class="s2">&quot;*&quot;</span>
</pre></div>
</div>
<p>Disable WFS GetFeature request in a specific layer (All other requests will remain enabled):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">wfs_enable_request</span> <span class="s2">&quot;!GetFeature&quot;</span>
</pre></div>
</div>
</section>
<section id="implementation-notes">
<h2>Implementation notes<a class="headerlink" href="#implementation-notes" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>Don’t forget to also update the list of supported operations in the GetCapabilities (e.g. don’t write out GetFeatureInfo as an operation if “wms_enable_request” “!GetFeatureInfo”)</p></li>
</ul>
</section>
<section id="improved-handling-of-wms-layer-group-as-real-layers">
<h2>Improved handling of wms_layer_group as real layers<a class="headerlink" href="#improved-handling-of-wms-layer-group-as-real-layers" title="Link to this heading">¶</a></h2>
<p>The current behavior of the wms_layer_group is to provide hierarchy of layers and expose it
through the capabilities document. The parent layers do not contain a &lt;Name&gt; tag, thus are not
accessible through the GetMap and GetFeatureInfo requests.
With an upgrade of wms_layer_group functionality to use Group parameter to indicate the level
of the XPath expression that can be requested (refer to <a class="reference external" href="https://github.com/MapServer/MapServer/issues/1632">https://github.com/MapServer/MapServer/issues/1632</a>),
and the addition of the functionality discussed in this RFC, the user will have flexibility to
configure the map file to show/hide low level layers and to allow or not WMS requests at
different levels of the tree hierarchy.  This is especially important to be able to support the
INSPIRE requirements.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This section of the RFC was not implemented and will be done as part of
future INSPIRE related enhancements, likely in 6.2.</p>
</div>
</section>
<section id="backwards-compatibility-issues">
<h2>Backwards Compatibility Issues<a class="headerlink" href="#backwards-compatibility-issues" title="Link to this heading">¶</a></h2>
<p>All OWS services will be disabled by default. This implies that all users
will have to modify their mapfiles and add the following line to get their
ogc services working as before.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ows_enable_request</span> <span class="s2">&quot;*&quot;</span>
</pre></div>
</div>
</section>
<section id="tickets">
<h2>Tickets<a class="headerlink" href="#tickets" title="Link to this heading">¶</a></h2>
<p>Main ticket:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/MapServer/MapServer/issues/3703">https://github.com/MapServer/MapServer/issues/3703</a></p></li>
</ul>
<p>Related tickets:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/MapServer/MapServer/issues/337">https://github.com/MapServer/MapServer/issues/337</a> : Need a way to prevent layers from being served via WMS</p></li>
<li><p><a class="reference external" href="https://github.com/MapServer/MapServer/issues/300">https://github.com/MapServer/MapServer/issues/300</a> : Extend behavior of DUMP mapfile parameter for GML output</p></li>
<li><p><a class="reference external" href="https://github.com/MapServer/MapServer/issues/1952">https://github.com/MapServer/MapServer/issues/1952</a> : Tileindex Layer and WMS Get Capabilities</p></li>
<li><p><a class="reference external" href="https://github.com/MapServer/MapServer/issues/1632">https://github.com/MapServer/MapServer/issues/1632</a> : support for named group layers using wms_layer_group</p></li>
<li><p><a class="reference external" href="https://github.com/MapServer/MapServer/issues/3608">https://github.com/MapServer/MapServer/issues/3608</a> : INSPIRE related support</p></li>
<li><p><a class="reference external" href="https://github.com/MapServer/MapServer/issues/3830">https://github.com/MapServer/MapServer/issues/3830</a> : DUMP keyword is made obsolete by RFC 67</p></li>
</ul>
</section>
<section id="voting-history">
<h2>Voting history<a class="headerlink" href="#voting-history" title="Link to this heading">¶</a></h2>
<p>Adopted on 2010-02-25 with +1 from FrankW, PericlesN SteveW, DanielM, AssefaY, JeffM, TamasS</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p>
<a href="../../about.html" title="About">About</a><br>
<a href="../../products.html" title="Products">Products</a><br>
<a href="../../community/index.html" title="Community">Community</a><br>
<a href="../index.html" title="Development">Development</a><br>
<a href="../../download.html" title="Downloads">Downloads</a><br>
<a href="../../documentation.html" title="Documentation">Documentation</a><br>
<a href="../../faq.html" title="FAQ">FAQ</a><br>
<a href="../../psc.html" title="PSC">PSC</a><br>
<a href="https://twitter.com/mapserver_osgeo" title="Twitter">Twitter</a>
</p>
  <h3>Current Table Of Contents</h3>
  <ul>
<li><a class="reference internal" href="#">MS RFC 67:  Enable/Disable Layers in OGC Web Services</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#use-cases">Use Cases</a></li>
<li><a class="reference internal" href="#proposed-solution">Proposed Solution</a></li>
<li><a class="reference internal" href="#inheritance">Inheritance</a></li>
<li><a class="reference internal" href="#implementation-notes">Implementation notes</a></li>
<li><a class="reference internal" href="#improved-handling-of-wms-layer-group-as-real-layers">Improved handling of wms_layer_group as real layers</a></li>
<li><a class="reference internal" href="#backwards-compatibility-issues">Backwards Compatibility Issues</a></li>
<li><a class="reference internal" href="#tickets">Tickets</a></li>
<li><a class="reference internal" href="#voting-history">Voting history</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="ms-rfc-68.html" title="MS RFC 68: Support for combining features from multiple layers"
             >next</a> |</li>
        <li class="right" >
          <a href="ms-rfc-66.html" title="MS RFC 66: Better handling of temporary files"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Development</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >Request for Comments</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">MS RFC 67:  Enable/Disable Layers in OGC Web Services</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; <a href="../../copyright.html">Copyright</a> 2023, Open Source Geospatial Foundation.
      Last updated on 2023-12-22.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.5.
    </div>
  </body>
</html>