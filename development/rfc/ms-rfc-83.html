<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>MS RFC 83: Source tree reorganization &#8212; MapServer 8.0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx.css?v=6c7b17ac" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=dd298242" />
    <link rel="stylesheet" type="text/css" href="../../_static/ribbon.css?v=ea091bf4" />
    
    <script src="../../_static/documentation_options.js?v=521b6f53"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    
    <link rel="icon" href="../../_static/mapserver.ico"/>
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="copyright" title="Copyright" href="../../copyright.html" />
    <link rel="next" title="MS RFC 84: Migrate project repository from svn to git" href="ms-rfc-84.html" />
    <link rel="prev" title="MS RFC 82: Support for Enhanced Layer Metadata Management" href="ms-rfc-82.html" /> 
  </head><body>


<!-- for main branch only, do not backport this -->

<table width="100%" style="width: 100%; background-color: white;">
  <tr>
    <td rowspan="2" style="padding: 10px 0px 10px 10px;">
      <a href="../../index.html" title="Home"><img src="../../_static/banner.png" alt="MapServer banner" border="0" /></a>
    </td>
    <td style="padding: 10px 10px 0px 0px; text-align: right; vertical-align: top;">
      <a href="../../index.html" title="Home">Home</a> |
      <a href="../../products.html" title="Products (MapServer core, MapCache, TinyOWS">Products</a> |
      <a href="https://github.com/mapserver/mapserver/issues/" title="Issue Tracker (MapServer core)">Issue Tracker</a> |
      <a href="../../community/service_providers.html" title="Professional Service Providers">Service Providers</a> |      
      <a href="../../faq.html" title="Frequently Asked Questions">FAQ</a> |
      <a href="https://twitter.com/mapserver_osgeo" title="Twitter" target="_blank">Twitter</a> |
      <a href="../../download.html" title="Download Source or Binaries">Download </a> |
      <a class="badge" href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=KRJ2X44N3HA6U&source=url" target="_blank">
        <img src="https://img.shields.io/badge/donate-%E2%9D%A4%C2%A0-ff69b4.svg?style=flat" alt="Donate to MapServer">
      </a>
    </td>
  </tr>
  <tr>
    <td style="padding: 0px 10px 0px 0px; text-align: right; vertical-align: bottom;">
        <img src="../../_static/flagicons/en.png" alt="en" title="en" border="0" width="18px" height="13px"/>
        
          <a href="../../ar/development/rfc/ms-rfc-83.html"><img src="../../_static/flagicons/ar.png" alt="ar" title="ar" border="0" /></a>
        
        
          <a href="../../de/development/rfc/ms-rfc-83.html"><img src="../../_static/flagicons/de.png" alt="de" title="de" border="0" /></a>
        
        
          <a href="../../el/development/rfc/ms-rfc-83.html"><img src="../../_static/flagicons/el.png" alt="el" title="el" border="0" /></a>
        
        
          <a href="../../es/development/rfc/ms-rfc-83.html"><img src="../../_static/flagicons/es.png" alt="es" title="es" border="0" /></a>
        
        
          <a href="../../fr/development/rfc/ms-rfc-83.html"><img src="../../_static/flagicons/fr.png" alt="fr" title="fr" border="0" /></a>
        
        
          <a href="../../id/development/rfc/ms-rfc-83.html"><img src="../../_static/flagicons/id.png" alt="id" title="id" border="0" /></a>
        
        
          <a href="../../it/development/rfc/ms-rfc-83.html"><img src="../../_static/flagicons/it.png" alt="it" title="it" border="0" /></a>
        
        
          <a href="../../ja/development/rfc/ms-rfc-83.html"><img src="../../_static/flagicons/ja.png" alt="ja" title="ja" border="0" /></a>
        
        
          <a href="../../nl_NL/development/rfc/ms-rfc-83.html"><img src="../../_static/flagicons/nl_NL.png" alt="nl_NL" title="nl_NL" border="0" /></a>
        
        
          <a href="../../pl/development/rfc/ms-rfc-83.html"><img src="../../_static/flagicons/pl.png" alt="pl" title="pl" border="0" /></a>
        
        
          <a href="../../ru/development/rfc/ms-rfc-83.html"><img src="../../_static/flagicons/ru.png" alt="ru" title="ru" border="0" /></a>
        
        
          <a href="../../sq/development/rfc/ms-rfc-83.html"><img src="../../_static/flagicons/sq.png" alt="sq" title="sq" border="0" /></a>
        
        
          <a href="../../tr/development/rfc/ms-rfc-83.html"><img src="../../_static/flagicons/tr.png" alt="tr" title="tr" border="0" /></a>
        

    </td>
  </tr>
</table>


    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="ms-rfc-84.html" title="MS RFC 84: Migrate project repository from svn to git"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="ms-rfc-82.html" title="MS RFC 82: Support for Enhanced Layer Metadata Management"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Development</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">Request for Comments</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">MS RFC 83: Source tree reorganization</a></li> 
      </ul>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="ms-rfc-83-source-tree-reorganization">
<span id="rfc83"></span><h1>MS RFC 83: Source tree reorganization<a class="headerlink" href="#ms-rfc-83-source-tree-reorganization" title="Link to this heading">¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd">Date<span class="colon">:</span></dt>
<dd class="field-odd"><p>2012-02-06</p>
</dd>
<dt class="field-even">Author<span class="colon">:</span></dt>
<dd class="field-even"><p>Daniel Morissette</p>
</dd>
<dt class="field-odd">Contact<span class="colon">:</span></dt>
<dd class="field-odd"><p>dmorissette at mapgears.com</p>
</dd>
<dt class="field-even">Last Edited<span class="colon">:</span></dt>
<dd class="field-even"><p>011-11-25</p>
</dd>
<dt class="field-odd">Status<span class="colon">:</span></dt>
<dd class="field-odd"><p>Abandoned</p>
</dd>
<dt class="field-even">Version<span class="colon">:</span></dt>
<dd class="field-even"><p>MapServer 6.2</p>
</dd>
</dl>
<section id="overview">
<h2>1. Overview<a class="headerlink" href="#overview" title="Link to this heading">¶</a></h2>
<p>With the inclusion of the new MapCache and TinyOWS components in the MapServer project, it would be ideal to reorganize the directory structure of the source tree to facilitate builds and maintenance in the future.</p>
</section>
<section id="current-directory-structure">
<h2>2. Current directory structure<a class="headerlink" href="#current-directory-structure" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ls</span> <span class="o">-</span><span class="n">R</span> <span class="o">|</span> <span class="n">grep</span> <span class="o">-</span><span class="n">v</span> <span class="n">svn</span> <span class="o">|</span> <span class="n">grep</span> <span class="s2">&quot;:$&quot;</span> <span class="o">|</span> <span class="n">sed</span> <span class="o">-</span><span class="n">e</span> <span class="s1">&#39;s/:$//&#39;</span> <span class="o">-</span><span class="n">e</span> <span class="s1">&#39;s/[^-][^\/]*\//--/g&#39;</span> <span class="o">-</span><span class="n">e</span> <span class="s1">&#39;s/^/   /&#39;</span> <span class="o">-</span><span class="n">e</span> <span class="s1">&#39;s/-/|/&#39;</span>

 <span class="n">mapserver</span>
 <span class="o">|-</span><span class="n">fonts</span>
 <span class="o">|-</span><span class="n">m4</span>
 <span class="o">|-</span><span class="n">mapcache</span>
 <span class="o">|---</span><span class="n">apache</span>
 <span class="o">|---</span><span class="n">cgi</span>
 <span class="o">|---</span><span class="n">include</span>
 <span class="o">|---</span><span class="n">lib</span>
 <span class="o">|---</span><span class="n">m4</span>
 <span class="o">|---</span><span class="n">nginx</span>
 <span class="o">|---</span><span class="n">static</span>
 <span class="o">|---</span><span class="n">util</span>
 <span class="o">|-</span><span class="n">mapscript</span>
 <span class="o">|---</span><span class="n">csharp</span>
 <span class="o">|-----</span><span class="n">config</span>
 <span class="o">|-----</span><span class="n">examples</span>
 <span class="o">|---</span><span class="n">doc</span>
 <span class="o">|---</span><span class="n">java</span>
 <span class="o">|-----</span><span class="n">data</span>
 <span class="o">|-----</span><span class="n">examples</span>
 <span class="o">|-----</span><span class="n">tests</span>
 <span class="o">|-------</span><span class="n">threadtest</span>
 <span class="o">|---</span><span class="n">perl</span>
 <span class="o">|-----</span><span class="n">examples</span>
 <span class="o">|---</span><span class="n">php</span>
 <span class="o">|-----</span><span class="n">examples</span>
 <span class="o">|---</span><span class="n">python</span>
 <span class="o">|-----</span><span class="n">examples</span>
 <span class="o">|-----</span><span class="n">pygdioctx</span>
 <span class="o">|-----</span><span class="n">tests</span>
 <span class="o">|-------</span><span class="n">cases</span>
 <span class="o">|-------</span><span class="n">timing</span>
 <span class="o">|---</span><span class="n">ruby</span>
 <span class="o">|-----</span><span class="n">examples</span>
 <span class="o">|---</span><span class="n">swiginc</span>
 <span class="o">|---</span><span class="n">tcl</span>
 <span class="o">|-----</span><span class="n">examples</span>
 <span class="o">|-----</span><span class="n">win</span>
 <span class="o">|-</span><span class="n">opengl</span>
 <span class="o">|-</span><span class="n">renderers</span>
 <span class="o">|---</span><span class="n">agg</span>
 <span class="o">|-----</span><span class="n">include</span>
 <span class="o">|-------</span><span class="n">util</span>
 <span class="o">|-----</span><span class="n">src</span>
 <span class="o">|-</span><span class="n">symbols</span>
 <span class="o">|-</span><span class="n">tests</span>
 <span class="o">|---</span><span class="n">vera</span>
 <span class="o">|-</span><span class="n">xmlmapfile</span>
 <span class="o">|---</span><span class="n">tests</span>
</pre></div>
</div>
<p>Where the most interesting pieces are:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mapserver</span>
<span class="o">|-</span><span class="n">mapcache</span>
<span class="o">|-</span><span class="n">mapscript</span>
<span class="o">|-</span><span class="n">opengl</span>
<span class="o">|-</span><span class="n">renderers</span>
<span class="o">|---</span><span class="n">agg</span>
<span class="o">|-</span><span class="n">xmlmapfile</span>
</pre></div>
</div>
</section>
<section id="new-proposed-directory-structure">
<h2>3. New proposed directory structure<a class="headerlink" href="#new-proposed-directory-structure" title="Link to this heading">¶</a></h2>
<p>The most important change is that most of the .c/.h source files currently in the mapserver root directory will be moved to one of two new sub-directories:</p>
<ul class="simple">
<li><p>lib: Contains all the mapserver core source files that are built into libmapserver.so and shared with multiple components. This directory would also be the home of libmapfile.so when we create it.</p></li>
<li><p>apps: Contains the source files related to the traditional mapserv CGI/FastCGI application and command-line utilities such as map2img, etc.</p></li>
</ul>
<p>A new “tinyows” sub-directory will be created to serve as the future home of TinyOWS source files.</p>
<p>The result will look like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mapserver</span>
<span class="o">|-</span><span class="n">lib</span>
<span class="o">|---</span><span class="n">renderers</span>
<span class="o">|-----</span><span class="n">agg</span>
<span class="o">|-----</span><span class="n">opengl</span>
<span class="o">|-</span><span class="n">apps</span>
<span class="o">|-</span><span class="n">mapscript</span>
<span class="o">|-</span><span class="n">mapcache</span>
<span class="o">|-</span><span class="n">tinyows</span>
<span class="o">|-</span><span class="n">xmlmapfile</span>
</pre></div>
</div>
<p>For the time being, the following files will continue to reside in the mapserver root directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">configure</span><span class="o">.</span><span class="ow">in</span>
<span class="n">Makefile</span><span class="o">.</span><span class="ow">in</span>
<span class="n">HISTORY</span><span class="o">.</span><span class="n">TXT</span> <span class="p">(</span><span class="n">applicable</span> <span class="n">to</span> <span class="n">releases</span> <span class="n">of</span> <span class="n">the</span> <span class="n">full</span> <span class="n">suite</span><span class="p">)</span>
</pre></div>
</div>
<p>Initially the root directory’s configure.in will be the same one that we currently have, and it will update the Makefile.in in the lib, apps and mapscript sub-directories.</p>
<p>Our long term goal (to happen slowly over time) is that most of the sub-directories (especially mapserv, mapscript, mapcache and tinyows) will also eventually contain their own standalone configure script and Makefile to allow building a given component independently. At that point the main configure script and Makefile in the mapserver root directory will simply call each sub-project’s configure and Makefile to automate building of multiple selected components at once.</p>
<p>HISTORY.TXT files will be maintained at two levels:</p>
<ul class="simple">
<li><p>HISTORY.TXT in root directory: contains history information relevant to releases of the full suite</p></li>
<li><p>HISTORY.TXT in each sub-project directory: contains detailed history information related to each specific component. The current HISTORY.TXT would be moved to the libmapserver.so sub-directory.</p></li>
</ul>
</section>
<section id="backwards-compatibility-issues">
<h2>4. Backwards Compatibility Issues<a class="headerlink" href="#backwards-compatibility-issues" title="Link to this heading">¶</a></h2>
<p>Patches against older releases may not apply directly any more due to files moving around. For the same reasons, merging of changes from a svn sandbox or branch may be more complicated.</p>
</section>
<section id="bug-id">
<h2>5. Bug ID<a class="headerlink" href="#bug-id" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>TBD</p></li>
</ul>
</section>
<section id="voting-history">
<h2>6. Voting history<a class="headerlink" href="#voting-history" title="Link to this heading">¶</a></h2>
<p>No vote yet.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p>
<a href="../../about.html" title="About">About</a><br>
<a href="../../products.html" title="Products">Products</a><br>
<a href="../../community/index.html" title="Community">Community</a><br>
<a href="../index.html" title="Development">Development</a><br>
<a href="../../download.html" title="Downloads">Downloads</a><br>
<a href="../../documentation.html" title="Documentation">Documentation</a><br>
<a href="../../faq.html" title="FAQ">FAQ</a><br>
<a href="../../psc.html" title="PSC">PSC</a><br>
<a href="https://twitter.com/mapserver_osgeo" title="Twitter">Twitter</a>
</p>
  <h3>Current Table Of Contents</h3>
  <ul>
<li><a class="reference internal" href="#">MS RFC 83: Source tree reorganization</a><ul>
<li><a class="reference internal" href="#overview">1. Overview</a></li>
<li><a class="reference internal" href="#current-directory-structure">2. Current directory structure</a></li>
<li><a class="reference internal" href="#new-proposed-directory-structure">3. New proposed directory structure</a></li>
<li><a class="reference internal" href="#backwards-compatibility-issues">4. Backwards Compatibility Issues</a></li>
<li><a class="reference internal" href="#bug-id">5. Bug ID</a></li>
<li><a class="reference internal" href="#voting-history">6. Voting history</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="ms-rfc-84.html" title="MS RFC 84: Migrate project repository from svn to git"
             >next</a> |</li>
        <li class="right" >
          <a href="ms-rfc-82.html" title="MS RFC 82: Support for Enhanced Layer Metadata Management"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Development</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >Request for Comments</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">MS RFC 83: Source tree reorganization</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; <a href="../../copyright.html">Copyright</a> 2023, Open Source Geospatial Foundation.
      Last updated on 2023-12-22.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.5.
    </div>
  </body>
</html>