<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>MS RFC 86: Scale-dependant String Substitutions &#8212; MapServer 8.0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx.css?v=6c7b17ac" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=dd298242" />
    <link rel="stylesheet" type="text/css" href="../../_static/ribbon.css?v=ea091bf4" />
    
    <script src="../../_static/documentation_options.js?v=521b6f53"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    
    <link rel="icon" href="../../_static/mapserver.ico"/>
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="copyright" title="Copyright" href="../../copyright.html" />
    <link rel="next" title="MS RFC 87: Bitmap pattern support" href="ms-rfc-87.html" />
    <link rel="prev" title="MS RFC 85: Vector Contour Rendering (CONNECTIONTYPE CONTOUR)" href="ms-rfc-85.html" /> 
  </head><body>


<!-- for main branch only, do not backport this -->

<table width="100%" style="width: 100%; background-color: white;">
  <tr>
    <td rowspan="2" style="padding: 10px 0px 10px 10px;">
      <a href="../../index.html" title="Home"><img src="../../_static/banner.png" alt="MapServer banner" border="0" /></a>
    </td>
    <td style="padding: 10px 10px 0px 0px; text-align: right; vertical-align: top;">
      <a href="../../index.html" title="Home">Home</a> |
      <a href="../../products.html" title="Products (MapServer core, MapCache, TinyOWS">Products</a> |
      <a href="https://github.com/mapserver/mapserver/issues/" title="Issue Tracker (MapServer core)">Issue Tracker</a> |
      <a href="../../community/service_providers.html" title="Professional Service Providers">Service Providers</a> |      
      <a href="../../faq.html" title="Frequently Asked Questions">FAQ</a> |
      <a href="https://twitter.com/mapserver_osgeo" title="Twitter" target="_blank">Twitter</a> |
      <a href="../../download.html" title="Download Source or Binaries">Download </a> |
      <a class="badge" href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=KRJ2X44N3HA6U&source=url" target="_blank">
        <img src="https://img.shields.io/badge/donate-%E2%9D%A4%C2%A0-ff69b4.svg?style=flat" alt="Donate to MapServer">
      </a>
    </td>
  </tr>
  <tr>
    <td style="padding: 0px 10px 0px 0px; text-align: right; vertical-align: bottom;">
        <img src="../../_static/flagicons/en.png" alt="en" title="en" border="0" width="18px" height="13px"/>
        
          <a href="../../ar/development/rfc/ms-rfc-86.html"><img src="../../_static/flagicons/ar.png" alt="ar" title="ar" border="0" /></a>
        
        
          <a href="../../de/development/rfc/ms-rfc-86.html"><img src="../../_static/flagicons/de.png" alt="de" title="de" border="0" /></a>
        
        
          <a href="../../el/development/rfc/ms-rfc-86.html"><img src="../../_static/flagicons/el.png" alt="el" title="el" border="0" /></a>
        
        
          <a href="../../es/development/rfc/ms-rfc-86.html"><img src="../../_static/flagicons/es.png" alt="es" title="es" border="0" /></a>
        
        
          <a href="../../fr/development/rfc/ms-rfc-86.html"><img src="../../_static/flagicons/fr.png" alt="fr" title="fr" border="0" /></a>
        
        
          <a href="../../id/development/rfc/ms-rfc-86.html"><img src="../../_static/flagicons/id.png" alt="id" title="id" border="0" /></a>
        
        
          <a href="../../it/development/rfc/ms-rfc-86.html"><img src="../../_static/flagicons/it.png" alt="it" title="it" border="0" /></a>
        
        
          <a href="../../ja/development/rfc/ms-rfc-86.html"><img src="../../_static/flagicons/ja.png" alt="ja" title="ja" border="0" /></a>
        
        
          <a href="../../nl_NL/development/rfc/ms-rfc-86.html"><img src="../../_static/flagicons/nl_NL.png" alt="nl_NL" title="nl_NL" border="0" /></a>
        
        
          <a href="../../pl/development/rfc/ms-rfc-86.html"><img src="../../_static/flagicons/pl.png" alt="pl" title="pl" border="0" /></a>
        
        
          <a href="../../ru/development/rfc/ms-rfc-86.html"><img src="../../_static/flagicons/ru.png" alt="ru" title="ru" border="0" /></a>
        
        
          <a href="../../sq/development/rfc/ms-rfc-86.html"><img src="../../_static/flagicons/sq.png" alt="sq" title="sq" border="0" /></a>
        
        
          <a href="../../tr/development/rfc/ms-rfc-86.html"><img src="../../_static/flagicons/tr.png" alt="tr" title="tr" border="0" /></a>
        

    </td>
  </tr>
</table>


    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="ms-rfc-87.html" title="MS RFC 87: Bitmap pattern support"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="ms-rfc-85.html" title="MS RFC 85: Vector Contour Rendering (CONNECTIONTYPE CONTOUR)"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Development</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">Request for Comments</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">MS RFC 86: Scale-dependant String Substitutions</a></li> 
      </ul>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="ms-rfc-86-scale-dependant-string-substitutions">
<span id="rfc86"></span><h1>MS RFC 86: Scale-dependant String Substitutions<a class="headerlink" href="#ms-rfc-86-scale-dependant-string-substitutions" title="Link to this heading">¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd">Date<span class="colon">:</span></dt>
<dd class="field-odd"><p>2012/10/08</p>
</dd>
<dt class="field-even">Author<span class="colon">:</span></dt>
<dd class="field-even"><p>Thomas Bonfort</p>
</dd>
<dt class="field-odd">Contact<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="mailto:tbonfort&#37;&#52;&#48;terriscope&#46;fr">tbonfort<span>&#64;</span>terriscope<span>&#46;</span>fr</a></p>
</dd>
<dt class="field-even">Status<span class="colon">:</span></dt>
<dd class="field-even"><p>Adopted</p>
</dd>
<dt class="field-odd">Version<span class="colon">:</span></dt>
<dd class="field-odd"><p>MapServer 6.4</p>
</dd>
</dl>
<section id="overview">
<h2>1. Overview<a class="headerlink" href="#overview" title="Link to this heading">¶</a></h2>
<p>MapServer has the ability to use multiple layers with MINSCALE/MAXSCALE filtering GROUP’d
together when the need for scale-dependant datasources arises, e.g. like:</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">LAYER</span>
  <span class="k">NAME</span> <span class="s">&quot;roads_far&quot;</span>
  <span class="k">GROUP</span> <span class="s">&quot;roads&quot;</span>
  <span class="k">TYPE</span> <span class="nb">LINE</span>
  <span class="k">MINSCALE</span> <span class="mi">100000</span>
  <span class="k">DATA</span> <span class="s">&quot;the_geom from roads_far&quot;</span>
  <span class="k">CLASS</span>
    <span class="p">...</span>
  <span class="k">END</span>
  <span class="k">CLASS</span>
    <span class="p">...</span>
  <span class="k">END</span>
<span class="k">END</span>
<span class="k">LAYER</span>
  <span class="k">NAME</span> <span class="s">&quot;roads_close&quot;</span>
  <span class="k">GROUP</span> <span class="s">&quot;roads&quot;</span>
  <span class="k">TYPE</span> <span class="nb">LINE</span>
  <span class="k">MAXSCALE</span> <span class="mi">100000</span>
  <span class="k">DATA</span> <span class="s">&quot;the_geom from roads_close&quot;</span>
  <span class="k">CLASS</span>
    <span class="p">...</span>
  <span class="k">END</span>
  <span class="k">CLASS</span>
    <span class="p">...</span>
  <span class="k">END</span>
<span class="k">END</span>
</pre></div>
</div>
<p>While this solution works, it has the inconvenience of necessitating a duplication of the
symbology throughout multiple layers, and may require some tweaking in order to hide the
multiple layers in capabilities documents.</p>
<p>The current RFC proposes to mimic our current <a class="reference external" href="https://mapserver.org/cgi/runsub.html">runtime-substitution</a> mechanism to replace tokens
inside a layer’s DATA statement. Instead of using an url parameter to accomplish the
replacements, the token is replaced by a value that is dependent on the current map scale.</p>
</section>
<section id="proposed-solution">
<h2>2. Proposed solution<a class="headerlink" href="#proposed-solution" title="Link to this heading">¶</a></h2>
<p>Examples are worth a thousand words here…</p>
</section>
<section id="example-1">
<h2>2.1. Example 1<a class="headerlink" href="#example-1" title="Link to this heading">¶</a></h2>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">LAYER</span>
  <span class="p">..</span>
  <span class="k">SCALETOKEN</span>
    <span class="k">NAME</span> <span class="s">&quot;%priority%&quot;</span>
    <span class="k">VALUES</span>
      <span class="s">&quot;0&quot;</span> <span class="s">&quot;1&quot;</span>
      <span class="s">&quot;1000&quot;</span> <span class="s">&quot;2&quot;</span>
      <span class="s">&quot;10000&quot;</span> <span class="s">&quot;3&quot;</span>
    <span class="k">END</span>
  <span class="k">END</span>
  <span class="k">DATA</span> <span class="s">&quot;the_geom from mytable_%priority%&quot;</span>  <span class="c">#data comes from a specific table</span>
  <span class="k">DATA</span> <span class="s">&quot;/path/to/roads_%priority%.shp&quot;</span>  <span class="c">#data comes from a specific shapefile</span>
  <span class="k">DATA</span> <span class="s">&quot;the_geom_%priority</span><span class="si">% f</span><span class="s">rom roads&quot;</span> <span class="c">#data comes from a specific column in the table</span>
  <span class="k">DATA</span> <span class="s">&quot;the_geom_%priority</span><span class="si">% f</span><span class="s">rom (select * from roads where priority &gt; %priority%) as foo&quot;</span> <span class="c">#data is filtered</span>
  <span class="k">CLASS</span>
    <span class="p">...</span>
  <span class="k">END</span>
<span class="k">END</span>
</pre></div>
</div>
<p>In the previous example, %priority% would be replaced by:</p>
<ul>
<li><p>“1” for scales under 1,000 , giving:</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">DATA</span> <span class="s">&quot;the_geom from mytable_1&quot;</span>
<span class="k">DATA</span> <span class="s">&quot;/path/to/roads_1.shp&quot;</span>
<span class="k">DATA</span> <span class="s">&quot;the_geom_1 from roads&quot;</span>
<span class="k">DATA</span> <span class="s">&quot;the_geom_1 from (select * from roads where priority &gt; 1) as foo&quot;</span>
</pre></div>
</div>
</li>
<li><p>“2” for scales between 1,000 and 10,000</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">DATA</span> <span class="s">&quot;the_geom from mytable_2&quot;</span>
<span class="k">DATA</span> <span class="s">&quot;/path/to/roads_2.shp&quot;</span>
<span class="k">DATA</span> <span class="s">&quot;the_geom_2 from roads&quot;</span>
<span class="k">DATA</span> <span class="s">&quot;the_geom_2 from (select * from roads where priority &gt; 2) as foo&quot;</span>
</pre></div>
</div>
</li>
<li><p>“3” for scales over 10,000</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">DATA</span> <span class="s">&quot;the_geom from mytable_3&quot;</span>
<span class="k">DATA</span> <span class="s">&quot;/path/to/roads_3.shp&quot;</span>
<span class="k">DATA</span> <span class="s">&quot;the_geom_3 from roads&quot;</span>
<span class="k">DATA</span> <span class="s">&quot;the_geom_3 from (select * from roads where priority &gt; 3) as foo&quot;</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="example-2">
<h2>2.2 Example 2<a class="headerlink" href="#example-2" title="Link to this heading">¶</a></h2>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">LAYER</span>
  <span class="p">..</span>
  <span class="k">SCALETOKEN</span>
    <span class="k">NAME</span> <span class="s">&quot;%table%&quot;</span>
    <span class="k">VALUES</span>
      <span class="s">&quot;0&quot;</span> <span class="s">&quot;roads&quot;</span>
      <span class="s">&quot;1000&quot;</span> <span class="s">&quot;roads_gen_1&quot;</span>
      <span class="s">&quot;10000&quot;</span> <span class="s">&quot;roads_gen_0&quot;</span>
    <span class="k">END</span>
  <span class="k">END</span>
  <span class="k">DATA</span> <span class="s">&quot;the_geom from %table%&quot;</span>  <span class="c">#data comes from a specific table</span>
  <span class="k">DATA</span> <span class="s">&quot;/path/to/%table%.shp&quot;</span>  <span class="c">#data comes from a specific shapefile</span>
  <span class="k">CLASS</span>
    <span class="p">...</span>
  <span class="k">END</span>
<span class="k">END</span>
</pre></div>
</div>
<p>In the previous example, %table% would be replaced by:</p>
<ul>
<li><p>“roads” for scales under 1,000 , giving:</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">DATA</span> <span class="s">&quot;the_geom from roads&quot;</span>
<span class="k">DATA</span> <span class="s">&quot;/path/to/roads.shp&quot;</span>
</pre></div>
</div>
</li>
<li><p>“roads_gen_1” for scales between 1,000 and 10,000</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">DATA</span> <span class="s">&quot;the_geom from roads_gen_1&quot;</span>
<span class="k">DATA</span> <span class="s">&quot;/path/to/roads_gen_1.shp&quot;</span>
</pre></div>
</div>
</li>
<li><p>“roads_gen_0” for scales over 10,000</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">DATA</span> <span class="s">&quot;the_geom from roads_gen_0&quot;</span>
<span class="k">DATA</span> <span class="s">&quot;/path/to/roads_gen_0.shp&quot;</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="example-3">
<h2>2.3 Example 3<a class="headerlink" href="#example-3" title="Link to this heading">¶</a></h2>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">LAYER</span>
  <span class="p">..</span>
  <span class="k">SCALETOKEN</span>
    <span class="k">NAME</span> <span class="s">&quot;</span><span class="si">%f</span><span class="s">ilter%&quot;</span>
    <span class="k">VALUES</span>
      <span class="s">&quot;0&quot;</span> <span class="s">&quot;&quot;</span>
      <span class="s">&quot;1000&quot;</span> <span class="s">&quot;where type in (&#39;motorway&#39;,&#39;trunk&#39;,&#39;primary&#39;)&quot;</span>
      <span class="s">&quot;10000&quot;</span> <span class="s">&quot;where type=&#39;motorway&#39;&quot;</span>
    <span class="k">END</span>
  <span class="k">END</span>
  <span class="k">DATA</span> <span class="s">&quot;the_geom from (select * from roads </span><span class="si">%f</span><span class="s">ilter%) as foo&quot;</span>
  <span class="k">CLASS</span>
    <span class="p">...</span>
  <span class="k">END</span>
<span class="k">END</span>
</pre></div>
</div>
<p>In the previous example, %filter% would be replaced by:</p>
<ul>
<li><p>nothing for scales under 1,000 , giving:</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">DATA</span> <span class="s">&quot;the_geom from (select * from roads) as foo&quot;</span>
</pre></div>
</div>
</li>
<li><p>“where type in (‘motorway’,’trunk’,’primary’)” for scales between 1,000 and 10,000</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">DATA</span> <span class="s">&quot;the_geom from (select * from roads where type in (&#39;motorway&#39;,&#39;trunk&#39;,&#39;primary&#39;)) as foo&quot;</span>
</pre></div>
</div>
</li>
<li><p>“where type=’motorway’” for scales over 10,000</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">DATA</span> <span class="s">&quot;the_geom from (select * from roads where type=&#39;motorway&#39;) as foo&quot;</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="discussion">
<h2>2.4 Discussion<a class="headerlink" href="#discussion" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>Multiple tokens can be used for a single layer, e.g for applying a filter
<em>and</em> hitting generalized tables.</p></li>
<li><p>Inside the VALUES block, the first scale entry <strong>must</strong> be “0”, and entries
<strong>must</strong> be in ascending order.</p></li>
<li><p>The examples use the “%keyname%” notation in order to mimic MapServer’s
existing url runtime substitutions. The “%…%” notation is not enforced, the
code does a simple string replacement. (i.e. “priority” or “#table#” are
valid VALUES, provided the “priority” or “#table#” substrings appear in the
DATA statements.</p></li>
<li><p>Scale dependent substitutions would apply to the layer’s DATA, TILEINDEX,
TILEITEM, FILTERITEM and FILTER. Applying it to other elements might make
sense, but is more involved in terms of impact to the code. Scale-dependant
substitutions on FILTER may be incompatible with filters set through
MapServer’s WFS filter handling.</p></li>
<li><p>Bug <a class="reference external" href="https://github.com/MapServer/MapServer/issues/3150">3150</a> discusses the need for such a substitution, but is much more
limited in scope.</p></li>
<li><p>It might be desirable to provide SCALETOKEN entries at the MAP level (and
not only LAYER level) in case the token has the vocation of being replaced
in multiple layers. MAP level SCALETOKEN will not be present in the initial
implementation.</p></li>
<li><p>Provide a default token to use when scale is irrelevant (queries…)</p></li>
</ul>
</section>
<section id="implementation-details">
<h2>3. Implementation Details<a class="headerlink" href="#implementation-details" title="Link to this heading">¶</a></h2>
</section>
<section id="id1">
<h2>3.1 Overview<a class="headerlink" href="#id1" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>layerObj gets a new member containing the scale dependent tokens
applicable.</p></li>
<li><p>the actual struct to use to represent a given token:</p></li>
</ul>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kt">double</span><span class="w"> </span><span class="n">minscale</span><span class="p">;</span>
<span class="w">  </span><span class="kt">double</span><span class="w"> </span><span class="n">maxscale</span><span class="p">;</span>
<span class="w">  </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">value</span><span class="p">;</span>
<span class="p">}</span><span class="w"> </span><span class="n">scaleTokenEntryObj</span><span class="p">;</span>

<span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
<span class="w">  </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">default_value</span><span class="p">;</span>
<span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">n_entries</span><span class="p">;</span>
<span class="w">  </span><span class="n">scaleTokenEntryObj</span><span class="o">*</span><span class="w"> </span><span class="n">tokens</span><span class="p">;</span>
<span class="p">}</span><span class="w"> </span><span class="n">scaleTokenObj</span><span class="p">;</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">layerObj</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="p">...</span>
<span class="w">   </span><span class="n">scaleTokenObj</span><span class="o">*</span><span class="w"> </span><span class="n">tokens</span><span class="p">;</span>
<span class="w">   </span><span class="kt">int</span><span class="w"> </span><span class="n">numscaletokens</span><span class="p">;</span>
<span class="w">   </span><span class="p">...</span>

<span class="w">   </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">orig_data</span><span class="p">;</span>
<span class="w">   </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">orig_tileindex</span><span class="p">;</span>
<span class="w">   </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">orig_tileitem</span><span class="p">;</span>
<span class="w">   </span><span class="p">...</span><span class="w"> </span><span class="n">etc</span><span class="w"> </span><span class="p">...</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>in <cite>msLayerOpen()</cite>, replace tokens inside <cite>layerObj-&gt;data</cite>, <cite>layerObj-&gt;tileindex</cite>,
etc… The original <cite>layerObj-&gt;data</cite> is stored beforehand in <cite>layerObj-&gt;orig_data</cite>,
and is restored in <cite>msLayerClose()</cite></p></li>
<li><p>For the special case of <cite>layerObj-&gt;filter</cite>, <cite>msLoadExpressionString()</cite> is called on
the substituted text in order to update the expressionObj. Likewise, it is
called in <cite>msLayerClose()</cite> when the original filter is restored.</p></li>
</ul>
</section>
<section id="files-affected">
<h2>3.2 Files affected<a class="headerlink" href="#files-affected" title="Link to this heading">¶</a></h2>
<p>The following files will be modified/created by this RFC:</p>
<ul class="simple">
<li><p>mapserver.h/mapfile.c: layerObj members, mapfile keywords</p></li>
<li><p>mapcopy.c/mapfile.c: copy functions, write-to-file functions</p></li>
<li><p>maplayer.c: call to token replacements inside msLayerOpen(), eventually
msLayerClose(). Add function to appply the substitutions depending on
current scale..</p></li>
<li><p>maplexer.l: parser keywords</p></li>
</ul>
</section>
<section id="mapscript">
<h2>3.3 MapScript<a class="headerlink" href="#mapscript" title="Link to this heading">¶</a></h2>
<p>add getters/setters on layer scaletokens</p>
</section>
<section id="backwards-compatibility-issues">
<h2>3.4 Backwards Compatibility Issues<a class="headerlink" href="#backwards-compatibility-issues" title="Link to this heading">¶</a></h2>
<p>This change provides a new functionality with no backwards compatibility issues
being considered.</p>
</section>
<section id="security-implications">
<h2>4. Security implications<a class="headerlink" href="#security-implications" title="Link to this heading">¶</a></h2>
<p>The tokens are defined in the mapfile and are not overridable by url, thus
implying no more risk of sql injection or file system traversal than a
classical DATA statement.</p>
</section>
<section id="performance-implications">
<h2>4. Performance implications<a class="headerlink" href="#performance-implications" title="Link to this heading">¶</a></h2>
<p>The token replacement is only done in msLayerOpen(), the performance impact
should be negligeable as this happens only once per rendered layer.</p>
</section>
<section id="bug-id">
<h2>5. Bug ID<a class="headerlink" href="#bug-id" title="Link to this heading">¶</a></h2>
<p><a class="reference external" href="https://github.com/MapServer/MapServer/pull/4538">https://github.com/MapServer/MapServer/pull/4538</a></p>
</section>
<section id="voting-history">
<h2>6. Voting history<a class="headerlink" href="#voting-history" title="Link to this heading">¶</a></h2>
<p>+1 from ThomasB, MikeS, TomK, DanielM, JeffM, SteveL, SteveW and PerryN</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p>
<a href="../../about.html" title="About">About</a><br>
<a href="../../products.html" title="Products">Products</a><br>
<a href="../../community/index.html" title="Community">Community</a><br>
<a href="../index.html" title="Development">Development</a><br>
<a href="../../download.html" title="Downloads">Downloads</a><br>
<a href="../../documentation.html" title="Documentation">Documentation</a><br>
<a href="../../faq.html" title="FAQ">FAQ</a><br>
<a href="../../psc.html" title="PSC">PSC</a><br>
<a href="https://twitter.com/mapserver_osgeo" title="Twitter">Twitter</a>
</p>
  <h3>Current Table Of Contents</h3>
  <ul>
<li><a class="reference internal" href="#">MS RFC 86: Scale-dependant String Substitutions</a><ul>
<li><a class="reference internal" href="#overview">1. Overview</a></li>
<li><a class="reference internal" href="#proposed-solution">2. Proposed solution</a></li>
<li><a class="reference internal" href="#example-1">2.1. Example 1</a></li>
<li><a class="reference internal" href="#example-2">2.2 Example 2</a></li>
<li><a class="reference internal" href="#example-3">2.3 Example 3</a></li>
<li><a class="reference internal" href="#discussion">2.4 Discussion</a></li>
<li><a class="reference internal" href="#implementation-details">3. Implementation Details</a></li>
<li><a class="reference internal" href="#id1">3.1 Overview</a></li>
<li><a class="reference internal" href="#files-affected">3.2 Files affected</a></li>
<li><a class="reference internal" href="#mapscript">3.3 MapScript</a></li>
<li><a class="reference internal" href="#backwards-compatibility-issues">3.4 Backwards Compatibility Issues</a></li>
<li><a class="reference internal" href="#security-implications">4. Security implications</a></li>
<li><a class="reference internal" href="#performance-implications">4. Performance implications</a></li>
<li><a class="reference internal" href="#bug-id">5. Bug ID</a></li>
<li><a class="reference internal" href="#voting-history">6. Voting history</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="ms-rfc-87.html" title="MS RFC 87: Bitmap pattern support"
             >next</a> |</li>
        <li class="right" >
          <a href="ms-rfc-85.html" title="MS RFC 85: Vector Contour Rendering (CONNECTIONTYPE CONTOUR)"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Development</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >Request for Comments</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">MS RFC 86: Scale-dependant String Substitutions</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; <a href="../../copyright.html">Copyright</a> 2023, Open Source Geospatial Foundation.
      Last updated on 2023-12-22.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.5.
    </div>
  </body>
</html>