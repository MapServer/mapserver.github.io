<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>MS RFC 30: Support for WMS 1.3.0 &#8212; MapServer 8.0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx.css?v=6c7b17ac" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=dd298242" />
    <link rel="stylesheet" type="text/css" href="../../_static/ribbon.css?v=ea091bf4" />
    
    <script src="../../_static/documentation_options.js?v=521b6f53"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    
    <link rel="icon" href="../../_static/mapserver.ico"/>
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="copyright" title="Copyright" href="../../copyright.html" />
    <link rel="next" title="MS RFC 31: Loading MapServer Objects from Strings" href="ms-rfc-31.html" />
    <link rel="prev" title="MS RFC 29: Dynamic Charting Capability" href="ms-rfc-29.html" /> 
  </head><body>


<!-- for main branch only, do not backport this -->

<table width="100%" style="width: 100%; background-color: white;">
  <tr>
    <td rowspan="2" style="padding: 10px 0px 10px 10px;">
      <a href="../../index.html" title="Home"><img src="../../_static/banner.png" alt="MapServer banner" border="0" /></a>
    </td>
    <td style="padding: 10px 10px 0px 0px; text-align: right; vertical-align: top;">
      <a href="../../index.html" title="Home">Home</a> |
      <a href="../../products.html" title="Products (MapServer core, MapCache, TinyOWS">Products</a> |
      <a href="https://github.com/mapserver/mapserver/issues/" title="Issue Tracker (MapServer core)">Issue Tracker</a> |
      <a href="../../community/service_providers.html" title="Professional Service Providers">Service Providers</a> |      
      <a href="../../faq.html" title="Frequently Asked Questions">FAQ</a> |
      <a href="https://twitter.com/mapserver_osgeo" title="Twitter" target="_blank">Twitter</a> |
      <a href="../../download.html" title="Download Source or Binaries">Download </a> |
      <a class="badge" href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=KRJ2X44N3HA6U&source=url" target="_blank">
        <img src="https://img.shields.io/badge/donate-%E2%9D%A4%C2%A0-ff69b4.svg?style=flat" alt="Donate to MapServer">
      </a>
    </td>
  </tr>
  <tr>
    <td style="padding: 0px 10px 0px 0px; text-align: right; vertical-align: bottom;">
        <img src="../../_static/flagicons/en.png" alt="en" title="en" border="0" width="18px" height="13px"/>
        
          <a href="../../ar/development/rfc/ms-rfc-30.html"><img src="../../_static/flagicons/ar.png" alt="ar" title="ar" border="0" /></a>
        
        
          <a href="../../de/development/rfc/ms-rfc-30.html"><img src="../../_static/flagicons/de.png" alt="de" title="de" border="0" /></a>
        
        
          <a href="../../el/development/rfc/ms-rfc-30.html"><img src="../../_static/flagicons/el.png" alt="el" title="el" border="0" /></a>
        
        
          <a href="../../es/development/rfc/ms-rfc-30.html"><img src="../../_static/flagicons/es.png" alt="es" title="es" border="0" /></a>
        
        
          <a href="../../fr/development/rfc/ms-rfc-30.html"><img src="../../_static/flagicons/fr.png" alt="fr" title="fr" border="0" /></a>
        
        
          <a href="../../id/development/rfc/ms-rfc-30.html"><img src="../../_static/flagicons/id.png" alt="id" title="id" border="0" /></a>
        
        
          <a href="../../it/development/rfc/ms-rfc-30.html"><img src="../../_static/flagicons/it.png" alt="it" title="it" border="0" /></a>
        
        
          <a href="../../ja/development/rfc/ms-rfc-30.html"><img src="../../_static/flagicons/ja.png" alt="ja" title="ja" border="0" /></a>
        
        
          <a href="../../nl_NL/development/rfc/ms-rfc-30.html"><img src="../../_static/flagicons/nl_NL.png" alt="nl_NL" title="nl_NL" border="0" /></a>
        
        
          <a href="../../pl/development/rfc/ms-rfc-30.html"><img src="../../_static/flagicons/pl.png" alt="pl" title="pl" border="0" /></a>
        
        
          <a href="../../ru/development/rfc/ms-rfc-30.html"><img src="../../_static/flagicons/ru.png" alt="ru" title="ru" border="0" /></a>
        
        
          <a href="../../sq/development/rfc/ms-rfc-30.html"><img src="../../_static/flagicons/sq.png" alt="sq" title="sq" border="0" /></a>
        
        
          <a href="../../tr/development/rfc/ms-rfc-30.html"><img src="../../_static/flagicons/tr.png" alt="tr" title="tr" border="0" /></a>
        

    </td>
  </tr>
</table>


    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="ms-rfc-31.html" title="MS RFC 31: Loading MapServer Objects from Strings"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="ms-rfc-29.html" title="MS RFC 29: Dynamic Charting Capability"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Development</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">Request for Comments</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">MS RFC 30: Support for WMS 1.3.0</a></li> 
      </ul>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="ms-rfc-30-support-for-wms-1-3-0">
<span id="rfc30"></span><h1>MS RFC 30: Support for WMS 1.3.0<a class="headerlink" href="#ms-rfc-30-support-for-wms-1-3-0" title="Link to this heading">¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd">Date<span class="colon">:</span></dt>
<dd class="field-odd"><p>2007/06/15</p>
</dd>
<dt class="field-even">Author<span class="colon">:</span></dt>
<dd class="field-even"><p>Daniel Morissette</p>
</dd>
<dt class="field-odd">Contact<span class="colon">:</span></dt>
<dd class="field-odd"><p>dmorissette at mapgears.com</p>
</dd>
<dt class="field-even">Author<span class="colon">:</span></dt>
<dd class="field-even"><p>Yewondwossen Assefa</p>
</dd>
<dt class="field-odd">Contact<span class="colon">:</span></dt>
<dd class="field-odd"><p>yassefa at dmsolutions.ca</p>
</dd>
<dt class="field-even">Last Edited<span class="colon">:</span></dt>
<dd class="field-even"><p>2009/02/11</p>
</dd>
<dt class="field-odd">Status<span class="colon">:</span></dt>
<dd class="field-odd"><p>Adopted</p>
</dd>
<dt class="field-even">Version<span class="colon">:</span></dt>
<dd class="field-even"><p>MapServer 5.4</p>
</dd>
</dl>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading">¶</a></h2>
<p>This RFC documents the changes required in order to upgrade MapServer’s OGC
WMS support to version 1.3.0 of the specification.</p>
<p>MapServer already includes mechanisms to support multiple WMS versions (and
already supports WMS versions 1.0.0, 1.1.0 and 1.1.1) so in theory this upgrade
should be straightforward and shouldn’t require a RFC. Unfortunately, WMS 1.3.0
contains some tricky changes that while they are not exactly backwards
incompatible are likely to make the life of users of WMS miserable.</p>
<p>This RFC is mostly to document those changes and the way MapServer deals
with them.</p>
</section>
<section id="coordinate-systems-and-axis-orientation">
<h2>Coordinate Systems and Axis Orientation<a class="headerlink" href="#coordinate-systems-and-axis-orientation" title="Link to this heading">¶</a></h2>
<p>The main issue introduced by WMS 1.3.0 is the change in the way it handles
axis order for several SRS. This has an impact on the way the
BBOX is specified in WMS requests and in Capabilities documents and in
how the CONNECTIONTYPE WMS code interacts with remote servers.</p>
<p>In previous versions of WMS, for any SRS the first axis
was the easting (x or lon) and the second axis was the northing (y or lat).
Starting with WMS 1.3.0, some SRS such as the very popular
EPSG:4326 have their axis reversed and the axis order becomes lon, lat
instead of lat, lon. This change in WMS 1.3.0 was done in order to align
with the definitions from the EPSG database (a requirement to make WMS
an ISO specification).</p>
<p>This change is sure to confuse simple clients that used to treat all
SRS the same way. MapServer and PROJ will need to be extended to carry
information about the axis order of all EPSG SRS codes and treat them
using the correct axis order.</p>
<p>New CRS codes such as CRS:xxxx and AUTO2:xxxx have also been added by WMS 1.3.0
that will need to be supported by MapServer. Note the wo types of Layer CRS
identifiers are supported by the specification: “label” and “URL” identifiers.
The intention is to support at this point the label types CRS.</p>
<p>List of CRS planned to be supported are:</p>
<ul class="simple">
<li><p>CRS:84 (WGS 84 longitude-latitude)</p></li>
<li><p>CRS:83 (NAD83 longitude-latitude)</p></li>
<li><p>CRS:27 (NAD27 longitude-latitude).</p></li>
<li><p>AUTO2:42001 AUTO2:42002 AUTO2:42003 AUTO2:42004 AUTO2:42005</p></li>
</ul>
<p>CRS:1 (pixel coordinates) would not be supported at this point (there is a ticket
discussing this issue https://github.com/MapServer/MapServer/issues/485)</p>
<p>EPSG codes: when advertising (such as BoundingBox for a layer elemnt) or using
a CRS element in a request such as GetMap/GetFeatureInfo, elements using epsg code &gt;=4000
and &lt;5000 will be assumed to have a reverse axes.</p>
<p>All the above need to be done in a way that allows continued support for
older versions of the WMS specification (1.0.0 to 1.1.1) and will have
the least impact on existing WMS services.</p>
<p>Implementation for the reverse axis will follow closely to what was already
done for WCS1.1 support (<a class="reference external" href="https://mapserver.org/development/rfc/ms-rfc-41.html">https://mapserver.org/development/rfc/ms-rfc-41.html</a>)</p>
</section>
<section id="wms-and-sld">
<h2>WMS and SLD<a class="headerlink" href="#wms-and-sld" title="Link to this heading">¶</a></h2>
<p>All references to SLD support has been removed from the WMS 1.3.0 specifications.
It has been replaced by two specifications:</p>
<ul class="simple">
<li><p>Styled Layer Descriptor profile of the Web Map Service</p></li>
<li><p>Symbology Encoding Implementation Specification</p></li>
</ul>
<p>The Styled Layer Descriptor profile allows:</p>
<ul class="simple">
<li><p>to extend the WMS to support additional operations (DescribeLayer, GetLegendGraphic)</p></li>
<li><p>additional parameters related to the SLD for the GetMap support</p></li>
<li><p>advertise SLD support.</p></li>
</ul>
<p>This specification will be supported in the current implementation.
Note that the GetStyles operation (available in WMS 1.1.1) might not be supported
in the first phase</p>
<p>The Symbology Encoding Implementation represent basically the definitions for the
different symbolizers. We need to upgrade the current SLD support to support this
specification.</p>
</section>
<section id="http-post-support">
<h2>HTTP Post support<a class="headerlink" href="#http-post-support" title="Link to this heading">¶</a></h2>
<p>HTTP Post support is optional and currently supported by MapServer  WMS 1.1.1.
WMS 1.3.0 defines that if POST is supported, the the request message is formulated
as an XML document.
Although this is highly deirable, the first implementation of the WMS 1.3.0 might
not support the XML Post requests.</p>
</section>
<section id="ocg-compliance-tests">
<h2>OCG compliance tests<a class="headerlink" href="#ocg-compliance-tests" title="Link to this heading">¶</a></h2>
<p>The OGC Compliance and Interoperability Testing Initiative (CITE)
<a class="reference external" href="http://cite.opengeospatial.org/test_engine/wms/1.3.0/">http://cite.opengeospatial.org/test_engine/wms/1.3.0/</a> provides automatic tests to
validate the implementation. The short term intention is to use this service as a
first validation tool. The longer term goal is to have MapServer  WMS 1.3.0 fully compliant.</p>
</section>
<section id="other-notes">
<h2>Other Notes<a class="headerlink" href="#other-notes" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>GetCapabilities advertises only the text/xml format. During a request we do not parse
the optional Format parameter. It is always set to text/xml</p></li>
</ul>
</section>
<section id="mapscript-implications">
<h2>MapScript Implications<a class="headerlink" href="#mapscript-implications" title="Link to this heading">¶</a></h2>
<p>None. This affects only the WMS server interface and WMS CONNECTION type.</p>
</section>
<section id="files-affected">
<h2>Files affected<a class="headerlink" href="#files-affected" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mapwms</span><span class="o">.</span><span class="n">c</span>
<span class="n">mapwmslayer</span><span class="o">.</span><span class="n">c</span>
<span class="n">mapfile</span><span class="o">.</span><span class="n">c</span>
<span class="n">mapows</span><span class="o">.</span><span class="n">c</span><span class="o">/</span><span class="n">h</span>
<span class="n">mapogcsld</span><span class="o">.</span><span class="n">c</span>
</pre></div>
</div>
</section>
<section id="backwards-compatibility-issues">
<h2>Backwards compatibility issues<a class="headerlink" href="#backwards-compatibility-issues" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>The change in the way the axis order is handled is likely to cause lots
of confusion.</p></li>
</ul>
</section>
<section id="bug-id">
<h2>Bug ID<a class="headerlink" href="#bug-id" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>473: <a class="reference external" href="https://github.com/MapServer/MapServer/issues/473">https://github.com/MapServer/MapServer/issues/473</a></p></li>
</ul>
</section>
<section id="voting-history">
<h2>Voting history<a class="headerlink" href="#voting-history" title="Link to this heading">¶</a></h2>
<p>Passed with +1 from: TomK, Woodbridge, Assefa, Morissette</p>
</section>
<section id="questions-comments-from-the-review-period">
<h2>Questions/Comments from the review period<a class="headerlink" href="#questions-comments-from-the-review-period" title="Link to this heading">¶</a></h2>
<ul>
<li><p>Q: Can libxml2 be used to generate XML responses to continue the work started
in mapowscommon.c?</p>
<p>A: I’ll keep libxml2 in mind during the implementation, but I do not plan to
refactor and risk breaking any code to convert it to libxml2 as part of
this upgrade.</p>
<p>Since WMS 1.3.0 doesn’t implement OWS common, it won’t benefit from any of
the code that’s already using libxml2. It will actually mostly reuse
existing printf-based code that’s already well tested and working. I think
the right time to switch to libxml2 for WMS would be when it will support
OWS common and then there will be real benefits by reusing functions from
mapowscommon.c.</p>
</li>
</ul>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p>
<a href="../../about.html" title="About">About</a><br>
<a href="../../products.html" title="Products">Products</a><br>
<a href="../../community/index.html" title="Community">Community</a><br>
<a href="../index.html" title="Development">Development</a><br>
<a href="../../download.html" title="Downloads">Downloads</a><br>
<a href="../../documentation.html" title="Documentation">Documentation</a><br>
<a href="../../faq.html" title="FAQ">FAQ</a><br>
<a href="../../psc.html" title="PSC">PSC</a><br>
<a href="https://twitter.com/mapserver_osgeo" title="Twitter">Twitter</a>
</p>
  <h3>Current Table Of Contents</h3>
  <ul>
<li><a class="reference internal" href="#">MS RFC 30: Support for WMS 1.3.0</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#coordinate-systems-and-axis-orientation">Coordinate Systems and Axis Orientation</a></li>
<li><a class="reference internal" href="#wms-and-sld">WMS and SLD</a></li>
<li><a class="reference internal" href="#http-post-support">HTTP Post support</a></li>
<li><a class="reference internal" href="#ocg-compliance-tests">OCG compliance tests</a></li>
<li><a class="reference internal" href="#other-notes">Other Notes</a></li>
<li><a class="reference internal" href="#mapscript-implications">MapScript Implications</a></li>
<li><a class="reference internal" href="#files-affected">Files affected</a></li>
<li><a class="reference internal" href="#backwards-compatibility-issues">Backwards compatibility issues</a></li>
<li><a class="reference internal" href="#bug-id">Bug ID</a></li>
<li><a class="reference internal" href="#voting-history">Voting history</a></li>
<li><a class="reference internal" href="#questions-comments-from-the-review-period">Questions/Comments from the review period</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="ms-rfc-31.html" title="MS RFC 31: Loading MapServer Objects from Strings"
             >next</a> |</li>
        <li class="right" >
          <a href="ms-rfc-29.html" title="MS RFC 29: Dynamic Charting Capability"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Development</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >Request for Comments</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">MS RFC 30: Support for WMS 1.3.0</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; <a href="../../copyright.html">Copyright</a> 2023, Open Source Geospatial Foundation.
      Last updated on 2023-12-22.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.5.
    </div>
  </body>
</html>