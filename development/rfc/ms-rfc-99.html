<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>MS RFC 99: Remove support for GD renderer &#8212; MapServer 8.0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx.css?v=6c7b17ac" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=dd298242" />
    <link rel="stylesheet" type="text/css" href="../../_static/ribbon.css?v=ea091bf4" />
    
    <script src="../../_static/documentation_options.js?v=521b6f53"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    
    <link rel="icon" href="../../_static/mapserver.ico"/>
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="copyright" title="Copyright" href="../../copyright.html" />
    <link rel="next" title="MS RFC 100: Support for tile index with mixed SRS in raster layers" href="ms-rfc-100.html" />
    <link rel="prev" title="MS RFC 98: Label/Text Rendering Overhaul" href="ms-rfc-98.html" /> 
  </head><body>


<!-- for main branch only, do not backport this -->

<table width="100%" style="width: 100%; background-color: white;">
  <tr>
    <td rowspan="2" style="padding: 10px 0px 10px 10px;">
      <a href="../../index.html" title="Home"><img src="../../_static/banner.png" alt="MapServer banner" border="0" /></a>
    </td>
    <td style="padding: 10px 10px 0px 0px; text-align: right; vertical-align: top;">
      <a href="../../index.html" title="Home">Home</a> |
      <a href="../../products.html" title="Products (MapServer core, MapCache, TinyOWS">Products</a> |
      <a href="https://github.com/mapserver/mapserver/issues/" title="Issue Tracker (MapServer core)">Issue Tracker</a> |
      <a href="../../community/service_providers.html" title="Professional Service Providers">Service Providers</a> |      
      <a href="../../faq.html" title="Frequently Asked Questions">FAQ</a> |
      <a href="https://twitter.com/mapserver_osgeo" title="Twitter" target="_blank">Twitter</a> |
      <a href="../../download.html" title="Download Source or Binaries">Download </a> |
      <a class="badge" href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=KRJ2X44N3HA6U&source=url" target="_blank">
        <img src="https://img.shields.io/badge/donate-%E2%9D%A4%C2%A0-ff69b4.svg?style=flat" alt="Donate to MapServer">
      </a>
    </td>
  </tr>
  <tr>
    <td style="padding: 0px 10px 0px 0px; text-align: right; vertical-align: bottom;">
        <img src="../../_static/flagicons/en.png" alt="en" title="en" border="0" width="18px" height="13px"/>
        
          <a href="../../ar/development/rfc/ms-rfc-99.html"><img src="../../_static/flagicons/ar.png" alt="ar" title="ar" border="0" /></a>
        
        
          <a href="../../de/development/rfc/ms-rfc-99.html"><img src="../../_static/flagicons/de.png" alt="de" title="de" border="0" /></a>
        
        
          <a href="../../el/development/rfc/ms-rfc-99.html"><img src="../../_static/flagicons/el.png" alt="el" title="el" border="0" /></a>
        
        
          <a href="../../es/development/rfc/ms-rfc-99.html"><img src="../../_static/flagicons/es.png" alt="es" title="es" border="0" /></a>
        
        
          <a href="../../fr/development/rfc/ms-rfc-99.html"><img src="../../_static/flagicons/fr.png" alt="fr" title="fr" border="0" /></a>
        
        
          <a href="../../id/development/rfc/ms-rfc-99.html"><img src="../../_static/flagicons/id.png" alt="id" title="id" border="0" /></a>
        
        
          <a href="../../it/development/rfc/ms-rfc-99.html"><img src="../../_static/flagicons/it.png" alt="it" title="it" border="0" /></a>
        
        
          <a href="../../ja/development/rfc/ms-rfc-99.html"><img src="../../_static/flagicons/ja.png" alt="ja" title="ja" border="0" /></a>
        
        
          <a href="../../nl_NL/development/rfc/ms-rfc-99.html"><img src="../../_static/flagicons/nl_NL.png" alt="nl_NL" title="nl_NL" border="0" /></a>
        
        
          <a href="../../pl/development/rfc/ms-rfc-99.html"><img src="../../_static/flagicons/pl.png" alt="pl" title="pl" border="0" /></a>
        
        
          <a href="../../ru/development/rfc/ms-rfc-99.html"><img src="../../_static/flagicons/ru.png" alt="ru" title="ru" border="0" /></a>
        
        
          <a href="../../sq/development/rfc/ms-rfc-99.html"><img src="../../_static/flagicons/sq.png" alt="sq" title="sq" border="0" /></a>
        
        
          <a href="../../tr/development/rfc/ms-rfc-99.html"><img src="../../_static/flagicons/tr.png" alt="tr" title="tr" border="0" /></a>
        

    </td>
  </tr>
</table>


    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="ms-rfc-100.html" title="MS RFC 100: Support for tile index with mixed SRS in raster layers"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="ms-rfc-98.html" title="MS RFC 98: Label/Text Rendering Overhaul"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Development</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">Request for Comments</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">MS RFC 99: Remove support for GD renderer</a></li> 
      </ul>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="ms-rfc-99-remove-support-for-gd-renderer">
<span id="rfc99"></span><h1>MS RFC 99: Remove support for GD renderer<a class="headerlink" href="#ms-rfc-99-remove-support-for-gd-renderer" title="Link to this heading">¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd">Date<span class="colon">:</span></dt>
<dd class="field-odd"><p>2013/06</p>
</dd>
<dt class="field-even">Author<span class="colon">:</span></dt>
<dd class="field-even"><p>Thomas Bonfort</p>
</dd>
<dt class="field-odd">Contact<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="mailto:thomas&#46;bonfort&#37;&#52;&#48;gmail&#46;com">thomas<span>&#46;</span>bonfort<span>&#64;</span>gmail<span>&#46;</span>com</a></p>
</dd>
<dt class="field-even">Status<span class="colon">:</span></dt>
<dd class="field-even"><p>Adopted</p>
</dd>
<dt class="field-odd">Version<span class="colon">:</span></dt>
<dd class="field-odd"><p>MapServer 7.0</p>
</dd>
</dl>
<section id="summary">
<h2>1. Summary<a class="headerlink" href="#summary" title="Link to this heading">¶</a></h2>
<p>Keeping support for the GD rendering library is preventing MapServer from
moving onto a more feature-full and maintainable text/labeling pipeline. This RFC
proposes that we remove support for the GD renderer in the upcoming 7.0 release,
unless there are some use-cases only covered by GD that have been overlooked,
and/or someone is sufficiently interested to fund the high maintenance
overhead.</p>
<section id="history">
<h3>1.1 History<a class="headerlink" href="#history" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>The GD library was initially the only renderer supported by MapServer for producing
bitmap images (i.e. for png, jpeg and gif outputformats).</p></li>
<li><p>At the cost of major code duplication, support for SVG, PDF and SWF were later added.</p></li>
<li><p>In 2007, again at the cost of another major code duplication, AGG support was added,
with some non-trivial issues when trying to work along with GD’s proprietary internal
pixel reprensentation.</p></li>
<li><p>In 2011, for the 6.0 release, a major rewrite of the rendering engine occurred in order
to cut down on the maintenance issues that had arose due to the previous code duplications.
Already at that time dropping support for GD was discussed, but was finally kept for
8bit modes only at the cost of a higher worload on the maintainers.
At the same time, AGG became a central component inside the mapserver library, and was
used for some rendering tasks not supported by other renderers.</p></li>
<li><p>In 2012, for the 6.2 release, support for GD became optional and could be disabled at
compile time.</p></li>
</ul>
</section>
<section id="current-gd-limitations">
<h3>1.2 Current GD limitations<a class="headerlink" href="#current-gd-limitations" title="Link to this heading">¶</a></h3>
<p>In the process of supporting advanced text/label rendering implied by the overhaul of
<a class="reference internal" href="ms-rfc-98.html#rfc98"><span class="std std-ref">MS RFC 98: Label/Text Rendering Overhaul</span></a>, the limitations of the GD api have shown to be a showstopper for moving forwards.
Keeping support for GD would require either maintaining the current text rendering pipeline
alongside the new one (at the cost of maintenance nightmares), or a non-trivial overhead
to fit in with the <a class="reference internal" href="ms-rfc-98.html#rfc98"><span class="std std-ref">MS RFC 98: Label/Text Rendering Overhaul</span></a> proposed architecture (while still not being able to support
complex text shaping).</p>
<p>As a vector rasterizer, while being marginally faster, the GD rendering quality is far
from what is expected from a map renderer.</p>
</section>
<section id="current-gd-strengths">
<h3>1.3 Current GD strengths<a class="headerlink" href="#current-gd-strengths" title="Link to this heading">¶</a></h3>
<p>GD image buffers have a lower memory overhead, given they work with 8bit pixels instead
of 32bit ones.</p>
<p>GD support rendering without anti-aliasing - good for vector area
fills (avoids thin lines along the “tile” boundaries).</p>
</section>
</section>
<section id="gd-support-removal">
<h2>2. GD support removal<a class="headerlink" href="#gd-support-removal" title="Link to this heading">¶</a></h2>
<p>Aside from preventing <a class="reference internal" href="ms-rfc-98.html#rfc98"><span class="std std-ref">MS RFC 98: Label/Text Rendering Overhaul</span></a> to happen, support for GD is already himpering development
due to the overhead required during maintenance and rendering enhancements. Current
activity on the issue tracker and mailing lists show that it is not being used actively.
The major 7.0 release is a good time to remove GD support entirely, enabling us to move
onto a maintainable and extensible text rendering pipeline, and allowing us to greatly
simplify future maintenance.</p>
<section id="backwards-compatibility">
<h3>2.1 Backwards compatibility<a class="headerlink" href="#backwards-compatibility" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>GD outputformats configured in mapfiles will silently be mapped to AGG/PNG8, i.e AGG
rendered images quantized down to 256 color pngs, as is done currently when GD support
has beend disabled. The final resulting images will differ.</p></li>
<li><p>Memory overhead for users still using the GD renderer will augment.</p></li>
</ul>
</section>
<section id="voting-history">
<h3>3. Voting History<a class="headerlink" href="#voting-history" title="Link to this heading">¶</a></h3>
<p>Passed with +1 from ThomasB, TomK, MikeS, StephanM, SteveW, PerryN,
DanielM and JeffM</p>
</section>
<section id="tracking-issue">
<h3>4. Tracking Issue<a class="headerlink" href="#tracking-issue" title="Link to this heading">¶</a></h3>
<p>No specific issue was created for this RFC. Development was tracked inside <a class="reference internal" href="ms-rfc-98.html#rfc98"><span class="std std-ref">MS RFC 98: Label/Text Rendering Overhaul</span></a></p>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p>
<a href="../../about.html" title="About">About</a><br>
<a href="../../products.html" title="Products">Products</a><br>
<a href="../../community/index.html" title="Community">Community</a><br>
<a href="../index.html" title="Development">Development</a><br>
<a href="../../download.html" title="Downloads">Downloads</a><br>
<a href="../../documentation.html" title="Documentation">Documentation</a><br>
<a href="../../faq.html" title="FAQ">FAQ</a><br>
<a href="../../psc.html" title="PSC">PSC</a><br>
<a href="https://twitter.com/mapserver_osgeo" title="Twitter">Twitter</a>
</p>
  <h3>Current Table Of Contents</h3>
  <ul>
<li><a class="reference internal" href="#">MS RFC 99: Remove support for GD renderer</a><ul>
<li><a class="reference internal" href="#summary">1. Summary</a><ul>
<li><a class="reference internal" href="#history">1.1 History</a></li>
<li><a class="reference internal" href="#current-gd-limitations">1.2 Current GD limitations</a></li>
<li><a class="reference internal" href="#current-gd-strengths">1.3 Current GD strengths</a></li>
</ul>
</li>
<li><a class="reference internal" href="#gd-support-removal">2. GD support removal</a><ul>
<li><a class="reference internal" href="#backwards-compatibility">2.1 Backwards compatibility</a></li>
<li><a class="reference internal" href="#voting-history">3. Voting History</a></li>
<li><a class="reference internal" href="#tracking-issue">4. Tracking Issue</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="ms-rfc-100.html" title="MS RFC 100: Support for tile index with mixed SRS in raster layers"
             >next</a> |</li>
        <li class="right" >
          <a href="ms-rfc-98.html" title="MS RFC 98: Label/Text Rendering Overhaul"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Development</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >Request for Comments</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">MS RFC 99: Remove support for GD renderer</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; <a href="../../copyright.html">Copyright</a> 2023, Open Source Geospatial Foundation.
      Last updated on 2023-12-22.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.5.
    </div>
  </body>
</html>