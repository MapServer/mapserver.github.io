
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="de">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>PHP MapScript Migration Guide &#8212; MapServer 7.2.2 documentation</title>
    <link rel="stylesheet" href="../../_static/sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/translations.js"></script>
    <link rel="shortcut icon" href="../../_static/mapserver.ico"/>
    <link rel="author" title="Über dieses Dokument" href="../../about.html" />
    <link rel="index" title="Stichwortverzeichnis" href="../../genindex.html" />
    <link rel="search" title="Suche" href="../../search.html" />
    <link rel="copyright" title="Copyright" href="../../copyright.html" />
    <link rel="next" title="By Example" href="by_example.html" />
    <link rel="prev" title="PHP MapScript API" href="phpmapscript.html" /> 
  </head><body>

<table width="100%" style="width: 100%; background-color: white;">
  <tr>
    <td rowspan="2" style="padding: 10px 0px 10px 10px;">
      <a href="../../index.html" title="Home"><img src="../../_static/banner.png" alt="MapServer banner" border="0" /></a>
    </td>
    <td style="padding: 10px 10px 0px 0px; text-align: right; vertical-align: top;">
      <a href="../../index.html" title="Home">Home</a> |
      <a href="../../products.html" title="Products (MapServer core, MapCache, TinyOWS">Products</a> |
      <a href="https://github.com/mapserver/mapserver/issues/" title="Issue Tracker (MapServer core)">Issue Tracker</a> |
      <a href="../../community/service_providers.html" title="Professional Service Providers">Service Providers</a> |      
      <a href="../../faq.html" title="Frequently Asked Questions">FAQ</a> |
      <a href="https://twitter.com/mapserver_osgeo" title="Twitter">Twitter</a> |
      <a href="../../download.html" title="Download Source or Binaries">Download </a>
    </td>
  </tr>
  <tr>
    <td style="padding: 0px 10px 0px 0px; text-align: right; vertical-align: bottom;">
        
          
            <a href="../../../mapscript/php/migration_guide.html"><img src="../../_static/flagicons/en.png" alt="en" title="en" border="0" /></a>
          
        
        
          
            <a href="../../../ar/mapscript/php/migration_guide.html"><img src="../../_static/flagicons/ar.png" alt="ar" title="ar" border="0" /></a>
          
        
        <img src="../../_static/flagicons/de.png" alt="de" title="de" border="0" width="18px" height="13px"/>
        
          
            <a href="../../../el/mapscript/php/migration_guide.html"><img src="../../_static/flagicons/el.png" alt="el" title="el" border="0" /></a>
          
        
        
          
            <a href="../../../es/mapscript/php/migration_guide.html"><img src="../../_static/flagicons/es.png" alt="es" title="es" border="0" /></a>
          
        
        
          
            <a href="../../../fr/mapscript/php/migration_guide.html"><img src="../../_static/flagicons/fr.png" alt="fr" title="fr" border="0" /></a>
          
        
        
          
            <a href="../../../id/mapscript/php/migration_guide.html"><img src="../../_static/flagicons/id.png" alt="id" title="id" border="0" /></a>
          
        
        
          
            <a href="../../../it/mapscript/php/migration_guide.html"><img src="../../_static/flagicons/it.png" alt="it" title="it" border="0" /></a>
          
        
        
          
            <a href="../../../ja/mapscript/php/migration_guide.html"><img src="../../_static/flagicons/ja.png" alt="ja" title="ja" border="0" /></a>
          
        
        
          
            <a href="../../../nl_NL/mapscript/php/migration_guide.html"><img src="../../_static/flagicons/nl_NL.png" alt="nl_NL" title="nl_NL" border="0" /></a>
          
        
        
          
            <a href="../../../pl/mapscript/php/migration_guide.html"><img src="../../_static/flagicons/pl.png" alt="pl" title="pl" border="0" /></a>
          
        
        
          
            <a href="../../../ru/mapscript/php/migration_guide.html"><img src="../../_static/flagicons/ru.png" alt="ru" title="ru" border="0" /></a>
          
        
        
          
            <a href="../../../sq/mapscript/php/migration_guide.html"><img src="../../_static/flagicons/sq.png" alt="sq" title="sq" border="0" /></a>
          
        
        
          
            <a href="../../../tr/mapscript/php/migration_guide.html"><img src="../../_static/flagicons/tr.png" alt="tr" title="tr" border="0" /></a>
          
        

    </td>
  </tr>
</table>


    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="Stichwortverzeichnis"
             accesskey="I">Index</a></li>
        <li class="right" >
          <a href="by_example.html" title="By Example"
             accesskey="N">weiter</a> |</li>
        <li class="right" >
          <a href="phpmapscript.html" title="PHP MapScript API"
             accesskey="P">zurück</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../documentation.html" >MapServer 7.2.2 Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../index.html" >MapScript</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="index.html" accesskey="U">PHP MapScript</a> &#187;</li> 
      </ul>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="php-mapscript-migration-guide">
<span id="php-migration-guide"></span><h1><a class="toc-backref" href="#table-of-contents">PHP MapScript Migration Guide</a><a class="headerlink" href="#php-mapscript-migration-guide" title="Link zu dieser Überschrift">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Author:</th><td class="field-body">Alan Boudreault</td>
</tr>
<tr class="field-even field"><th class="field-name">Contact:</th><td class="field-body">aboudreault at mapgears.com</td>
</tr>
<tr class="field-odd field"><th class="field-name">Revision:</th><td class="field-body">$Revision: 10033 $</td>
</tr>
<tr class="field-even field"><th class="field-name">Date:</th><td class="field-body">$Date: 2010-03-30 15:58:30 -0400 (Tue, 30 Mar 2010) $</td>
</tr>
</tbody>
</table>
<div class="contents topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#php-mapscript-migration-guide" id="id1">PHP MapScript Migration Guide</a><ul>
<li><a class="reference internal" href="#introduction" id="id2">Introduction</a></li>
<li><a class="reference internal" href="#migrating-5-6-to-6-0" id="id3">Migrating 5.6 to 6.0</a><ul>
<li><a class="reference internal" href="#php-version-required" id="id4">PHP Version Required</a></li>
<li><a class="reference internal" href="#error-reporting" id="id5">Error Reporting</a></li>
<li><a class="reference internal" href="#manipulating-objects" id="id6">Manipulating Objects</a></li>
<li><a class="reference internal" href="#class-properties" id="id7">Class Properties</a></li>
<li><a class="reference internal" href="#class-methods" id="id8">Class Methods</a></li>
<li><a class="reference internal" href="#layerobj" id="id9">layerObj</a></li>
<li><a class="reference internal" href="#mapobj" id="id10">mapObj</a></li>
<li><a class="reference internal" href="#referencemapobj" id="id11">referenceMapObj</a></li>
<li><a class="reference internal" href="#shapefileobj" id="id12">shapeFileObj</a></li>
<li><a class="reference internal" href="#labelcacheobj" id="id13">labelCacheObj</a></li>
<li><a class="reference internal" href="#methods-that-now-return-ms-success-ms-failure" id="id14">Methods that now return MS_SUCCESS/MS_FAILURE</a></li>
<li><a class="reference internal" href="#methods-that-now-return-null-on-failure" id="id15">Methods that now return NULL on failure</a></li>
<li><a class="reference internal" href="#methods-that-now-return-an-empty-array" id="id16">Methods that now return an empty array</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#table-of-contents">Introduction</a><a class="headerlink" href="#introduction" title="Link zu dieser Überschrift">¶</a></h2>
<p>This document describes the changes that must be made to PHP MapScript
applications when migrating from one MapServer version to another (i.e. backwards
incompatibilities), as well as information on some of the new features.</p>
</div>
<div class="section" id="migrating-5-6-to-6-0">
<h2><a class="toc-backref" href="#table-of-contents">Migrating 5.6 to 6.0</a><a class="headerlink" href="#migrating-5-6-to-6-0" title="Link zu dieser Überschrift">¶</a></h2>
<div class="section" id="php-version-required">
<h3><a class="toc-backref" href="#table-of-contents">PHP Version Required</a><a class="headerlink" href="#php-version-required" title="Link zu dieser Überschrift">¶</a></h3>
<p>PHP 5.2.0 or more recent is required. The support for earlier versions
has been dropped.</p>
</div>
<div class="section" id="error-reporting">
<h3><a class="toc-backref" href="#table-of-contents">Error Reporting</a><a class="headerlink" href="#error-reporting" title="Link zu dieser Überschrift">¶</a></h3>
<p>PHP MapScript now uses exceptions for error reports. All errors are
catchable. There are no more fatal errors reported via the standard
uncatchable PHP system (Only Warnings).</p>
</div>
<div class="section" id="manipulating-objects">
<h3><a class="toc-backref" href="#table-of-contents">Manipulating Objects</a><a class="headerlink" href="#manipulating-objects" title="Link zu dieser Überschrift">¶</a></h3>
<ul class="simple">
<li>Object properties can be set like all other PHP objects.</li>
</ul>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="x">$map-&gt;scaledenom = 25000;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Bemerkung</p>
<p class="last">The set/setProperty methods are still available.</p>
</div>
<ul class="simple">
<li>Objects can be created with the PHP „new“ operator.</li>
</ul>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="x">$myShape = ms_newShapeObj(MS_SHAPE_LINE); // or</span>
<span class="x">$myShape = new shapeObj(MS_SHAPE_LINE);</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Bemerkung</p>
<p class="last">All object constructors throw an exception on failure.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Bemerkung</p>
<p><em>ms_newSymbolObj()</em> and <em>new symbolObj()</em> are different</p>
<ul class="last simple">
<li>ms_newSymbolObj() returns the id of the new/existing symbol.</li>
<li>new symbolObj() returns the symbolObj. You don’t need to get it with getSymbolObjectById().</li>
</ul>
</div>
<ul class="simple">
<li>Cloneable objects should be cloned with the PHP clone keyword. There is no more clone methods.</li>
</ul>
</div>
<div class="section" id="class-properties">
<h3><a class="toc-backref" href="#table-of-contents">Class Properties</a><a class="headerlink" href="#class-properties" title="Link zu dieser Überschrift">¶</a></h3>
<p>Class properties that have been removed:</p>
<blockquote>
<div><ul class="simple">
<li>classObj: maxscale, minscale</li>
<li>layerObj: labelsizeitem, labelangleitem, labelmaxscale, labelminscale, maxscale, minscale, symbolscale, transparency</li>
<li>legendObj: interlace, transparent</li>
<li>mapObj: imagetype, imagequality, interlace, scale, transparent</li>
<li>scalebarObj: interlace, transparent</li>
<li>symbolObj: gap, stylelength</li>
<li>webObj: minscale, maxscale</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="class-methods">
<h3><a class="toc-backref" href="#table-of-contents">Class Methods</a><a class="headerlink" href="#class-methods" title="Link zu dieser Überschrift">¶</a></h3>
<p>Class methods that have been removed:</p>
<blockquote>
<div><ul class="simple">
<li>imageObj: free</li>
<li>layerObj: getFilter, getShape</li>
<li>lineObj: free</li>
<li>pointObj: free</li>
<li>projectionObj: free</li>
<li>rectObj: free</li>
<li>shapeObj: union_geos</li>
<li>symbolObj: getstylearray</li>
<li>classObj: clone</li>
<li>styleObj: clone</li>
<li>mapObj: clone</li>
<li>outputFormatObj: getformatoption, setformatoption</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="layerobj">
<h3><a class="toc-backref" href="#table-of-contents">layerObj</a><a class="headerlink" href="#layerobj" title="Link zu dieser Überschrift">¶</a></h3>
<p>layerObj-&gt;clearProcessing() method now returns void.</p>
</div>
<div class="section" id="mapobj">
<h3><a class="toc-backref" href="#table-of-contents">mapObj</a><a class="headerlink" href="#mapobj" title="Link zu dieser Überschrift">¶</a></h3>
<p>mapObj-&gt;queryByIndex(): default behavior for the addToQuery parameter was not ok, now it is.</p>
</div>
<div class="section" id="referencemapobj">
<h3><a class="toc-backref" href="#table-of-contents">referenceMapObj</a><a class="headerlink" href="#referencemapobj" title="Link zu dieser Überschrift">¶</a></h3>
<p>referenceMapObj has new properties: marker, markername, markersize, maxboxsize, minboxsize.</p>
</div>
<div class="section" id="shapefileobj">
<h3><a class="toc-backref" href="#table-of-contents">shapeFileObj</a><a class="headerlink" href="#shapefileobj" title="Link zu dieser Überschrift">¶</a></h3>
<p>shapeFileObj is automatically closed/writed on destroy. (At the end of the script or with an explicit free(), unset())</p>
</div>
<div class="section" id="labelcacheobj">
<h3><a class="toc-backref" href="#table-of-contents">labelCacheObj</a><a class="headerlink" href="#labelcacheobj" title="Link zu dieser Überschrift">¶</a></h3>
<p>To free the cache, you’ll have to call the method freeCache() rather than
free().</p>
</div>
<div class="section" id="methods-that-now-return-ms-success-ms-failure">
<h3><a class="toc-backref" href="#table-of-contents">Methods that now return MS_SUCCESS/MS_FAILURE</a><a class="headerlink" href="#methods-that-now-return-ms-success-ms-failure" title="Link zu dieser Überschrift">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>layerObj: setProcessing, addFeature, draw</li>
<li>mapObj: moveLayerUp, moveLayerDown, zoomRectangle, zoomScale, setProjection, setWKTProjection, setLayersDrawingOrder</li>
<li>outputFormatObj: validate</li>
<li>scalebarObj: setImageColor</li>
<li>symbolObj: setPoints, setPattern</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="methods-that-now-return-null-on-failure">
<h3><a class="toc-backref" href="#table-of-contents">Methods that now return NULL on failure</a><a class="headerlink" href="#methods-that-now-return-null-on-failure" title="Link zu dieser Überschrift">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>classObj: clone</li>
<li>mapObj: clone, draw, drawQuery getLayerByName, getProjection</li>
<li>layerObj: nextShape, getExtent</li>
<li>styleObj: clone</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="methods-that-now-return-an-empty-array">
<h3><a class="toc-backref" href="#table-of-contents">Methods that now return an empty array</a><a class="headerlink" href="#methods-that-now-return-an-empty-array" title="Link zu dieser Überschrift">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>layerObj: getItems, getProcessing, getGridIntersectionCoordinates</li>
<li>mapObj: getLayersIndexByGroup, getAllGroupNames, getLayersDrawingOrder, getAllLayerNames</li>
<li>symbolObj: getPatternArray</li>
</ul>
</div></blockquote>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3>Schnellsuche</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Los" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><h3>Navigation</h3>
<p>
<a href="../../about.html" title="About">About</a><br>
<a href="../../products.html" title="Products">Products</a><br>
<a href="../../community/index.html" title="Community">Community</a><br>
<a href="../../development/index.html" title="Development">Development</a><br>
<a href="../../download.html" title="Downloads">Downloads</a><br>
<a href="../../documentation.html" title="Documentation">Documentation</a><br>
<a href="../../faq.html" title="FAQ">FAQ</a><br>
<a href="../../psc.html" title="PSC">PSC</a><br>
<a href="https://twitter.com/mapserver_osgeo" title="Twitter">Twitter</a>
</p>
  <h3>Current Table Of Contents</h3>
  <ul>
<li><a class="reference internal" href="#">PHP MapScript Migration Guide</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#migrating-5-6-to-6-0">Migrating 5.6 to 6.0</a><ul>
<li><a class="reference internal" href="#php-version-required">PHP Version Required</a></li>
<li><a class="reference internal" href="#error-reporting">Error Reporting</a></li>
<li><a class="reference internal" href="#manipulating-objects">Manipulating Objects</a></li>
<li><a class="reference internal" href="#class-properties">Class Properties</a></li>
<li><a class="reference internal" href="#class-methods">Class Methods</a></li>
<li><a class="reference internal" href="#layerobj">layerObj</a></li>
<li><a class="reference internal" href="#mapobj">mapObj</a></li>
<li><a class="reference internal" href="#referencemapobj">referenceMapObj</a></li>
<li><a class="reference internal" href="#shapefileobj">shapeFileObj</a></li>
<li><a class="reference internal" href="#labelcacheobj">labelCacheObj</a></li>
<li><a class="reference internal" href="#methods-that-now-return-ms-success-ms-failure">Methods that now return MS_SUCCESS/MS_FAILURE</a></li>
<li><a class="reference internal" href="#methods-that-now-return-null-on-failure">Methods that now return NULL on failure</a></li>
<li><a class="reference internal" href="#methods-that-now-return-an-empty-array">Methods that now return an empty array</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="Stichwortverzeichnis"
             >Index</a></li>
        <li class="right" >
          <a href="by_example.html" title="By Example"
             >weiter</a> |</li>
        <li class="right" >
          <a href="phpmapscript.html" title="PHP MapScript API"
             >zurück</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../documentation.html" >MapServer 7.2.2 Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../index.html" >MapScript</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="index.html" >PHP MapScript</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; <a href="../../copyright.html">Copyright</a> 2019, Open Source Geospatial Foundation.
      Zuletzt aktualisiert am 2019-03-29.
      Mit <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.6 erstellt.
    </div>
  </body>
</html>