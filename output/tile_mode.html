
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tile Mode &#8212; MapServer 7.6.2 documentation</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/sphinx.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    
    <link rel="shortcut icon" href="../_static/mapserver.ico"/>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="Template-Driven Output" href="template_output.html" />
    <link rel="prev" title="SVG" href="svg.html" /> 
  </head><body>

<table width="100%" style="width: 100%; background-color: white;">
  <tr>
    <td rowspan="2" style="padding: 10px 0px 10px 10px;">
      <a href="../index.html" title="Home"><img src="../_static/banner.png" alt="MapServer banner" border="0" /></a>
    </td>
    <td style="padding: 10px 10px 0px 0px; text-align: right; vertical-align: top;">
      <a href="../index.html" title="Home">Home</a> |
      <a href="../products.html" title="Products (MapServer core, MapCache, TinyOWS">Products</a> |
      <a href="https://github.com/mapserver/mapserver/issues/" title="Issue Tracker (MapServer core)">Issue Tracker</a> |
      <a href="../community/service_providers.html" title="Professional Service Providers">Service Providers</a> |      
      <a href="../faq.html" title="Frequently Asked Questions">FAQ</a> |
      <a href="https://twitter.com/mapserver_osgeo" title="Twitter" target="_blank">Twitter</a> |
      <a href="../download.html" title="Download Source or Binaries">Download </a> |
      <a class="badge" href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=KRJ2X44N3HA6U&source=url" target="_blank">
        <img src="https://img.shields.io/badge/donate-%E2%9D%A4%C2%A0-ff69b4.svg?style=flat" alt="Donate to MapServer">
      </a>
    </td>
  </tr>
  <tr>
    <td style="padding: 0px 10px 0px 0px; text-align: right; vertical-align: bottom;">
        <img src="../_static/flagicons/en.png" alt="en" title="en" border="0" width="18px" height="13px"/>
        
          <a href="../ar/output/tile_mode.html"><img src="../_static/flagicons/ar.png" alt="ar" title="ar" border="0" /></a>
        
        
          <a href="../de/output/tile_mode.html"><img src="../_static/flagicons/de.png" alt="de" title="de" border="0" /></a>
        
        
          <a href="../el/output/tile_mode.html"><img src="../_static/flagicons/el.png" alt="el" title="el" border="0" /></a>
        
        
          <a href="../es/output/tile_mode.html"><img src="../_static/flagicons/es.png" alt="es" title="es" border="0" /></a>
        
        
          <a href="../fr/output/tile_mode.html"><img src="../_static/flagicons/fr.png" alt="fr" title="fr" border="0" /></a>
        
        
          <a href="../id/output/tile_mode.html"><img src="../_static/flagicons/id.png" alt="id" title="id" border="0" /></a>
        
        
          <a href="../it/output/tile_mode.html"><img src="../_static/flagicons/it.png" alt="it" title="it" border="0" /></a>
        
        
          <a href="../ja/output/tile_mode.html"><img src="../_static/flagicons/ja.png" alt="ja" title="ja" border="0" /></a>
        
        
          <a href="../nl_NL/output/tile_mode.html"><img src="../_static/flagicons/nl_NL.png" alt="nl_NL" title="nl_NL" border="0" /></a>
        
        
          <a href="../pl/output/tile_mode.html"><img src="../_static/flagicons/pl.png" alt="pl" title="pl" border="0" /></a>
        
        
          <a href="../ru/output/tile_mode.html"><img src="../_static/flagicons/ru.png" alt="ru" title="ru" border="0" /></a>
        
        
          <a href="../sq/output/tile_mode.html"><img src="../_static/flagicons/sq.png" alt="sq" title="sq" border="0" /></a>
        
        
          <a href="../tr/output/tile_mode.html"><img src="../_static/flagicons/tr.png" alt="tr" title="tr" border="0" /></a>
        

    </td>
  </tr>
</table>


    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="template_output.html" title="Template-Driven Output"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="svg.html" title="SVG"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../documentation.html" >MapServer 7.6.2 Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">Output Generation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Tile Mode</a></li> 
      </ul>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="tile-mode">
<span id="id1"></span><h1><a class="toc-backref" href="#table-of-contents">Tile Mode</a><a class="headerlink" href="#tile-mode" title="Permalink to this headline">¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd">Author</dt>
<dd class="field-odd"><p>Paul Ramsey</p>
</dd>
<dt class="field-even">Contact</dt>
<dd class="field-even"><p>pramsey at cleverelephant.ca</p>
</dd>
<dt class="field-odd">Author</dt>
<dd class="field-odd"><p>Jeff McKenna</p>
</dd>
<dt class="field-even">Contact</dt>
<dd class="field-even"><p>jmckenna at gatewaygeomatics.com</p>
</dd>
<dt class="field-odd">Last Updated</dt>
<dd class="field-odd"><p>2020-12-07</p>
</dd>
</dl>
<div class="contents topic" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#tile-mode" id="id2">Tile Mode</a></p>
<ul>
<li><p><a class="reference internal" href="#introduction" id="id3">Introduction</a></p></li>
<li><p><a class="reference internal" href="#configuration" id="id4">Configuration</a></p></li>
<li><p><a class="reference internal" href="#utilization" id="id5">Utilization</a></p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#table-of-contents">Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>MapServer can feed tile-based map clients directly using the CGI
“tile mode”.  Tile-based map clients work by dividing the map of the world up
into a discrete number of zoom levels, each partitioned into a number of
identically sized “tiles”.  Instead of accessing a map by requesting a
bounding box, a tile client builds a map by accessing individual tiles.</p>
</div>
<div class="section" id="configuration">
<h2><a class="toc-backref" href="#table-of-contents">Configuration</a><a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h2>
<p>Tile requests are handled by the ‘mapserv’ CGI program.  In order to
return tiles in the correct projection, MapServer must be built with the
–use-proj option turned on.  You can check if your version of ‘mapserv’ has
projection support by running it with the ‘-v’ option and looking
for ‘SUPPORTS=PROJ’.</p>
<p>Example 1. On Unix:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ./mapserv -v
MapServer version 7.7-dev OUTPUT=PNG OUTPUT=JPEG OUTPUT=KML SUPPORTS=PROJ
SUPPORTS=AGG SUPPORTS=FREETYPE SUPPORTS=CAIRO SUPPORTS=SVG_SYMBOLS
SUPPORTS=RSVG SUPPORTS=ICONV SUPPORTS=FRIBIDI SUPPORTS=WMS_SERVER
SUPPORTS=WMS_CLIENT SUPPORTS=WFS_SERVER SUPPORTS=WFS_CLIENT SUPPORTS=WCS_SERVER
SUPPORTS=SOS_SERVER SUPPORTS=GEOS SUPPORTS=POINT_Z_M SUPPORTS=PBF INPUT=JPEG
INPUT=POSTGIS INPUT=OGR INPUT=GDAL INPUT=SHAPEFILE
</pre></div>
</div>
<p>Example 2. On Windows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">C</span><span class="p">:</span>\<span class="n">ms4w</span><span class="o">&gt;</span> <span class="n">mapserv</span> <span class="o">-</span><span class="n">v</span>
<span class="n">MapServer</span> <span class="n">version</span> <span class="mf">7.7</span><span class="o">.</span><span class="mi">0</span><span class="o">-</span><span class="n">dev</span> <span class="p">(</span><span class="n">MS4W</span> <span class="mf">4.0</span><span class="o">.</span><span class="mi">4</span><span class="p">)</span> <span class="n">OUTPUT</span><span class="o">=</span><span class="n">PNG</span> <span class="n">OUTPUT</span><span class="o">=</span><span class="n">JPEG</span> <span class="n">OUTPUT</span><span class="o">=</span><span class="n">KML</span>
<span class="n">SUPPORTS</span><span class="o">=</span><span class="n">PROJ</span> <span class="n">SUPPORTS</span><span class="o">=</span><span class="n">AGG</span> <span class="n">SUPPORTS</span><span class="o">=</span><span class="n">FREETYPE</span> <span class="n">SUPPORTS</span><span class="o">=</span><span class="n">CAIRO</span> <span class="n">SUPPORTS</span><span class="o">=</span><span class="n">SVG_SYMBOLS</span>
<span class="n">SUPPORTS</span><span class="o">=</span><span class="n">SVGCAIRO</span> <span class="n">SUPPORTS</span><span class="o">=</span><span class="n">ICONV</span> <span class="n">SUPPORTS</span><span class="o">=</span><span class="n">FRIBIDI</span> <span class="n">SUPPORTS</span><span class="o">=</span><span class="n">WMS_SERVER</span>
<span class="n">SUPPORTS</span><span class="o">=</span><span class="n">WMS_CLIENT</span> <span class="n">SUPPORTS</span><span class="o">=</span><span class="n">WFS_SERVER</span> <span class="n">SUPPORTS</span><span class="o">=</span><span class="n">WFS_CLIENT</span> <span class="n">SUPPORTS</span><span class="o">=</span><span class="n">WCS_SERVER</span>
<span class="n">SUPPORTS</span><span class="o">=</span><span class="n">SOS_SERVER</span> <span class="n">SUPPORTS</span><span class="o">=</span><span class="n">FASTCGI</span> <span class="n">SUPPORTS</span><span class="o">=</span><span class="n">THREADS</span> <span class="n">SUPPORTS</span><span class="o">=</span><span class="n">GEOS</span>
<span class="n">SUPPORTS</span><span class="o">=</span><span class="n">POINT_Z_M</span> <span class="n">SUPPORTS</span><span class="o">=</span><span class="n">PBF</span> <span class="n">INPUT</span><span class="o">=</span><span class="n">JPEG</span> <span class="n">INPUT</span><span class="o">=</span><span class="n">POSTGIS</span> <span class="n">INPUT</span><span class="o">=</span><span class="n">OGR</span>
<span class="n">INPUT</span><span class="o">=</span><span class="n">GDAL</span> <span class="n">INPUT</span><span class="o">=</span><span class="n">SHAPEFILE</span>
</pre></div>
</div>
<p>MapServer requires that each LAYER in your .map file (or “mapfile”) have a valid PROJECTION
block to support reprojection.  Because the tile mode uses reprojection,
you will have to ensure each LAYER has a valid PROJECTION block.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The MAP-level projection in the mapfile is not required for <em>mode=tile</em>
as the output projection will always be set to the Google
Mercator projection <a class="reference external" href="http://epsg.io/3857">EPSG:3857</a> and its extents,
for mode=tile (in other words, the Google Mercator projection is hard-coded in
the underlying MapServer source code, always for the mode=tile case).
If your mapfile is also serving through an OGC service,
such as WMS, your MAP-level projection will obviously be required for the
OGC service, but can be any supported EPSG projection (does not have to be 3857).</p>
</div>
<p>Configuration checklist:</p>
<blockquote>
<div><ul class="simple">
<li><p>MapServer compiled with PROJ support</p></li>
<li><p>Mapfile with a <a class="reference internal" href="../mapfile/projection.html#projection"><span class="std std-ref">PROJECTION</span></a> defined for every <a class="reference internal" href="../mapfile/layer.html#layer"><span class="std std-ref">LAYER</span></a></p></li>
</ul>
</div></blockquote>
<p>As of MapServer 6.0, there are two extra parameters available for configuring tile mode.</p>
<blockquote>
<div><ul class="simple">
<li><p><em>tile_map_edge_buffer</em> renders the tile into a buffered rendering frame, then clips out the final tile. This will reduce edge effects when large symbols or wide lines are drawn. Recommended value: the size of the largest symbol or line width in your mapfile.</p></li>
<li><p><em>tile_metatile_level</em> renders the tiles into a fixed metatile, then clips out the final tile. This will reduce label repetition, at the expense of much higher rendering cost.  Recommended value: 1 if you are doing labelling of large features in your layer. 0 otherwise.</p></li>
</ul>
</div></blockquote>
<p>If you use both <em>tile_map_edge_buffer</em> and <em>tile_metatile_level</em> at the same time, the buffer will be applied at the meta-tile level.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The MapServer 7.6.2 release included a memory leak fix for <em>mode=tile</em></p>
</div>
</div>
<div class="section" id="utilization">
<h2><a class="toc-backref" href="#table-of-contents">Utilization</a><a class="headerlink" href="#utilization" title="Permalink to this headline">¶</a></h2>
<p>The MapServer tile support adds three new directives to the CGI interface:</p>
<ul class="simple">
<li><p><em>mode=tile</em> tells the server to generate tiles based on the other tile mode
parameters</p></li>
<li><p><em>tilemode=gmap</em> tells the server use the Google Maps tile
scheme for the tiles (this is the default tilemode)</p>
<ul>
<li><p>tile=x+y+z tells the server what tile you want to retrieve, using
the Google Maps tile addressing system</p></li>
</ul>
</li>
<li><p><em>tilemode=ve</em> tells the server use the Bing Maps (formerly “Virtual Earth”)
tile naming scheme for the tiles</p>
<ul>
<li><p>tile=10231 tells the server what tile you want to retrieve, using
the Bing Maps (formerly “Virtual Earth”) tile addressing system</p></li>
</ul>
</li>
</ul>
<p>A valid mode=tile request might therefore look like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>http://127.0.0.1/cgi-bin/mapserv.exe?
    MAP=/ms4w/apps/local-demo/local.map
    &amp;MODE=tile
    &amp;TILEMODE=gmap
    &amp;TILE=0+0+0
    &amp;LAYERS=countries
</pre></div>
</div>
<p>which results in a 256x256 tile (notice that it is in the Google Mercator projection,
even though the mapfile has an output PROJECTION object of <em>“init=epsg:4326”</em>) :</p>
<blockquote>
<div><img alt="../_images/tilemode-gmap.png" class="no-scaled-link" src="../_images/tilemode-gmap.png" style="width: 256px; height: 256px;" />
</div></blockquote>
<div class="section" id="about-spherical-mercator">
<h3>About Spherical Mercator<a class="headerlink" href="#about-spherical-mercator" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="../glossary.html#term-Spherical-Mercator"><span class="xref std std-term">Spherical Mercator</span></a> (also called the “web mercator” or “google mercator”)
is a world projection that all the major tile-based map interfaces (Google Maps,
Bing Maps [formerly “Virtual Earth”], Yahoo Maps, OpenLayers) use to address tiles.
The associated official EPSG code is <a class="reference external" href="http://epsg.io/3857">EPSG:3857</a>.</p>
<p>A spherical mercator set of tiles has the following properties:</p>
<blockquote>
<div><ul class="simple">
<li><p>The map has been reprojected to mercator using a spherical
mercator algorithm</p></li>
<li><p>There is one tile in the top zoom level, zoom level zero</p></li>
<li><p>Each successive zoom level (z) has 2^z tiles along each axis</p></li>
<li><p>Tiles are 256x256 in size</p></li>
</ul>
</div></blockquote>
<p>Google Maps and Bing Maps (formerly “Virtual Earth”) both use spherical mercator
as their underlying tile projection, but use different formats to address
the individual tiles.</p>
<p>Google Maps uses an “x”, “y”, “zoom” format.  The zoom indicates which level
to pull tiles from, and the “x” and “y” indicate while tile in that zoom
level to pull.</p>
<p>Bing Maps (formerly “Virtual Earth”) uses a single string to address each tile.
The top zoom level in Bing Maps has four tiles
(equivalent to Google’s zoom level 1). The
top left tile in the Bing Maps top zoom level is addressed as “0”, top
right as “1”, bottom left as “2” and bottom right as “3”.  Each tile
the next level is addressed by first referencing the top level tile that
contains it, then its address relative to that tile.  So the top left tile
in the second zoom level is “00” and the bottom right one is “33”.
See the Bing Maps site for more details: <a class="reference external" href="http://msdn.microsoft.com/en-us/library/bb545006.aspx">http://msdn.microsoft.com/en-us/library/bb545006.aspx</a></p>
</div>
<div class="section" id="using-google-maps">
<h3>Using Google Maps<a class="headerlink" href="#using-google-maps" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference external" href="https://cloud.google.com/maps-platform/">Google Maps API</a> includes support for using alternative tile sets
as overlays, or as alternate base maps. Here is an example of an
<a class="reference external" href="https://developers.google.com/maps/documentation/javascript/tutorial">GTileLayerOverlay</a></p>
<div class="highlight-html notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">&lt;!DOCTYPE html</span>
<span class="cp">  PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot;</span>
<span class="cp">  &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">xmlns</span><span class="o">=</span><span class="s">&quot;http://www.w3.org/1999/xhtml&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">meta</span> <span class="na">http-equiv</span><span class="o">=</span><span class="s">&quot;content-type&quot;</span> <span class="na">content</span><span class="o">=</span><span class="s">&quot;text/html; charset=utf-8&quot;</span><span class="p">/&gt;</span>
<span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Google/MapServer Tile Example<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;http://maps.google.com/maps?file=api&amp;v=2&amp;key=[YOUR KEY HERE]&quot;</span>
        <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>

<span class="kd">function</span> <span class="nx">load</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">GBrowserIsCompatible</span><span class="p">())</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">urlTemplate</span> <span class="o">=</span> <span class="s1">&#39;http://localhost/cgi-bin/mapserv?&#39;</span><span class="p">;</span>
        <span class="nx">urlTemplate</span> <span class="o">+=</span> <span class="s1">&#39;map=/var/map.map&amp;&#39;</span><span class="p">;</span>
        <span class="nx">urlTemplate</span> <span class="o">+=</span> <span class="s1">&#39;layers=layer1 layer2&amp;&#39;</span><span class="p">;</span>
        <span class="nx">urlTemplate</span> <span class="o">+=</span> <span class="s1">&#39;mode=tile&amp;&#39;</span><span class="p">;</span>
        <span class="nx">urlTemplate</span> <span class="o">+=</span> <span class="s1">&#39;tilemode=gmap&amp;&#39;</span><span class="p">;</span>
        <span class="nx">urlTemplate</span> <span class="o">+=</span> <span class="s1">&#39;tile={X}+{Y}+{Z}&#39;</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">myLayer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GTileLayer</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="mf">0</span><span class="p">,</span><span class="mf">18</span><span class="p">,{</span>
                                 <span class="nx">tileUrlTemplate</span><span class="o">:</span><span class="nx">urlTemplate</span><span class="p">,</span>
                                 <span class="nx">isPng</span><span class="o">:</span><span class="kc">true</span><span class="p">,</span>
                                 <span class="nx">opacity</span><span class="o">:</span><span class="mf">1.0</span> <span class="p">});</span>
    <span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GMap2</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;map&quot;</span><span class="p">));</span>
    <span class="nx">map</span><span class="p">.</span><span class="nx">addControl</span><span class="p">(</span><span class="k">new</span> <span class="nx">GLargeMapControl</span><span class="p">());</span>
    <span class="nx">map</span><span class="p">.</span><span class="nx">addControl</span><span class="p">(</span><span class="k">new</span> <span class="nx">GMapTypeControl</span><span class="p">());</span>
    <span class="nx">map</span><span class="p">.</span><span class="nx">setCenter</span><span class="p">(</span><span class="k">new</span> <span class="nx">GLatLng</span><span class="p">(</span><span class="mf">35.35</span><span class="p">,</span> <span class="o">-</span><span class="mf">80.55</span><span class="p">),</span> <span class="mf">15</span><span class="p">);</span>
    <span class="nx">map</span><span class="p">.</span><span class="nx">addOverlay</span><span class="p">(</span><span class="k">new</span> <span class="nx">GTileLayerOverlay</span><span class="p">(</span><span class="nx">myLayer</span><span class="p">));</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span> <span class="na">onload</span><span class="o">=</span><span class="s">&quot;load()&quot;</span> <span class="na">onunload</span><span class="o">=</span><span class="s">&quot;GUnload()&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;map&quot;</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;width: 500px; height: 500px&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</td></tr></table></div>
<p>Note the format of the tileUrlTemplate: a valid URL, with {X}, {Y} and {Z}
substitution tokens that Google Maps will replace with the tile coordinates
and zoom level on the fly to retrieve tiles from your server.</p>
<p>You can also use a MapServer tile layer as an alternate base map:</p>
<div class="highlight-html notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">&lt;!DOCTYPE html</span>
<span class="cp">  PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot;</span>
<span class="cp">  &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">xmlns</span><span class="o">=</span><span class="s">&quot;http://www.w3.org/1999/xhtml&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">meta</span> <span class="na">http-equiv</span><span class="o">=</span><span class="s">&quot;content-type&quot;</span> <span class="na">content</span><span class="o">=</span><span class="s">&quot;text/html; charset=utf-8&quot;</span><span class="p">/&gt;</span>
<span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Google/MapServer Tile Example<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;http://maps.google.com/maps?file=api&amp;v=2&amp;key=[YOUR KEY HERE]&quot;</span>
        <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>

<span class="kd">function</span> <span class="nx">load</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">GBrowserIsCompatible</span><span class="p">())</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">urlTemplate</span> <span class="o">=</span> <span class="s1">&#39;http://localhost/cgi-bin/mapserv?&#39;</span><span class="p">;</span>
        <span class="nx">urlTemplate</span> <span class="o">+=</span> <span class="s1">&#39;map=/var/map.map&amp;&#39;</span><span class="p">;</span>
        <span class="nx">urlTemplate</span> <span class="o">+=</span> <span class="s1">&#39;layers=layer1 layer2&amp;&#39;</span><span class="p">;</span>
        <span class="nx">urlTemplate</span> <span class="o">+=</span> <span class="s1">&#39;mode=tile&amp;&#39;</span><span class="p">;</span>
        <span class="nx">urlTemplate</span> <span class="o">+=</span> <span class="s1">&#39;tilemode=gmap&amp;&#39;</span><span class="p">;</span>
        <span class="nx">urlTemplate</span> <span class="o">+=</span> <span class="s1">&#39;tile={X}+{Y}+{Z}&#39;</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">myLayer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GTileLayer</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="mf">0</span><span class="p">,</span><span class="mf">18</span><span class="p">,{</span>
                                 <span class="nx">tileUrlTemplate</span><span class="o">:</span><span class="nx">urlTemplate</span><span class="p">,</span>
                                 <span class="nx">isPng</span><span class="o">:</span><span class="kc">true</span><span class="p">,</span>
                                 <span class="nx">opacity</span><span class="o">:</span><span class="mf">0.3</span> <span class="p">});</span>
    <span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GMap2</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;map&quot;</span><span class="p">));</span>
    <span class="nx">map</span><span class="p">.</span><span class="nx">addControl</span><span class="p">(</span><span class="k">new</span> <span class="nx">GLargeMapControl</span><span class="p">());</span>
    <span class="nx">map</span><span class="p">.</span><span class="nx">addControl</span><span class="p">(</span><span class="k">new</span> <span class="nx">GMapTypeControl</span><span class="p">());</span>
    <span class="nx">map</span><span class="p">.</span><span class="nx">setCenter</span><span class="p">(</span><span class="k">new</span> <span class="nx">GLatLng</span><span class="p">(</span><span class="mf">35.35</span><span class="p">,</span> <span class="o">-</span><span class="mf">80.55</span><span class="p">),</span> <span class="mf">15</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">myMapType</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GMapType</span><span class="p">([</span><span class="nx">myLayer</span><span class="p">],</span> <span class="k">new</span> <span class="nx">GMercatorProjection</span><span class="p">(</span><span class="mf">18</span><span class="p">),</span> <span class="s1">&#39;MapServer&#39;</span><span class="p">);</span>
    <span class="nx">map</span><span class="p">.</span><span class="nx">addMapType</span><span class="p">(</span><span class="nx">myMapType</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span> <span class="na">onload</span><span class="o">=</span><span class="s">&quot;load()&quot;</span> <span class="na">onunload</span><span class="o">=</span><span class="s">&quot;GUnload()&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;map&quot;</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;width: 500px; height: 500px&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</td></tr></table></div>
<p>The only change from the previous example is that we don’t create a
GTileLayerOverlay, we create a GMapType, and use addMapType(), instead of
addOverlay().</p>
</div>
<div class="section" id="using-bing-maps-formerly-virtual-earth">
<h3>Using Bing Maps (formerly “Virtual Earth”)<a class="headerlink" href="#using-bing-maps-formerly-virtual-earth" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference external" href="https://docs.microsoft.com/en-us/bingmaps/">Bing Maps API</a> also includes support for using alternative tile sets
as overlays, or as alternate base maps. Here is an example:</p>
<div class="highlight-html notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">xmlns</span><span class="o">=</span><span class="s">&quot;http://www.w3.org/1999/xhtml&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">http-equiv</span><span class="o">=</span><span class="s">&quot;content-type&quot;</span> <span class="na">content</span><span class="o">=</span><span class="s">&quot;text/html; charset=utf-8&quot;</span><span class="p">/&gt;</span>
  <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Virtual Earth Example<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;http://dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=6.1&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>

    <span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

    <span class="kd">function</span> <span class="nx">OnLoadMap</span> <span class="p">()</span> <span class="p">{</span>
      <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">VEMap</span><span class="p">(</span><span class="s2">&quot;myMap&quot;</span><span class="p">);</span>
      <span class="nx">map</span><span class="p">.</span><span class="nx">LoadMap</span><span class="p">();</span>

      <span class="kd">var</span> <span class="nx">url</span> <span class="o">=</span> <span class="s2">&quot;http://localhost/cgi-bin/mapserv?&quot;</span><span class="p">;</span>
      <span class="nx">url</span> <span class="o">+=</span> <span class="s2">&quot;map=/var/map.map&amp;&quot;</span><span class="p">;</span>
      <span class="nx">url</span> <span class="o">+=</span> <span class="s2">&quot;mode=tile&amp;&quot;</span><span class="p">;</span>
      <span class="nx">url</span> <span class="o">+=</span> <span class="s2">&quot;layers=layer1 layer2&amp;&quot;</span><span class="p">;</span>
      <span class="nx">url</span> <span class="o">+=</span> <span class="s2">&quot;tilemode=ve&amp;&quot;</span><span class="p">;</span>
      <span class="nx">url</span> <span class="o">+=</span> <span class="s2">&quot;tile=%4&quot;</span><span class="p">;</span>

      <span class="kd">var</span> <span class="nx">tileSourceSpec</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">VETileSourceSpecification</span><span class="p">(</span> <span class="s2">&quot;myLayer&quot;</span><span class="p">,</span> <span class="nx">url</span> <span class="p">);</span>
      <span class="nx">tileSourceSpec</span><span class="p">.</span><span class="nx">Opacity</span> <span class="o">=</span> <span class="mf">0.3</span><span class="p">;</span>
      <span class="nx">map</span><span class="p">.</span><span class="nx">AddTileLayer</span><span class="p">(</span><span class="nx">tileSourceSpec</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
    <span class="p">}</span>

  <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span> <span class="na">onload</span><span class="o">=</span><span class="s">&quot;OnLoadMap();&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;myMap&quot;</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;position:relative; width:500px; height:500px;&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script><h3>Navigation</h3>
<p>
<a href="../about.html" title="About">About</a><br>
<a href="../products.html" title="Products">Products</a><br>
<a href="../community/index.html" title="Community">Community</a><br>
<a href="../development/index.html" title="Development">Development</a><br>
<a href="../download.html" title="Downloads">Downloads</a><br>
<a href="../documentation.html" title="Documentation">Documentation</a><br>
<a href="../faq.html" title="FAQ">FAQ</a><br>
<a href="../psc.html" title="PSC">PSC</a><br>
<a href="https://twitter.com/mapserver_osgeo" title="Twitter">Twitter</a>
</p>
  <h3>Current Table Of Contents</h3>
  <ul>
<li><a class="reference internal" href="#">Tile Mode</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#configuration">Configuration</a></li>
<li><a class="reference internal" href="#utilization">Utilization</a><ul>
<li><a class="reference internal" href="#about-spherical-mercator">About Spherical Mercator</a></li>
<li><a class="reference internal" href="#using-google-maps">Using Google Maps</a></li>
<li><a class="reference internal" href="#using-bing-maps-formerly-virtual-earth">Using Bing Maps (formerly “Virtual Earth”)</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="template_output.html" title="Template-Driven Output"
             >next</a> |</li>
        <li class="right" >
          <a href="svg.html" title="SVG"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../documentation.html" >MapServer 7.6.2 Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >Output Generation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Tile Mode</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; <a href="../copyright.html">Copyright</a> 2020, Open Source Geospatial Foundation.
      Last updated on 2021-01-01.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.3.1.
    </div>
  </body>
</html>