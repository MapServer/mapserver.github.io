<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>KML Output &#8212; MapServer 8.0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx.css?v=6c7b17ac" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=dd298242" />
    <link rel="stylesheet" type="text/css" href="../_static/ribbon.css?v=ea091bf4" />
    
    <script src="../_static/documentation_options.js?v=521b6f53"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    
    <link rel="icon" href="../_static/mapserver.ico"/>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="UTFGrid Output" href="utfgrid_output.html" />
    <link rel="prev" title="Template-Driven Output" href="template_output.html" /> 
  </head><body>


<!-- for main branch only, do not backport this -->

<table width="100%" style="width: 100%; background-color: white;">
  <tr>
    <td rowspan="2" style="padding: 10px 0px 10px 10px;">
      <a href="../index.html" title="Home"><img src="../_static/banner.png" alt="MapServer banner" border="0" /></a>
    </td>
    <td style="padding: 10px 10px 0px 0px; text-align: right; vertical-align: top;">
      <a href="../index.html" title="Home">Home</a> |
      <a href="../products.html" title="Products (MapServer core, MapCache, TinyOWS">Products</a> |
      <a href="https://github.com/mapserver/mapserver/issues/" title="Issue Tracker (MapServer core)">Issue Tracker</a> |
      <a href="../community/service_providers.html" title="Professional Service Providers">Service Providers</a> |      
      <a href="../faq.html" title="Frequently Asked Questions">FAQ</a> |
      <a href="https://twitter.com/mapserver_osgeo" title="Twitter" target="_blank">Twitter</a> |
      <a href="../download.html" title="Download Source or Binaries">Download </a> |
      <a class="badge" href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=KRJ2X44N3HA6U&source=url" target="_blank">
        <img src="https://img.shields.io/badge/donate-%E2%9D%A4%C2%A0-ff69b4.svg?style=flat" alt="Donate to MapServer">
      </a>
    </td>
  </tr>
  <tr>
    <td style="padding: 0px 10px 0px 0px; text-align: right; vertical-align: bottom;">
        <img src="../_static/flagicons/en.png" alt="en" title="en" border="0" width="18px" height="13px"/>
        
          <a href="../ar/output/kml_output.html"><img src="../_static/flagicons/ar.png" alt="ar" title="ar" border="0" /></a>
        
        
          <a href="../de/output/kml_output.html"><img src="../_static/flagicons/de.png" alt="de" title="de" border="0" /></a>
        
        
          <a href="../el/output/kml_output.html"><img src="../_static/flagicons/el.png" alt="el" title="el" border="0" /></a>
        
        
          <a href="../es/output/kml_output.html"><img src="../_static/flagicons/es.png" alt="es" title="es" border="0" /></a>
        
        
          <a href="../fr/output/kml_output.html"><img src="../_static/flagicons/fr.png" alt="fr" title="fr" border="0" /></a>
        
        
          <a href="../id/output/kml_output.html"><img src="../_static/flagicons/id.png" alt="id" title="id" border="0" /></a>
        
        
          <a href="../it/output/kml_output.html"><img src="../_static/flagicons/it.png" alt="it" title="it" border="0" /></a>
        
        
          <a href="../ja/output/kml_output.html"><img src="../_static/flagicons/ja.png" alt="ja" title="ja" border="0" /></a>
        
        
          <a href="../nl_NL/output/kml_output.html"><img src="../_static/flagicons/nl_NL.png" alt="nl_NL" title="nl_NL" border="0" /></a>
        
        
          <a href="../pl/output/kml_output.html"><img src="../_static/flagicons/pl.png" alt="pl" title="pl" border="0" /></a>
        
        
          <a href="../ru/output/kml_output.html"><img src="../_static/flagicons/ru.png" alt="ru" title="ru" border="0" /></a>
        
        
          <a href="../sq/output/kml_output.html"><img src="../_static/flagicons/sq.png" alt="sq" title="sq" border="0" /></a>
        
        
          <a href="../tr/output/kml_output.html"><img src="../_static/flagicons/tr.png" alt="tr" title="tr" border="0" /></a>
        

    </td>
  </tr>
</table>


    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="utfgrid_output.html" title="UTFGrid Output"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="template_output.html" title="Template-Driven Output"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../documentation.html" >MapServer 8.0.1 Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">Output Generation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">KML Output</a></li> 
      </ul>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="kml-output">
<span id="id1"></span><h1>KML Output<a class="headerlink" href="#kml-output" title="Link to this heading">¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd">Authors<span class="colon">:</span></dt>
<dd class="field-odd"><p>Dvaid Kana (david.kana at gmail.com)</p>
</dd>
<dt class="field-even">Authors<span class="colon">:</span></dt>
<dd class="field-even"><p>Thomas.Bonfort (thomas.bonfort at gmail.com)</p>
</dd>
<dt class="field-odd">Authors<span class="colon">:</span></dt>
<dd class="field-odd"><p>Yewondwossen Assefa (yassefa at dmsolutions.ca)</p>
</dd>
<dt class="field-even">Authors<span class="colon">:</span></dt>
<dd class="field-even"><p>Michael Smith (michael.smith at usace.army.mil)</p>
</dd>
<dt class="field-odd">Last Updated<span class="colon">:</span></dt>
<dd class="field-odd"><p>2019-12-13</p>
</dd>
</dl>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Link to this heading">¶</a></h2>
<p>This purpose of this document is to describe KML/KMZ output
support that was initially added in the MapServer 6.0 release.</p>
<p>The main goal of the KML driver is to generate KML output used mainly
by Google Earth application.</p>
</section>
<section id="general-functionality">
<h2>General Functionality<a class="headerlink" href="#general-functionality" title="Link to this heading">¶</a></h2>
<p>KML support is provided by using a kml or kmz image type in the map
file. Output can then be generated using MapServer cgi (example
mode=map) or through a WMS request.</p>
</section>
<section id="output-format">
<h2>Output format<a class="headerlink" href="#output-format" title="Link to this heading">¶</a></h2>
<p>The default name of the output format is kml or kmz, and this name can
be used to set the imagetype parameter in the map file.</p>
<p>The format can also be defined in the map file:</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">OUTPUTFORMAT</span>
  <span class="k">NAME</span> <span class="nb">kml</span>
  <span class="k">DRIVER</span> <span class="s">&quot;KML&quot;</span>
  <span class="k">MIMETYPE</span> <span class="s">&quot;application/vnd.google-earth.kml+xml&quot;</span>
  <span class="k">IMAGEMODE</span> <span class="nb">RGB</span>
  <span class="k">EXTENSION</span> <span class="s">&quot;kml&quot;</span>
  <span class="k">FORMATOPTION</span> <span class="s">&#39;ATTACHMENT=gmap75.kml&#39;</span>  <span class="c">#name of kml file returned</span>
  <span class="k">FORMATOPTION</span> <span class="s">&quot;maxfeaturestodraw=100&quot;</span>
<span class="k">END</span>

<span class="k">OUTPUTFORMAT</span>
  <span class="k">NAME</span> <span class="nb">kmz</span>
  <span class="k">DRIVER</span> <span class="s">&quot;KMZ&quot;</span>
  <span class="k">MIMETYPE</span> <span class="s">&quot;application/vnd.google-earth.kmz&quot;</span>
  <span class="k">IMAGEMODE</span> <span class="nb">RGB</span>
  <span class="k">EXTENSION</span> <span class="s">&quot;kmz&quot;</span>
  <span class="k">FORMATOPTION</span> <span class="s">&#39;ATTACHMENT=gmap75.kmz&#39;</span>  <span class="c">#name of kmz file returned</span>
<span class="k">END</span>
</pre></div>
</div>
</section>
<section id="build">
<h2>Build<a class="headerlink" href="#build" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>On Windows: there is a flag KML in nmake.opt</p></li>
<li><p>On Linux: –with-kml</p></li>
<li><p>AGG driver is necessary for the KML driver</p></li>
<li><p>To be able to get kmz support, MapServer needs to be built against
GDAL 1.8 at least</p></li>
</ul>
</section>
<section id="limiting-the-number-of-features">
<h2>Limiting the number of features<a class="headerlink" href="#limiting-the-number-of-features" title="Link to this heading">¶</a></h2>
<p>The number of vector features drawn by default is set to 1000 per
layer. To control the number of features, users can set:</p>
<ul class="simple">
<li><p>layer level metadata that only applies to the layer:
“maxfeaturestodraw” “100”</p></li>
<li><p>map level metada that applies to all layers: “maxfeaturestodraw”
“100”</p></li>
<li><p>output format option that applies to all layers: FORMATOPTION
“maxfeaturestodraw=100”</p></li>
</ul>
</section>
<section id="map">
<h2>Map<a class="headerlink" href="#map" title="Link to this heading">¶</a></h2>
<p>In terms of the KML object, the MapServer KML output will produce a
&lt;Document&gt; element to include all the layers that are part of the
MapServer map file. Features supported for the Document are:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Document element</p></th>
<th class="head"><p>Supported</p></th>
<th class="head"><p>MapServer equivalence/Notes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>name</p></td>
<td><p>Yes</p></td>
<td><p>Name in the map file</p></td>
</tr>
<tr class="row-odd"><td><p>visibility</p></td>
<td><p>No</p></td>
<td><p>Can be supported if needed. Default is 1</p></td>
</tr>
<tr class="row-even"><td><p>open</p></td>
<td><p>No</p></td>
<td><p>Can be supported if needed. Default is 0</p></td>
</tr>
<tr class="row-odd"><td><p>address</p></td>
<td><p>No</p></td>
<td><p>Could be supported for example using ows_address if available</p></td>
</tr>
<tr class="row-even"><td><p>AddressDetails</p></td>
<td><p>No</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>phoneNumber</p></td>
<td><p>No</p></td>
<td><p>Could be supported using ows_contactvoicetelephone is available</p></td>
</tr>
<tr class="row-even"><td><p>Snippet</p></td>
<td><p>No</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>description</p></td>
<td><p>No</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>AbstractView</p></td>
<td><p>No</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>TimePrimitive</p></td>
<td><p>No</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>styleURL</p></td>
<td><p>No</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>StyleSelector</p></td>
<td><p>Yes</p></td>
<td><p>Style element will be supported. All different styles from the layers will be stored here and referenced from the folders using a styleUrl.In addition to the Styles related to features, there is a ListStyle element added at the document level. This allows to control the way folders are presented.See Layers section (styleUrl) setting for more details.</p></td>
</tr>
<tr class="row-even"><td><p>Region</p></td>
<td><p>No</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Metadata</p></td>
<td><p>No</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>ExtendedData</p></td>
<td><p>No</p></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="layers">
<h2>Layers<a class="headerlink" href="#layers" title="Link to this heading">¶</a></h2>
<p>Each layer of the MapServer map file will be inside a KML &lt;Folder&gt; element.
Supported Folder elements are:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Folder element</p></th>
<th class="head"><p>Supported</p></th>
<th class="head"><p>MapServer equivalence/Notes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>name</p></td>
<td><p>Yes</p></td>
<td><p>Name of the layer. If not available the name will be Layer concatenated with the layer’s index (Layer1)</p></td>
</tr>
<tr class="row-odd"><td><p>visibility</p></td>
<td><p>Yes</p></td>
<td><p>Always set to 1</p></td>
</tr>
<tr class="row-even"><td><p>open</p></td>
<td><p>No</p></td>
<td><p>Default is 0</p></td>
</tr>
<tr class="row-odd"><td><p>atom:authoratom:linkaddressAddressDetailsphoneNumberSnippet</p></td>
<td><p>No</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>description</p></td>
<td><p>No</p></td>
<td><p>Could be supported using ows_description</p></td>
</tr>
<tr class="row-odd"><td><p>AbstarctView</p></td>
<td><p>No</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>TimePrimitive</p></td>
<td><p>No</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>styleUrl</p></td>
<td><p>Yes</p></td>
<td><p>The user  can use the kml_folder_display layer or map level metedata to choose a setting. Possible values are  ‘check’ (default), ‘radioFolder’, ‘checkOffOnly’, ‘checkHideChildren’.</p></td>
</tr>
<tr class="row-even"><td><p>RegionMetadataExtendedData</p></td>
<td><p>No</p></td>
<td></td>
</tr>
</tbody>
</table>
<p>Each element in the Layer will be inside a KML &lt;Placemark&gt; element. As
described in the KML reference : “A Placemark is a Feature with
associated Geometry. In Google Earth, a Placemark appears as a list
item in the Places panel. A Placemark with a Point has an icon
associated with it that marks a point on the Earth in the 3D
viewer. (In the Google Earth 3D viewer, a Point Placemark is the only
object you can click or roll over. Other Geometry objects do not have
an icon in the 3D viewer. To give the user something to click in the
3D viewer, you would need to create a MultiGeometry object that
contains both a Point and the other Geometry object.)”</p>
<p>For Polygon and Line layers, when a feature is associated with a
label, a MultiGeometry element containing a point geometry and the
geometry of the feature is created. The point feature will be located
in the middle of the polygon or line</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;Folder&gt;</span>
<span class="w">    </span><span class="nt">&lt;name&gt;</span>park<span class="nt">&lt;/name&gt;</span>
<span class="w">    </span><span class="nt">&lt;visibility&gt;</span>1<span class="nt">&lt;/visibility&gt;</span>
<span class="w">    </span><span class="nt">&lt;styleUrl&gt;</span>#LayerFolder_check<span class="nt">&lt;/styleUrl&gt;</span>
<span class="w">    </span><span class="nt">&lt;Placemark&gt;</span>
<span class="w">      </span><span class="nt">&lt;name&gt;</span>Ellesmere<span class="w"> </span>Island<span class="w"> </span>National<span class="w"> </span>Park<span class="w"> </span>Reserve<span class="nt">&lt;/name&gt;</span>
<span class="w">      </span><span class="nt">&lt;styleUrl&gt;</span>#style_line_ff787878_w4.0_polygon_ff00ffc8_label_ff0000ff<span class="nt">&lt;/styleUrl&gt;</span>
<span class="w">      </span><span class="nt">&lt;MultiGeometry&gt;</span>
<span class="w">        </span><span class="nt">&lt;Polygon&gt;</span>
<span class="w">          </span><span class="nt">&lt;outerBoundaryIs&gt;</span>
<span class="w">            </span><span class="nt">&lt;LinearRing&gt;</span>
<span class="w">              </span><span class="nt">&lt;coordinates&gt;</span>
<span class="w">              </span>…
<span class="w">         </span><span class="nt">&lt;Point&gt;</span>
<span class="w">          </span><span class="nt">&lt;coordinates&gt;</span>
<span class="w">      </span>-70.86810858,82.12291871
<span class="w">      </span><span class="nt">&lt;/coordinates&gt;</span>
<span class="w">        </span><span class="nt">&lt;/Point&gt;</span>
<span class="w">      </span><span class="nt">&lt;/MultiGeometry&gt;</span>
<span class="w">    </span><span class="nt">&lt;/Placemark&gt;</span>
<span class="nt">&lt;/Folder&gt;</span>
</pre></div>
</div>
<p>Supported Features in the Placemark element are:</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>Placemark element</p></td>
<td><p>Supported</p></td>
<td><p>MapServer equivalence/Notes</p></td>
</tr>
<tr class="row-even"><td><p>name</p></td>
<td><p>Yes</p></td>
<td><p>Label attached with the feature. If there is no label a default name is assigned using the layer name and the shape id (ex. park.1)</p></td>
</tr>
<tr class="row-odd"><td><p>visibility</p></td>
<td><p>No</p></td>
<td><p>Is is by default set to true</p></td>
</tr>
<tr class="row-even"><td><p>open</p></td>
<td><p>No</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>address</p></td>
<td><p>No</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>AddressDetails</p></td>
<td><p>No</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>phoneNumber</p></td>
<td><p>No</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>Snippet</p></td>
<td><p>No</p></td>
<td><p>This is a short description the feature. If needed It could be supported.</p></td>
</tr>
<tr class="row-odd"><td><p>description</p></td>
<td><p>Yes</p></td>
<td><p>This information is what appears in the description balloon when the user clicks on the feature. The &lt;description&gt; element supports plain text as well as a subset of HTML formatting elements.  Used when KML/OWS_DESCRIPTION is defined</p></td>
</tr>
<tr class="row-even"><td><p>AbstractView</p></td>
<td><p>No</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>TimePrimitive</p></td>
<td><p>No</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>styleUrl</p></td>
<td><p>Yes</p></td>
<td><p>Refers to a Style defined in the Document</p></td>
</tr>
<tr class="row-odd"><td><p>StyleSelector</p></td>
<td><p>No</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>Region</p></td>
<td><p>No</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Metadata</p></td>
<td><p>No</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>ExtendedData</p></td>
<td><p>Yes</p></td>
<td><p>Used when KML/OWS_INCLUDE_ITEMS is defined</p></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>Geometry</p></td>
<td><p>Yes</p></td>
<td><p>Depends on the layer type</p></td>
</tr>
</tbody>
</table>
<section id="general-notes-on-layers">
<h3>General notes on layers<a class="headerlink" href="#general-notes-on-layers" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Labelcache is turned off on each layer</p></li>
<li><p>Projection block should be set. If not set It will be assumed that
the data is in lat/lon projection (a debug message will be sent to
the user: Debug Message 1)</p></li>
<li><p>Possible to output vector layers as raster using metadata:
“KML_OUTPUTASRASTER” “true”</p></li>
<li><p>The user can use the KML_FOLDER_DSIPLAY layer or map level metedata
to choose a setting. Possible values are ‘check’ (default),
‘radioFolder’, ‘checkOffOnly’, ‘checkHideChildren’.</p></li>
<li><p>The user can use metadata KML/OWS_DESCRIPTION or
KML/OWS_INCLUDE_ITEMS to define the description attached to each
feature. If KML/OWS_DESCRIPTION are defined, the &lt;description&gt; tag
of the Placemark will be used. If KML/OWS_INCLUDE_ITEMS, the
&lt;ExtendedData&gt; tag will be used.</p></li>
<li><p>The user can use the metadata KML_NAME_ITEM to indicate the field
name to be used a a name tag for each feature.</p></li>
<li><p>The user can use metadata KML_ALTITUDEMODE to specify how altitude
components in the &lt;coordinates&gt; element are interpreted. Possible
values are: absolute, relativeToGround,
clampToGround. <a class="reference external" href="http://code.google.com/apis/kml/documentation/kmlreference.html#altitudemode">http://code.google.com/apis/kml/documentation/kmlreference.html#altitudemode</a></p></li>
<li><p>The user can use metedata KML_EXTRUDE to specify whether to connect
the LinearRing to the
ground. <a class="reference external" href="http://code.google.com/apis/kml/documentation/kmlreference.html#tessellate">http://code.google.com/apis/kml/documentation/kmlreference.html#tessellate</a></p></li>
<li><p>The user can use metedata KML_TESSELLATE to specify whether to allow
the LinearRing to follow the
terrain. <a class="reference external" href="http://code.google.com/apis/kml/documentation/kmlreference.html#extrude">http://code.google.com/apis/kml/documentation/kmlreference.html#extrude</a></p></li>
<li><p>The user can specify an attribute to be used as the elevation value
using a layer level metedata: ‘kml_elevation_attribute’ ‘&lt;Name of
attribute&gt;’. The value will be used as the z value when the
coordinates are written.</p></li>
</ul>
</section>
<section id="point-layers">
<h3>Point Layers<a class="headerlink" href="#point-layers" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Each layer will be inside a Folder element.</p></li>
<li><p>Each feature will be represented by a Placemark.</p></li>
<li><p>The Geometry element for a Point layer would be represented as a
Point geometry element in KML. Supported elements are:</p></li>
</ul>
</section>
<section id="line-layers">
<h3>Line Layers<a class="headerlink" href="#line-layers" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Each layer will be inside a Folder element.</p></li>
<li><p>Each feature in the layer would be represented by a Placemark.</p></li>
<li><p>If a label is attached to the line, the Geometry element would be
represented as a MultiGeometry that includes a LineString element
and a Point element representing the position of the label. If no
label is attached to a feature, the Geometry element will be a
LineString.</p></li>
</ul>
</section>
<section id="polygon-layers">
<h3>Polygon Layers<a class="headerlink" href="#polygon-layers" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Each layer will be inside a Folder element.</p></li>
<li><p>Each feature will be represented by a Placemark.</p></li>
<li><p>If a label is attached to the polygon, the Geometry element would be
represented as a MultiGeometry that includes a Polygon element and a
Point element representing the position of the label.</p></li>
</ul>
</section>
<section id="raster-layers">
<h3>Raster Layers<a class="headerlink" href="#raster-layers" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Each layer will be inside a Folder element.</p></li>
<li><p>A GroundOverlay feature is created for the layer, that includes an
href link to the raster image generated and LatLongBox for the
extents (map extents).</p></li>
<li><p>The href is generated using the imagepath and imageurl settings in
the map file.</p></li>
</ul>
</section>
</section>
<section id="styling">
<h2>Styling<a class="headerlink" href="#styling" title="Link to this heading">¶</a></h2>
<p>As described in Section 4, all different styles from the layers will
be stored at the Document level and referenced from the folders using
a styleUrl.</p>
<section id="id2">
<h3>Point Layers<a class="headerlink" href="#id2" title="Link to this heading">¶</a></h3>
<p>Point layers will be styled using the IconStyle styling element of
KML. An image representing the symbol will be created and referenced
from the IconStyle object.  If a label is attached to the point, a
LabelStyle element will also be used. The LabelStyle will have the
color parameter set.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;Style</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;style_label_ff0000ff_symbol_star_13.0_ff000000&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;IconStyle&gt;</span>
<span class="w">      </span><span class="nt">&lt;Icon&gt;</span>
<span class="w">        </span><span class="nt">&lt;href&gt;</span>&gt;http://localhost/ms_tmp/4beab862_19bc_0.png<span class="nt">&lt;/href&gt;</span>
<span class="w">      </span><span class="nt">&lt;/Icon&gt;</span>
<span class="w">    </span><span class="nt">&lt;/IconStyle&gt;</span>
<span class="w">    </span><span class="nt">&lt;LabelStyle&gt;</span>
<span class="w">      </span><span class="nt">&lt;color&gt;</span>ff0000ff<span class="nt">&lt;/color&gt;</span>
<span class="w">    </span><span class="nt">&lt;/LabelStyle&gt;</span>
<span class="nt">&lt;/Style&gt;</span>
</pre></div>
</div>
</section>
<section id="id3">
<h3>Line Layers<a class="headerlink" href="#id3" title="Link to this heading">¶</a></h3>
<p>Line layers will be styled using the LineStyle styling element of
KML. Color and width parameters of the LineStyle will be used.  If a
label is attached to the layer, a LabelStyle element will also be
used.</p>
</section>
<section id="id4">
<h3>Polygon Layers<a class="headerlink" href="#id4" title="Link to this heading">¶</a></h3>
<p>Polygon layers will be styled using the PolyStyle styling element of
KML. Color parameter of the PolyStyle will be used. If an outline is
defined in the map file, an addition LineStyle will be used.  If a
label is attached to the layer, a LabelStyle element will also be
used.</p>
</section>
</section>
<section id="attributes">
<h2>Attributes<a class="headerlink" href="#attributes" title="Link to this heading">¶</a></h2>
<p>As described in section on Layers,  two ways of defining the description:</p>
<ul class="simple">
<li><p>kml/ows_description</p></li>
<li><p>kml/ows_include_items</p></li>
</ul>
</section>
<section id="coordinate-system">
<h2>Coordinate system<a class="headerlink" href="#coordinate-system" title="Link to this heading">¶</a></h2>
<p>The map level projection should be set to epsg:4326. If not set, the
driver will automatically set it. Layers are expected to have
projection block if their projection is different from epsg:4326.</p>
</section>
<section id="warning-and-error-messages">
<h2>Warning and Error Messages<a class="headerlink" href="#warning-and-error-messages" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>When the projection of the map file is not set or is different from
a a lat/lon projection, the driver automatically sets the projection
to espg:4326. If the map is is debug mode, the following message is
sent: “KmlRenderer::checkProjection: Mapfile projection set to
epsg:4326”</p></li>
<li><p>If imagepath and imageurl are not set in the web object, the
following message is sent in debug mode:
“KmlRenderer::startNewLayer: imagepath and imageurl should be set
in the web object”</p></li>
</ul>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p>
<a href="../about.html" title="About">About</a><br>
<a href="../products.html" title="Products">Products</a><br>
<a href="../community/index.html" title="Community">Community</a><br>
<a href="../development/index.html" title="Development">Development</a><br>
<a href="../download.html" title="Downloads">Downloads</a><br>
<a href="../documentation.html" title="Documentation">Documentation</a><br>
<a href="../faq.html" title="FAQ">FAQ</a><br>
<a href="../psc.html" title="PSC">PSC</a><br>
<a href="https://twitter.com/mapserver_osgeo" title="Twitter">Twitter</a>
</p>
  <h3>Current Table Of Contents</h3>
  <ul>
<li><a class="reference internal" href="#">KML Output</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#general-functionality">General Functionality</a></li>
<li><a class="reference internal" href="#output-format">Output format</a></li>
<li><a class="reference internal" href="#build">Build</a></li>
<li><a class="reference internal" href="#limiting-the-number-of-features">Limiting the number of features</a></li>
<li><a class="reference internal" href="#map">Map</a></li>
<li><a class="reference internal" href="#layers">Layers</a><ul>
<li><a class="reference internal" href="#general-notes-on-layers">General notes on layers</a></li>
<li><a class="reference internal" href="#point-layers">Point Layers</a></li>
<li><a class="reference internal" href="#line-layers">Line Layers</a></li>
<li><a class="reference internal" href="#polygon-layers">Polygon Layers</a></li>
<li><a class="reference internal" href="#raster-layers">Raster Layers</a></li>
</ul>
</li>
<li><a class="reference internal" href="#styling">Styling</a><ul>
<li><a class="reference internal" href="#id2">Point Layers</a></li>
<li><a class="reference internal" href="#id3">Line Layers</a></li>
<li><a class="reference internal" href="#id4">Polygon Layers</a></li>
</ul>
</li>
<li><a class="reference internal" href="#attributes">Attributes</a></li>
<li><a class="reference internal" href="#coordinate-system">Coordinate system</a></li>
<li><a class="reference internal" href="#warning-and-error-messages">Warning and Error Messages</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="utfgrid_output.html" title="UTFGrid Output"
             >next</a> |</li>
        <li class="right" >
          <a href="template_output.html" title="Template-Driven Output"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../documentation.html" >MapServer 8.0.1 Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >Output Generation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">KML Output</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; <a href="../copyright.html">Copyright</a> 2023, Open Source Geospatial Foundation.
      Last updated on 2023-12-22.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.5.
    </div>
  </body>
</html>