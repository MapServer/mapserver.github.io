<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>HTML Imagemaps &mdash; MapServer 7.0.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '7.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/mapserver.ico"/>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="top" title="MapServer 7.0.0 documentation" href="../index.html" />
    <link rel="up" title="Output Generation" href="index.html" />
    <link rel="next" title="Kernel Density Estimation (Dynamic Heatmap)" href="kerneldensity.html" />
    <link rel="prev" title="HTML Legends with MapServer" href="html_legend.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body role="document">

<table width="100%" style="width: 100%; background-color: white;">
  <tr>
    <td rowspan="2" style="padding: 10px 0px 10px 10px;">
      <a href="../index.html" title="Home"><img src="../_static/banner.png" alt="MapServer banner" border="0" /></a>
    </td>
    <td style="padding: 10px 10px 0px 0px; text-align: right; vertical-align: top;">
      <a href="../index.html" title="Home">Home</a> |
      <a href="../products.html" title="Products (MapServer core, MapCache, TinyOWS">Products</a> |
      <a href="https://github.com/mapserver/mapserver/issues/" title="Issue Tracker (MapServer core)">Issue Tracker</a> |
      <a href="../faq.html" title="FAQ">FAQ</a> |
      <a href="../download.html" title="Download">Download </a>
    </td>
  </tr>
  <tr>
    <td style="padding: 0px 10px 0px 0px; text-align: right; vertical-align: bottom;">
        <img src="../_static/flagicons/en.png" alt="en" title="en" border="0" width="18px" height="13px"/>
        
          <a href="../ar/output/imagemaps.html"><img src="../_static/flagicons/ar.png" alt="ar" title="ar" border="0" /></a>
        
        
          <a href="../de/output/imagemaps.html"><img src="../_static/flagicons/de.png" alt="de" title="de" border="0" /></a>
        
        
          <a href="../el/output/imagemaps.html"><img src="../_static/flagicons/el.png" alt="el" title="el" border="0" /></a>
        
        
          <a href="../es/output/imagemaps.html"><img src="../_static/flagicons/es.png" alt="es" title="es" border="0" /></a>
        
        
          <a href="../fr/output/imagemaps.html"><img src="../_static/flagicons/fr.png" alt="fr" title="fr" border="0" /></a>
        
        
          <a href="../id/output/imagemaps.html"><img src="../_static/flagicons/id.png" alt="id" title="id" border="0" /></a>
        
        
          <a href="../it/output/imagemaps.html"><img src="../_static/flagicons/it.png" alt="it" title="it" border="0" /></a>
        
        
          <a href="../ja/output/imagemaps.html"><img src="../_static/flagicons/ja.png" alt="ja" title="ja" border="0" /></a>
        
        
          <a href="../nl_NL/output/imagemaps.html"><img src="../_static/flagicons/nl_NL.png" alt="nl_NL" title="nl_NL" border="0" /></a>
        
        
          <a href="../pl/output/imagemaps.html"><img src="../_static/flagicons/pl.png" alt="pl" title="pl" border="0" /></a>
        
        
          <a href="../ru/output/imagemaps.html"><img src="../_static/flagicons/ru.png" alt="ru" title="ru" border="0" /></a>
        
        
          <a href="../sq/output/imagemaps.html"><img src="../_static/flagicons/sq.png" alt="sq" title="sq" border="0" /></a>
        
        
          <a href="../tr/output/imagemaps.html"><img src="../_static/flagicons/tr.png" alt="tr" title="tr" border="0" /></a>
        
        
          <a href="../uk/output/imagemaps.html"><img src="../_static/flagicons/uk.png" alt="uk" title="uk" border="0" /></a>
        

    </td>
  </tr>
</table>


    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="kerneldensity.html" title="Kernel Density Estimation (Dynamic Heatmap)"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="html_legend.html" title="HTML Legends with MapServer"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../documentation.html" >MapServer 7.0.0 Documentation</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">Output Generation</a> &raquo;</li> 
      </ul>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="html-imagemaps">
<span id="imagemaps"></span><h1><a class="toc-backref" href="#contents">HTML Imagemaps</a><a class="headerlink" href="#html-imagemaps" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Author:</th><td class="field-body">David Fawcett</td>
</tr>
<tr class="field-even field"><th class="field-name">Contact:</th><td class="field-body">david.fawcett at gmail.com</td>
</tr>
<tr class="field-odd field"><th class="field-name">Last Updated:</th><td class="field-body">2008-10-08</td>
</tr>
</tbody>
</table>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#html-imagemaps" id="id1">HTML Imagemaps</a><ul>
<li><a class="reference internal" href="#introduction" id="id2">Introduction</a></li>
<li><a class="reference internal" href="#mapfile-layer-definition" id="id3">Mapfile Layer Definition</a></li>
<li><a class="reference internal" href="#templates" id="id4">Templates</a></li>
<li><a class="reference internal" href="#request-url" id="id5">Request URL</a></li>
<li><a class="reference internal" href="#additional-notes" id="id6">Additional Notes</a></li>
<li><a class="reference internal" href="#more-information" id="id7">More Information</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#contents">Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>The shpxy method of creating imagemaps uses MapServer query functionality to
build a html imagemap.  Just like a regular MapServer query, you send a query
request and MapServer uses the templates to build a block of html that it sends
back to the browser.  The first example shows you how to build an imagemap
based on a point layer.  An example template for a polygon layer is also
included.</p>
<p><strong>Components</strong></p>
<ul class="simple">
<li>MapServer mapfile</li>
<li>query template file</li>
<li>query header template</li>
<li>query footer template</li>
</ul>
</div>
<div class="section" id="mapfile-layer-definition">
<h2><a class="toc-backref" href="#contents">Mapfile Layer Definition</a><a class="headerlink" href="#mapfile-layer-definition" title="Permalink to this headline">¶</a></h2>
<p>Here is a simple mapfile for our example</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>MAP
NAME &quot;myMapFile
STATUS ON
SIZE 200 200
EXTENT 178784 4804000 772653 5483346

UNITS METERS
STATUS ON
SHAPEPATH &quot;/web/maps/data&quot;
IMAGECOLOR 255 255 255

WEB
  IMAGEPATH &quot;/web/maps/tmp/&quot;
  IMAGEURL &quot;/maps/tmp/&quot;
END

QUERYMAP
  STATUS ON
  STYLE NORMAL
END

LAYER
  NAME &quot;sites&quot;
  STATUS DEFAULT
  TYPE point
  DATA &#39;aqiAreas&#39;
      TEMPLATE &quot;bodytemplate.html&quot;
      HEADER &quot;imapheader.html&quot;
      FOOTER &quot;imapfooter.html&quot;
END
END
</pre></div>
</div>
<p>You can see that we have a mapfile with one point layer, and that it
contains references to three query templates.</p>
</div>
<div class="section" id="templates">
<h2><a class="toc-backref" href="#contents">Templates</a><a class="headerlink" href="#templates" title="Permalink to this headline">¶</a></h2>
<p>In MapServer, the query header and footers get processed only once.  The
main query template, &#8216;bodytemplate.html&#8217; in this example, gets processed
once for each record in the record set returned by the query.</p>
<div class="section" id="point-layers">
<h3>Point Layers<a class="headerlink" href="#point-layers" title="Permalink to this headline">¶</a></h3>
<p>Here is the query header, &#8216;imapheader.html&#8217;.  It creates the opening tag
for your html imagemap.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>&lt;map id=&quot;mymap&quot; name=&quot;mymap&quot;&gt;
</pre></div>
</div>
<p>Here is the query template, &#8216;bodytemplate.html&#8217;.  It creates the body of
the html imagemap.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>&lt;area shape=&quot;circle&quot; coords=&quot;[shpxy precision=0 proj=image yf=&quot;,7&quot; xf=&quot;,&quot;]&quot; href=&quot;http://my.url/mypage.cfm?region=[NAME]&quot; title=&quot;[NAME]&quot; alt=&quot;[NAME]&quot;&gt;
</pre></div>
</div>
<p>This template is used to create circular imagemap elements for a point layer.
NAME is a fieldname in the data source, the value for NAME for each
individual record gets substituted as the template is processed.  The
href specifies the URL link if the element is clicked.  Title and alt will
display the value when an element is moused over.</p>
<p>The resulting html element looks like</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>&lt;area shape=&quot;circle&quot; coords=&quot;80,103,7&quot; href=&quot;http://my.url/mypage.cfm?region=Northern&quot; &gt;
</pre></div>
</div>
<p>The key part here is</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>coords=&quot;[shpxy precision=0 proj=image xf=&quot;,&quot; yf=&quot;,7&quot;]&quot;
</pre></div>
</div>
<p>This is where MapServer will substitute the image coordinates for that
query record.  With Precision=0, the coordinates will be integers.</p>
<p>You also see shpxy template formatting options &#8216;xf&#8217; and &#8216;yf&#8217;.  &#8216;xf=&#8221;,&#8221;
tells MapServer to place a comma after the x coordinate.  &#8216;yf=&#8221;,7&#8221; after
the y coordinate.  This is done to specify a radius of 7 pixels for the
circle.  More options can be found in the <a class="reference internal" href="../mapfile/template.html#template"><span>Template Reference</span></a>.</p>
<p>The query footer template simply adds the closing tag for the html imagemap</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>&lt;/map&gt;
</pre></div>
</div>
</div>
<div class="section" id="polygon-layers">
<h3>Polygon Layers<a class="headerlink" href="#polygon-layers" title="Permalink to this headline">¶</a></h3>
<p>Here is a query template for a polygon layer</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>&lt;area shape=&quot;poly&quot; coords=&quot;[shpxy precision=0 proj=image]&quot; href=&quot;http://my.url/mypage.cfm?ID=[SITE_ID]&quot; title=&quot;[NAME]&quot; alt=&quot;[NAME]&quot;&gt;
</pre></div>
</div>
</div>
</div>
<div class="section" id="request-url">
<h2><a class="toc-backref" href="#contents">Request URL</a><a class="headerlink" href="#request-url" title="Permalink to this headline">¶</a></h2>
<p>To get the imagemap, you need to send a GET or POST request to MapServer
with several URL variables defined.  The below URL tells MapServer where
the mapfile is located, what layer we are querying, and that we are
using nquery mode to return multiple results.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>http://myurl/cgi-bin/mapserv?map=/web/maps/demoimap.map&amp;qlayer=sites&amp;mode=nquery&amp;searchmap=true
</pre></div>
</div>
</div>
<div class="section" id="additional-notes">
<h2><a class="toc-backref" href="#contents">Additional Notes</a><a class="headerlink" href="#additional-notes" title="Permalink to this headline">¶</a></h2>
<p>If you use separate map files to generate your imagemap and your map
image, make sure that the EXTENT and SIZE specified in both mapfiles
are identical.  If they are not, your features will not align properly.</p>
</div>
<div class="section" id="more-information">
<h2><a class="toc-backref" href="#contents">More Information</a><a class="headerlink" href="#more-information" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><a class="reference external" href="http://maps.dnr.state.mn.us/cgi-bin/mapserv56?map=/usr/local/www/docs_maps/eco/rsg/search/search_example.map&amp;qlayer=county&amp;mode=nquery&amp;searchmap=true">Steve Lime&#8217;s SHPXY Example</a></div></blockquote>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><h3>Navigation</h3>
<p>
<a href="../about.html" title="About">About</a><br>
<a href="../products.html" title="Products">Products</a><br>
<a href="../community/index.html" title="Community">Community</a><br>
<a href="../development/index.html" title="Development">Development</a><br>
<a href="../download.html" title="Downloads">Downloads</a><br>
<a href="../documentation.html" title="Documentation">Documentation</a><br>
<a href="../faq.html" title="FAQ">FAQ</a>
</p>
  <h3>Current Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">HTML Imagemaps</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#mapfile-layer-definition">Mapfile Layer Definition</a></li>
<li><a class="reference internal" href="#templates">Templates</a><ul>
<li><a class="reference internal" href="#point-layers">Point Layers</a></li>
<li><a class="reference internal" href="#polygon-layers">Polygon Layers</a></li>
</ul>
</li>
<li><a class="reference internal" href="#request-url">Request URL</a></li>
<li><a class="reference internal" href="#additional-notes">Additional Notes</a></li>
<li><a class="reference internal" href="#more-information">More Information</a></li>
</ul>
</li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, Open Source Geospatial Foundation.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.3.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.4</a>
      
    </div>

    

    
  </body>
</html>