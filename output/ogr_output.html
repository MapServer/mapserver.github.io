<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>OGR Output &#8212; MapServer 8.0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx.css?v=6c7b17ac" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=dd298242" />
    <link rel="stylesheet" type="text/css" href="../_static/ribbon.css?v=ea091bf4" />
    
    <script src="../_static/documentation_options.js?v=521b6f53"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    
    <link rel="icon" href="../_static/mapserver.ico"/>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="PDF Output" href="pdf.html" />
    <link rel="prev" title="Kernel Density Estimation (Dynamic Heatmap)" href="kerneldensity.html" /> 
  </head><body>


<!-- for main branch only, do not backport this -->

<table width="100%" style="width: 100%; background-color: white;">
  <tr>
    <td rowspan="2" style="padding: 10px 0px 10px 10px;">
      <a href="../index.html" title="Home"><img src="../_static/banner.png" alt="MapServer banner" border="0" /></a>
    </td>
    <td style="padding: 10px 10px 0px 0px; text-align: right; vertical-align: top;">
      <a href="../index.html" title="Home">Home</a> |
      <a href="../products.html" title="Products (MapServer core, MapCache, TinyOWS">Products</a> |
      <a href="https://github.com/mapserver/mapserver/issues/" title="Issue Tracker (MapServer core)">Issue Tracker</a> |
      <a href="../community/service_providers.html" title="Professional Service Providers">Service Providers</a> |      
      <a href="../faq.html" title="Frequently Asked Questions">FAQ</a> |
      <a href="https://twitter.com/mapserver_osgeo" title="Twitter" target="_blank">Twitter</a> |
      <a href="../download.html" title="Download Source or Binaries">Download </a> |
      <a class="badge" href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=KRJ2X44N3HA6U&source=url" target="_blank">
        <img src="https://img.shields.io/badge/donate-%E2%9D%A4%C2%A0-ff69b4.svg?style=flat" alt="Donate to MapServer">
      </a>
    </td>
  </tr>
  <tr>
    <td style="padding: 0px 10px 0px 0px; text-align: right; vertical-align: bottom;">
        <img src="../_static/flagicons/en.png" alt="en" title="en" border="0" width="18px" height="13px"/>
        
          <a href="../ar/output/ogr_output.html"><img src="../_static/flagicons/ar.png" alt="ar" title="ar" border="0" /></a>
        
        
          <a href="../de/output/ogr_output.html"><img src="../_static/flagicons/de.png" alt="de" title="de" border="0" /></a>
        
        
          <a href="../el/output/ogr_output.html"><img src="../_static/flagicons/el.png" alt="el" title="el" border="0" /></a>
        
        
          <a href="../es/output/ogr_output.html"><img src="../_static/flagicons/es.png" alt="es" title="es" border="0" /></a>
        
        
          <a href="../fr/output/ogr_output.html"><img src="../_static/flagicons/fr.png" alt="fr" title="fr" border="0" /></a>
        
        
          <a href="../id/output/ogr_output.html"><img src="../_static/flagicons/id.png" alt="id" title="id" border="0" /></a>
        
        
          <a href="../it/output/ogr_output.html"><img src="../_static/flagicons/it.png" alt="it" title="it" border="0" /></a>
        
        
          <a href="../ja/output/ogr_output.html"><img src="../_static/flagicons/ja.png" alt="ja" title="ja" border="0" /></a>
        
        
          <a href="../nl_NL/output/ogr_output.html"><img src="../_static/flagicons/nl_NL.png" alt="nl_NL" title="nl_NL" border="0" /></a>
        
        
          <a href="../pl/output/ogr_output.html"><img src="../_static/flagicons/pl.png" alt="pl" title="pl" border="0" /></a>
        
        
          <a href="../ru/output/ogr_output.html"><img src="../_static/flagicons/ru.png" alt="ru" title="ru" border="0" /></a>
        
        
          <a href="../sq/output/ogr_output.html"><img src="../_static/flagicons/sq.png" alt="sq" title="sq" border="0" /></a>
        
        
          <a href="../tr/output/ogr_output.html"><img src="../_static/flagicons/tr.png" alt="tr" title="tr" border="0" /></a>
        

    </td>
  </tr>
</table>


    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="pdf.html" title="PDF Output"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="kerneldensity.html" title="Kernel Density Estimation (Dynamic Heatmap)"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../documentation.html" >MapServer 8.0.1 Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">Output Generation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">OGR Output</a></li> 
      </ul>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="ogr-output">
<span id="id1"></span><h1><a class="toc-backref" href="#table-of-contents" role="doc-backlink">OGR Output</a><a class="headerlink" href="#ogr-output" title="Link to this heading">¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd">Author<span class="colon">:</span></dt>
<dd class="field-odd"><p>Frank Warmerdam</p>
</dd>
<dt class="field-even">Contact<span class="colon">:</span></dt>
<dd class="field-even"><p>warmerdam at pobox.com</p>
</dd>
<dt class="field-odd">Author<span class="colon">:</span></dt>
<dd class="field-odd"><p>Jeff McKenna</p>
</dd>
<dt class="field-even">Contact<span class="colon">:</span></dt>
<dd class="field-even"><p>jmckenna at gatewaygeomatics.com</p>
</dd>
<dt class="field-odd">Last Updated<span class="colon">:</span></dt>
<dd class="field-odd"><p>2022-04-25</p>
</dd>
</dl>
<nav class="contents" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#ogr-output" id="id2">OGR Output</a></p>
<ul>
<li><p><a class="reference internal" href="#introduction" id="id3">Introduction</a></p></li>
<li><p><a class="reference internal" href="#outputformat-declarations" id="id4">OUTPUTFORMAT Declarations</a></p></li>
<li><p><a class="reference internal" href="#layer-metadata" id="id5">LAYER Metadata</a></p></li>
<li><p><a class="reference internal" href="#map-web-metadata" id="id6">MAP / WEB Metadata</a></p></li>
<li><p><a class="reference internal" href="#geometry-types-supported" id="id7">Geometry Types Supported</a></p></li>
<li><p><a class="reference internal" href="#attribute-field-definitions" id="id8">Attribute Field Definitions</a></p></li>
<li><p><a class="reference internal" href="#return-packaging" id="id9">Return Packaging</a></p></li>
<li><p><a class="reference internal" href="#test-suite-example" id="id10">Test Suite Example</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="introduction">
<h2><a class="toc-backref" href="#table-of-contents" role="doc-backlink">Introduction</a><a class="headerlink" href="#introduction" title="Link to this heading">¶</a></h2>
<p>OGR output support was added to MapServer 6.0.  It provides an output driver
to produce feature style output suitable as a return result from WMS
GetFeatureInfo or WFS GetFeature requests.  OGR feature output depends on
MapServer being built against the GDAL/OGR library.  The OGR output driver
should be enabled in MapServer 6.0 or newer when INPUT=OGR appears in the
version string.</p>
</section>
<section id="outputformat-declarations">
<h2><a class="toc-backref" href="#table-of-contents" role="doc-backlink">OUTPUTFORMAT Declarations</a><a class="headerlink" href="#outputformat-declarations" title="Link to this heading">¶</a></h2>
<p>Details of OGR output formats allowed are controlled by an <a class="reference internal" href="../mapfile/outputformat.html#outputformat"><span class="std std-ref">OUTPUTFORMAT</span></a>
declaration.  The declarations define the OGR format driver to be used,
creation options specific to that driver, and more general instructions to
MapServer on how to package multi-file results and whether to try and
build the result on disk or in memory.</p>
<p>Examples:</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">OUTPUTFORMAT</span>
  <span class="k">NAME</span> <span class="s">&quot;CSV&quot;</span>
  <span class="k">DRIVER</span> <span class="s">&quot;OGR/CSV&quot;</span>
  <span class="k">MIMETYPE</span> <span class="s">&quot;text/csv&quot;</span>
  <span class="k">FORMATOPTION</span> <span class="s">&quot;LCO:GEOMETRY=AS_WKT&quot;</span>
  <span class="k">FORMATOPTION</span> <span class="s">&quot;STORAGE=memory&quot;</span>
  <span class="k">FORMATOPTION</span> <span class="s">&quot;FORM=simple&quot;</span>
  <span class="k">FORMATOPTION</span> <span class="s">&quot;FILENAME=result.csv&quot;</span>
<span class="k">END</span>

<span class="k">OUTPUTFORMAT</span>
  <span class="k">NAME</span> <span class="s">&quot;OGRGML&quot;</span>
  <span class="k">DRIVER</span> <span class="s">&quot;OGR/GML&quot;</span>
  <span class="k">FORMATOPTION</span> <span class="s">&quot;STORAGE=filesystem&quot;</span>
  <span class="k">FORMATOPTION</span> <span class="s">&quot;FORM=multipart&quot;</span>
  <span class="k">FORMATOPTION</span> <span class="s">&quot;FILENAME=result.gml&quot;</span>
<span class="k">END</span>

<span class="k">OUTPUTFORMAT</span>
  <span class="k">NAME</span> <span class="s">&quot;SHAPEZIP&quot;</span>
  <span class="k">DRIVER</span> <span class="s">&quot;OGR/ESRI Shapefile&quot;</span>
  <span class="k">FORMATOPTION</span> <span class="s">&quot;STORAGE=memory&quot;</span>
  <span class="k">FORMATOPTION</span> <span class="s">&quot;FORM=zip&quot;</span>
  <span class="k">FORMATOPTION</span> <span class="s">&quot;FILENAME=result.zip&quot;</span>
<span class="k">END</span>

<span class="k">OUTPUTFORMAT</span>
  <span class="k">NAME</span> <span class="s">&quot;SPATIALITEZIP&quot;</span>
  <span class="k">DRIVER</span> <span class="s">&quot;OGR/SQLITE&quot;</span>
  <span class="k">MIMETYPE</span> <span class="s">&quot;application/zip&quot;</span>
  <span class="k">FORMATOPTION</span> <span class="s">&quot;DSCO:SPATIALITE=YES&quot;</span>
  <span class="k">FORMATOPTION</span> <span class="s">&quot;STORAGE=memory&quot;</span>
  <span class="k">FORMATOPTION</span> <span class="s">&quot;FORM=zip&quot;</span>
  <span class="k">FORMATOPTION</span> <span class="s">&quot;FILENAME=result.db.zip&quot;</span>
<span class="k">END</span>

<span class="k">OUTPUTFORMAT</span>
  <span class="k">NAME</span> <span class="s">&quot;application/json&quot;</span>
  <span class="k">DRIVER</span> <span class="s">&quot;OGR/GEOJSON&quot;</span>
  <span class="k">MIMETYPE</span> <span class="s">&quot;application/json&quot;</span>
  <span class="k">FORMATOPTION</span> <span class="s">&quot;FORM=SIMPLE&quot;</span>
  <span class="k">FORMATOPTION</span> <span class="s">&quot;STORAGE=memory&quot;</span>
<span class="k">END</span>

<span class="k">OUTPUTFORMAT</span>
  <span class="k">NAME</span> <span class="s">&quot;OGRFLATGEOBUF&quot;</span>
  <span class="k">DRIVER</span> <span class="s">&quot;OGR/FlatGeoBuf&quot;</span>
  <span class="k">FORMATOPTION</span> <span class="s">&quot;STORAGE=filesystem&quot;</span>
  <span class="k">FORMATOPTION</span> <span class="s">&quot;FORM=simple&quot;</span>
  <span class="k">FORMATOPTION</span> <span class="s">&quot;FILENAME=result.fgb&quot;</span>
  <span class="k">FORMATOPTION</span> <span class="s">&quot;LCO:VERIFY_BUFFERS=NO&quot;</span>
<span class="k">END</span>
</pre></div>
</div>
<p>The OGR format driver to be used is determined by the name appearing
after “OGR/” in the DRIVER argument.  This name should match one of
the formats listed as supported for the “-f” argument to ogr2ogr in the
ogr2ogr usage message.</p>
<p>The IMAGEMODE for OGR output is FEATURE, but this is implicit and does
not need to be explicitly stated for OGR output driver declarations.</p>
<p>The OGR renderer will support the following FORMATOPTION declarations:</p>
<dl>
<dt><strong>DSCO:*</strong></dt><dd><p>Anything prefixed by DSCO: is used as a dataset creation option with the
OGR driver. See the OGR web page for the particular format driver to see
layer creation options available.</p>
</dd>
<dt><strong>LCO:*</strong></dt><dd><p>Anything prefixed by LCO: is used as a layer creation option.  See
the OGR web page for the particular format driver to see layer creation
options available.</p>
</dd>
<dt><strong>FORM=simple/zip/multipart</strong></dt><dd><p>Indicates whether the result should be a simple single file (simple), a
mime multipart attachment (multipart) or a zip file (zip).  “zip” is
the default.</p>
</dd>
<dt><strong>STORAGE=memory/filesystem/stream</strong></dt><dd><p>Indicates where the datasource should be stored while being written.
“filesystem” is the default.</p>
<p>If “memory” then it will be created in /vsimem/ - but this is only suitable
for drivers supporting VSI*L which we can’t easily determine automatically.</p>
<p>If “filesystem”, then a directory for temporary files (specified
using <a class="reference internal" href="../mapfile/web.html#web"><span class="std std-ref">WEB</span></a> <cite>TEMPPATH</cite> or <cite>MS_TEMPPATH</cite>) will be used for
writing and reading back the file(s) to stream to the client.</p>
<p>If “stream” then the datasource will be created with a name “/vsistdout”
as an attempt to write directly to stdout.  Only a few OGR drivers will
work properly in this mode (ie. CSV, perhaps kml, gml).</p>
</dd>
<dt><strong>FILENAME=name</strong></dt><dd><p>Provides a name for the datasource created, default is “result.dat” for single
file or multipart form, or “result.zip” for zip form.
In the case of zip form, the filename can be of the format basename.ext.zip where
basename.ext will be used as the actual OGR datasource name (i.e. generally
the filename that will be put inside the zip file).</p>
</dd>
<dt><strong>USE_FEATUREID=true/false</strong></dt><dd><p>Starting from MapServer v7.0.2. Defaults to false. Include feature ids in the generated output,
if the ows_featureid metadata key is set at the layer level. The featureid
column to use <strong>should</strong> be an integer column. Useful if you need to include
an “id” attribute to your geojson output. Use with caution as some OGR output
drivers may behave strangely when fed with <em>random</em> FIDs.</p>
</dd>
</dl>
</section>
<section id="layer-metadata">
<h2><a class="toc-backref" href="#table-of-contents" role="doc-backlink">LAYER Metadata</a><a class="headerlink" href="#layer-metadata" title="Link to this heading">¶</a></h2>
<p>The OGR output driver utilizes several items from the LAYER level METADATA
object.  Some of these were originally intended for GML output or are
primarily intended to support WFS.</p>
<dl>
<dt><strong>wfs_getfeature_formatlist</strong></dt><dd><p>(Optional) A comma delimited list of formats supported for WFS GetFeature
responses.  The OUTPUTFORMAT NAME values should be listed.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;wfs_getfeature_formatlist&quot;</span> <span class="s2">&quot;OGRGML,SHAPEZIP,CSV&quot;</span>
</pre></div>
</div>
</dd>
<dt><strong>wfs_additional_files_in_output</strong></dt><dd><p>(Optional) A comma delimited list of filenames that should be included as
additional files in the response to a WFS GetFeature request for this layer,
for output formats whose FORM FORMATOPTION is “zip” or “multipart”. This is typically
used to add technical information, metadata or licensing information.
The filenames can also be directory names, in which case all the files contained
in the directory will be taken into account.
Relative filenames will be evaluated against the mapfile directory, and the
SHAPEPATH value if defined.
Filenames can also be URLs (starting with <a class="reference external" href="http://">http://</a> or <a class="reference external" href="https://">https://</a>). For that latter
capability, note that this requires OGR to be compiled with Curl support.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;wfs_additional_files_in_output&quot;</span> <span class="s2">&quot;license.pdf,my_layer_metadata.xml&quot;</span>
</pre></div>
</div>
</dd>
<dt><strong>gml_include_items</strong></dt><dd><p>(Optional) A comma delimited list of items to include, or keyword
“all”.  You can enable full exposure by using the keyword “all”.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;gml_include_items&quot;</span> <span class="s2">&quot;all&quot;</span>
</pre></div>
</div>
<p>You can specify a list of attributes (fields) for partial exposure, such as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;gml_include_items&quot;</span> <span class="s2">&quot;Name,ID&quot;</span>
</pre></div>
</div>
<p>The new default behaviour is to expose no attributes at all.</p>
</dd>
<dt><strong>gml_[item name]_alias</strong></dt><dd><p>(Optional) An alias for an attribute’s name.  The resulting file will refer
to this attribute by the alias.  Here is an example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;gml_province_alias&quot;</span> <span class="s2">&quot;prov&quot;</span>
</pre></div>
</div>
</dd>
<dt><strong>gml_[item name]_type</strong></dt><dd><p>(Optional) Specifies the type of the attribute.  Valid values
are Integer|Long|Real|Character|Date|Time|DateTime|Boolean.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Long is to be used for 64-bit integers, starting with MapServer 7.0.1.
If MapServer is built against GDAL 2.0 or later, Long will be translated as a
OGR 64-bit integer. For earlier versions, it will be translated as a OGR
double-precision floating point value.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Time and DateTime have been added in MapServer 8. And since MapServer 8,
Date semantics is a date, without time, whereas in previous versions, it
was used indifferently for Date, Time or DateTime.</p>
</div>
</dd>
<dt><strong>gml_[item name]_width</strong></dt><dd><p>(Optional) Specifies the width of the indicated field for formats where
this is significant, such as Shapefiles.</p>
</dd>
<dt><strong>gml_[item name]_precision</strong></dt><dd><p>(Optional) Specifies the precision of the indicated field for formats where
this is significant, such as Shapefiles.  Precision is the number of decimal
places, and is only needed for “Real” fields.</p>
</dd>
<dt><strong>gml_types</strong></dt><dd><p>(Optional) If this field is “auto” then some input feature drivers (ie.
OGR, and native shapefiles) will automatically populate the type, width and
precision metadata for the layer based on the source file.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;gml_types&quot;</span>   <span class="s2">&quot;auto&quot;</span>
</pre></div>
</div>
</dd>
<dt><strong>ows/wfs_geomtype</strong></dt><dd><p>(Optional, metadata shared with <a class="reference internal" href="../ogc/wfs_server.html#wfs-server"><span class="std std-ref">WFS server GML output</span></a>)
Set the geometry type of OGR layers created from this MapServer
LAYER.  One of “Point”, “LineString”, “Polygon”, “MultiPoint”,
“MultiLineString”, “MultiPolygon”, “GeometryCollection”, “Geometry”,
or “None”.  Most are fairly obvious, but “Geometry” can be used to represent
a mix of geometry types, and “None” is sometimes suitable for layers without
geometry.  Note that layers which are a mix of polygon and multipolygon
would normally have to be described as “Geometry”.  To produce 2.5D output
append “25D” to the geometry type (ie. “Polygon25D”).   Note that Z values
are only carried by MapServer if built with USE_POINT_Z_M support.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;ows_geomtype&quot;</span>  <span class="s2">&quot;Polygon&quot;</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="map-web-metadata">
<h2><a class="toc-backref" href="#table-of-contents" role="doc-backlink">MAP / WEB Metadata</a><a class="headerlink" href="#map-web-metadata" title="Link to this heading">¶</a></h2>
<dl>
<dt><strong>wms_feature_info_mime_type</strong></dt><dd><p>In order for WMS GetFeatureInfo to allow selection of OGR output formats,
the mime type associated with the OUTPUTFORMAT must be listed in this metadata
item.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;wms_feature_info_mime_type&quot;</span> <span class="s2">&quot;text/csv&quot;</span>
</pre></div>
</div>
</dd>
<dt><strong>wfs_additional_files_in_output</strong></dt><dd><p>(Optional) A comma delimited list of filenames that should be included as
additional files in the response to a WFS GetFeature request, for any layer of
the mapfile, for output formats whose FORM FORMATOPTION is “zip” or “multipart”. This is typically
used to add technical information, metadata or licensing information.
The filenames can also be directory names, in which case all the files contained
in the directory will be taken into account.
Relative filenames will be evaluated against the mapfile directory, and the
SHAPEPATH value if defined.
Filenames can also be URLs (starting with <a class="reference external" href="http://">http://</a> or <a class="reference external" href="https://">https://</a>). For that latter
capability, note that this requires OGR to be compiled with Curl support.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;wfs_additional_files_in_output&quot;</span> <span class="s2">&quot;license.pdf&quot;</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="geometry-types-supported">
<h2><a class="toc-backref" href="#table-of-contents" role="doc-backlink">Geometry Types Supported</a><a class="headerlink" href="#geometry-types-supported" title="Link to this heading">¶</a></h2>
<p>In MapServer we have POINT, LINE and POLYGON layers which also allow for
features with multiple points, lines or polygons.  However, in the OGC Simple
Feature geometry model used by OGR a point and multipoint layer are quite
distinct.  Likewise for a LineString and MultiLineString and Polygon an
MultiPolygon layer type.</p>
<p>To work around the mismatches between the MapServer and OGR geometry models,
there is a mechanism to specify the geometry type to be used when exporting
through OGR.  This is the “wfs/ows_geomtype” metadata item on the layer. It
may be one of one of “Point”, “LineString”, “Polygon”, “MultiPoint”,
“MultiLineString”, “MultiPolygon”, “GeometryCollection”, “Geometry”, or “None”.</p>
<p>If this item is not specified, then “Point”, “LineString” or “Polygon” will
be used depending on the TYPE of the LAYER.   In cases of mixed geometry
types (ie. polygons and multipolygons) the geometry type should be set to
“Geometry” which means any geometry type.</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;ows_geomtype&quot;</span> <span class="s2">&quot;Geometry&quot;</span>
</pre></div>
</div>
</div></blockquote>
<p>In order 2.5D support (geometries with Z coordinates) to be enabled, the “25D”
suffix must be add to the value of the “ows_geomtype” metadata item
(i.e. “Polygon25D”), and MapServer must be built with USE_POINT_Z_M support.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Empty geometries are supported from the MapServer 8.0 release.</p>
</div>
<p>Empty or null geometries can also be output through OGR. When using the GeoJSON
format these are returned as <code class="docutils literal notranslate"><span class="pre">&quot;geometry&quot;:</span> <span class="pre">null</span></code>. The CSV format outputs them as
an empty value.</p>
<p>To ensure empty features are not removed by a spatial filter use the following setting in
the LAYER METADATA:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;wfs_use_default_extent_for_getfeature&quot;</span> <span class="s2">&quot;false&quot;</span>
</pre></div>
</div>
</div></blockquote>
</section>
<section id="attribute-field-definitions">
<h2><a class="toc-backref" href="#table-of-contents" role="doc-backlink">Attribute Field Definitions</a><a class="headerlink" href="#attribute-field-definitions" title="Link to this heading">¶</a></h2>
<p>For OGR output it is highly desirable to be able to create the output fields
with the appropriate datatype, width and precision to reflect the source
feature definition.</p>
<p>It is possible to set the gml_[item]_type, gml_[item]_width and
gml_[item]_precision metadata on the layer to provide detailed field
definitions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">METADATA</span>
  <span class="s2">&quot;gml_ID_type&quot;</span>        <span class="s2">&quot;Integer&quot;</span>
  <span class="s2">&quot;gml_ID_width&quot;</span>       <span class="s2">&quot;8&quot;</span>
  <span class="s2">&quot;gml_AREA_type&quot;</span>      <span class="s2">&quot;Real&quot;</span>
  <span class="s2">&quot;gml_AREA_width&quot;</span>     <span class="s2">&quot;15&quot;</span>
  <span class="s2">&quot;gml_AREA_precision&quot;</span> <span class="s2">&quot;6&quot;</span>
  <span class="s2">&quot;gml_NAME_type&quot;</span>      <span class="s2">&quot;Character&quot;</span>
  <span class="s2">&quot;gml_NAME_width&quot;</span>     <span class="s2">&quot;64&quot;</span>
  <span class="o">...</span>
</pre></div>
</div>
<p>However, doing this manually is tedious and error prone.  For that reason
some feature sources (at least OGR, Shapefiles, POSTGIS and ORACLESPATIAL)
support a mechanism to automatically populate this information from the
source datastore.  To accomplish this specify:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;gml_types&quot;</span>            <span class="s2">&quot;auto&quot;</span>
</pre></div>
</div>
<p>If no effort is made to set type, width and precision information for
attribute fields, they will all be treated as variable length character
fields when writing through OGR.</p>
</section>
<section id="return-packaging">
<h2><a class="toc-backref" href="#table-of-contents" role="doc-backlink">Return Packaging</a><a class="headerlink" href="#return-packaging" title="Link to this heading">¶</a></h2>
<p>One of the challenges returning generalized feature formats is that
many such formats consists of multiple files which must be returned in
the result.  There are three approaches taken to this based on the
FORM FORMATOPTION in the OUTPUTFORMAT declaration.</p>
<dl class="simple">
<dt><strong>simple</strong></dt><dd><p>In this case a single result is returned.  This is suitable for format
drivers that produce a single file.  The return result will have the
mimetype listed in the OUTPUTFORMAT declaration.  Note that if the OGR
driver actually returns multiple files, only the primary one (the one
with a name matching the filename passed into the OGR CreateDataSource call)
will be returned.  The return result will have a suggested filename based
on the FILENAME FORMATOPTION.</p>
</dd>
<dt><strong>multipart</strong></dt><dd><p>In this case all the files produced are returned as a multipart mime
result.  In this case the MIMETYPE of the OUTPUTFORMAT is ignored.  All
component files are returned with a mime type of “application/binary” and
the whole package is “multipart/mixed”.</p>
</dd>
<dt><strong>zip</strong></dt><dd><p>In this case all the files produced are bundled into one .zip file and
this zip file is returned with a mimetype of “application/zip”.   The
OUTPUTFORMAT MIMETYPE is ignored.</p>
</dd>
</dl>
<p>One caveat with “zip” results is that this option is only available if
the GDAL/OGR version is 1.8 or newer (or a 1.8 development later than
approximately Oct 15, 2010).  Earlier versions of GDAL/OGR lacked the
zipping capability needed.</p>
</section>
<section id="test-suite-example">
<h2><a class="toc-backref" href="#table-of-contents" role="doc-backlink">Test Suite Example</a><a class="headerlink" href="#test-suite-example" title="Link to this heading">¶</a></h2>
<p>The MSAutoTest test suite contains a test case for use of OGR Output from
WFS.   The mapfile is at:</p>
<blockquote>
<div><p><a class="reference external" href="https://github.com/MapServer/MapServer/blob/main/msautotest/wxs/wfs_ogr.map">https://github.com/MapServer/MapServer/blob/main/msautotest/wxs/wfs_ogr.map</a></p>
</div></blockquote>
<p>The comments at the start of the file have a variety of sample requests
that can be run against the map, as long as [MAPFILE] is replaced with the
mapfile name.  They requests should be run against mapserv sitting in the
msautotest/wxs directory.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p>
<a href="../about.html" title="About">About</a><br>
<a href="../products.html" title="Products">Products</a><br>
<a href="../community/index.html" title="Community">Community</a><br>
<a href="../development/index.html" title="Development">Development</a><br>
<a href="../download.html" title="Downloads">Downloads</a><br>
<a href="../documentation.html" title="Documentation">Documentation</a><br>
<a href="../faq.html" title="FAQ">FAQ</a><br>
<a href="../psc.html" title="PSC">PSC</a><br>
<a href="https://twitter.com/mapserver_osgeo" title="Twitter">Twitter</a>
</p>
  <h3>Current Table Of Contents</h3>
  <ul>
<li><a class="reference internal" href="#">OGR Output</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#outputformat-declarations">OUTPUTFORMAT Declarations</a></li>
<li><a class="reference internal" href="#layer-metadata">LAYER Metadata</a></li>
<li><a class="reference internal" href="#map-web-metadata">MAP / WEB Metadata</a></li>
<li><a class="reference internal" href="#geometry-types-supported">Geometry Types Supported</a></li>
<li><a class="reference internal" href="#attribute-field-definitions">Attribute Field Definitions</a></li>
<li><a class="reference internal" href="#return-packaging">Return Packaging</a></li>
<li><a class="reference internal" href="#test-suite-example">Test Suite Example</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="pdf.html" title="PDF Output"
             >next</a> |</li>
        <li class="right" >
          <a href="kerneldensity.html" title="Kernel Density Estimation (Dynamic Heatmap)"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../documentation.html" >MapServer 8.0.1 Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >Output Generation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">OGR Output</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; <a href="../copyright.html">Copyright</a> 2023, Open Source Geospatial Foundation.
      Last updated on 2023-12-22.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.5.
    </div>
  </body>
</html>