<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Template-Driven Output &#8212; MapServer 8.0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx.css?v=6c7b17ac" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=dd298242" />
    <link rel="stylesheet" type="text/css" href="../_static/ribbon.css?v=ea091bf4" />
    
    <script src="../_static/documentation_options.js?v=521b6f53"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    
    <link rel="icon" href="../_static/mapserver.ico"/>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="KML Output" href="kml_output.html" />
    <link rel="prev" title="Tile Mode" href="tile_mode.html" /> 
  </head><body>


<!-- for main branch only, do not backport this -->

<table width="100%" style="width: 100%; background-color: white;">
  <tr>
    <td rowspan="2" style="padding: 10px 0px 10px 10px;">
      <a href="../index.html" title="Home"><img src="../_static/banner.png" alt="MapServer banner" border="0" /></a>
    </td>
    <td style="padding: 10px 10px 0px 0px; text-align: right; vertical-align: top;">
      <a href="../index.html" title="Home">Home</a> |
      <a href="../products.html" title="Products (MapServer core, MapCache, TinyOWS">Products</a> |
      <a href="https://github.com/mapserver/mapserver/issues/" title="Issue Tracker (MapServer core)">Issue Tracker</a> |
      <a href="../community/service_providers.html" title="Professional Service Providers">Service Providers</a> |      
      <a href="../faq.html" title="Frequently Asked Questions">FAQ</a> |
      <a href="https://twitter.com/mapserver_osgeo" title="Twitter" target="_blank">Twitter</a> |
      <a href="../download.html" title="Download Source or Binaries">Download </a> |
      <a class="badge" href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=KRJ2X44N3HA6U&source=url" target="_blank">
        <img src="https://img.shields.io/badge/donate-%E2%9D%A4%C2%A0-ff69b4.svg?style=flat" alt="Donate to MapServer">
      </a>
    </td>
  </tr>
  <tr>
    <td style="padding: 0px 10px 0px 0px; text-align: right; vertical-align: bottom;">
        <img src="../_static/flagicons/en.png" alt="en" title="en" border="0" width="18px" height="13px"/>
        
          <a href="../ar/output/template_output.html"><img src="../_static/flagicons/ar.png" alt="ar" title="ar" border="0" /></a>
        
        
          <a href="../de/output/template_output.html"><img src="../_static/flagicons/de.png" alt="de" title="de" border="0" /></a>
        
        
          <a href="../el/output/template_output.html"><img src="../_static/flagicons/el.png" alt="el" title="el" border="0" /></a>
        
        
          <a href="../es/output/template_output.html"><img src="../_static/flagicons/es.png" alt="es" title="es" border="0" /></a>
        
        
          <a href="../fr/output/template_output.html"><img src="../_static/flagicons/fr.png" alt="fr" title="fr" border="0" /></a>
        
        
          <a href="../id/output/template_output.html"><img src="../_static/flagicons/id.png" alt="id" title="id" border="0" /></a>
        
        
          <a href="../it/output/template_output.html"><img src="../_static/flagicons/it.png" alt="it" title="it" border="0" /></a>
        
        
          <a href="../ja/output/template_output.html"><img src="../_static/flagicons/ja.png" alt="ja" title="ja" border="0" /></a>
        
        
          <a href="../nl_NL/output/template_output.html"><img src="../_static/flagicons/nl_NL.png" alt="nl_NL" title="nl_NL" border="0" /></a>
        
        
          <a href="../pl/output/template_output.html"><img src="../_static/flagicons/pl.png" alt="pl" title="pl" border="0" /></a>
        
        
          <a href="../ru/output/template_output.html"><img src="../_static/flagicons/ru.png" alt="ru" title="ru" border="0" /></a>
        
        
          <a href="../sq/output/template_output.html"><img src="../_static/flagicons/sq.png" alt="sq" title="sq" border="0" /></a>
        
        
          <a href="../tr/output/template_output.html"><img src="../_static/flagicons/tr.png" alt="tr" title="tr" border="0" /></a>
        

    </td>
  </tr>
</table>


    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="kml_output.html" title="KML Output"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="tile_mode.html" title="Tile Mode"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../documentation.html" >MapServer 8.0.1 Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">Output Generation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Template-Driven Output</a></li> 
      </ul>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="template-driven-output">
<span id="template-output"></span><span id="index-0"></span><h1><a class="toc-backref" href="#table-of-contents" role="doc-backlink">Template-Driven Output</a><a class="headerlink" href="#template-driven-output" title="Link to this heading">¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd">Author<span class="colon">:</span></dt>
<dd class="field-odd"><p>Chris Hodgson</p>
</dd>
<dt class="field-even">Contact<span class="colon">:</span></dt>
<dd class="field-even"><p>chodgson at refractions.net</p>
</dd>
<dt class="field-odd">Author<span class="colon">:</span></dt>
<dd class="field-odd"><p>Seth Girvin</p>
</dd>
<dt class="field-even">Contact<span class="colon">:</span></dt>
<dd class="field-even"><p>sethg at geographika.co.uk</p>
</dd>
<dt class="field-odd">Last Updated<span class="colon">:</span></dt>
<dd class="field-odd"><p>2019-10-04</p>
</dd>
</dl>
<nav class="contents" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#template-driven-output" id="id1">Template-Driven Output</a></p>
<ul>
<li><p><a class="reference internal" href="#introduction" id="id2">Introduction</a></p></li>
<li><p><a class="reference internal" href="#outputformat-declarations" id="id3">OUTPUTFORMAT Declarations</a></p></li>
<li><p><a class="reference internal" href="#template-substitution-tags" id="id4">Template Substitution Tags</a></p></li>
<li><p><a class="reference internal" href="#examples" id="id5">Examples</a></p>
<ul>
<li><p><a class="reference internal" href="#header-body-footer" id="id6">Header, Body, Footer</a></p></li>
<li><p><a class="reference internal" href="#gml3" id="id7">GML3</a></p></li>
<li><p><a class="reference internal" href="#geojson" id="id8">GeoJSON</a></p></li>
<li><p><a class="reference internal" href="#kml" id="id9">KML</a></p></li>
<li><p><a class="reference internal" href="#restructuredtext-table" id="id10">reStructuredText Table</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
<section id="introduction">
<h2><a class="toc-backref" href="#table-of-contents" role="doc-backlink">Introduction</a><a class="headerlink" href="#introduction" title="Link to this heading">¶</a></h2>
<p>RFC 36 added support for defining template-driven OUTPUTFORMATs for use with
feature queries, including WMS GetFeatureInfo and WFS GetFeature. This allows
for custom text-oriented output such as GeoJSON, KML, or XML.
The templates are essentially the same as with the standard MapServer query
<a class="reference internal" href="../mapfile/template.html#template"><span class="std std-ref">Templating</span></a>, however there are some additional tags to allow for template
definition in a single file instead of the standard header/template/footer.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>There are other, simpler, ways to output some of these formats
using MapServer.  However, template-driven output provides maximal
flexibility and customization of the output, at the cost of
additional complexity and configuration.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In order for template-driven output to work, layers that are to
be output need to have the <cite>TEMPLATE</cite> key word included:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TEMPLATE</span> <span class="s2">&quot;dummy&quot;</span>
</pre></div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In order for template-driven output to work through WFS, the format
needs to be listed in wfs_getfeature_formatlist in the <cite>WEB</cite>
<cite>METATDATA</cite> section or the <cite>LAYER</cite> <cite>METATDATA</cite> section (the geojson
format from the example below):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;wfs_getfeature_formatlist&quot;</span> <span class="s2">&quot;gml,geojson&quot;</span>
</pre></div>
</div>
</div>
</section>
<section id="outputformat-declarations">
<span id="index-1"></span><h2><a class="toc-backref" href="#table-of-contents" role="doc-backlink">OUTPUTFORMAT Declarations</a><a class="headerlink" href="#outputformat-declarations" title="Link to this heading">¶</a></h2>
<p>Details of template-driven output formats are controlled by an
<a class="reference internal" href="../mapfile/outputformat.html#outputformat"><span class="std std-ref">OUTPUTFORMAT</span></a> declaration.  The declarations define the template
file to be used, as well as other standard OUTPUTFORMAT options.</p>
<p>Examples:</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">OUTPUTFORMAT</span>
  <span class="k">NAME</span> <span class="s">&quot;kayml&quot;</span>
  <span class="k">DRIVER</span> <span class="s">&quot;TEMPLATE&quot;</span>
  <span class="k">MIMETYPE</span> <span class="s">&quot;application/vnd.google-earth.kml+xml&quot;</span>
  <span class="k">FORMATOPTION</span> <span class="s">&quot;FILE=myTemplate.kml&quot;</span>
  <span class="k">FORMATOPTION</span> <span class="s">&quot;ATTACHMENT=queryResults.kml&quot;</span>
<span class="k">END</span>

<span class="k">OUTPUTFORMAT</span>
  <span class="k">NAME</span> <span class="s">&quot;geojson&quot;</span>
  <span class="k">DRIVER</span> <span class="s">&quot;TEMPLATE&quot;</span>
  <span class="k">FORMATOPTION</span> <span class="s">&quot;FILE=myTemplate.js&quot;</span>
<span class="k">END</span>

<span class="k">OUTPUTFORMAT</span>
  <span class="k">NAME</span> <span class="s">&quot;customxml&quot;</span>
  <span class="k">DRIVER</span> <span class="s">&quot;TEMPLATE&quot;</span>
  <span class="k">FORMATOPTION</span> <span class="s">&quot;FILE=myTemplate.xml&quot;</span>
<span class="k">END</span>
</pre></div>
</div>
<p>The template file to be used is determined by the “FILE=…” <cite>FORMATOPTION</cite>.
The template filename is relative to the mapfile’s path. As is standard with
MapServer template files, the file must contain the magic string
‘mapserver template’ in the first line of the file, usually within a comment,
but this line is not output to the client.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Valid suffixes for the template file are:
.xml, .wml, .html, .htm, .svg, .kml, .gml, .js, .tmpl.</p>
</div>
<p>The MIMETYPE and FORMATOPTION “ATTACHMENT=…” parameters are
very useful for controlling how a web browser handles the output file.</p>
</section>
<section id="template-substitution-tags">
<span id="index-2"></span><h2><a class="toc-backref" href="#table-of-contents" role="doc-backlink">Template Substitution Tags</a><a class="headerlink" href="#template-substitution-tags" title="Link to this heading">¶</a></h2>
<p>These tags only work in query result templates, and their purpose is primarily
to simplify the templating to a single file for custom output formats.</p>
<dl>
<dt>[include src=”otherTemplate.txt”]</dt><dd><p>Includes another template file; the path to the template file is relative
to the mapfile path.</p>
<p>Attributes:</p>
<ul class="simple">
<li><p>src: The file to be included.</p></li>
</ul>
</dd>
<dt>[resultset layer=layername]…[/resultset]</dt><dd><p>Defines the location of the results for a given layer.</p>
<p>Attributes:</p>
<ul class="simple">
<li><p>layer: The layer to be used</p></li>
<li><p>nodata: (optional) A string to return if no results are returned.</p></li>
</ul>
</dd>
<dt>[feature]…[/feature]</dt><dd><p>Defines the loop around the features returned for a given layer.</p>
<p>Attributes:</p>
<ul class="simple">
<li><p>limit: (optional) Specifies the maximum number of features to
output for this layer.</p></li>
<li><p>trimlast: (optional) Specifies a string to be trimmed off of the
end of the final feature that is output.  This is intended to
allow for trailing record delimiters to be removed.  See the
examples below.</p></li>
</ul>
</dd>
<dt>[join name=join1]…[/join]</dt><dd><p>defines the loop around the features join from another layer.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../mapfile/template.html#template"><span class="std std-ref">Templating</span></a></p>
</div>
</section>
<section id="examples">
<h2><a class="toc-backref" href="#table-of-contents" role="doc-backlink">Examples</a><a class="headerlink" href="#examples" title="Link to this heading">¶</a></h2>
<p>Below are some examples of the different kind of outputs that can be achieved with templates.</p>
<section id="header-body-footer">
<h3><a class="toc-backref" href="#table-of-contents" role="doc-backlink">Header, Body, Footer</a><a class="headerlink" href="#header-body-footer" title="Link to this heading">¶</a></h3>
<p>This example shows how to emulate the old 3-file system using the new system,
to compare the usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;!-- mapserver template --&gt;
[include src=&quot;templates/header.html&quot;]
[resultset layer=lakes]
  ... old layer HEADER stuff goes here, if a layer has no results
      this block disappears...
  [feature]
    ...repeat this block for each feature in the result set...
    [join name=join1]
      ...repeat this block for each joined row...
    [/join]
  [/feature]
  ...old layer FOOTER stuff goes here...
[/resultset]
[resultset layer=streams]
  ... old layer HEADER stuff goes here, if a layer has no results
      this block disappears...
  [feature]
    ...repeat this block for each feature in the result set...
  [/feature]
  ...old layer FOOTER stuff goes here...
[/resultset]
[include src=&quot;templates/footer.html&quot;]
</pre></div>
</div>
</section>
<section id="gml3">
<h3><a class="toc-backref" href="#table-of-contents" role="doc-backlink">GML3</a><a class="headerlink" href="#gml3" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;!-- mapserver template --&gt;
&lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot;?&gt;
[resultset layer=mums]
&lt;MapServerUserMeetings xmlns=&quot;http://localhost/ms_ogc_workshop&quot;
    xmlns:xlink=&quot;http://www.w3.org/1999/xlink&quot; xmlns:gml=&quot;http://www.opengis.net/gml&quot;
    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
    xsi:schemaLocation=&quot;http://localhost/ms_ogc_workshop ./mums.xsd&quot;&gt;
 &lt;gml:description&gt;This is a GML document which provides locations of
    all MapServer User Meeting that have taken place&lt;/gml:description&gt;
 &lt;gml:name&gt;MapServer User Meetings&lt;/gml:name&gt;
 &lt;gml:boundedBy&gt;
  &lt;gml:Envelope&gt;
   &lt;gml:coordinates&gt;-93.093055556,44.944444444 -75.7,45.4166667&lt;/gml:coordinates&gt;
  &lt;/gml:Envelope&gt;
 &lt;/gml:boundedBy&gt;
 [feature]
 &lt;gml:featureMember&gt;
  &lt;Meeting&gt;
   &lt;gml:description&gt;[desc]&lt;/gml:description&gt;
   &lt;gml:name&gt;[name]&lt;/gml:name&gt;
   &lt;gml:location&gt;
    &lt;gml:Point srsName=&quot;http://www.opengis.net/gml/srs/epsg.xml#4326&quot;&gt;
     &lt;gml:pos&gt;[x] [y]&lt;/gml:pos&gt;
    &lt;/gml:Point&gt;
   &lt;/gml:location&gt;
   &lt;year&gt;[year]&lt;/year&gt;
   &lt;venue&gt;[venue]&lt;/venue&gt;
   &lt;website&gt;[url]&lt;/website&gt;
  &lt;/Meeting&gt;
 &lt;/gml:featureMember&gt;
 [/feature]
 &lt;dateCreated&gt;2007-08-13T17:17:32Z&lt;/dateCreated&gt;
&lt;/MapServerUserMeetings&gt;
[resultset]
</pre></div>
</div>
</section>
<section id="geojson">
<h3><a class="toc-backref" href="#table-of-contents" role="doc-backlink">GeoJSON</a><a class="headerlink" href="#geojson" title="Link to this heading">¶</a></h3>
<p>Could be called using …&amp;layer=mums&amp;mode=nquery&amp;qformat=geojson</p>
<p>Or by adding &amp;outputformat=geojson to a WFS getfeature request:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">mapserver</span> <span class="n">template</span>
<span class="p">[</span><span class="n">resultset</span> <span class="n">layer</span><span class="o">=</span><span class="n">mums</span><span class="p">]</span>
<span class="p">{</span>
  <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;FeatureCollection&quot;</span><span class="p">,</span>
  <span class="s2">&quot;features&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">[</span><span class="n">feature</span> <span class="n">trimlast</span><span class="o">=</span><span class="s2">&quot;,&quot;</span><span class="p">]</span>
    <span class="p">{</span>
      <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Feature&quot;</span><span class="p">,</span>
      <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;[myuniqueid]&quot;</span><span class="p">,</span>
      <span class="s2">&quot;geometry&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;PointLineString&quot;</span><span class="p">,</span>
        <span class="s2">&quot;coordinates&quot;</span><span class="p">:</span> <span class="p">[</span>
          <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Point&quot;</span><span class="p">,</span>
            <span class="s2">&quot;coordinates&quot;</span><span class="p">:</span> <span class="p">[[</span><span class="n">x</span><span class="p">],</span> <span class="p">[</span><span class="n">y</span><span class="p">]]</span>
          <span class="p">}</span>
        <span class="p">]</span>
      <span class="p">},</span>
      <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;[description]&quot;</span><span class="p">,</span>
        <span class="s2">&quot;venue&quot;</span><span class="p">:</span> <span class="s2">&quot;[venue]&quot;</span><span class="p">,</span>
        <span class="s2">&quot;year&quot;</span><span class="p">:</span> <span class="s2">&quot;[year]&quot;</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="p">[</span><span class="o">/</span><span class="n">feature</span><span class="p">]</span>
  <span class="p">]</span>
<span class="p">}</span>
<span class="p">[</span><span class="o">/</span><span class="n">resultset</span><span class="p">]</span>
</pre></div>
</div>
</section>
<section id="kml">
<h3><a class="toc-backref" href="#table-of-contents" role="doc-backlink">KML</a><a class="headerlink" href="#kml" title="Link to this heading">¶</a></h3>
<p>A more complicated KML example. Note the use of [shpxy] to support multipolygons
with holes, and also that a point placemark is included with each feature using
[shplabel]:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;!--MapServer Template--&gt;
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;kml xmlns=&quot;http://www.opengis.net/kml/2.2&quot;
     xmlns:gx=&quot;http://www.google.com/kml/ext/2.2&quot;
     xmlns:kml=&quot;http://www.opengis.net/kml/2.2&quot;
     xmlns:atom=&quot;http://www.w3.org/2005/Atom&quot;&gt;
&lt;Document&gt;
  &lt;Style id=&quot;parks_highlight&quot;&gt;
    &lt;IconStyle&gt;
      &lt;scale&gt;1.4&lt;/scale&gt;
      &lt;Icon&gt;
        &lt;href&gt;http://maps.google.com/mapfiles/kml/shapes/parks.png&lt;/href&gt;
      &lt;/Icon&gt;
      &lt;hotSpot x=&quot;0.5&quot; y=&quot;0&quot; xunits=&quot;fraction&quot; yunits=&quot;fraction&quot;/&gt;
    &lt;/IconStyle&gt;
    &lt;LineStyle&gt;
      &lt;color&gt;ffff5500&lt;/color&gt;
      &lt;width&gt;4.2&lt;/width&gt;
    &lt;/LineStyle&gt;
    &lt;PolyStyle&gt;
      &lt;color&gt;aaaaaaaa&lt;/color&gt;
    &lt;/PolyStyle&gt;
    &lt;BalloonStyle&gt;
      &lt;text&gt;
        &lt;![CDATA[
          &lt;p ALIGN=&quot;center&quot;&gt;&lt;b&gt;$[name]&lt;/b&gt;&lt;/p&gt;
          $[description]
        ]]&gt;
      &lt;/text&gt;
    &lt;/BalloonStyle&gt;
  &lt;/Style&gt;
  &lt;Style id=&quot;parks_normal&quot;&gt;
    &lt;IconStyle&gt;
      &lt;scale&gt;1.2&lt;/scale&gt;
      &lt;Icon&gt;
        &lt;href&gt;http://maps.google.com/mapfiles/kml/shapes/parks.png&lt;/href&gt;
      &lt;/Icon&gt;
      &lt;hotSpot x=&quot;0.5&quot; y=&quot;0&quot; xunits=&quot;fraction&quot; yunits=&quot;fraction&quot;/&gt;
    &lt;/IconStyle&gt;
    &lt;LineStyle&gt;
      &lt;color&gt;ffff5500&lt;/color&gt;
      &lt;width&gt;4.2&lt;/width&gt;
    &lt;/LineStyle&gt;
    &lt;PolyStyle&gt;
      &lt;color&gt;ff7fff55&lt;/color&gt;
    &lt;/PolyStyle&gt;
    &lt;BalloonStyle&gt;
      &lt;text&gt;
        &lt;![CDATA[
          &lt;p ALIGN=&quot;center&quot;&gt;&lt;b&gt;$[name]&lt;/b&gt;&lt;/p&gt;
          $[description]
        ]]&gt;
      &lt;/text&gt;
    &lt;/BalloonStyle&gt;
  &lt;/Style&gt;
  &lt;StyleMap id=&quot;parks_map&quot;&gt;
    &lt;Pair&gt;
      &lt;key&gt;normal&lt;/key&gt;
      &lt;styleUrl&gt;#parks_normal&lt;/styleUrl&gt;
    &lt;/Pair&gt;
    &lt;Pair&gt;
      &lt;key&gt;highlight&lt;/key&gt;
      &lt;styleUrl&gt;#parks_highlight&lt;/styleUrl&gt;
    &lt;/Pair&gt;
  &lt;/StyleMap&gt;
[resultset layer=parks]
  &lt;Folder&gt;
    &lt;name&gt;Parks&lt;/name&gt;
[feature trimlast=&quot;,&quot; limit=1]
    &lt;Placemark&gt;
      &lt;name&gt;[NAME]&lt;/name&gt;
      &lt;Snippet/&gt;
      &lt;description&gt;
        &lt;![CDATA[
          &lt;p&gt;Year Established: [YEAR_ESTABLISHED]&lt;/p&gt;
          &lt;p&gt;Area: [AREA_KILOMETERS_SQUARED] sq km&lt;/p&gt;
        ]]&gt;
      &lt;/description&gt;
      &lt;styleUrl&gt;#parks_map&lt;/styleUrl&gt;
      &lt;ExtendedData&gt;
        &lt;Data name=&quot;Year Established&quot;&gt;[YEAR_ESTABLISHED]&lt;/Data&gt;
        &lt;Data name=&quot;Area&quot;&gt;[AREA_KILOMETERS_SQUARED]&lt;/Data&gt;
      &lt;/ExtendedData&gt;
      &lt;MultiGeometry&gt;
        &lt;Point&gt;
          &lt;coordinates&gt;[shplabel proj=epsg:4326 precision=10],0&lt;/coordinates&gt;
        &lt;/Point&gt;
[shpxy     ph=&quot;&lt;Polygon&gt;&lt;tessellate&gt;1&lt;/tessellate&gt;&quot; pf=&quot;&lt;/Polygon&gt;&quot;
           xf=&quot;,&quot; xh=&quot; &quot; yh=&quot; &quot; yf=&quot;,0 &quot;
           orh=&quot;&lt;outerBoundaryIs&gt;&lt;LinearRing&gt;&lt;coordinates&gt;&quot;
           orf=&quot;&lt;/coordinates&gt;&lt;/LinearRing&gt;&lt;/outerBoundaryIs&gt;&quot;
           irh=&quot;&lt;innerBoundaryIs&gt;&lt;LinearRing&gt;&lt;coordinates&gt;&quot;
           irf=&quot;&lt;/coordinates&gt;&lt;/LinearRing&gt;&lt;/innerBoundaryIs&gt;&quot;
           proj=epsg:4326 precision=10]
      &lt;/MultiGeometry&gt;
    &lt;/Placemark&gt;
[/feature]
  &lt;/Folder&gt;
[/resultset]
&lt;/Document&gt;
&lt;/kml&gt;
</pre></div>
</div>
</section>
<section id="restructuredtext-table">
<h3><a class="toc-backref" href="#table-of-contents" role="doc-backlink">reStructuredText Table</a><a class="headerlink" href="#restructuredtext-table" title="Link to this heading">¶</a></h3>
<p>This example creates a reStructuredText table from feature records, making use of the <cite>padding</cite> formatting option.
To test from the command line use syntax similar to below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mapserv</span> <span class="o">-</span><span class="n">nh</span> <span class="s2">&quot;QUERY_STRING=map=./msautotest/query/query.map&amp;mode=nquery&amp;qlayer=bdry_counpy2&amp;qformat=formattmpl&quot;</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># MapServer Template</span>
<span class="p">[</span><span class="n">resultset</span> <span class="n">layer</span><span class="o">=</span><span class="n">bdry_counpy2</span><span class="p">]</span>
<span class="o">====================</span> <span class="o">============</span>
<span class="n">City</span> <span class="n">Name</span>            <span class="n">Abbreviation</span>
<span class="o">====================</span> <span class="o">============</span>
<span class="p">[</span><span class="n">feature</span><span class="p">][</span><span class="n">item</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;cty_name&quot;</span> <span class="n">padding</span><span class="o">=</span><span class="s2">&quot;20&quot;</span><span class="p">]</span> <span class="p">[</span><span class="n">item</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;cty_abbr&quot;</span> <span class="n">uc</span><span class="o">=</span><span class="s2">&quot;true&quot;</span> <span class="n">padding</span><span class="o">=</span><span class="s2">&quot;12&quot;</span><span class="p">]</span>
<span class="p">[</span><span class="o">/</span><span class="n">feature</span><span class="p">]</span>
<span class="o">====================</span> <span class="o">============</span>
<span class="p">[</span><span class="o">/</span><span class="n">resultset</span><span class="p">]</span>
</pre></div>
</div>
<p>The RST output can then be rendered as a table.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>City Name</p></th>
<th class="head"><p>Abbreviation</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Lake of the Woods</p></td>
<td><p>LOTW</p></td>
</tr>
<tr class="row-odd"><td><p>Kittson</p></td>
<td><p>KITT</p></td>
</tr>
<tr class="row-even"><td><p>Roseau</p></td>
<td><p>ROSE</p></td>
</tr>
<tr class="row-odd"><td><p>Koochiching</p></td>
<td><p>KOOC</p></td>
</tr>
<tr class="row-even"><td><p>Marshall</p></td>
<td><p>MARS</p></td>
</tr>
<tr class="row-odd"><td><p>St. Louis</p></td>
<td><p>STLO</p></td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>For templates (<a class="reference internal" href="../mapfile/template.html#template"><span class="std std-ref">Templating</span></a>), there are a number of reserved
words.  If you have want to expose an attribute with a name that is
equal to a reserved word, you can not use the shorthand
[attribute_name], but will have to use construct [item
name=attribute_name] instead.  For example, in a template, [id] is
a system generated unique session id (see <a class="reference internal" href="../mapfile/template.html#template"><span class="std std-ref">Templating</span></a>).  So if
you have an attribute named “id” that you want to expose, you will
either have to rename it or use the construct [item name=id].</p>
</div>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p>
<a href="../about.html" title="About">About</a><br>
<a href="../products.html" title="Products">Products</a><br>
<a href="../community/index.html" title="Community">Community</a><br>
<a href="../development/index.html" title="Development">Development</a><br>
<a href="../download.html" title="Downloads">Downloads</a><br>
<a href="../documentation.html" title="Documentation">Documentation</a><br>
<a href="../faq.html" title="FAQ">FAQ</a><br>
<a href="../psc.html" title="PSC">PSC</a><br>
<a href="https://twitter.com/mapserver_osgeo" title="Twitter">Twitter</a>
</p>
  <h3>Current Table Of Contents</h3>
  <ul>
<li><a class="reference internal" href="#">Template-Driven Output</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#outputformat-declarations">OUTPUTFORMAT Declarations</a></li>
<li><a class="reference internal" href="#template-substitution-tags">Template Substitution Tags</a></li>
<li><a class="reference internal" href="#examples">Examples</a><ul>
<li><a class="reference internal" href="#header-body-footer">Header, Body, Footer</a></li>
<li><a class="reference internal" href="#gml3">GML3</a></li>
<li><a class="reference internal" href="#geojson">GeoJSON</a></li>
<li><a class="reference internal" href="#kml">KML</a></li>
<li><a class="reference internal" href="#restructuredtext-table">reStructuredText Table</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="kml_output.html" title="KML Output"
             >next</a> |</li>
        <li class="right" >
          <a href="tile_mode.html" title="Tile Mode"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../documentation.html" >MapServer 8.0.1 Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >Output Generation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Template-Driven Output</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; <a href="../copyright.html">Copyright</a> 2023, Open Source Geospatial Foundation.
      Last updated on 2023-12-22.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.5.
    </div>
  </body>
</html>