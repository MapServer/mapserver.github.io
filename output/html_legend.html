<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>HTML Legends with MapServer &#8212; MapServer 8.0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx.css?v=6c7b17ac" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=dd298242" />
    <link rel="stylesheet" type="text/css" href="../_static/ribbon.css?v=ea091bf4" />
    
    <script src="../_static/documentation_options.js?v=521b6f53"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    
    <link rel="icon" href="../_static/mapserver.ico"/>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="Inverse distance weighted interpolation" href="idw.html" />
    <link rel="prev" title="Flash Output" href="flash.html" /> 
  </head><body>


<!-- for main branch only, do not backport this -->

<table width="100%" style="width: 100%; background-color: white;">
  <tr>
    <td rowspan="2" style="padding: 10px 0px 10px 10px;">
      <a href="../index.html" title="Home"><img src="../_static/banner.png" alt="MapServer banner" border="0" /></a>
    </td>
    <td style="padding: 10px 10px 0px 0px; text-align: right; vertical-align: top;">
      <a href="../index.html" title="Home">Home</a> |
      <a href="../products.html" title="Products (MapServer core, MapCache, TinyOWS">Products</a> |
      <a href="https://github.com/mapserver/mapserver/issues/" title="Issue Tracker (MapServer core)">Issue Tracker</a> |
      <a href="../community/service_providers.html" title="Professional Service Providers">Service Providers</a> |      
      <a href="../faq.html" title="Frequently Asked Questions">FAQ</a> |
      <a href="https://twitter.com/mapserver_osgeo" title="Twitter" target="_blank">Twitter</a> |
      <a href="../download.html" title="Download Source or Binaries">Download </a> |
      <a class="badge" href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=KRJ2X44N3HA6U&source=url" target="_blank">
        <img src="https://img.shields.io/badge/donate-%E2%9D%A4%C2%A0-ff69b4.svg?style=flat" alt="Donate to MapServer">
      </a>
    </td>
  </tr>
  <tr>
    <td style="padding: 0px 10px 0px 0px; text-align: right; vertical-align: bottom;">
        <img src="../_static/flagicons/en.png" alt="en" title="en" border="0" width="18px" height="13px"/>
        
          <a href="../ar/output/html_legend.html"><img src="../_static/flagicons/ar.png" alt="ar" title="ar" border="0" /></a>
        
        
          <a href="../de/output/html_legend.html"><img src="../_static/flagicons/de.png" alt="de" title="de" border="0" /></a>
        
        
          <a href="../el/output/html_legend.html"><img src="../_static/flagicons/el.png" alt="el" title="el" border="0" /></a>
        
        
          <a href="../es/output/html_legend.html"><img src="../_static/flagicons/es.png" alt="es" title="es" border="0" /></a>
        
        
          <a href="../fr/output/html_legend.html"><img src="../_static/flagicons/fr.png" alt="fr" title="fr" border="0" /></a>
        
        
          <a href="../id/output/html_legend.html"><img src="../_static/flagicons/id.png" alt="id" title="id" border="0" /></a>
        
        
          <a href="../it/output/html_legend.html"><img src="../_static/flagicons/it.png" alt="it" title="it" border="0" /></a>
        
        
          <a href="../ja/output/html_legend.html"><img src="../_static/flagicons/ja.png" alt="ja" title="ja" border="0" /></a>
        
        
          <a href="../nl_NL/output/html_legend.html"><img src="../_static/flagicons/nl_NL.png" alt="nl_NL" title="nl_NL" border="0" /></a>
        
        
          <a href="../pl/output/html_legend.html"><img src="../_static/flagicons/pl.png" alt="pl" title="pl" border="0" /></a>
        
        
          <a href="../ru/output/html_legend.html"><img src="../_static/flagicons/ru.png" alt="ru" title="ru" border="0" /></a>
        
        
          <a href="../sq/output/html_legend.html"><img src="../_static/flagicons/sq.png" alt="sq" title="sq" border="0" /></a>
        
        
          <a href="../tr/output/html_legend.html"><img src="../_static/flagicons/tr.png" alt="tr" title="tr" border="0" /></a>
        

    </td>
  </tr>
</table>


    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="idw.html" title="Inverse distance weighted interpolation"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="flash.html" title="Flash Output"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../documentation.html" >MapServer 8.0.1 Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">Output Generation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">HTML Legends with MapServer</a></li> 
      </ul>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="html-legends-with-mapserver">
<span id="html-legend"></span><h1><a class="toc-backref" href="#table-of-contents" role="doc-backlink">HTML Legends with MapServer</a><a class="headerlink" href="#html-legends-with-mapserver" title="Link to this heading">¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd">Author<span class="colon">:</span></dt>
<dd class="field-odd"><p>Jeff McKenna</p>
</dd>
<dt class="field-even">Contact<span class="colon">:</span></dt>
<dd class="field-even"><p>jmckenna at gatewaygeomatics.com</p>
</dd>
<dt class="field-odd">Last Updated<span class="colon">:</span></dt>
<dd class="field-odd"><p>2022-08-20</p>
</dd>
</dl>
<nav class="contents" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#html-legends-with-mapserver" id="id1">HTML Legends with MapServer</a></p>
<ul>
<li><p><a class="reference internal" href="#introduction" id="id2">Introduction</a></p>
<ul>
<li><p><a class="reference internal" href="#implementation" id="id3">Implementation</a></p></li>
<li><p><a class="reference internal" href="#legend-object-of-mapfile" id="id4">Legend Object of Mapfile</a></p></li>
<li><p><a class="reference internal" href="#cgi-legend-tag" id="id5">CGI [legend] tag</a></p></li>
<li><p><a class="reference internal" href="#html-legend-template-file" id="id6">HTML Legend Template File</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#sample-site-using-the-html-legend" id="id7">Sample Site Using the HTML Legend</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="introduction">
<h2><a class="toc-backref" href="#table-of-contents" role="doc-backlink">Introduction</a><a class="headerlink" href="#introduction" title="Link to this heading">¶</a></h2>
<p>The HTML legend is an alternative to the traditional GIF legend in MapServer.
The following document describes the process for implementing an HTML legend
in MapServer CGI applications (NOTE: MapServer version &gt; 3.5 is required).</p>
<p>This document assumes that you are already familiar with certain aspects of
MapServer:</p>
<ul class="simple">
<li><p>Setting up MapServer mapfiles and templates.</p></li>
</ul>
<section id="implementation">
<h3><a class="toc-backref" href="#table-of-contents" role="doc-backlink">Implementation</a><a class="headerlink" href="#implementation" title="Link to this heading">¶</a></h3>
<p>Key components for generating HTML legends are 1) a template parameter in the
legend object, 2) a CGI [legend] tag in the HTML file, and 3) an HTML legend
template file. So that means that if the HTML page has the CGI [legend] parameter
set, and the mapfile has a LEGEND object with its TEMPLATE set to a valid HTML
legend file then an HTML legend will be returned. The following sections discuss
these components.</p>
</section>
<section id="legend-object-of-mapfile">
<h3><a class="toc-backref" href="#table-of-contents" role="doc-backlink">Legend Object of Mapfile</a><a class="headerlink" href="#legend-object-of-mapfile" title="Link to this heading">¶</a></h3>
<p>The HTML legend is enabled by a new TEMPLATE parameter in the Legend Object of
the mapfile. If TEMPLATE is set in the Legend Object, then the HTML legend template
file is read and used to generate an HTML legend which will be inserted at the
location of the [legend] tag in the main HTML template. Similar to other MapServer
templates, the HTML legend template filename MUST end with an “.html” extension.</p>
<p><em>Example 1. Sample Legend Object with the new TEMPLATE parameter</em></p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="p">...</span>
<span class="c"># LEGEND object</span>
<span class="k">LEGEND</span>
  <span class="k">STATUS</span> <span class="nb">ON</span>
  <span class="k">KEYSIZE</span> <span class="mi">18</span> <span class="mi">12</span>
  <span class="c"># LABEL object</span>
  <span class="k">LABEL</span>
    <span class="k">TYPE</span> <span class="nb">BITMAP</span>
    <span class="k">SIZE</span> <span class="nb">MEDIUM</span>
    <span class="k">COLOR</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">89</span>
  <span class="k">END</span>
  <span class="k">TEMPLATE</span> <span class="s">&quot;legend.html&quot;</span>  <span class="c">### HTML template file</span>
<span class="k">END</span>
<span class="p">...</span>
</pre></div>
</div>
<p>If TEMPLATE is not set, then the [legend] tag produces a regular image in a GIF/PNG
image (the traditional behaviour).</p>
</section>
<section id="cgi-legend-tag">
<h3><a class="toc-backref" href="#table-of-contents" role="doc-backlink">CGI [legend] tag</a><a class="headerlink" href="#cgi-legend-tag" title="Link to this heading">¶</a></h3>
<p>The traditional CGI [legend] tag returns the URL of an image, so it is usually
used inside an &lt;IMG SRC=[legend]&gt; tag in the HTML file. The new HTML [legend]
tag returns a block of HTML, so when converting an existing application template
from using a traditional image legend to the new HTML legend, you have to remove
the IMG tag in the main application template. Also note that if legend mode is
specified in the URL, then MapServer will return a gif containing the whole legend
if no template is specified.</p>
<p>See the <a class="reference internal" href="../cgi/index.html#cgi"><span class="std std-ref">CGI Reference doc</span></a> for more information on CGI parameters.</p>
<p><em>Example 2. [legend] tag in the main HTML template (with TEMPLATE set)</em></p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span>...
<span class="p">&lt;</span><span class="nt">FONT</span> <span class="na">SIZE</span><span class="o">=</span><span class="s">+1</span><span class="p">&gt;&lt;</span><span class="nt">B</span><span class="p">&gt;</span>Legend<span class="p">&lt;/</span><span class="nt">B</span><span class="p">&gt;&lt;/</span><span class="nt">FONT</span><span class="p">&gt;&lt;</span><span class="nt">BR</span><span class="p">&gt;&lt;</span><span class="nt">HR</span><span class="p">&gt;</span>[legend]<span class="p">&lt;</span><span class="nt">HR</span><span class="p">&gt;</span>
...
</pre></div>
</div>
<p><em>Example 3. [legend] tag in the main HTML template (with TEMPLATE not set)</em></p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span>...
<span class="p">&lt;</span><span class="nt">FONT</span> <span class="na">SIZE</span><span class="o">=</span><span class="s">+1</span><span class="p">&gt;&lt;</span><span class="nt">B</span><span class="p">&gt;</span>Legend<span class="p">&lt;/</span><span class="nt">B</span><span class="p">&gt;&lt;/</span><span class="nt">FONT</span><span class="p">&gt;&lt;</span><span class="nt">BR</span><span class="p">&gt;&lt;</span><span class="nt">HR</span><span class="p">&gt;&lt;</span><span class="nt">IMG</span> <span class="na">SRC</span><span class="o">=</span><span class="s">&quot;[legend]&quot;</span><span class="p">&gt;&lt;</span><span class="nt">HR</span><span class="p">&gt;</span>
...
</pre></div>
</div>
</section>
<section id="html-legend-template-file">
<h3><a class="toc-backref" href="#table-of-contents" role="doc-backlink">HTML Legend Template File</a><a class="headerlink" href="#html-legend-template-file" title="Link to this heading">¶</a></h3>
<p>The HTML legend template file is a separate file that contains 0 or 1 of each of the
following tags that define blocks of HTML to use in building the legend:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">leg_group_html</span><span class="p">]</span> <span class="o">...</span> <span class="p">[</span><span class="o">/</span><span class="n">leg_group_html</span><span class="p">]</span>
<span class="p">[</span><span class="n">leg_layer_html</span> <span class="o">&lt;</span><span class="n">OPTIONAL</span> <span class="n">PARAMS</span><span class="o">&gt;</span><span class="p">]</span> <span class="o">...</span> <span class="p">[</span><span class="o">/</span><span class="n">leg_layer_html</span><span class="p">]</span>
<span class="p">[</span><span class="n">leg_class_html</span> <span class="o">&lt;</span><span class="n">OPTIONAL</span> <span class="n">PARAMS</span><span class="o">&gt;</span><span class="p">]</span> <span class="o">...</span> <span class="p">[</span><span class="o">/</span><span class="n">leg_class_html</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>Note</strong></p>
<p>Any text or HTML tags outside the [leg_*_html] tag pairs in the legend template
file are ignored by the template parser.</p>
<p>The following example shows what an HTML legend TEMPLATE file could look like:</p>
<p><em>Example 4. An HTML legend TEMPLATE file</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">leg_group_html</span><span class="p">]</span>
<span class="o">&lt;</span><span class="n">tr</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">td</span> <span class="n">colspan</span><span class="o">=</span><span class="mi">3</span> <span class="n">bgcolor</span><span class="o">=</span><span class="c1">#cccccc&gt;&lt;b&gt;[leg_group_name]&lt;/b&gt;&lt;/td&gt;</span>
<span class="o">&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
<span class="p">[</span><span class="o">/</span><span class="n">leg_group_html</span><span class="p">]</span>

<span class="p">[</span><span class="n">leg_layer_html</span> <span class="n">order_metadata</span><span class="o">=</span><span class="n">legend_order</span> <span class="n">opt_flag</span><span class="o">=</span><span class="mi">5</span><span class="p">]</span>
<span class="o">&lt;</span><span class="n">tr</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nb">input</span> <span class="nb">type</span><span class="o">=</span><span class="n">checkbox</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;map_[leg_layer_name]_status&quot;</span>
       <span class="n">value</span><span class="o">=</span><span class="mi">1</span> <span class="p">[</span><span class="k">if</span> <span class="n">name</span><span class="o">=</span><span class="n">layer_status</span> <span class="n">oper</span><span class="o">=</span><span class="n">eq</span> <span class="n">value</span><span class="o">=</span><span class="mi">2</span><span class="p">]</span><span class="n">CHECKED</span><span class="p">[</span><span class="o">/</span><span class="k">if</span><span class="p">]</span><span class="o">&gt;</span>
     <span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">td</span> <span class="n">colspan</span><span class="o">=</span><span class="mi">2</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s2">&quot;[metadata name=href]&quot;</span><span class="o">&gt;</span><span class="p">[</span><span class="n">metadata</span> <span class="n">name</span><span class="o">=</span><span class="n">layer_title</span><span class="p">]</span><span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">tr</span> <span class="o">&gt;</span>
<span class="p">[</span><span class="o">/</span><span class="n">leg_layer_html</span><span class="p">]</span>

<span class="p">[</span><span class="n">leg_class_html</span><span class="p">]</span>
<span class="o">&lt;</span><span class="n">tr</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">td</span> <span class="n">width</span><span class="o">=</span><span class="mi">15</span><span class="o">&gt;</span> <span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">img</span> <span class="n">src</span><span class="o">=</span><span class="s2">&quot;[leg_icon width=20 height=10]&quot;</span> <span class="n">width</span><span class="o">=</span><span class="mi">20</span> <span class="n">height</span><span class="o">=</span><span class="mi">10</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;</span>
        <span class="p">[</span><span class="n">leg_class_name</span><span class="p">]</span>
    <span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
<span class="p">[</span><span class="o">/</span><span class="n">leg_class_html</span><span class="p">]</span>
</pre></div>
</div>
<p>Supported Tags for the TEMPLATE file:</p>
<section id="header-block">
<h4>HEADER block<a class="headerlink" href="#header-block" title="Link to this heading">¶</a></h4>
<dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>[leg_header_html]…[/leg_header_html]</p>
</dd>
<dt class="field-even">Description<span class="colon">:</span></dt>
<dd class="field-even"><p>HTML block to use as the header of the legend.</p>
</dd>
</dl>
</section>
<section id="footer-block">
<h4>FOOTER block<a class="headerlink" href="#footer-block" title="Link to this heading">¶</a></h4>
<dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>[leg_footer_html]…[/leg_footer_html]</p>
</dd>
<dt class="field-even">Description<span class="colon">:</span></dt>
<dd class="field-even"><p>HTML block to use as the footer of the legend.</p>
</dd>
</dl>
<p><em>Example 5. HTML Legend File Using Header/Footer Blocks</em></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span>[leg_header_html]
<span class="w">  </span><span class="nt">&lt;p&gt;&lt;b&gt;</span>my<span class="w"> </span>header<span class="nt">&lt;/b&gt;&lt;/p&gt;</span>
[/leg_header_html]

[leg_layer_html]
<span class="w">  </span>...
[/leg_layer_html]

[leg_footer_html]
<span class="w">  </span><span class="nt">&lt;p&gt;&lt;b&gt;</span>my<span class="w"> </span>footer<span class="nt">&lt;/b&gt;&lt;/p&gt;</span>
[/leg_footer_html]
</pre></div>
</div>
</section>
<section id="group-block">
<h4>GROUP block<a class="headerlink" href="#group-block" title="Link to this heading">¶</a></h4>
<dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>[leg_group_html &lt;OPTIONAL PARAMS&gt;]…[/leg_group_html]</p>
</dd>
<dt class="field-even">Description<span class="colon">:</span></dt>
<dd class="field-even"><p>HTML block to use for layer group headers if layers should be grouped
in the legend. If not set then layers are not grouped in the legend.</p>
</dd>
</dl>
<p>When the [leg_group_html] tag is used, then layers that don’t belong to any group
(i.e. LAYER GROUP not set in the mapfile) and their classes will not show up at all
in the legend. The group list is decided by the order_metadata parameter, which is
explained later.</p>
<p><strong>SUPPORTED PARAMETERS:</strong></p>
<dl class="field-list">
<dt class="field-odd">Parameter<span class="colon">:</span></dt>
<dd class="field-odd"><p>opt_flag=&lt;bit_mask&gt;</p>
</dd>
<dt class="field-even">Description<span class="colon">:</span></dt>
<dd class="field-even"><p>Control the group’s display, by adding the following values
(default is 15). The opt_flag is applied on all layers in the group.
If at least one layer matches the flag, the group will show up in the legend.</p>
<blockquote>
<div><dl class="field-list">
<dt class="field-odd">1<span class="colon">:</span></dt>
<dd class="field-odd"><p>If set, show group even if all layers in group are out of scale (default:
hide groups out of scale).</p>
</dd>
<dt class="field-even">2<span class="colon">:</span></dt>
<dd class="field-even"><p>If set, show group even if all layers in group have status OFF (default:
hide groups with STATUS OFF).</p>
</dd>
<dt class="field-odd">4<span class="colon">:</span></dt>
<dd class="field-odd"><p>If set, show group even if all layers in group are of type QUERY (default:
hide group of TYPE QUERY)</p>
</dd>
<dt class="field-even">8<span class="colon">:</span></dt>
<dd class="field-even"><p>If set, show group even if all layers in group are of type ANNOTATION
(default: hide groups of TYPE ANNOTATION)</p>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 6.2: </span>Use CLASS-&gt;LABEL or CLASS-&gt;STYLE in your existing layer instead of a separate ANNOTATION layer</p>
</div>
</dd>
</dl>
<p>e.g. opt_flag=12 (shown below) means show all layer types, including QUERY and ANNOTATION
layers (4 + 8)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">leg_group_html</span> <span class="n">opt_flag</span><span class="o">=</span><span class="mi">12</span><span class="p">]</span>
   <span class="o">...</span>
<span class="p">[</span><span class="o">/</span><span class="n">leg_group_html</span><span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
</dd>
</dl>
<p><strong>SUPPORTED TAGS:</strong></p>
<dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>[leg_group_name]</p>
</dd>
<dt class="field-even">Description<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Returns the group’s name.</em></p>
</dd>
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>[layer_status]</p>
</dd>
<dt class="field-even">Description<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Returns the status of the first layer in the group.</em></p>
</dd>
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>[leg_icon width=&lt;optional_width&gt; height=&lt;optional_height&gt;]</p>
</dd>
<dt class="field-even">Description<span class="colon">:</span></dt>
<dd class="field-even"><p><em>In the group context, the [leg_icon] tag returns the URL of a legend
icon for the first class in the first layer that’s part of this group.</em></p>
</dd>
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>[metadata name=&lt;metadata_field_to_display&gt;]</p>
</dd>
<dt class="field-even">Description<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Returns specified metadata value from web’s metadata.</em></p>
</dd>
</dl>
<p>e.g. the group block below simply displays the name of the group in the legend:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">leg_group_html</span><span class="p">]</span>
  <span class="o">&lt;</span><span class="n">tr</span><span class="o">&gt;&lt;</span><span class="n">td</span> <span class="n">colspan</span><span class="o">=</span><span class="mi">2</span><span class="o">&gt;&lt;</span><span class="n">b</span><span class="o">&gt;</span><span class="p">[</span><span class="n">leg_group_name</span><span class="p">]</span><span class="o">&lt;/</span><span class="n">b</span><span class="o">&gt;&lt;/</span><span class="n">td</span><span class="o">&gt;&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
<span class="p">[</span><span class="o">/</span><span class="n">leg_group_html</span><span class="p">]</span>
</pre></div>
</div>
</section>
<section id="layer-block">
<h4>LAYER block<a class="headerlink" href="#layer-block" title="Link to this heading">¶</a></h4>
<dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>[leg_layer_html &lt;OPTIONAL PARAMS&gt;] … [/leg_layer_html]</p>
</dd>
<dt class="field-even">Description<span class="colon">:</span></dt>
<dd class="field-even"><p>HTML block to use for layer header. If not set then no layer headers
are displayed (could allow a legend with only classes in it).</p>
</dd>
</dl>
<p><strong>SUPPORTED PARAMETERS:</strong></p>
<dl class="field-list">
<dt class="field-odd">Parameter<span class="colon">:</span></dt>
<dd class="field-odd"><p>order_metadata=&lt;field_to_order_by&gt;</p>
</dd>
<dt class="field-even">Description<span class="colon">:</span></dt>
<dd class="field-even"><p>Specifies that the value of the layer metadata &lt;field_to_order_by&gt;
controls the order and visibility of the layers in the legend.</p>
<blockquote>
<div><ul class="simple">
<li><p>Layers with &lt;field_to_order_by&gt; &gt;= 0 are sorted in order of this value,
with multiple layers with same value being accepted, in which case the map
layer order applies between those layers.</p></li>
<li><p>Layers with &lt;field_to_order_by&gt; &lt; 0 are always hidden in the legend.</p></li>
</ul>
</div></blockquote>
</dd>
<dt class="field-odd">Parameter<span class="colon">:</span></dt>
<dd class="field-odd"><p>opt_flag=&lt;bit_mask&gt;</p>
</dd>
<dt class="field-even">Description<span class="colon">:</span></dt>
<dd class="field-even"><p>Control the layer display process. Add the values below to acquire
the desired options (default is 15):</p>
<blockquote>
<div><dl class="field-list">
<dt class="field-odd">1<span class="colon">:</span></dt>
<dd class="field-odd"><p>If set, show layer even if out of scale (default: hide layers out of scale).</p>
</dd>
<dt class="field-even">2<span class="colon">:</span></dt>
<dd class="field-even"><p>If set, show layer even if status is OFF (default: hide layers with STATUS OFF).</p>
</dd>
<dt class="field-odd">4<span class="colon">:</span></dt>
<dd class="field-odd"><p>If set, show layer even if type is QUERY (default: hide layers of TYPE QUERY)</p>
</dd>
<dt class="field-even">8<span class="colon">:</span></dt>
<dd class="field-even"><p>If set, show layer even if type is ANNOTATION (default: hide layers of TYPE ANNOTATION)</p>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 6.2: </span>Use CLASS-&gt;LABEL or CLASS-&gt;STYLE in your existing layer instead of a separate ANNOTATION layer</p>
</div>
</dd>
</dl>
<p>e.g. opt_flag=14 (shown below) means do not show layers in the legend that are out of scale.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">leg_layer_html</span> <span class="n">opt_flag</span><span class="o">=</span><span class="mi">14</span><span class="p">]</span>
  <span class="o">...</span>
<span class="p">[</span><span class="o">/</span><span class="n">leg_layer_html</span><span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
</dd>
</dl>
<p><strong>SUPPORTED TAGS:</strong></p>
<dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>[leg_layer_group]</p>
</dd>
<dt class="field-even">Description<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Returns the group name of the layer.  This was added to MapServer v4.8.</em></p>
</dd>
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>[leg_layer_index]</p>
</dd>
<dt class="field-even">Description<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Returns the mapfile index value of the layer, which is useful for ordering.
This was added to MapServer v4.8.</em></p>
</dd>
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>[leg_layer_maxscale]</p>
</dd>
<dt class="field-even">Description<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Returns the maximum scale set for the layer.  This was added to MapServer v4.8.</em></p>
</dd>
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>[leg_layer_minscale]</p>
</dd>
<dt class="field-even">Description<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Returns the minimum scale set for the layer.  This was added to MapServer v4.8.</em></p>
</dd>
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>[leg_layer_name]</p>
</dd>
<dt class="field-even">Description<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Returns the current LAYER NAME value.</em></p>
</dd>
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>[leg_icon width=&lt;optional_width&gt; height=&lt;optional_height&gt;]</p>
</dd>
<dt class="field-even">Description<span class="colon">:</span></dt>
<dd class="field-even"><p><em>In the layer context, the [leg_icon] tag returns the URL of a legend icon
for the first class in this layer.</em></p>
</dd>
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>[metadata name=&lt;metadata_field_to_display&gt;]</p>
</dd>
<dt class="field-even">Description<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Returns specified metadata value from this layer’s metadata and
web’s metadata.</em></p>
</dd>
</dl>
<p>e.g. the layer block below simply displays an icon of the layer’s class and
the layer name:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span>[leg_layer_html]
<span class="w">   </span><span class="nt">&lt;tr&gt;&lt;td&gt;&lt;img</span><span class="w"> </span><span class="na">src=</span><span class="s">[leg_icon</span><span class="w"> </span><span class="na">width=</span><span class="s">15</span><span class="w"> </span><span class="na">height=</span><span class="s">15]</span><span class="nt">&gt;&lt;b&gt;</span>[leg_layer_name]<span class="nt">&lt;/b&gt;&lt;/td&gt;&lt;/tr&gt;</span>
[/leg_layer_html]
</pre></div>
</div>
</section>
<section id="class-block">
<h4>CLASS block<a class="headerlink" href="#class-block" title="Link to this heading">¶</a></h4>
<dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>[leg_class_html &lt;OPTIONAL PARAMS&gt;] … [/leg_class_html]</p>
</dd>
<dt class="field-even">Description<span class="colon">:</span></dt>
<dd class="field-even"><p>HTML block to use for classes. If not set then no classes are displayed
(could allow a legend with only layer headers in it). Note that classes with
NULL (i.e. empty) NAMEs are not displayed.</p>
</dd>
</dl>
<p><strong>SUPPORTED PARAMETERS:</strong></p>
<dl class="field-list">
<dt class="field-odd">Parameter<span class="colon">:</span></dt>
<dd class="field-odd"><p>opt_flag=&lt;bit_mask&gt;</p>
</dd>
<dt class="field-even">Description<span class="colon">:</span></dt>
<dd class="field-even"><p>Control the layer (i.e. class) display process. Add the values below to acquire
the desired options (default is 15). Note that using this parameter for the
CLASS block has the same effect as using the opt_flag parameter in the LAYER block.</p>
<blockquote>
<div><dl class="field-list">
<dt class="field-odd">1<span class="colon">:</span></dt>
<dd class="field-odd"><p>If set, show layer even if out of scale (default: hide layers out of scale).</p>
</dd>
<dt class="field-even">2<span class="colon">:</span></dt>
<dd class="field-even"><p>If set, show layer even if status is OFF (default: hide layers with STATUS OFF).</p>
</dd>
<dt class="field-odd">4<span class="colon">:</span></dt>
<dd class="field-odd"><p>If set, show layer even if type is QUERY (default: hide layers of TYPE QUERY)</p>
</dd>
<dt class="field-even">8<span class="colon">:</span></dt>
<dd class="field-even"><p>If set, show layer even if type is ANNOTATION (default: hide layers of TYPE ANNOTATION)</p>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 6.2: </span>Use CLASS-&gt;LABEL or CLASS-&gt;STYLE in your existing layer instead of a separate ANNOTATION layer</p>
</div>
</dd>
</dl>
<p>e.g. opt_flag=14 (shown below) means do not show classes in the legend that are out of scale.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">leg_class_html</span> <span class="n">opt_flag</span><span class="o">=</span><span class="mi">14</span><span class="p">]</span>
  <span class="o">...</span>
<span class="p">[</span><span class="o">/</span><span class="n">leg_class_html</span><span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
</dd>
</dl>
<p><strong>SUPPORTED TAGS:</strong></p>
<dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>[leg_class_index]</p>
</dd>
<dt class="field-even">Description<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Returns the mapfile index value of the class, which is useful for ordering
and legend icon creation.  This was added to MapServer v4.8.</em></p>
</dd>
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>[leg_class_maxscale]</p>
</dd>
<dt class="field-even">Description<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Returns the maximum scale set for the class.  This was added to MapServer v4.8.</em></p>
</dd>
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>[leg_class_minscale]</p>
</dd>
<dt class="field-even">Description<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Returns the minimum scale set for the class.  This was added to MapServer v4.8.</em></p>
</dd>
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>[leg_class_name]</p>
</dd>
<dt class="field-even">Description<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Returns the CLASS NAME value.</em></p>
</dd>
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>[leg_class_title]</p>
</dd>
<dt class="field-even">Description<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Returns the CLASS TITLE value.</em></p>
</dd>
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>[leg_layer_name]</p>
</dd>
<dt class="field-even">Description<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Returns the parent layer name.  This was added to MapServer v4.8.</em></p>
</dd>
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>[leg_icon width=&lt;optional_width&gt; height=&lt;optional_height&gt;]</p>
</dd>
<dt class="field-even">Description<span class="colon">:</span></dt>
<dd class="field-even"><p><em>In the layer context, the [leg_icon] tag returns the URL of a legend icon
for the first class in this layer.</em></p>
</dd>
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>[metadata name=&lt;metadata_field_to_display&gt;]</p>
</dd>
<dt class="field-even">Description<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Returns specified metadata value from the metadata of the layer to which this
class belongs and web’s metadata.</em></p>
</dd>
</dl>
<p>e.g. the class block below simply displays an icon of the layer’s class
and the class name:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span>[leg_class_html]
<span class="w">  </span><span class="nt">&lt;tr&gt;&lt;td&gt;&lt;img</span><span class="w"> </span><span class="na">src=</span><span class="s">[leg_icon</span><span class="w"> </span><span class="na">width=</span><span class="s">15</span><span class="w"> </span><span class="na">height=</span><span class="s">15]</span><span class="nt">&gt;&lt;b&gt;</span>[leg_class_name]<span class="nt">&lt;/b&gt;&lt;/td&gt;&lt;/tr&gt;</span>
[/leg_class_html]
</pre></div>
</div>
</section>
<section id="conditional-text">
<h4>CONDITIONAL text<a class="headerlink" href="#conditional-text" title="Link to this heading">¶</a></h4>
<p>[if] tags can be used in any of the [leg_*_html] tags above to place conditional
text. The syntax is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="k">if</span> <span class="n">name</span><span class="o">=&lt;</span><span class="n">field_to_check</span><span class="o">&gt;</span> <span class="n">oper</span><span class="o">=&lt;</span><span class="n">eq</span><span class="o">|</span><span class="n">neq</span><span class="o">|</span><span class="n">isset</span><span class="o">|</span><span class="n">isnull</span><span class="o">&gt;</span> <span class="n">value</span><span class="o">=&lt;</span><span class="n">to_compare_with_field</span><span class="o">&gt;</span><span class="p">]</span> <span class="o">...</span> <span class="p">[</span><span class="o">/</span><span class="k">if</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>Note:</strong></p>
<p>Nested IF’s are supported. Parameter “oper” can be “eq” for equal, “neq” for not
equal, “isset” (self-explanatory), or “isnull” (self-explanatory). The default
value is equal.</p>
<p><em>Example 6. [if] tag can be used to maintain the state of a layer checkbox</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">leg_layer_html</span> <span class="n">order_metadata</span><span class="o">=</span><span class="n">legend_order</span> <span class="n">opt_flag</span><span class="o">=</span><span class="mi">5</span><span class="p">]</span>
<span class="o">&lt;</span><span class="n">tr</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nb">input</span> <span class="nb">type</span><span class="o">=</span><span class="n">checkbox</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;map_[leg_layer_name]_status&quot;</span>
         <span class="n">value</span><span class="o">=</span><span class="mi">1</span> <span class="p">[</span><span class="k">if</span> <span class="n">name</span><span class="o">=</span><span class="n">layer_status</span> <span class="n">oper</span><span class="o">=</span><span class="n">eq</span> <span class="n">value</span><span class="o">=</span><span class="mi">2</span><span class="p">]</span><span class="n">CHECKED</span><span class="p">[</span><span class="o">/</span><span class="k">if</span><span class="p">]</span> <span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">td</span> <span class="n">colspan</span><span class="o">=</span><span class="mi">2</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s2">&quot;[metadata name=href]&quot;</span><span class="o">&gt;</span><span class="p">[</span><span class="n">metadata</span> <span class="n">name</span><span class="o">=</span><span class="n">layer_title</span><span class="p">]</span><span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">tr</span> <span class="o">&gt;</span>
<span class="p">[</span><span class="o">/</span><span class="n">leg_layer_html</span><span class="p">]</span>
</pre></div>
</div>
<p>The possible values that can be tested in an [if] tag depend on the context in
which the [if] tag is used. At the moment, the number of values that can be
tested is limited, but new values may be added as needed.</p>
<p>Note that the order of the items in the following [if] contexts are listed by
their order of precedence. The rule is always that special keywords have top
priority (e.g. layer_status, etc.), followed by layer-level metadata, and ending
with map-level metadata. The possible values that can be tested are as follows:</p>
<p>In a <strong>[leg_group_html]</strong> context:</p>
<ul>
<li><p>[if name=layer_status value=…] … [/if]</p>
<blockquote>
<div><p>value is the layer status of the first layer that belongs to the group in
integer format: 0=OFF, 1=ON, 2=DEFAULT</p>
</div></blockquote>
</li>
<li><p>[if name=layer_visible value=…] … [/if]</p>
<blockquote>
<div><p>value is the visibility of the first layer in the group: 0=NOT VISIBLE,
1=VISIBLE</p>
</div></blockquote>
</li>
<li><p>[if name=group_name value=…] … [/if]</p></li>
<li><p>[if name=any_layer_metadata value=…] … [/if]</p>
<blockquote>
<div><p>Uses metadata value from the first layer in the mapfile that belongs to that group</p>
</div></blockquote>
</li>
<li><p>[if name=any_web_metadata value=…] … [/if]</p></li>
<li><p>[if name=layer_queryable value=…] … [/if]</p>
<blockquote>
<div><div class="versionadded">
<p><span class="versionmodified added">New in version 5.6.</span></p>
</div>
<p>value is the queryability of the first layer in the group: 0=NOT
QUERYABLE, 1=QUERYABLE</p>
</div></blockquote>
</li>
</ul>
<p>In a <strong>[leg_layer_html]</strong> context:</p>
<ul>
<li><p>[if name=layer_status value=…] … [/if]</p>
<blockquote>
<div><p>value is the layer’s status in integer format: 0=OFF, 1=ON, 2=DEFAULT</p>
</div></blockquote>
</li>
<li><p>[if name=layer_type value=…] … [/if]</p>
<blockquote>
<div><p>value is the layer’s type in integer format: 0=POINT, 1=LINE, 2=POLYGON,
3=RASTER, 4=ANNOTATION (deprecated since 6.2), 5=QUERY, 6=CIRCLE</p>
</div></blockquote>
</li>
<li><p>[if name=layer_name value=…] … [/if]</p>
<blockquote>
<div><p>value is the layer’s name in string format</p>
</div></blockquote>
</li>
<li><p>[if name=layer_group value=…] … [/if]</p>
<blockquote>
<div><p>value is the layer’s group name in string format</p>
</div></blockquote>
</li>
<li><p>[if name=layer_visible value=…] … [/if]</p>
<blockquote>
<div><p>value is the visibility of the layer: 0=NOT VISIBLE, 1=VISIBLE</p>
</div></blockquote>
</li>
<li><p>[if name=any_layer_metadata value=…] … [/if]</p></li>
<li><p>[if name=any_web_metadata value=…] … [/if]</p></li>
<li><p>[if name=layer_queryable value=…] … [/if]</p>
<blockquote>
<div><div class="versionadded">
<p><span class="versionmodified added">New in version 5.6.</span></p>
</div>
<p>value is the queryability of the layer: 0=NOT QUERYABLE,
1=QUERYABLE</p>
</div></blockquote>
</li>
</ul>
<p>In a <strong>[leg_class_html]</strong> context:</p>
<ul>
<li><p>[if name=layer_status value=…] … [/if]</p>
<blockquote>
<div><p>value is the status of the layer in which the class is located</p>
</div></blockquote>
</li>
<li><p>[if name=layer_type value=…] … [/if]</p>
<blockquote>
<div><p>value is the layer’s type in integer format: 0=POINT, 1=LINE, 2=POLYGON,
3=RASTER, 4=ANNOTATION (deprecated since 6.2), 5=QUERY, 6=CIRCLE</p>
</div></blockquote>
</li>
<li><p>[if name=layer_name value=…] … [/if]</p>
<blockquote>
<div><p>value is the layer’s name in string format</p>
</div></blockquote>
</li>
<li><p>[if name=layer_group value=…] … [/if]</p>
<blockquote>
<div><p>value is the layer’s group name in string format</p>
</div></blockquote>
</li>
<li><p>[if name=layer_visible value=…] … [/if]</p>
<blockquote>
<div><p>value is the visibility of the layer: 0=NOT VISIBLE, 1=VISIBLE</p>
</div></blockquote>
</li>
<li><p>[if name=class_name value=…] … [/if]</p></li>
<li><p>[if name=any_layer_metadata value=…] … [/if]</p></li>
<li><p>[if name=any_web_metadata value=…] … [/if]</p></li>
<li><p>[if name=layer_queryable value=…] … [/if]</p>
<blockquote>
<div><div class="versionadded">
<p><span class="versionmodified added">New in version 5.6.</span></p>
</div>
<p>value is the queryability of the layer: 0=NOT QUERYABLE,
1=QUERYABLE</p>
</div></blockquote>
</li>
</ul>
</section>
</section>
</section>
<section id="sample-site-using-the-html-legend">
<h2><a class="toc-backref" href="#table-of-contents" role="doc-backlink">Sample Site Using the HTML Legend</a><a class="headerlink" href="#sample-site-using-the-html-legend" title="Link to this heading">¶</a></h2>
<p><a class="reference external" href="https://demo.mapserver.org/itasca_legend/">https://demo.mapserver.org/itasca_legend/</a></p>
<p>This demo is based on the MapServer Itasca demo and contains several variations
of HTML Legends, some of which are listed below:</p>
<ul>
<li><p>“HTML Legend 1” - displays classes only, similar to the traditional legends:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span>[leg_class_html<span class="w"> </span>opt_flag=15]
<span class="w">   </span><span class="nt">&lt;img</span><span class="w"> </span><span class="na">src=</span><span class="s">[leg_icon]</span><span class="nt">&gt;</span><span class="w"> </span>[leg_class_name]<span class="nt">&lt;br&gt;</span>
[/leg_class_html]
</pre></div>
</div>
</li>
<li><p>“HTML Legend 2” - displays layer titles with HREF links and classes:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span>[leg_layer_html<span class="w"> </span>order_metadata=WMS_ORDER<span class="w"> </span>visibility_flag=15]
<span class="w">   </span><span class="nt">&lt;a</span><span class="w"> </span><span class="na">href=</span><span class="s">&quot;[leg_layer_name]&quot;</span><span class="nt">&gt;</span>[metadata<span class="w"> </span>name=WMS_TITLE]<span class="nt">&lt;/a&gt;&lt;BR&gt;</span>
[/leg_layer_html]

[leg_class_html<span class="w"> </span>visibility_flag=15]
<span class="w">   </span><span class="nt">&lt;img</span><span class="w"> </span><span class="na">src=</span><span class="s">[leg_icon]</span><span class="nt">&gt;</span><span class="w"> </span>[leg_class_name]<span class="nt">&lt;br&gt;</span>
[/leg_class_html]
</pre></div>
</div>
</li>
<li><p>“HTML Legend 3” - displays layers by group, with checkboxes to turn layers on/off:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">leg_group_html</span><span class="p">]</span>
   <span class="o">&lt;</span><span class="n">tr</span><span class="o">&gt;&lt;</span><span class="n">td</span> <span class="n">colspan</span><span class="o">=</span><span class="mi">2</span><span class="o">&gt;&lt;</span><span class="n">b</span><span class="o">&gt;</span><span class="p">[</span><span class="n">leg_group_name</span><span class="p">]</span><span class="o">&lt;/</span><span class="n">b</span><span class="o">&gt;&lt;/</span><span class="n">td</span><span class="o">&gt;&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
<span class="p">[</span><span class="o">/</span><span class="n">leg_group_html</span><span class="p">]</span>

<span class="p">[</span><span class="n">leg_layer_html</span> <span class="n">order_metadata</span><span class="o">=</span><span class="n">WMS_ORDER</span> <span class="n">opt_flag</span><span class="o">=</span><span class="mi">15</span><span class="p">]</span>
   <span class="o">&lt;</span><span class="n">tr</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;&lt;</span><span class="nb">input</span> <span class="nb">type</span><span class="o">=</span><span class="n">checkbox</span> <span class="n">name</span><span class="o">=</span><span class="n">layer</span> <span class="n">value</span><span class="o">=</span><span class="p">[</span><span class="n">leg_layer_name</span><span class="p">]</span>
          <span class="p">[</span><span class="k">if</span> <span class="n">name</span><span class="o">=</span><span class="n">layer_status</span> <span class="n">value</span><span class="o">=</span><span class="mi">1</span><span class="p">]</span><span class="n">CHECKED</span><span class="p">[</span><span class="o">/</span><span class="k">if</span><span class="p">]</span><span class="o">&gt;</span>
           <span class="p">[</span><span class="k">if</span> <span class="n">name</span><span class="o">=</span><span class="n">layer_type</span> <span class="n">value</span><span class="o">=</span><span class="mi">4</span><span class="p">]</span>
               <span class="o">&lt;</span><span class="n">img</span> <span class="n">src</span><span class="o">=</span><span class="p">[</span><span class="n">leg_icon</span> <span class="n">width</span><span class="o">=</span><span class="mi">22</span> <span class="n">height</span><span class="o">=</span><span class="mi">18</span><span class="p">]</span><span class="o">&gt;</span>
           <span class="p">[</span><span class="o">/</span><span class="k">if</span><span class="p">]</span>
           <span class="p">[</span><span class="k">if</span> <span class="n">name</span><span class="o">=</span><span class="n">layer_type</span> <span class="n">oper</span><span class="o">=</span><span class="n">neq</span> <span class="n">value</span><span class="o">=</span><span class="mi">4</span><span class="p">]</span><span class="o">&lt;</span><span class="n">img</span> <span class="n">src</span><span class="o">=</span><span class="p">[</span><span class="n">leg_icon</span><span class="p">]</span><span class="o">&gt;</span><span class="p">[</span><span class="o">/</span><span class="k">if</span><span class="p">]</span>
        <span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;</span>
           <span class="o">&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s2">&quot;[leg_layer_name]&quot;</span><span class="o">&gt;</span><span class="p">[</span><span class="n">metadata</span> <span class="n">name</span><span class="o">=</span><span class="n">WMS_TITLE</span><span class="p">]</span><span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
   <span class="o">&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
<span class="p">[</span><span class="o">/</span><span class="n">leg_layer_html</span><span class="p">]</span>
</pre></div>
</div>
</li>
</ul>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p>
<a href="../about.html" title="About">About</a><br>
<a href="../products.html" title="Products">Products</a><br>
<a href="../community/index.html" title="Community">Community</a><br>
<a href="../development/index.html" title="Development">Development</a><br>
<a href="../download.html" title="Downloads">Downloads</a><br>
<a href="../documentation.html" title="Documentation">Documentation</a><br>
<a href="../faq.html" title="FAQ">FAQ</a><br>
<a href="../psc.html" title="PSC">PSC</a><br>
<a href="https://twitter.com/mapserver_osgeo" title="Twitter">Twitter</a>
</p>
  <h3>Current Table Of Contents</h3>
  <ul>
<li><a class="reference internal" href="#">HTML Legends with MapServer</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a><ul>
<li><a class="reference internal" href="#implementation">Implementation</a></li>
<li><a class="reference internal" href="#legend-object-of-mapfile">Legend Object of Mapfile</a></li>
<li><a class="reference internal" href="#cgi-legend-tag">CGI [legend] tag</a></li>
<li><a class="reference internal" href="#html-legend-template-file">HTML Legend Template File</a><ul>
<li><a class="reference internal" href="#header-block">HEADER block</a></li>
<li><a class="reference internal" href="#footer-block">FOOTER block</a></li>
<li><a class="reference internal" href="#group-block">GROUP block</a></li>
<li><a class="reference internal" href="#layer-block">LAYER block</a></li>
<li><a class="reference internal" href="#class-block">CLASS block</a></li>
<li><a class="reference internal" href="#conditional-text">CONDITIONAL text</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#sample-site-using-the-html-legend">Sample Site Using the HTML Legend</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="idw.html" title="Inverse distance weighted interpolation"
             >next</a> |</li>
        <li class="right" >
          <a href="flash.html" title="Flash Output"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../documentation.html" >MapServer 8.0.1 Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >Output Generation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">HTML Legends with MapServer</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; <a href="../copyright.html">Copyright</a> 2023, Open Source Geospatial Foundation.
      Last updated on 2023-12-22.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.5.
    </div>
  </body>
</html>