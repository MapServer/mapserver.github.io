

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Mapfile &mdash; MapServer 6.4.1 documentation</title>
    
    <link rel="stylesheet" href="../_static/sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '6.4.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <link rel="shortcut icon" href="../_static/mapserver.ico"/>
    <link rel="author" title="À propos de ces documents" href="../about.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="top" title="MapServer 6.4.1 documentation" href="../index.html" />
    <link rel="up" title="Optimisation" href="index.html" />
    <link rel="next" title="Raster" href="raster.html" />
    <link rel="prev" title="FastCGI" href="fastcgi.html" /> 
  </head>
  <body>

<table width="100%" style="width: 100%; background-color: white;">
  <tr>
    <td rowspan="2" style="padding: 10px 0px 10px 10px;">
      <a href="../index.html" title="Home"><img src="../_static/banner.png" alt="MapServer banner" border="0" /></a>
    </td>
    <td style="padding: 10px 10px 0px 0px; text-align: right; vertical-align: top;">
      <a href="../index.html" title="Home">Home</a> |
      <a href="../products.html" title="Products (MapServer core, MapCache, TinyOWS">Products</a> |
      <a href="https://github.com/mapserver/mapserver/issues/" title="Issue Tracker (MapServer core)">Issue Tracker</a> |
      <a href="../faq.html" title="FAQ">FAQ</a> |
      <a href="../download.html" title="Download">Download </a>
    </td>
  </tr>
  <tr>
    <td style="padding: 0px 10px 0px 0px; text-align: right; vertical-align: bottom;">
        
          
            <a href="../../optimization/mapfile.html"><img src="../_static/flagicons/en.png" alt="en" title="en" border="0" /></a>
          
        
        
          
            <a href="../../it/optimization/mapfile.html"><img src="../_static/flagicons/it.png" alt="it" title="it" border="0" /></a>
          
        
        
          
            <a href="../../es/optimization/mapfile.html"><img src="../_static/flagicons/es.png" alt="es" title="es" border="0" /></a>
          
        
        
          
            <a href="../../zh_cn/optimization/mapfile.html"><img src="../_static/flagicons/zh_cn.png" alt="zh_cn" title="zh_cn" border="0" /></a>
          
        
        
          
            <a href="../../de/optimization/mapfile.html"><img src="../_static/flagicons/de.png" alt="de" title="de" border="0" /></a>
          
        
        
          
            <a href="../../el/optimization/mapfile.html"><img src="../_static/flagicons/el.png" alt="el" title="el" border="0" /></a>
          
        
        <img src="../_static/flagicons/fr.png" alt="fr" title="fr" border="0" width="18px" height="13px"/>
        
          
            <a href="../../id/optimization/mapfile.html"><img src="../_static/flagicons/id.png" alt="id" title="id" border="0" /></a>
          
        
        
          
            <a href="../../sq/optimization/mapfile.html"><img src="../_static/flagicons/sq.png" alt="sq" title="sq" border="0" /></a>
          
        
        
          
            <a href="../../tr/optimization/mapfile.html"><img src="../_static/flagicons/tr.png" alt="tr" title="tr" border="0" /></a>
          
        

    </td>
  </tr>
</table>


    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Index général"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="raster.html" title="Raster"
             accesskey="N">suivant</a> |</li>
        <li class="right" >
          <a href="fastcgi.html" title="FastCGI"
             accesskey="P">précédent</a> |</li>
        <li><a href="../index.html">Home</a> &raquo;</li>
          <li><a href="../documentation.html" >Documentation de MapServer 6.4.1</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Optimisation</a> &raquo;</li> 
      </ul>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="mapfile">
<span id="mapfile-tuning"></span><span id="index-0"></span><h1><a class="toc-backref" href="#table-of-contents">Mapfile</a><a class="headerlink" href="#mapfile" title="Lien permanent vers ce titre">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Author:</th><td class="field-body">David Fawcett</td>
</tr>
<tr class="field-even field"><th class="field-name">Contact:</th><td class="field-body">david.fawcett at gmail.com</td>
</tr>
<tr class="field-odd field"><th class="field-name">Revision:</th><td class="field-body">$Revision$</td>
</tr>
<tr class="field-even field"><th class="field-name">Date:</th><td class="field-body">$Date$</td>
</tr>
<tr class="field-odd field"><th class="field-name">Last Updated:</th><td class="field-body">01/08/2007</td>
</tr>
</tbody>
</table>
<div class="contents topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#mapfile" id="id1">Mapfile</a><ul>
<li><a class="reference internal" href="#introduction" id="id2">Introduction</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#table-of-contents">Introduction</a><a class="headerlink" href="#introduction" title="Lien permanent vers ce titre">¶</a></h2>
<p>The contents of a Map File are used by MapServer for configuration, data
access, projection, and more. Because the Map File is parsed every time a map
image is requested, it is important to think about what you include in the
file in order to optimize performance. The optimal Map File is one that
doesn&#8217;t include or reference anything that isn&#8217;t needed.</p>
<div class="section" id="projections">
<span id="index-1"></span><h3>1. Projections<a class="headerlink" href="#projections" title="Lien permanent vers ce titre">¶</a></h3>
<p>There are two ways to define projections in a Map File. You can either use
inline projection parameters or specify an EPSG code for that projection. If
you use the <a class="reference internal" href="../glossary.html#term-epsg"><em class="xref std std-term">EPSG</em></a> code method, <a class="reference internal" href="../glossary.html#term-proj-4"><em class="xref std std-term">Proj.4</em></a> looks up the projection
parameters in the Proj4 database using the EPSG code as an ID. This database
lookup takes significantly more resources than when the projection parameters
are defined inline. This lookup takes place for each projection definition
using EPSG codes in a Map File.</p>
<p><strong>Projection définie en utilisant des paramètres de projection &#8220;en ligne&#8221;</strong></p>
<div class="highlight-mapfile"><div class="highlight"><pre><span class="k">PROJECTION</span>
  <span class="s">&quot;proj=utm&quot;</span>
  <span class="s">&quot;ellps=GRS80&quot;</span>
  <span class="s">&quot;datum=NAD83&quot;</span>
  <span class="s">&quot;zone=15&quot;</span>
  <span class="s">&quot;units=m&quot;</span>
  <span class="s">&quot;north&quot;</span>
  <span class="s">&quot;no_defs&quot;</span>
<span class="k">END</span>
</pre></div>
</div>
<p><strong>Projection définie en utilisant un code EPSG</strong></p>
<div class="highlight-mapfile"><div class="highlight"><pre><span class="k">PROJECTION</span>
   <span class="s">&quot;init=epsg:26915&quot;</span>
<span class="k">END</span>
</pre></div>
</div>
<p><strong>Suggestions d&#8217;optimisation</strong></p>
<ul class="simple">
<li>Utiliser des définitions de paramètres de projection &#8220;en ligne&#8221; au lieu des codes EPSG.</li>
<li>Si vous voulez utiliser les codes EPSG, enlever tous les enregistrements de projections inutiles de la base de données <a class="reference internal" href="../glossary.html#term-epsg"><em class="xref std std-term">EPSG</em></a> Proj.4.</li>
</ul>
</div>
<div class="section" id="layers">
<span id="index-2"></span><h3>2. Layers<a class="headerlink" href="#layers" title="Lien permanent vers ce titre">¶</a></h3>
<p>For every layer in a Map File that has a status of ON or DEFAULT, MapServer
will load that layer and prepare it for display, even if that layer never gets
displayed.</p>
<p><strong>Suggestions d&#8217;optimisation</strong></p>
<ul class="simple">
<li>Construire des mapfiles les plus minimaux, inclure seulement des couches que vous avez prévu d&#8217;utiliser.</li>
<li>Turn off unnecessary layers; the more layers MapServer is displaying, the
more time it takes. Have your opening map view show only the minimum
necessary to orient the user, and allow them to turn on additional layers as
needed. This is particularly true of remote WMS or very large rasters.</li>
<li>Related to turning off layers, is turning them on but using MINSCALEDENOM
and MAXSCALEDENOM to determine at what zoomlevels the layer is available. If
a map&#8217;s display is outside of the layer&#8217;s MINSCALEDENOM and MAXSCALEDENOM
range, then MapServer can skip processing that layer. It also makes for a
really cool effect, that the national boundaries magically change to state
boundaries.</li>
<li>Si vous avez une application complexe, considérez l&#8217;usage de plusieurs mapfiles simples et spécifiques plutôt qu&#8217;un seul gros fichier mapfile &#8216;tout en un&#8217;.</li>
<li>In a similar vein, each class also supports MINSCALEDENOM and MAXSCALEDENOM.
If your dataset has data that are relevant at different zoomlevels, then you
may find this a very handy trick. For example, give a MINSCALEDENOM of
1:1000000, county roads a MINSCALEDENOM of 1:100000, and streets a
MAXSCALEDENOM of 1:50000. You get the cool effect of new data magically
appearing, but you don&#8217;t have MapServer trying to draw the nation&#8217;s roads
when the entire nation is in view!</li>
<li>Classes are processed in order, and a feature is assigned to the first class
that matches. So try placing the most commonly-used classes at the top of
the class list, so MapServer doesn&#8217;t have to try as many classes before
finding a match. For example, if you wanted to highlight the single state of
Wyoming, you would probably do this:</li>
</ul>
<div class="highlight-mapfile"><div class="highlight"><pre><span class="k">CLASS</span>
   <span class="k">EXPRESSION</span> <span class="p">(</span><span class="s">&#39;[NAME]&#39;</span> <span class="ow">eq</span> <span class="s">&#39;WY&#39;</span><span class="p">])</span>
   <span class="k">STYLE</span>
     <span class="k">COLOR</span> <span class="mi">255</span> <span class="mi">0</span> <span class="mi">0</span>
   <span class="k">END</span>
<span class="k">END</span>
<span class="k">CLASS</span>
   <span class="k">STYLE</span>
   <span class="k">COLOR</span> <span class="mi">128</span> <span class="mi">128</span> <span class="mi">128</span>
   <span class="k">END</span>
<span class="k">END</span>
</pre></div>
</div>
<p>Mais cela sera beaucoup plus efficace de faire ceci, comme 98% des cas seront vérifiés au premier essai :</p>
<div class="highlight-mapfile"><div class="highlight"><pre><span class="k">CLASS</span>
  <span class="k">EXPRESSION</span> <span class="p">(</span><span class="s">&#39;[NAME]&#39;</span> <span class="ow">ne</span> <span class="s">&#39;WY&#39;</span><span class="p">])</span>
  <span class="k">STYLE</span>
    <span class="k">COLOR</span> <span class="mi">128</span> <span class="mi">128</span> <span class="mi">128</span>
  <span class="k">END</span>
<span class="k">END</span>
<span class="k">CLASS</span>
  <span class="k">STYLE</span>
    <span class="k">COLOR</span> <span class="mi">255</span> <span class="mi">0</span> <span class="mi">0</span>
  <span class="k">END</span>
<span class="k">END</span>
</pre></div>
</div>
<ul class="simple">
<li>Utiliser les <a class="reference internal" href="tileindex.html#tileindex"><em>index de tuiles</em></a> au lieu de plusieurs couches.</li>
</ul>
</div>
<div class="section" id="symbols">
<span id="index-3"></span><h3>3. Symbols<a class="headerlink" href="#symbols" title="Lien permanent vers ce titre">¶</a></h3>
<p>Quand un mapfile est chargé, chaque symbole raster listé dans le fichier de symboles est récupéré depuis le système de fichiers et chargé.</p>
<p><strong>Suggestions d&#8217;optimisation</strong></p>
<ul class="simple">
<li>Inclure seulement les symboles raster dans votre fichier de symboles si vous savez qu&#8217;ils seront utilisés par votre application.</li>
</ul>
</div>
<div class="section" id="fonts">
<span id="index-4"></span><h3>4. Fonts<a class="headerlink" href="#fonts" title="Lien permanent vers ce titre">¶</a></h3>
<p>Pour charger une police, MapServer ouvre le fichier fonts.list: ref: <cite>fontset</cite> qui contient un alias pour la police et le chemin pour ce fichier de police. Si vous avez un fichier fonts.list avec une longue liste de polices, il faudra plus de temps pour MapServer pour localiser et charger la police que vous avez besoin.</p>
<p><strong>Suggestions d&#8217;optimisation</strong></p>
<ul class="simple">
<li>Limiter les entrées dans le fichier fonts.list aux polices que vous utilisez véritablement.</li>
</ul>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper"><h3>Navigation</h3>
<p>
<a href="../about.html" title="About">About</a><br>
<a href="../products.html" title="Products">Products</a><br>
<a href="../community/index.html" title="Community">Community</a><br>
<a href="../development/index.html" title="Development">Development</a><br>
<a href="../download.html" title="Downloads">Downloads</a><br>
<a href="../documentation.html" title="Documentation">Documentation</a><br>
<a href="../faq.html" title="FAQ">FAQ</a>
</p>
  <h3>Current Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Mapfile</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a><ul>
<li><a class="reference internal" href="#projections">1. Projections</a></li>
<li><a class="reference internal" href="#layers">2. Layers</a></li>
<li><a class="reference internal" href="#symbols">3. Symbols</a></li>
<li><a class="reference internal" href="#fonts">4. Fonts</a></li>
</ul>
</li>
</ul>
</li>
</ul>

<div id="searchbox" style="display: none">
  <h3>Recherche rapide</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Saisissez un mot clef ou un nom de module, classe ou fonction.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Index général"
             >index</a></li>
        <li class="right" >
          <a href="raster.html" title="Raster"
             >suivant</a> |</li>
        <li class="right" >
          <a href="fastcgi.html" title="FastCGI"
             >précédent</a> |</li>
        <li><a href="../index.html">Home</a> &raquo;</li>
          <li><a href="../documentation.html" >Documentation de MapServer 6.4.1</a> &raquo;</li>
          <li><a href="index.html" >Optimisation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; <a href="../copyright.html">Copyright</a> 2014, Regents of the University of Minnesota.
      Mis à jour le 10 Apr 2014.
      Créé avec <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>