<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" lang="fr">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>FAQ &#8212; MapServer 7.0.2 documentation</title>
    
    <link rel="stylesheet" href="_static/sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '7.0.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/translations.js"></script>
    <link rel="shortcut icon" href="_static/mapserver.ico"/>
    <link rel="author" title="À propos de ces documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Recherche" href="search.html" />
    <link rel="copyright" title="Copyright" href="copyright.html" />
    <link rel="top" title="MapServer 7.0.2 documentation" href="index.html" />
    <link rel="up" title="Documentation de MapServer 7.0.2" href="documentation.html" />
    <link rel="next" title="License" href="copyright.html" />
    <link rel="prev" title="Erreurs" href="errors.html" /> 
  </head>
  <body role="document">

<table width="100%" style="width: 100%; background-color: white;">
  <tr>
    <td rowspan="2" style="padding: 10px 0px 10px 10px;">
      <a href="index.html" title="Home"><img src="_static/banner.png" alt="MapServer banner" border="0" /></a>
    </td>
    <td style="padding: 10px 10px 0px 0px; text-align: right; vertical-align: top;">
      <a href="index.html" title="Home">Home</a> |
      <a href="products.html" title="Products (MapServer core, MapCache, TinyOWS">Products</a> |
      <a href="https://github.com/mapserver/mapserver/issues/" title="Issue Tracker (MapServer core)">Issue Tracker</a> |
      <a href="community/service_providers.html" title="Professional Service Providers">Service Providers</a> |      
      <a href="#" title="Frequently Asked Questions">FAQ</a> |
      <a href="download.html" title="Download Source or Binaries">Download </a>
    </td>
  </tr>
  <tr>
    <td style="padding: 0px 10px 0px 0px; text-align: right; vertical-align: bottom;">
        
          
            <a href="../faq.html"><img src="_static/flagicons/en.png" alt="en" title="en" border="0" /></a>
          
        
        
          
            <a href="../ar/faq.html"><img src="_static/flagicons/ar.png" alt="ar" title="ar" border="0" /></a>
          
        
        
          
            <a href="../de/faq.html"><img src="_static/flagicons/de.png" alt="de" title="de" border="0" /></a>
          
        
        
          
            <a href="../el/faq.html"><img src="_static/flagicons/el.png" alt="el" title="el" border="0" /></a>
          
        
        
          
            <a href="../es/faq.html"><img src="_static/flagicons/es.png" alt="es" title="es" border="0" /></a>
          
        
        <img src="_static/flagicons/fr.png" alt="fr" title="fr" border="0" width="18px" height="13px"/>
        
          
            <a href="../id/faq.html"><img src="_static/flagicons/id.png" alt="id" title="id" border="0" /></a>
          
        
        
          
            <a href="../it/faq.html"><img src="_static/flagicons/it.png" alt="it" title="it" border="0" /></a>
          
        
        
          
            <a href="../ja/faq.html"><img src="_static/flagicons/ja.png" alt="ja" title="ja" border="0" /></a>
          
        
        
          
            <a href="../nl_NL/faq.html"><img src="_static/flagicons/nl_NL.png" alt="nl_NL" title="nl_NL" border="0" /></a>
          
        
        
          
            <a href="../pl/faq.html"><img src="_static/flagicons/pl.png" alt="pl" title="pl" border="0" /></a>
          
        
        
          
            <a href="../ru/faq.html"><img src="_static/flagicons/ru.png" alt="ru" title="ru" border="0" /></a>
          
        
        
          
            <a href="../sq/faq.html"><img src="_static/flagicons/sq.png" alt="sq" title="sq" border="0" /></a>
          
        
        
          
            <a href="../tr/faq.html"><img src="_static/flagicons/tr.png" alt="tr" title="tr" border="0" /></a>
          
        

    </td>
  </tr>
</table>


    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="Index général"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="copyright.html" title="License"
             accesskey="N">suivant</a> |</li>
        <li class="right" >
          <a href="errors.html" title="Erreurs"
             accesskey="P">précédent</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="documentation.html" accesskey="U">Documentation de MapServer 7.0.2</a> &#187;</li> 
      </ul>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="faq">
<span id="id1"></span><h1>FAQ<a class="headerlink" href="#faq" title="Lien permanent vers ce titre">¶</a></h1>
<div class="section" id="where-is-the-mapserver-log-file">
<h2>Où sont les fichiers logs de MapServer ?<a class="headerlink" href="#where-is-the-mapserver-log-file" title="Lien permanent vers ce titre">¶</a></h2>
<p>See <a class="reference internal" href="optimization/debugging.html#debugging"><span class="std std-ref">Debugger Mapserver</span></a></p>
</div>
<div class="section" id="what-books-are-available-about-mapserver">
<h2>Quels livres sont disponible sur MapServer ?<a class="headerlink" href="#what-books-are-available-about-mapserver" title="Lien permanent vers ce titre">¶</a></h2>
<p><a class="reference external" href="http://www.oreilly.com/catalog/mappinghks/">&#8220;Mapping Hacks&#8221;</a> par Schuyler Erle, Rich Gibson, et Jo Walsh est disponible via O&#8217;Reilly.</p>
<p><a class="reference external" href="http://oreilly.com/catalog/webmapping">&#8220;Web Mapping Illustrated&#8221;</a> par Tyler Mitchell est disponible chez O&#8217;Reilly. Introduit MapServer et plusieurs autres outils connexes dont GDAL/OGR, MapScript, PostGIS, les projections cartographiques, etc.</p>
<p><a class="reference external" href="http://www.apress.com/book/bookDisplay.html?bID=443">&#8220;MapServer: Open Source GIS Development&#8221;</a> par Bill Kropla.</p>
</div>
<div class="section" id="how-do-i-compile-mapserver-for-windows">
<h2>Comment je compile MapServer pour Windows ?<a class="headerlink" href="#how-do-i-compile-mapserver-for-windows" title="Lien permanent vers ce titre">¶</a></h2>
<p>See <a class="reference internal" href="installation/win32.html#win32"><span class="std std-ref">Compiler sous Win32</span></a>. Also, you can use the development libraries in <a class="reference internal" href="download.html#windows"><span class="std std-ref">OSGeo4W</span></a> as a starting point instead of building all of the dependent
libraries yourself.  Windows users wanting a full installer (including Apache,
MapServer, mapscripts, GDAL) please see <a class="reference external" href="http://ms4w.com">MS4W</a></p>
</div>
<div class="section" id="what-do-mapserver-version-numbers-mean">
<h2>Que signifie les numéros de version de MapServer ?<a class="headerlink" href="#what-do-mapserver-version-numbers-mean" title="Lien permanent vers ce titre">¶</a></h2>
<p>Le schéma de numérotation des versions de MapServer est très similaire à celui de Linux. Par exemple, un numéro de version de MapServer de 4.2.5 peut être décodé comme cela :</p>
<ul class="simple">
<li><p class="first">4: Numéro de version majeur. MapServer publie une version majeure tous les deux ou trois ans.</p>
</li>
<li><p class="first">2 : Numéro de version mineur. L&#8217;incrémentation d&#8217;un numéro de version mineure est toujours lié à des ajouts de fonctionnalités.</p>
</li>
<li><p class="first">5 : Numéro de révision. Les révisions sont des corrections de bug seulement. Aucune nouvelle fonctionnalité n&#8217;est fournie dans ces révisions.</p>
</li>
</ul>
<p>D&#8217;un point de vue d&#8217;un développeur, le schéma de numérotation des versions de MapServer est identique à celle de Linux. Les numéros de version pairs (0..2..4..6) sont des versions publiées, et les versions impairs (1..3..5..7) correspondent à des versions de développement.</p>
</div>
<div class="section" id="is-mapserver-thread-safe">
<h2>Est ce que MapServer est Thread-safe?<a class="headerlink" href="#is-mapserver-thread-safe" title="Lien permanent vers ce titre">¶</a></h2>
<p><strong>Q</strong> : Est ce que MapServer est thread-safe?</p>
<p><strong>R</strong> : D&#8217;un point de vue générale, non (mais lisez la section suivante). Plusieurs composants de MapServer utilisent des données globales ou statiques qui peuvent être potentiellement modifiées par un autre thread. Sous une charge importante cela devient inévitable et il peut subvenir des erreurs ponctuelles.</p>
<p><strong>Q</strong> : Est il possible d&#8217;utiliser MapServer dans une application multi-threadée en toute sécurité ?</p>
<p><strong>R</strong> : Certaines oui, avec une attention particulière. Ou avec Python :) Les développeurs doivent soit éviter d&#8217;utiliser des composants non sécurisés de MapServer ou placer soigneusement des blocages sur ceux-ci. Le blocage de l&#8217;interpréteur global de Python immunise contre les problèmes de threading de MapServer ; puisque aucun code mapscript ne publie le GIL toutes les fonctions ou méthodes de MapServer sont atomiques. Les utilisateurs de mapscript et de JAVA, .NET, mod_perl, ou mod_php n&#8217;ont pas cette couche supplémentaire de protection.</p>
<p><strong>Q</strong> : Quels composants doivent être évités?</p>
<p><strong>R</strong> : Voici ci-dessous la liste des composants non protégés ou non sécurisés et les composants non sécurisés mais bloqués.</p>
<p>Non sécurisé :</p>
<ul class="simple">
<li><p class="first">Couches OGR : utilisation de services CPL non sécurisé</p>
</li>
<li><p class="first">Rendu Cartoline : données statiques</p>
</li>
<li><p class="first">Export Imagemap : données statiques</p>
</li>
<li><p class="first">Export SWF : données statiques et utilisation de msGetBasename() non sécurisé</p>
</li>
<li><p class="first">Export SVG : données statiques</p>
</li>
<li><p class="first">Serveur WMS/WFS : données statiques utilisées pour l&#8217;état du dispatcher</p>
</li>
<li><p class="first">Forcer une base de fichiers temporaires (une fonctionnalité obscure) : données statiques</p>
</li>
<li><p class="first">MyGIS : quelques données statiques</p>
</li>
</ul>
<p>Non sécurisé, mais bloqué:</p>
<ul class="simple">
<li><p class="first">Chargement du fichier map de configuration : parseur global</p>
</li>
<li><p class="first">Définition des expressions de filtre de couche ou de classe (parseur global)</p>
</li>
<li><p class="first">Évaluation des expressions des classes (parseur global)</p>
</li>
<li><p class="first">Définition des projections des couches et des cartes (PROJ)</p>
</li>
<li><p class="first">Requêtage et rendu des couches raster (GDAL)</p>
</li>
<li><p class="first">Connexion aux bases de données (mappool.c)</p>
</li>
<li><p class="first">Gestion de PostGIS</p>
</li>
<li><p class="first">Oracle Spatial (utilise une simple prise en charge de l&#8217;environnement pour la connexion)</p>
</li>
<li><p class="first">Gestion de SDE (cache global des couches)</p>
</li>
<li><p class="first">Prise en charge des erreurs (dépôt statique des objets erreur)</p>
</li>
<li><p class="first">Connexions cliente de WMS/WFS : condition de course (potential race) potentielle dans l&#8217;initialisation de Curl</p>
</li>
<li><p class="first">Couches Plugin (dépôt statique de dll-s chargés)</p>
</li>
</ul>
<p>Des serrures secondaires sont plutôt mis en place pour ce qui précède. Seul un thread  peut utiliser un parseur global à la fois, et seul un thread peut accéder à des données raster par GDAL au même moment. La performance est échangée pour la sécurité.</p>
</div>
<div class="section" id="what-does-status-mean-in-a-layer">
<h2>Que signifie STATUS dans une LAYER ?<a class="headerlink" href="#what-does-status-mean-in-a-layer" title="Lien permanent vers ce titre">¶</a></h2>
<p>STATUS ON et STATUS OFF définissent le statut par défaut de la couche. Si une couche est demandée, ces couches seront définies à ON/OFF à moins que cela soit définie différemment via le paramètre LAYER. Cela est particulièrement le cas lorsque vous utilisez MapScript et le mécanisme de template interne de MapServer, mais c&#8217;est également utile lorsque vous écrivez vos propres applications et définissez la vue initiale de la carte.</p>
<p>STATUS DEFAULT signifie que la couche est toujours affichée, même si elle n&#8217;est pas définie dans le paramètre LAYER. Le status de la couche peut être changé de DEFAULT à OFF en MapScript, sinon elle est toujours à ON.</p>
<p><a class="reference internal" href="cgi/index.html#cgi"><span class="std std-ref">CGI</span></a> modifie toutes les valeurs qui ne sont pas en STATUS DEFAULT à la valeur OFF afin que toutes les couches démarrent dans le même état (c&#8217;est à dire à OFF) et doit être explicitement demandée pour être dessinée ou interrogée. Cet état commun rend le développement plus facile (du moins dans mon esprit). Je veux dire que si une couche &#8220;lakes&#8221; est définie à ON, l&#8217;appel de layer=lakes la rendra à OFF. Je veux donc supprimer cette ambiguïté au démarrage.</p>
</div>
<div class="section" id="how-can-i-make-my-maps-run-faster">
<h2>Comment puis rendre le rendu de mes cartes plus rapide ?<a class="headerlink" href="#how-can-i-make-my-maps-run-faster" title="Lien permanent vers ce titre">¶</a></h2>
<p>Il y a de nombreuses approches différentes pour améliorer les performances de votre carte, à part bien évidemment d&#8217;acheter du matériel onéreux et plus rapide. Voici quelques liens de howto individuels de différentes optimisations.</p>
<ul class="simple">
<li><p class="first"><a class="reference internal" href="optimization/mapfile.html#mapfile-tuning"><span class="std std-ref">Tunez votre mapfile pour améliorer les performances</span></a></p>
</li>
<li><p class="first"><a class="reference internal" href="optimization/vector.html#vector-optimization"><span class="std std-ref">Optimiser les performances des sources de données vecteurs</span></a></p>
</li>
<li><p class="first"><a class="reference internal" href="optimization/raster.html#raster-optimization"><span class="std std-ref">Optimiser les performances des sources de données raster</span></a></p>
</li>
<li><p class="first"><a class="reference internal" href="optimization/tileindex.html#tileindex"><span class="std std-ref">Tileindexes pour mosaïquer et améliorer les performances</span></a></p>
</li>
</ul>
<p>Quelques astuces générales pour tous les cas:</p>
<ul class="simple">
<li><p class="first">Tout d&#8217;abord le matériel. Un barrette de RAM d&#8217;un GB améliorera les performances au delà de toutes considérations de tuning de vos données. Au prix de la RAM de nos jours, cela est peu onéreux et facile d&#8217;accélérer chaque rendu de carte avec une amélioration matérielle peu coûteuse.</p>
</li>
<li><p class="first">Utilisez des méthodes scientifique. Changez une chose à la fois, et regardez quel effet cela entraîne. Essayez de désactiver toutes les couches puis activez-les une par une jusqu&#8217;à ce que vous trouviez celle qui pose problème.</p>
</li>
<li><p class="first">Utilisez le programme <a class="reference internal" href="utilities/shp2img.html#shp2img"><span class="std std-ref">shp2img</span></a> pour chronométrer vos résultats. Celui-ci est lancé à partir de la ligne de commande et dessine une image de votre carte entière. Puisqu&#8217;il est lancé à partir de la ligne de commande, il ne subit pas les délais d&#8217;Internet et vous donnera des mesures plus cohérentes que votre navigateur.</p>
</li>
</ul>
</div>
<div class="section" id="what-does-polyline-mean-in-mapserver">
<h2>Que signifie Polyline dans MapServer ?<a class="headerlink" href="#what-does-polyline-mean-in-mapserver" title="Lien permanent vers ce titre">¶</a></h2>
<p>Il y a des confusions entre la signification de POLYLINE dans MapServer et ESRI. Dans MapServer POLYLINE signifie simplement une représentation linéaire de données POLYGON. Avec ESRI les polylignes signifie multi-ligne. Les anciennes versions de la description technique du Shapefile ne parlent même pas des polylignes, juste des lignes. Les Shapefiles polyligne d&#8217;ESRI sont juste des lignes et peuvent seulement être dessinés comme des couches LINE. Ces shapefiles n&#8217;ont pas de contraintes de fermeture géométrique comme les Shapefiles polygonaux, c&#8217;est pourquoi la distinction est si importante. Je suppose qu&#8217;il y a un meilleur choix que POLYLINE mais je ne vois pas lequel.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">La seule différences entre les couches POLYLINE et LINE est la manière dont les étiquettes sont placées.</p>
</div>
</div>
<div class="section" id="what-is-mapscript">
<h2>Qu&#8217;est ce que MapScript ?<a class="headerlink" href="#what-is-mapscript" title="Lien permanent vers ce titre">¶</a></h2>
<p>MapScript est l&#8217;interface de script de MapServer, généré habituellement par <a class="reference internal" href="glossary.html#term-swig"><span class="xref std std-term">SWIG</span></a> (sauf pour <span class="xref std std-ref">php</span>). MapScript vous permet de programmer avec les objets de MapServer directement au lieu d&#8217;interagire avec MapServer via le script <a class="reference internal" href="cgi/index.html#cgi"><span class="std std-ref">CGI</span></a> et les <a class="reference internal" href="mapfile/index.html#mapfile"><span class="std std-ref">Mapfile</span></a>.</p>
</div>
<div class="section" id="does-mapserver-support-reverse-geocoding">
<h2>Est ce que MapServer gère le reverse-géocoding?<a class="headerlink" href="#does-mapserver-support-reverse-geocoding" title="Lien permanent vers ce titre">¶</a></h2>
<p>Non</p>
<p>Le reverse géocoding est la possibilité de générer des adresses postales à partir d&#8217;une liste de géométries. Ce type de fonctionnalité spatiale est fournie par des applications propriétaires telles que la suite ESRI ou par des services tels que ceux fournis par GDT. MapServer sert au <em>rendu cartographique</em> et ne fournit pas d&#8217;opérations spatiales avancées telle que celle-ci.</p>
</div>
<div class="section" id="does-mapserver-support-geocoding">
<h2>Est ce que MapServer gère le géocoding?<a class="headerlink" href="#does-mapserver-support-geocoding" title="Lien permanent vers ce titre">¶</a></h2>
<p>Non</p>
<p>Le géocoding est la possibilité de générer des points en latitude et longitude à partir d&#8217;une liste d&#8217;adresses.. MapServer sert au <em>rendu cartographique</em> et ne fournit pas d&#8217;opérations spatiales avancées telle que celle-ci.</p>
<p>Si vous utilisez MapScript, il y a un géocoder libre disponible à travers XMLRPC et SOAP à <a class="reference external" href="http://geocoder.us">http://geocoder.us</a> . Vous pouvez lier votre application à ce service pour fournir des coordonnées pour les adresses, puis utiliser MapServer pour afficher ces points.</p>
</div>
<div class="section" id="how-do-i-set-line-width-in-my-maps">
<h2>Comment je définis une largeur de ligne dans ma carte ?<a class="headerlink" href="#how-do-i-set-line-width-in-my-maps" title="Lien permanent vers ce titre">¶</a></h2>
<p>Dans la version courante de Mapserver, la largeur de ligne est définie en utilisant le paramètre WIDTH de l&#8217;objet STYLE. Pour une couche  LINE, les lignes peuvent être rouges et avec 3 pixels de large en utilisant le style suivant dans une CLASS.</p>
<div class="highlight-mapfile"><div class="highlight"><pre><span></span><span class="k">STYLE</span>
  <span class="k">COLOR</span> <span class="mi">255</span> <span class="mi">0</span> <span class="mi">0</span>
  <span class="k">WIDTH</span> <span class="mi">3</span>
<span class="k">END</span>
</pre></div>
</div>
<p>Dans les versions antérieures de Mapserver, vous pouviez définir le symbole pour une LAYER à &#8216;circle&#8217; et ensuite ensuite vous pouviez définir la taille SIZE du symbole à la largeur souhaitée. Un symbole &#8216;circle&#8217; peut être défini comme</p>
<div class="highlight-mapfile"><div class="highlight"><pre><span></span><span class="k">SYMBOL</span>
  <span class="k">NAME</span> <span class="s">&#39;circle&#39;</span>
  <span class="k">TYPE</span> <span class="nb">ELLIPSE</span>
  <span class="k">FILLED</span> <span class="nb">TRUE</span>
  <span class="k">POINTS</span> <span class="mi">1</span> <span class="mi">1</span> <span class="k">END</span>
<span class="k">END</span>
</pre></div>
</div>
</div>
<div class="section" id="why-do-my-jpeg-input-images-look-different-via-mapserver">
<h2>Why do my JPEG input images look different via MapServer?<a class="headerlink" href="#why-do-my-jpeg-input-images-look-different-via-mapserver" title="Lien permanent vers ce titre">¶</a></h2>
<p>Vous devez utiliser une vieille version de Mapserver (où GD était la bibliothèque par défaut pour le rendu).</p>
<p>Les nouvelles versions de Mapserver utilise AGG pour le rendu, et les formats de sortie par défaut sont en couleurs 24 bits, ainsi il ne devrait pas y avoir de problèmes.</p>
<p>Le format de sortie par défaut pour Mapserver avec GD était le PNG ou le GIF en pseudo-couleurs 8 bits. Par conséquent, il y aura une dégradation des couleurs en convertissant une image  24 bits image (16 million de couleurs ) en image 8 bits (256 couleurs).</p>
<p>Avec la sortie GD, MapServer utilisait une méthode assez simple pour faire la transformation, en convertissant les pixels dans la couleur la plus proche à partir d&#8217;un cube de couleurs de 175 couleurs. Cela devait donner une couleur marbrée avec une variation d&#8217;image assez douce.</p>
<p>Pour GD, les solutionsutiliées étaient de</p>
<ul class="simple">
<li><p class="first">Sélectionner un rendu en 24 bits. Cela peut être aussi facile que de rajouter &#8220;IMAGETYPE JPEG&#8221; dans votre objet MAP.</p>
</li>
<li><p class="first">Activer le tramage (PROCESSING &#8220;DITHER=YES&#8221;) pour produire une meilleure apparence des couleurs.</p>
</li>
<li><p class="first">Prétraiter vos images en 8 bit avant de l&#8217;utiliser dans MapServer avec une application externe comme le script rgb2pct.py  de GDAL.</p>
</li>
</ul>
<p>Pour plus d&#8217;informations, lisez <a class="reference internal" href="input/raster.html#raster"><span class="std std-ref">Données Raster</span></a>.</p>
</div>
<div class="section" id="which-image-format-should-i-use">
<h2>Quel format d&#8217;image doit je utiliser?<a class="headerlink" href="#which-image-format-should-i-use" title="Lien permanent vers ce titre">¶</a></h2>
<p>Bien que MapScript puisse générer une carte dans n&#8217;importe quel format d&#8217;image, il est suffisant de considérer les trois plus importants : JPEG, PNG, et GIF.</p>
<p>JPEG est un format d&#8217;image qui utilise un algorithme de compression avec perte pour réduire la taille de l&#8217;image et qui est utilisé lorsque la perte de détails à cause de la compression n&#8217;est pas visible ou est négligeable comme dans la plupart des photos. Les cartes d&#8217;un autre côté consistent principalement en des lignes fines et en surfaces colorées, ce qui n&#8217;est pas connu pour être bien affiché par le format JPEG. De plus les cartes, sauf si elles incluent des images aériennes et satellites, utilisent généralement très peu de couleurs. Le format JPEG avec sa profondeur de couleur à 24 bits, capable d&#8217;afficher environ 16,7 millions de couleurs n&#8217;est simplement pas adapté pour cela. Les formats GIF et PNG, eux, utilisent une palette de couleur indexée qui peut être optimisée pour n&#8217;importe quel nombre (jusqu&#8217;à 256) de couleurs ce qui les rend pertinents pour les icônes, logos, graphique et cartes. La comparaison suivante (taille des fichiers images générés; et pas la durée de génération des fichiers) incluera donc ces deux formats de fichiers :</p>
<table border="1" class="docutils" id="tailles-de-fichier-map-generes-gif-vs-png-vs-png24">
<caption><span class="caption-text">Tailles de fichier Map générés GIF vs. PNG vs. PNG24</span><a class="headerlink" href="#tailles-de-fichier-map-generes-gif-vs-png-vs-png24" title="Lien permanent vers ce tableau">¶</a></caption>
<colgroup>
<col width="67%" />
<col width="11%" />
<col width="11%" />
<col width="11%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&nbsp;</th>
<th class="head">GIF</th>
<th class="head">PNG</th>
<th class="head">PNG24</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><p class="first last">Données vecteur seulement</p>
</td>
<td>59kb</td>
<td>26kb</td>
<td>69kb</td>
</tr>
<tr class="row-odd"><td><p class="first last">Données vecteur et images satellites colorées</p>
</td>
<td>156kb</td>
<td>182kb</td>
<td>573kb</td>
</tr>
<tr class="row-even"><td><p class="first last">Données vecteur et images satellites monochromes</p>
</td>
<td>142kb</td>
<td>134kb</td>
<td>492kb</td>
</tr>
</tbody>
</table>
<p>(résultats basés sur une carte de 630x396 avec plusieurs couleurs, symboles, étiquettes/annotations, etc.)</p>
<p>Bien que le format GIF montre des performances quantitatives ainsi que qualitatives supérieures par rapport au format PNG lors de la génération d&#8217;une carte qui contient des images colorées de télédétection, le format PNG est clairement le vainqueur quantitatif en terme de taille de fichiers générés pour les cartes avec ou sans images additionnelles monochromes et doit donc être le format d&#8217;image préféré. Si l&#8217;application cartographique peut aussi afficher des images satellites ou aériennes en pleine couleur, le format de fichier en sortie peut être changé dynamiquement en format GIF ou format PNG24 pour atteindre la qualité d&#8217;image la plus importante possible.</p>
</div>
<div class="section" id="why-doesn-t-pil-python-imaging-library-open-my-pngs">
<h2>Pourquoi la bibliothèque PIL (Python Imaging Library) n&#8217;ouvre pas mes PNG?<a class="headerlink" href="#why-doesn-t-pil-python-imaging-library-open-my-pngs" title="Lien permanent vers ce titre">¶</a></h2>
<p><a class="reference external" href="http://www.pythonware.com/products/pil/">PIL</a> ne gère pas les PNG entrelacés pour l&#8217;instant (aucune planification pour cela le sera n&#8217;a été définie). Pour lire des PNG dans PIL, ceux-ci ne doivent pas être entrelacés. Modifier l&#8217;objet OUTPUTFORMAT avec un paramètre FORMATOPTION comme ceci :</p>
<div class="highlight-mapfile"><div class="highlight"><pre><span></span><span class="k">OUTPUTFORMAT</span>
  <span class="k">NAME</span> <span class="nb">png</span>
  <span class="k">DRIVER</span> <span class="s">&quot;GD/PNG&quot;</span>
  <span class="k">MIMETYPE</span> <span class="s">&quot;image/png&quot;</span>
  <span class="k">IMAGEMODE</span> <span class="nb">RGB</span>
  <span class="k">EXTENSION</span> <span class="s">&quot;png&quot;</span>
  <span class="k">FORMATOPTION</span> <span class="s">&quot;INTERLACE=OFF&quot;</span>
<span class="k">END</span>
</pre></div>
</div>
</div>
<div class="section" id="why-do-my-symbols-look-poor-in-jpeg-output">
<h2>Pourquoi mes symboles paraissent fades dans les rendus JPEG?<a class="headerlink" href="#why-do-my-symbols-look-poor-in-jpeg-output" title="Lien permanent vers ce titre">¶</a></h2>
<p>Quand je fais un rendu de mes symboles en 8 bit (PNG, GIF) ils sont bien rendus,  mais pour un rendu en jpeg en 24 bits ils paraissent vraiment moches.</p>
<p>Vous devez utiliser une ancienne version de Mapserver. Cela ne devrait plus être un problème avec les nouvelles versions. Ce qui suit explique l&#8217;ancien (avec GD) comportement</p>
<p>Dans le but d&#8217;afficher des classes de symboles correctement dans un rendu en 24 bits, tels que les symboles des polices true type, il est nécessaire de forcer le rendu en RGBA. Cela peut être réalisé en rajoutant la ligne &#8220;TRANSPARENCY ALPHA&#8221; dans la définition de la couche. N&#8217;utiliser pas cela d&#8217;une manière automatique car il y a une perte de performance.</p>
<p>Ce problème affecte également le rendu en PNG24 ou n&#8217;importe quel format RVB. Les types de rendu RVBA et 8 bit (PC256) sont déjà corrects.</p>
</div>
<div class="section" id="how-do-i-add-a-copyright-notice-on-the-corner-of-my-map">
<h2>Comment j&#8217;ajoute un copyright dans le coin de ma carte ?<a class="headerlink" href="#how-do-i-add-a-copyright-notice-on-the-corner-of-my-map" title="Lien permanent vers ce titre">¶</a></h2>
<p>Vous pouvez utiliser un objet géométrique avec l&#8217;objet <a class="reference internal" href="mapfile/feature.html#feature"><span class="std std-ref">FEATURE</span></a>, pour créer un point sur votre carte. Utilisez le paramètre TEXT de l&#8217;objet FEATURE pour le texte du copyright, et un objet <a class="reference internal" href="mapfile/label.html#label"><span class="std std-ref">LABEL</span></a> pour le styler.</p>
<div class="section" id="example-layer">
<h3>Couche exemple<a class="headerlink" href="#example-layer" title="Lien permanent vers ce titre">¶</a></h3>
<div class="highlight-mapfile"><div class="highlight"><pre><span></span><span class="k">LAYER</span>
  <span class="k">NAME</span> <span class="s">&quot;copyright&quot;</span>
  <span class="k">STATUS</span> <span class="nb">on</span>
  <span class="k">TYPE</span> <span class="nb">point</span>
  <span class="k">TRANSFORM</span> <span class="nb">ll</span> <span class="c"># set the image origin to be lower left</span>
  <span class="k">UNITS</span> <span class="nb">PIXELS</span> <span class="c"># sets the units for the feature object</span>
  <span class="k">FEATURE</span>
    <span class="k">POINTS</span>
      <span class="mi">60</span> <span class="p">-</span><span class="mi">10</span>    <span class="c"># the offset (from lower left) in pixels</span>
    <span class="k">END</span> <span class="c"># Points</span>
    <span class="k">TEXT</span> <span class="s">&quot;© xyz company 2006&quot;</span>  <span class="c"># this is your displaying text</span>
  <span class="k">END</span> <span class="c"># Feature</span>
  <span class="k">CLASS</span>
    <span class="k">STYLE</span>       <span class="c"># has to have a style</span>
    <span class="k">END</span> <span class="c"># style</span>
    <span class="k">LABEL</span>       <span class="c"># defines the font, colors etc. of the text</span>
      <span class="k">FONT</span> <span class="s">&quot;times&quot;</span>
      <span class="k">TYPE</span> <span class="nb">truetype</span>
      <span class="k">SIZE</span> <span class="mi">8</span>
      <span class="k">BUFFER</span> <span class="mi">1</span>
      <span class="k">COLOR</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span>
      <span class="k">FORCE</span> <span class="nb">true</span>
      <span class="k">STYLE</span>
        <span class="k">GEOMTRANSFORM</span> <span class="s">&#39;labelpoly&#39;</span>
        <span class="k">COLOR</span> <span class="mi">255</span> <span class="mi">255</span> <span class="mi">255</span>  <span class="c"># white</span>
      <span class="k">END</span> <span class="c"># Style</span>
    <span class="k">END</span> <span class="c"># Label</span>
  <span class="k">END</span> <span class="c"># Class</span>
<span class="k">END</span> <span class="c"># Layer</span>
</pre></div>
</div>
</div>
<div class="section" id="result">
<h3>Résultat<a class="headerlink" href="#result" title="Lien permanent vers ce titre">¶</a></h3>
<img alt="_images/copyright-image.png" src="_images/copyright-image.png" />
</div>
</div>
<div class="section" id="how-do-i-have-a-polygon-that-has-both-a-fill-and-an-outline-with-a-width">
<h2>Comment puis-je réaliser un polygone qui a, à la fois, un remplissage et un contour avec une taille ?<a class="headerlink" href="#how-do-i-have-a-polygon-that-has-both-a-fill-and-an-outline-with-a-width" title="Lien permanent vers ce titre">¶</a></h2>
<p>À chaque fois que je met une couleur (de remplissage) et une couleur de contour avec une largeur sur un polygone dans un seul objet STYLE, la taille du contour n&#8217;est pas respectée.</p>
<p>For historical reasons, width has two meanings within the context of filling
polygons and stroke widths for the outline. If a polygon is filled, then the
width defines the width of the symbol <em>inside</em> the filled polygon. In this
event, the outline width is disregarded, and it is always set to 1. To achieve
the effect of <em>both</em> a fill and an outline width, you need to use two styles
in your class.</p>
<div class="highlight-mapfile"><div class="highlight"><pre><span></span><span class="k">STYLE</span> <span class="c"># solid fill</span>
  <span class="k">COLOR</span> <span class="mi">255</span> <span class="mi">0</span> <span class="mi">0</span>
<span class="k">END</span>
<span class="k">STYLE</span> <span class="c"># thick outline</span>
  <span class="k">OUTLINECOLOR</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span>
  <span class="k">WIDTH</span> <span class="mi">3</span>
<span class="k">END</span>
</pre></div>
</div>
</div>
<div class="section" id="how-can-i-create-simple-antialiased-line-features">
<h2>Comment je peux créer des objets linéaires avec anticrênelages ?<a class="headerlink" href="#how-can-i-create-simple-antialiased-line-features" title="Lien permanent vers ce titre">¶</a></h2>
<p>Avec AGG (utilisé dans les versions récentes de Mapserver), les lignes anticrênelées sont par défaut, et ce fonctionnement ne peut pas être désactivé.</p>
<p>Avec GD, la manière la plus simple de produire des lignes avec anticrênelages est d&#8217;</p>
<ul class="simple">
<li><p class="first">utiliser un type d&#8217;image de 24 bit (IMAGEMODE RGB (ou RGBA))</p>
</li>
<li><p class="first">définir TRANSPARENCY ALPHA dans la couche utilisant les lignes avec anticrênelages</p>
</li>
<li><p class="first">définir ANTIALIAS TRUE dans l&#8217;élément STYLE de la CLASS avec des lignes avec anticrênelages</p>
</li>
</ul>
<p>L&#8217;exemple de mapfile suivant active les bordures avec anticrênelages sur county:</p>
<div class="highlight-mapfile"><div class="highlight"><pre><span></span><span class="p">...</span>
<span class="k">IMAGETYPE</span> <span class="s">&quot;png24&quot;</span>
<span class="p">...</span>
<span class="k">OUTPUTFORMAT</span>
  <span class="k">NAME</span> <span class="s">&quot;png24&quot;</span>
  <span class="k">DRIVER</span> <span class="s">&quot;GD/PNG&quot;</span>
  <span class="k">MIMETYPE</span> <span class="s">&quot;image/png&quot;</span>
  <span class="k">IMAGEMODE</span> <span class="nb">RGB</span>
  <span class="k">EXTENSION</span> <span class="s">&quot;png&quot;</span>
<span class="k">END</span>
<span class="p">...</span>
<span class="k">LAYER</span>
  <span class="k">NAME</span> <span class="s">&quot;counties&quot;</span>
  <span class="k">TYPE</span> <span class="nb">line</span>
  <span class="k">STATUS</span> <span class="nb">default</span>
  <span class="k">DATA</span> <span class="s">&quot;bdry_counln2&quot;</span>
  <span class="k">TRANSPARENCY</span> <span class="nb">alpha</span>
  <span class="k">SYMBOLSCALE</span> <span class="mi">5000000</span>
  <span class="k">CLASS</span>
    <span class="k">STYLE</span>
       <span class="k">WIDTH</span> <span class="mi">3</span>
       <span class="k">COLOR</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span>
       <span class="k">ANTIALIAS</span> <span class="nb">true</span>
    <span class="k">END</span>
  <span class="k">END</span>
<span class="k">END</span>
<span class="p">...</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Le shapefile bdry_counln2 référencé dans la couche counties est un shapefile linéaire. Un shapefile polygonal peut être substitué avec presque le même résultat, mais en raison de la nature des shapefiles chaque limite serait affichée à deux reprises et la ligne générée en sortie apparaitrait probablement légèrement plus épaisse. Alternativement, on peut utiliser un shapefile polygone, définir le TYPE à POLYGON, et utiliser OUTLINECOLOR à la place de COLOR dans l&#8217;élément STYLE.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Vous pouvez personnaliser la combinaison de STYLE-&gt;WIDTH et SYMBOLSCALE pour modifier la largeur des lignes dans les images de sortie.</p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">Voir aussi</p>
<p class="last">Les symboles <a class="reference internal" href="mapfile/symbology/construction.html#sym-construction"><span class="std std-ref">Cartoline</span></a> peuvent être utilisés pour avoir des effets plus jolis.</p>
</div>
</div>
<div class="section" id="which-ogc-specifications-does-mapserver-support">
<h2>Quelles spécifications OGC sont géré par MapServer ?<a class="headerlink" href="#which-ogc-specifications-does-mapserver-support" title="Lien permanent vers ce titre">¶</a></h2>
<p>Voir: <a class="reference internal" href="ogc/ogc_support.html#ogc-support"><span class="std std-ref">Support des spécifications OGC dans MapServer</span></a>.</p>
</div>
<div class="section" id="why-does-my-requested-wms-layer-not-align-correctly">
<h2>Pourquoi ma couche WMS demandée ne s&#8217;aligne pas correctement ?<a class="headerlink" href="#why-does-my-requested-wms-layer-not-align-correctly" title="Lien permanent vers ce titre">¶</a></h2>
<p>Faire une requête vers certains connecteurs WMS ArcIMS entrainent une carte avec des données mal alignées (le ratio des pixels semble incorrect).</p>
<p>Certains sites ArcIMS ne sont pas configurés par défaut pour étirer l&#8217;image renvoyée pour correspondre à l&#8217;enveloppe demandée. Cela entraine une carte avec des couches de données qui se superposent correctement au centre de la couche, mais pas vers les bords. Cela peut être corrigé en ajoutant &#8220;<em>reaspect=false</em>&#8221; à la requête (dans la chaîne de connexion).</p>
<p>Par exemple si votre mapfile est dans une projection différente de EPSG:4326, la couche suivante ne s&#8217;affichera pas correctement :</p>
<div class="highlight-mapfile"><div class="highlight"><pre><span></span><span class="k">LAYER</span>
    <span class="k">NAME</span> <span class="s">&quot;hillshade&quot;</span>
    <span class="k">TYPE</span> <span class="nb">RASTER</span>
    <span class="k">STATUS</span> <span class="nb">OFF</span>
    <span class="k">TRANSPARENCY</span> <span class="mi">70</span>
    <span class="k">CONNECTIONTYPE</span> <span class="nb">WMS</span>
    <span class="k">CONNECTION</span> <span class="s">&quot;http://gisdata.usgs.net:80/servlet19/com.esri.wms.Esrimap/USGS_WMS_NED?&quot;</span>
    <span class="k">PROJECTION</span>
            <span class="s">&quot;init=epsg:4326&quot;</span>
    <span class="k">END</span>
    <span class="k">METADATA</span>
            <span class="s">&quot;wms_srs&quot;</span> <span class="s">&quot;EPSG:4326&quot;</span>
            <span class="s">&quot;wms_title&quot;</span> <span class="s">&quot;US_NED_Shaded_Relief&quot;</span>
            <span class="s">&quot;wms_name&quot;</span> <span class="s">&quot;US_NED_Shaded_Relief&quot;</span>
            <span class="s">&quot;wms_server_version&quot;</span> <span class="s">&quot;1.1.1&quot;</span>
            <span class="s">&quot;wms_format&quot;</span> <span class="s">&quot;image/png&quot;</span>
    <span class="k">END</span>
<span class="k">END</span>
</pre></div>
</div>
<p>En ajoutant &#8220;reaspect=false&#8221; à la chaîne de connexion cela résoud le problème :</p>
<div class="highlight-mapfile"><div class="highlight"><pre><span></span><span class="k">LAYER</span>
    <span class="k">NAME</span> <span class="s">&quot;hillshade&quot;</span>
    <span class="k">TYPE</span> <span class="nb">RASTER</span>
    <span class="k">STATUS</span> <span class="nb">OFF</span>
    <span class="k">TRANSPARENCY</span> <span class="mi">70</span>
    <span class="k">CONNECTIONTYPE</span> <span class="nb">WMS</span>
    <span class="k">CONNECTION</span> <span class="s">&quot;http://gisdata.usgs.net:80/servlet19/com.esri.wms.Esrimap/USGS_WMS_NED?reaspect=false&quot;</span>
    <span class="k">PROJECTION</span>
            <span class="s">&quot;init=epsg:4326&quot;</span>
    <span class="k">END</span>
    <span class="k">METADATA</span>
            <span class="s">&quot;wms_srs&quot;</span> <span class="s">&quot;EPSG:4326&quot;</span>
            <span class="s">&quot;wms_title&quot;</span> <span class="s">&quot;US_NED_Shaded_Relief&quot;</span>
            <span class="s">&quot;wms_name&quot;</span> <span class="s">&quot;US_NED_Shaded_Relief&quot;</span>
            <span class="s">&quot;wms_server_version&quot;</span> <span class="s">&quot;1.1.1&quot;</span>
            <span class="s">&quot;wms_format&quot;</span> <span class="s">&quot;image/png&quot;</span>
    <span class="k">END</span>
<span class="k">END</span>
</pre></div>
</div>
</div>
<div class="section" id="when-i-do-a-getcapabilities-why-does-my-browser-want-to-download-mapserv-exe-mapserv">
<h2>Quand je fais une requête GetCapabilities, pourquoi mon navigateur veut télécharger mapserv.exe/mapserv?<a class="headerlink" href="#when-i-do-a-getcapabilities-why-does-my-browser-want-to-download-mapserv-exe-mapserv" title="Lien permanent vers ce titre">¶</a></h2>
<p>Une question de débutant ici .... Je suis débutant sur MapServer et Apache. J&#8217;ai MS4W qui fonctionne et qui est lancé avec la démo Itasca. Maintenant je veux l&#8217;activer en tant que serveur WMS. <code class="docutils literal"><span class="pre">mapserver</span> <span class="pre">-v</span></code> en ligne de commande m&#8217;informe qu&#8217;il gère le service WMS. Quand je pointe mon navigateur vers celui-ci, il me demande de télécharger mapserv.exe !</p>
<p>Qu&#8217;est ce que j&#8217;ai loupé?</p>
<p>Voici l&#8217;URL que j&#8217;utilise pour débugger une requête WMS GetCapabilities: <a class="reference external" href="http://localhost/cgi-bin/mapserv.exe?map=../htdocs/itasca/demo.map&amp;SERVICE=WMS&amp;VERSION=1.1.1&amp;REQUEST=GetCapabilities">http://localhost/cgi-bin/mapserv.exe?map=../htdocs/itasca/demo.map&amp;SERVICE=WMS&amp;VERSION=1.1.1&amp;REQUEST=GetCapabilities</a></p>
<p>Les spécifications OGC:WMS 1.1.0 et 1.1.1 (qui sont tous les deux gérés par MapServer) définissent que pour les réponses GetCapabilities, le serveur OGC:WMS renvoie un type MIME spécifique (i.e. application/vnd.ogc.xml (voir la sous-clause 6.5.3 de <a class="reference external" href="http://portal.opengeospatial.org/files/?artifact_id=1081&amp;version=1&amp;format=pdf">OGC:WMS 1.1.1</a>.</p>
<p>Un type MIME est renvoyé du serveur web au client (dans votre cas le navigateur) qui permet au client de décider comment le traiter.</p>
<p>Exemple 1 : en utilisant un navigateur web, si un serveur web renvoie un en-tête HTTP &#8220;Content-type:image/png&#8221;, alors le navigateur web saura que c&#8217;est une image PNG et l&#8217;affichera correctement.</p>
<p>Exemple 2 : en utilisant un navigateur web, si un serveur web renvoie un en-tête HTTP &#8220;Content-type:text/html&#8221;, alors le navigateur web saura que c&#8217;est une page HTML et l&#8217;affichera (c&#8217;est à dire tables, divs, etc.)</p>
<p>Tout simplement, ce qui arrive est que le OGC:WMS renvoie, dans les en-têtes des réponses HTTP, un type MIME que votre navigateur ne comprend pas, ce qui habituellement entraîne l&#8217;ouverture d&#8217;une boîte de dialogue pour savoir si vous voulez ouvrir ou sauver le contenu (c&#8217;est à dire Content-type:application/vnd.ogc.wms_xml).</p>
<p>Vous devez configurer votre navigateur web pour prendre en charge le type MIME application/vnd.ogc.wms_xml d&#8217;une certaine façon (c&#8217;est à dire ouvrir dans Notepad, etc.).</p>
</div>
<div class="section" id="why-do-my-wms-getmap-requests-return-exception-using-mapserver-5-0">
<h2>Pourquoi mes requêtes GetMap WMS renvoient des exceptions en utilisant MapServer 5.0 ?<a class="headerlink" href="#why-do-my-wms-getmap-requests-return-exception-using-mapserver-5-0" title="Lien permanent vers ce titre">¶</a></h2>
<p>Avant de mettre à jour vers MapServer 5.0, j&#8217;étais capable de faire de rapides tests GetMap sos la forme: <a class="reference external" href="http://wms.example.com/wms?service=WMS&amp;version=1.1.1&amp;request=GetMap&amp;layers=foo">http://wms.example.com/wms?service=WMS&amp;version=1.1.1&amp;request=GetMap&amp;layers=foo</a></p>
<p>Maintenant quand je tente le même test, le WMS de MapServer renvoie un document XML disant qu&#8217;il manque des paramètres nécessaires. Que se passe t&#8217;il?</p>
<p>Il y a eu un changement majeur pour la gestion du serveur WMS dans MapServer 5.0. Les requêtes GetMap du serveur WMS de MapServer nécessitent maintenant les paramètres supplémentaires suivants:</p>
<ul class="simple">
<li>srs</li>
<li>bbox</li>
<li>width</li>
<li>height</li>
<li>format</li>
<li>styles</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Ces paramètres étaient toujours nécessaire pour toutes les versions de la spécification WMS mais MapServer ne les demandaient pas avant dans les requêtes clientes (même si la plupart des clients WMS OGC les délivreront de toutes façon pour être compatibles avec les spec WMS).</p>
</div>
<p>La requête ci-dessous constitue maintenant une requête GetMap valide :</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>http://wms.example.com/wms?service=WMS&amp;version=1.1.1&amp;request=GetMap&amp;layers=foo&amp;srs=EPSG:4326&amp;bbox=-180,-90,180,90&amp;format=image/png&amp;width=400&amp;height=300&amp;styles=default
</pre></div>
</div>
<p>Ce qui est compatible avec la spécification WMS.</p>
<p>Pour plus d&#8217;information sur ces paramètres vous pouvez regarder <a class="reference internal" href="ogc/wms_server.html#wms-server"><span class="std std-ref">Serveur WMS</span></a> et les <a class="reference external" href="http://portal.opengeospatial.org/files/?artifact_id=1081&amp;version=1&amp;format=pdf">spécifications OGC WMS 1.1.1</a></p>
<p>Pour plus d&#8217;informations détaillées, lisez le <a class="reference external" href="https://github.com/mapserver/mapserver/issues/1088">ticket 1088</a></p>
<div class="admonition warning">
<p class="first admonition-title">Avertissement</p>
<p class="last">STYLES, bien qu&#8217;un paramètre WMS nécessaire, est maintenant de nouveau optionnel dans MapServer. Pour plus d&#8217;informations détaillées, lisez le <a class="reference external" href="https://github.com/mapserver/mapserver/issues/2427#comment:2">ticket 24277</a></p>
</div>
</div>
<div class="section" id="using-mapserver-6-0-why-don-t-my-layers-show-up-in-getcapabilities-responses-or-are-not-found-anymore">
<h2>En utilisant MapServer 6.0, pourquoi mes couches ne s&#8217;affichent plus dans les réponses de requêtes GetCapabilities ou ne sont plus trouvées du tout?<a class="headerlink" href="#using-mapserver-6-0-why-don-t-my-layers-show-up-in-getcapabilities-responses-or-are-not-found-anymore" title="Lien permanent vers ce titre">¶</a></h2>
<p>MapServer 6.0 introduit l&#8217;option de cacher des couches dans les appels aux Web Service de l&#8217;OGC.  Les Web Services OGC peuvent fournir des accès très puissants pour vps données géospatiales. Il a été décidé de désactiver l&#8217;accès au niveau des couches par défaut.  Voir la <a class="reference internal" href="development/rfc/ms-rfc-67.html#rfc67"><span class="std std-ref">MS RFC 67:  Enable/Disable Layers in OGC Web Services</span></a> qui fournit l&#8217;explication complète des changements et de leurs implications.</p>
<p>Pour permettre de revenir au comportement avant la version 6.0, vous pouvez ajouter ce qui suit dans la section METADATA de l&#8217;objet :ref:<a href="#id1"><span class="problematic" id="id2">`</span></a>WEB`de votre mapfile:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="s2">&quot;ows_enable_request&quot;</span> <span class="s2">&quot;*&quot;</span>
</pre></div>
</div>
<p>Cela permettra l&#8217;accès à toutes les couches pour tous les requêtes de Web Service OGC.</p>
</div>
<div class="section" id="where-do-i-find-my-epsg-code">
<h2>Où puis-je trouver mon code EPSG ?<a class="headerlink" href="#where-do-i-find-my-epsg-code" title="Lien permanent vers ce titre">¶</a></h2>
<p>There is a text file &#8220;epsg&#8221; in your PROJ4 installation (e.g.
&#8220;/usr/local/share/proj/epsg&#8221;) which contain the EPSG information used by
PROJ4. In Windows, <a class="reference external" href="http://ms4w.com">MS4W</a> users  can find the epsg file at C:\ms4w\proj\nad,
or it can be generally found with an environment variable called PROJ_LIB.</p>
<p><a class="reference external" href="http://spatialreference.org">http://spatialreference.org</a> and <a class="reference external" href="http://epsg.io/">http://epsg.io/</a> allow you to search for EPSG codes.</p>
<p>More information on EPSG:
<a class="reference external" href="http://www.epsg.org">http://www.epsg.org</a></p>
<p>More information on PROJ4:
<a class="reference external" href="https://github.com/OSGeo/proj.4/wiki">https://github.com/OSGeo/proj.4/wiki</a></p>
</div>
<div class="section" id="how-can-i-reproject-my-data-using-ogr2ogr">
<h2>Comment je peux reprojeter mes données en utilisant ogr2ogr<a class="headerlink" href="#how-can-i-reproject-my-data-using-ogr2ogr" title="Lien permanent vers ce titre">¶</a></h2>
<p>Avec ogr2ogr bien sûr! ogr2ogr est un utilitaire très puissant qui va transformer les projections de vos shapefiles quand vous lui passez les paramètres appropriés. Dans mon cas, j&#8217;utilisais Mapserver pour servir les données en &#8220;RI (Rhode Island) State Plane Feet&#8221;. Por faire ceci, les données devaient d&#8217;abord être converties en mètres. Voici les commandes que j&#8217;ai utilisé:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">ogr2ogr</span> <span class="o">-</span><span class="n">t_srs</span> <span class="n">EPSG</span><span class="p">:</span><span class="mi">32130</span> <span class="n">output</span><span class="o">.</span><span class="n">shp</span> <span class="nb">input</span><span class="o">.</span><span class="n">shp</span>
</pre></div>
</div>
<p>Comme mes données avaient déjà une projection définie, je n&#8217;ai pas eu besoin de définir explicitement la projection de la source. Cette commande utilise la définition EPSG pour le &#8220;NAD83 Rhode Island (32130)&#8221; et fait la conversion des pieds vers les mètres.</p>
<p>Maintenant disons que ma donnée n&#8217;était pas déjà projetée? Voici comment nous pouvons gérer ce cas avec:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">ogr2ogr</span> <span class="o">-</span><span class="n">s_srs</span> <span class="s2">&quot;+proj=tmerc +lat_0=41.08333333333334 +lon_0=-71.5 +k=0.999994 +x_0=100000 +y_0=0 +ellps=GRS80 +datum=NAD83 +to_meter=0.3408 +no_defs&quot;</span> <span class="o">-</span><span class="n">t_srs</span> <span class="n">EPSG</span><span class="p">:</span><span class="mi">32130</span> <span class="n">output</span><span class="o">.</span><span class="n">shp</span> <span class="nb">input</span><span class="o">.</span><span class="n">shp</span>
</pre></div>
</div>
<p>Laissez-loi examiner ce qu&#8217;il se passe ici:</p>
<p>The -s_srs parameter explicitly defines a projection for the data. The
parameters used here were taken out of the EPSG definition (in this case,
32130) in the epsg file (see the previous FAQ for more details on locating
EPSG definitions). The entry for RI in the epsg file is as follows:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># NAD83 / Rhode Island</span>
<span class="o">&lt;</span><span class="mi">32130</span><span class="o">&gt;</span> <span class="o">+</span><span class="n">proj</span><span class="o">=</span><span class="n">tmerc</span> <span class="o">+</span><span class="n">lat_0</span><span class="o">=</span><span class="mf">41.08333333333334</span> <span class="o">+</span><span class="n">lon_0</span><span class="o">=-</span><span class="mf">71.5</span> <span class="o">+</span><span class="n">k</span><span class="o">=</span><span class="mf">0.999994</span> <span class="o">+</span><span class="n">x_0</span><span class="o">=</span><span class="mi">100000</span> <span class="o">+</span><span class="n">y_0</span><span class="o">=</span><span class="mi">0</span> <span class="o">+</span><span class="n">ellps</span><span class="o">=</span><span class="n">GRS80</span> <span class="o">+</span><span class="n">datum</span><span class="o">=</span><span class="n">NAD83</span> <span class="o">+</span><span class="n">units</span><span class="o">=</span><span class="n">m</span> <span class="o">+</span><span class="n">no_defs</span>  <span class="n">no_defs</span> <span class="o">&lt;&gt;</span>
</pre></div>
</div>
<p>Vous pouvez voir comment la définition dans la commande initiale est formulée. Notez que le paramètre &#8220;+units=m&#8221; a été changé à &#8220;+to_meter=0.3408&#8221;. C&#8217;est imporant pour la conversion. Vous vous demandez d&#8217;où la valeur de 0.3408 vient? Du fichier EPSG! Il y a de nombreux bonus cachés dedans ainsi en lançant simplement un &#8216;grep &#8220;to_meter&#8221; epsg&#8217; vous pourrez rafraîchir votre mémoire si vous en avez besoin.</p>
<p>Le prochain paramètre dans la commande est &#8220;-t_srs EPSG:32130&#8221;. Cette commande dit à ogr2ogr de transformer la donnée vers le code EPSG 32130. Après que cette déclaration, tout ce qu&#8217;il reste à faire est de déclarer un nom de fichier pour votre nouveau fichier shape et de définir quel fichier est utilisé en entrée (attention: assurez-vous de ne pas inverser l&#8217;ordre de ces deux derniers).</p>
<p>Tapez entrée, laissez mouliner et apprécier votre nouvelle donnée en mètres!</p>
</div>
<div class="section" id="how-can-i-help-improve-the-documentation-on-this-site">
<h2>Comment puis-je aider à améliorer la documentation sur ce site?<a class="headerlink" href="#how-can-i-help-improve-the-documentation-on-this-site" title="Lien permanent vers ce titre">¶</a></h2>
<p>Des nouveaux contenus pour la documentation et des corrections sur la documentation existante sont particulèrement bienvenues. Ces contributions sont gérées par le même gestionnaire de suivi de problèmes utilisé pour suivre les bugs et les améliorations du logiciel.</p>
<p>Suivre les instructions pour soumettre des bugs à: <a class="reference external" href="http://www.mapserver.org/development/bugs.html">http://www.mapserver.org/development/bugs.html</a>. Quand vous créez un ticket, dans le champ Component, sélectionnez <cite>MapServer Documentation</cite>. Si votre ticket concerne porte sur une page web spécifique, merci d&#8217;inclure l&#8217;URL vers cette page.</p>
<p>Si vous avez des astuces ou des exemples qui ne paraissent pas correspondre au but de cette documentation, un bon endroit pour les partager est le wiki MapServer sur: <a class="reference external" href="https://github.com/mapserver/mapserver/wiki">https://github.com/mapserver/mapserver/wiki</a></p>
</div>
<div class="section" id="what-s-with-mapserver-s-logo">
<h2>Que signifie le logo de MapServer ?<a class="headerlink" href="#what-s-with-mapserver-s-logo" title="Lien permanent vers ce titre">¶</a></h2>
<p>Le logo de MapServer illustre la confluence des fleuves <a class="reference external" href="http://en.wikipedia.org/wiki/Minnesota_River">Minnesota</a> et <a class="reference external" href="http://en.wikipedia.org/wiki/Mississippi_River">Mississippi</a>, proche de la maison de <a class="reference external" href="http://en.wikipedia.org/wiki/University_of_Minnesota#St._Paul_campus">St. Paul Campus</a> de l&#8217;<a class="reference external" href="http://en.wikipedia.org/wiki/University_of_Minnesota">Université du Minnesota</a>, qui était le <a class="reference external" href="http://lists.osgeo.org/pipermail/mapserver-dev/2009-December/009435.html">lieu de naissance de MapServer</a>.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3>Recherche rapide</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><h3>Navigation</h3>
<p>
<a href="about.html" title="About">About</a><br>
<a href="products.html" title="Products">Products</a><br>
<a href="community/index.html" title="Community">Community</a><br>
<a href="development/index.html" title="Development">Development</a><br>
<a href="download.html" title="Downloads">Downloads</a><br>
<a href="documentation.html" title="Documentation">Documentation</a><br>
<a href="#" title="FAQ">FAQ</a><br>
<a href="psc.html" title="PSC">PSC</a>
</p>
  <h3>Current Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">FAQ</a><ul>
<li><a class="reference internal" href="#where-is-the-mapserver-log-file">Où sont les fichiers logs de MapServer ?</a></li>
<li><a class="reference internal" href="#what-books-are-available-about-mapserver">Quels livres sont disponible sur MapServer ?</a></li>
<li><a class="reference internal" href="#how-do-i-compile-mapserver-for-windows">Comment je compile MapServer pour Windows ?</a></li>
<li><a class="reference internal" href="#what-do-mapserver-version-numbers-mean">Que signifie les numéros de version de MapServer ?</a></li>
<li><a class="reference internal" href="#is-mapserver-thread-safe">Est ce que MapServer est Thread-safe?</a></li>
<li><a class="reference internal" href="#what-does-status-mean-in-a-layer">Que signifie STATUS dans une LAYER ?</a></li>
<li><a class="reference internal" href="#how-can-i-make-my-maps-run-faster">Comment puis rendre le rendu de mes cartes plus rapide ?</a></li>
<li><a class="reference internal" href="#what-does-polyline-mean-in-mapserver">Que signifie Polyline dans MapServer ?</a></li>
<li><a class="reference internal" href="#what-is-mapscript">Qu&#8217;est ce que MapScript ?</a></li>
<li><a class="reference internal" href="#does-mapserver-support-reverse-geocoding">Est ce que MapServer gère le reverse-géocoding?</a></li>
<li><a class="reference internal" href="#does-mapserver-support-geocoding">Est ce que MapServer gère le géocoding?</a></li>
<li><a class="reference internal" href="#how-do-i-set-line-width-in-my-maps">Comment je définis une largeur de ligne dans ma carte ?</a></li>
<li><a class="reference internal" href="#why-do-my-jpeg-input-images-look-different-via-mapserver">Why do my JPEG input images look different via MapServer?</a></li>
<li><a class="reference internal" href="#which-image-format-should-i-use">Quel format d&#8217;image doit je utiliser?</a></li>
<li><a class="reference internal" href="#why-doesn-t-pil-python-imaging-library-open-my-pngs">Pourquoi la bibliothèque PIL (Python Imaging Library) n&#8217;ouvre pas mes PNG?</a></li>
<li><a class="reference internal" href="#why-do-my-symbols-look-poor-in-jpeg-output">Pourquoi mes symboles paraissent fades dans les rendus JPEG?</a></li>
<li><a class="reference internal" href="#how-do-i-add-a-copyright-notice-on-the-corner-of-my-map">Comment j&#8217;ajoute un copyright dans le coin de ma carte ?</a><ul>
<li><a class="reference internal" href="#example-layer">Couche exemple</a></li>
<li><a class="reference internal" href="#result">Résultat</a></li>
</ul>
</li>
<li><a class="reference internal" href="#how-do-i-have-a-polygon-that-has-both-a-fill-and-an-outline-with-a-width">Comment puis-je réaliser un polygone qui a, à la fois, un remplissage et un contour avec une taille ?</a></li>
<li><a class="reference internal" href="#how-can-i-create-simple-antialiased-line-features">Comment je peux créer des objets linéaires avec anticrênelages ?</a></li>
<li><a class="reference internal" href="#which-ogc-specifications-does-mapserver-support">Quelles spécifications OGC sont géré par MapServer ?</a></li>
<li><a class="reference internal" href="#why-does-my-requested-wms-layer-not-align-correctly">Pourquoi ma couche WMS demandée ne s&#8217;aligne pas correctement ?</a></li>
<li><a class="reference internal" href="#when-i-do-a-getcapabilities-why-does-my-browser-want-to-download-mapserv-exe-mapserv">Quand je fais une requête GetCapabilities, pourquoi mon navigateur veut télécharger mapserv.exe/mapserv?</a></li>
<li><a class="reference internal" href="#why-do-my-wms-getmap-requests-return-exception-using-mapserver-5-0">Pourquoi mes requêtes GetMap WMS renvoient des exceptions en utilisant MapServer 5.0 ?</a></li>
<li><a class="reference internal" href="#using-mapserver-6-0-why-don-t-my-layers-show-up-in-getcapabilities-responses-or-are-not-found-anymore">En utilisant MapServer 6.0, pourquoi mes couches ne s&#8217;affichent plus dans les réponses de requêtes GetCapabilities ou ne sont plus trouvées du tout?</a></li>
<li><a class="reference internal" href="#where-do-i-find-my-epsg-code">Où puis-je trouver mon code EPSG ?</a></li>
<li><a class="reference internal" href="#how-can-i-reproject-my-data-using-ogr2ogr">Comment je peux reprojeter mes données en utilisant ogr2ogr</a></li>
<li><a class="reference internal" href="#how-can-i-help-improve-the-documentation-on-this-site">Comment puis-je aider à améliorer la documentation sur ce site?</a></li>
<li><a class="reference internal" href="#what-s-with-mapserver-s-logo">Que signifie le logo de MapServer ?</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="Index général"
             >index</a></li>
        <li class="right" >
          <a href="copyright.html" title="License"
             >suivant</a> |</li>
        <li class="right" >
          <a href="errors.html" title="Erreurs"
             >précédent</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="documentation.html" >Documentation de MapServer 7.0.2</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; <a href="copyright.html">Copyright</a> 2016, Open Source Geospatial Foundation.
      Créé avec <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.8.
    </div>
  </body>
</html>