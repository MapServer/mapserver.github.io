
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="fr">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Compilation &amp; Installation &#8212; MapServer 7.2.2 documentation</title>
    <link rel="stylesheet" href="../_static/sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <link rel="shortcut icon" href="../_static/mapserver.ico"/>
    <link rel="author" title="À propos de ces documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Recherche" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="Fichier de configuration" href="config.html" />
    <link rel="prev" title="MapCache 1.6.1" href="index.html" /> 
  </head><body>

<table width="100%" style="width: 100%; background-color: white;">
  <tr>
    <td rowspan="2" style="padding: 10px 0px 10px 10px;">
      <a href="../index.html" title="Home"><img src="../_static/banner.png" alt="MapServer banner" border="0" /></a>
    </td>
    <td style="padding: 10px 10px 0px 0px; text-align: right; vertical-align: top;">
      <a href="../index.html" title="Home">Home</a> |
      <a href="../products.html" title="Products (MapServer core, MapCache, TinyOWS">Products</a> |
      <a href="https://github.com/mapserver/mapserver/issues/" title="Issue Tracker (MapServer core)">Issue Tracker</a> |
      <a href="../community/service_providers.html" title="Professional Service Providers">Service Providers</a> |      
      <a href="../faq.html" title="Frequently Asked Questions">FAQ</a> |
      <a href="https://twitter.com/mapserver_osgeo" title="Twitter">Twitter</a> |
      <a href="../download.html" title="Download Source or Binaries">Download </a>
    </td>
  </tr>
  <tr>
    <td style="padding: 0px 10px 0px 0px; text-align: right; vertical-align: bottom;">
        
          
            <a href="../../mapcache/install.html"><img src="../_static/flagicons/en.png" alt="en" title="en" border="0" /></a>
          
        
        
          
            <a href="../../ar/mapcache/install.html"><img src="../_static/flagicons/ar.png" alt="ar" title="ar" border="0" /></a>
          
        
        
          
            <a href="../../de/mapcache/install.html"><img src="../_static/flagicons/de.png" alt="de" title="de" border="0" /></a>
          
        
        
          
            <a href="../../el/mapcache/install.html"><img src="../_static/flagicons/el.png" alt="el" title="el" border="0" /></a>
          
        
        
          
            <a href="../../es/mapcache/install.html"><img src="../_static/flagicons/es.png" alt="es" title="es" border="0" /></a>
          
        
        <img src="../_static/flagicons/fr.png" alt="fr" title="fr" border="0" width="18px" height="13px"/>
        
          
            <a href="../../id/mapcache/install.html"><img src="../_static/flagicons/id.png" alt="id" title="id" border="0" /></a>
          
        
        
          
            <a href="../../it/mapcache/install.html"><img src="../_static/flagicons/it.png" alt="it" title="it" border="0" /></a>
          
        
        
          
            <a href="../../ja/mapcache/install.html"><img src="../_static/flagicons/ja.png" alt="ja" title="ja" border="0" /></a>
          
        
        
          
            <a href="../../nl_NL/mapcache/install.html"><img src="../_static/flagicons/nl_NL.png" alt="nl_NL" title="nl_NL" border="0" /></a>
          
        
        
          
            <a href="../../pl/mapcache/install.html"><img src="../_static/flagicons/pl.png" alt="pl" title="pl" border="0" /></a>
          
        
        
          
            <a href="../../ru/mapcache/install.html"><img src="../_static/flagicons/ru.png" alt="ru" title="ru" border="0" /></a>
          
        
        
          
            <a href="../../sq/mapcache/install.html"><img src="../_static/flagicons/sq.png" alt="sq" title="sq" border="0" /></a>
          
        
        
          
            <a href="../../tr/mapcache/install.html"><img src="../_static/flagicons/tr.png" alt="tr" title="tr" border="0" /></a>
          
        

    </td>
  </tr>
</table>


    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Index général"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="config.html" title="Fichier de configuration"
             accesskey="N">suivant</a> |</li>
        <li class="right" >
          <a href="index.html" title="MapCache 1.6.1"
             accesskey="P">précédent</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../documentation.html" >MapServer 7.2.2 Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">MapCache 1.6.1</a> &#187;</li> 
      </ul>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="compilation-installation">
<span id="mapcache-install"></span><h1><a class="toc-backref" href="#table-of-contents">Compilation &amp; Installation</a><a class="headerlink" href="#compilation-installation" title="Lien permanent vers ce titre">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Author:</th><td class="field-body">Thomas Bonfort</td>
</tr>
<tr class="field-even field"><th class="field-name">Contact:</th><td class="field-body">tbonfort at terriscope.fr</td>
</tr>
<tr class="field-odd field"><th class="field-name">Author:</th><td class="field-body">Alan Boudreault</td>
</tr>
<tr class="field-even field"><th class="field-name">Contact:</th><td class="field-body">aboudreaut at magears.com</td>
</tr>
<tr class="field-odd field"><th class="field-name">Author:</th><td class="field-body">Jeff McKenna</td>
</tr>
<tr class="field-even field"><th class="field-name">Contact:</th><td class="field-body">jmckenna at gatewaygeomatics.com</td>
</tr>
<tr class="field-odd field"><th class="field-name">Author:</th><td class="field-body">Mathieu Coudert</td>
</tr>
<tr class="field-even field"><th class="field-name">Contact:</th><td class="field-body">mathieu.coudert at gmail.com</td>
</tr>
<tr class="field-odd field"><th class="field-name">Last Updated:</th><td class="field-body">2016-02-02</td>
</tr>
</tbody>
</table>
<div class="contents topic" id="table-of-contents">
<p class="topic-title first">Table des matières</p>
<ul class="simple">
<li><a class="reference internal" href="#compilation-installation" id="id1">Compilation &amp; Installation</a><ul>
<li><a class="reference internal" href="#getting-the-source" id="id2">Obtenir les sources</a></li>
<li><a class="reference internal" href="#linux-instructions" id="id3">Instructions Linux</a><ul>
<li><a class="reference internal" href="#apache-module-specific-instructions" id="id4">Instructions spécifiques au module Apache</a></li>
<li><a class="reference internal" href="#nginx-specific-instructions" id="id5">Instructions spécifiques Nginx</a></li>
<li><a class="reference internal" href="#cgi-fastcgi-specific-instructions" id="id6">Instructions spécifiques CGI/FastCGI</a></li>
<li><a class="reference internal" href="#customizing-the-build-or-if-something-went-wrong" id="id7">Personnaliser la compilation, ou s’il y a eu un problème</a></li>
</ul>
</li>
<li><a class="reference internal" href="#windows-instructions" id="id8">Instructions Windows</a><ul>
<li><a class="reference internal" href="#dependencies" id="id9">Dépendances</a></li>
<li><a class="reference internal" href="#configure-your-makefile" id="id10">Configurer votre Makefile</a></li>
<li><a class="reference internal" href="#compilation" id="id11">Compilation</a></li>
<li><a class="reference internal" href="#move-the-module-into-the-apache-directory" id="id12">Déplacer le module dans le répertoire Apache</a></li>
<li><a class="reference internal" href="#configure-your-installed-apache" id="id13">Configurer votre Apache installé</a></li>
<li><a class="reference internal" href="#test-your-mapcache-module" id="id14">Tester votre module MapCache</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="getting-the-source">
<h2><a class="toc-backref" href="#table-of-contents">Obtenir les sources</a><a class="headerlink" href="#getting-the-source" title="Lien permanent vers ce titre">¶</a></h2>
<p>Le projet MapCache est situé sur <a class="reference external" href="https://github.com/mapserver/mapcache">https://github.com/mapserver/mapcache</a>, et peut être récupéré avec soit:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># readonly</span>
git clone git://github.com/mapserver/mapcache.git
<span class="c1"># ssh authenticated</span>
git clone git@github.com:mapserver/mapcache.git
<span class="c1"># tarball</span>
wget https://github.com/mapserver/mapcache/zipball/master
</pre></div>
</div>
</div>
<div class="section" id="linux-instructions">
<h2><a class="toc-backref" href="#table-of-contents">Instructions Linux</a><a class="headerlink" href="#linux-instructions" title="Lien permanent vers ce titre">¶</a></h2>
<p>Ces instructions ciblent une mise en place sous Debian/Ubuntu, mais devraient s’appliquer avec quelques modifications à n’importe quelle installation Linux.</p>
<p>MapCache nécessite un certain nombre d’en-têtes de bibliothèques pour pouvoir être compilé correctement:</p>
<ul class="simple">
<li><strong>apache / apr / apr-util / apx2</strong>: ceux-ci sont inclus dans les paquets <em>apache2-prefork-dev</em> ou <em>apache2-threaded-dev</em>, en fonction du MPM (Multi-Processing Module) Apache que vous faites tourner. Ce paquet récupérera les en-têtes APR nécessaires, que vous auriez normalement installé manuellement si vous n’aviez pas compilé un module Apache (<em>libaprutil1-dev</em> et <em>libapr1-dev</em>)</li>
<li><strong>png</strong>: <em>libpng12-dev</em></li>
<li><strong>jpeg</strong>: <em>libjpeg62-dev</em></li>
<li><strong>curl</strong>: <em>libcurl4-gnutls-dev</em></li>
</ul>
<p>Les bibliothèques suivantes ne sont pas requises mais sont néanmoins recommandées:</p>
<ul class="simple">
<li><strong>pcre</strong>: <em>libpcre3-dev</em>. Ceci vous offrira une syntaxe d’expression régulière plus puissante lors de la création de motifs de validation pour les dimensions</li>
<li><strong>pixman</strong>: <em>libpixman-1-dev</em>. La bibliothèque de manipulation de pixel est utilisée pour la mise à l’échelle et la composition alpha des images. MapCache intègre des portions de code pour réaliser ces tâches, mais Pixman est généralement plus rapide car il possède un code optimisé pour les microprocesseurs modernes (SSE2, MMX etc.)</li>
</ul>
<p>Les librairies suivantes ne sont pas indispensables, mais nécessaires pour activer des fonctionnalités additionnelles:</p>
<ul class="simple">
<li><strong>fcgi</strong>: <em>libfcgi-dev</em>. Utilisé pour compiler une version FastCGI si vous ne voulez pas utiliser MapCache en module Apache.</li>
<li><strong>gdal / geos</strong>: <em>libgdal1-dev</em> <em>libgeos-dev</em>. Nécessaires pour activer les options avancées de génération de cache (pour ne générer que les tuiles qui intersecte un objet géographique donné)</li>
<li><strong>sqlite</strong>: <em>libsqlite3-dev</em>. Pour permettre l’utilisation de SQLite pour le stockage des tuiles.</li>
<li><strong>tiff</strong>: <em>libtiff4-dev</em>. Pour permettre l’utilisation de fichiers TIFF pour le stockage des tuiles.</li>
<li><strong>berkeley db</strong> <em>libdb4.8-dev</em> : Pour permettre l’utilisation de Berkeley DB pour le stockage des tuiles.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">MapCache se compile désormais avec CMake.</p>
</div>
<p>Pour les utilisateurs UNIX dont tous les paquetages sont dans les emplacements par défaut, la compilation devrait se résumer à:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> mapcache
$ mkdir build
$ <span class="nb">cd</span> build
$ cmake ..
$ <span class="c1"># follow instructions below if missing a dependency</span>
$ make
$ sudo make install
</pre></div>
</div>
<div class="section" id="apache-module-specific-instructions">
<h3><a class="toc-backref" href="#table-of-contents">Instructions spécifiques au module Apache</a><a class="headerlink" href="#apache-module-specific-instructions" title="Lien permanent vers ce titre">¶</a></h3>
<p>Le make install ci-dessus installe le module Apache, mais si vous devez spécifiquement n’installer que le module Apache, vous pouvez faire ce qui suit</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ sudo make install-module
$ sudo ldconfig
</pre></div>
</div>
<p>Le script d’installation fait en sorte de déposer le module compilé dans le répertoire apache des modules. Les modalités d’activation des modules sont généralement spécifiques aux distributions utilisées, mais peut se résumer à l’extrait suivant qui devrait être présent dans la configuration Apache ( e.g. /usr/local/httpd/conf/httpd.conf ou /etc/apache2/sites-available/default ):</p>
<div class="highlight-apache notranslate"><div class="highlight"><pre><span></span><span class="nb">LoadModule</span> mapcache_module    modules/mod_mapcache.so
</pre></div>
</div>
<p>Ensuite, une configuration mapcache est associée à l’URL du serveur par l’extrait suivant</p>
<p>Pour Apache &lt; 2.4:</p>
<div class="highlight-apache notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;IfModule</span> <span class="s">mapcache_module</span><span class="nt">&gt;</span>
   <span class="nt">&lt;Directory</span> <span class="s">/path/to/directory</span><span class="nt">&gt;</span>
      <span class="nb">Order</span> Allow,Deny
      <span class="nb">Allow</span> from <span class="k">all</span>
   <span class="nt">&lt;/Directory&gt;</span>
   <span class="nb">MapCacheAlias</span> <span class="sx">/mapcache</span> <span class="s2">&quot;/path/to/directory/mapcache.xml&quot;</span>
<span class="nt">&lt;/IfModule&gt;</span>
</pre></div>
</div>
<p>Pour Apache &gt;= 2.4:</p>
<div class="highlight-apache notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;IfModule</span> <span class="s">mapcache_module</span><span class="nt">&gt;</span>
   <span class="nt">&lt;Directory</span> <span class="s">/path/to/directory</span><span class="nt">&gt;</span>
      <span class="nb">Require</span> <span class="k">all</span> granted
   <span class="nt">&lt;/Directory&gt;</span>
   <span class="nb">MapCacheAlias</span> <span class="sx">/mapcache</span> <span class="s2">&quot;/path/to/directory/mapcache.xml&quot;</span>
<span class="nt">&lt;/IfModule&gt;</span>
</pre></div>
</div>
<p>Avant de redémarrer, copiez le fichier d’exemple mapcache.xml à l’emplacement spécifié dans votre configuration Apache:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ cp mapcache.xml /path/to/directory/mapcache.xml
</pre></div>
</div>
<p>Enfin, redémarrer Apache pour activer la nouvelle configuration</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ sudo apachectl restart
</pre></div>
</div>
<p>Si vous n’avez pas désactivé le service de démonstration, vous devriez pouvoir y accéder à l’adresse <a class="reference external" href="http://myserver/mapcache/demo">http://myserver/mapcache/demo</a></p>
</div>
<div class="section" id="nginx-specific-instructions">
<h3><a class="toc-backref" href="#table-of-contents">Instructions spécifiques Nginx</a><a class="headerlink" href="#nginx-specific-instructions" title="Lien permanent vers ce titre">¶</a></h3>
<div class="admonition warning">
<p class="first admonition-title">Avertissement</p>
<p class="last">Travailler avec nginx est toujours en quelque sorte expérimental. Le processus suivant  a uniquement été testé sur la version de développement, soit nginx-1.1.x</p>
</div>
<p>Pour le support nginx vous devez compiler mapcache avec les sources de nginx. Télécharger le code source de Nginx:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> /usr/local/src
$ mkdir nginx
$ <span class="nb">cd</span> nginx
$ wget http://nginx.org/download/nginx-1.1.19.tar.gz
$ tar -xzvf nginx-1.1.19.tar.gz
$ <span class="nb">cd</span> nginx-1.1.19/
</pre></div>
</div>
<p>Lancez la commande de configure avec l’option <code class="docutils literal notranslate"><span class="pre">--add-module</span></code>. Cette option doit pointer vers le répertoire nginx de mapcache. En partant du principe que les sources de MapServer on été clonées ou décompressées dans <code class="docutils literal notranslate"><span class="pre">/usr/local/src</span></code>, un exemple d’instruction configure pour nginx ressemblerait à ceci:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ ./configure --add-module<span class="o">=</span>/usr/local/src/mapcache/nginx
</pre></div>
</div>
<p>Ensuite compiler nginx:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ make
$ sudo make install
</pre></div>
</div>
<p>Du fait de l’architecture non-bloquante de Nginx, le module nginx de MapCache ne réalise aucune opération qui pourrait déboucher sur un blocage du process en cours par un calcul trop long (i.e : requêter une (meta)tuile absente du cache, proxyfier une requête vers un serveur WMS distant ou attendre qu’une tuile soit rendue par un autre process). Il génère alors une erreur 404. Ce comportement est essentiel pour que tous les process nginx ne soient occupés et ne l’empêchent de répondre à d’autres requêtes. Alors que cela ne pose pas de problème pour les jeux de tuiles complètement générés, ceci implique que ce genre de requêtes doivent être proxyfiées vers une autre instance de MapCache ne souffrant pas de ces problèmes d’alimentation (i.e. soit un MapCache cgi, soit un serveur apache proxyfié). Dans ce scénario, les deux instances nginx et apache/fastcgi de MapCache doivent partager le même fichier de configuration <code class="docutils literal notranslate"><span class="pre">mapcache.xml</span></code>.</p>
<p>MapCache fournit un ficheir <code class="docutils literal notranslate"><span class="pre">nginx.conf</span></code> dans son sous-répertoire nginx. Ce fichier contient un exemple de configuration pour charger MapCache. La partie la plus importante de la configuration est la directive location qui associe l’URI <code class="docutils literal notranslate"><span class="pre">^/mapcache</span></code> au chemin vers <code class="docutils literal notranslate"><span class="pre">mapcache.xml</span></code>. Vous devrez adapter cette directive afin qu’elle désigne votre propre fichier <code class="docutils literal notranslate"><span class="pre">mapcache.xml</span></code></p>
<p>La configuration de base sans aucun mandataire (qui renverra des erreurs 404 sur les tuiles inexistantes) est :</p>
<div class="highlight-nginx notranslate"><div class="highlight"><pre><span></span><span class="k">location</span> <span class="p">~</span> <span class="sr">^/mapcache(?&lt;path_info&gt;/.*|$)</span> <span class="p">{</span>
   <span class="kn">set</span> <span class="nv">$url_prefix</span> <span class="s">&quot;/mapcache&quot;</span><span class="p">;</span>
   <span class="kn">mapcache</span> <span class="s">/usr/local/src/mapcache/mapcache.xml</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Lors de la proxyfication des requêtes sur les tuiles inexistantes vers une instance de MapCache tournant sur un serveur Apache, nous renverrons toutes les erreurs 404 de MapCache vers un serveur <code class="docutils literal notranslate"><span class="pre">mapcache.apache.tld</span></code> associé au port 8080, configuré pour répondre aux requêtes sur l’emplacement <code class="docutils literal notranslate"><span class="pre">/mapcache</span></code>.</p>
<div class="highlight-nginx notranslate"><div class="highlight"><pre><span></span><span class="k">location</span> <span class="p">~</span> <span class="sr">^/mapcache(?&lt;path_info&gt;/.*|$)</span> <span class="p">{</span>
   <span class="kn">set</span> <span class="nv">$url_prefix</span> <span class="s">&quot;/mapcache&quot;</span><span class="p">;</span>
   <span class="kn">mapcache</span> <span class="s">/usr/local/src/mapcache/mapcache.xml</span><span class="p">;</span>
   <span class="kn">error_page</span> <span class="mi">404</span> <span class="p">=</span> <span class="s">@apache_mapcache</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">location</span> <span class="s">@apache_mapcache</span> <span class="p">{</span>
   <span class="kn">proxy_pass</span> <span class="s">http://mapcache.apache.tld:8080</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Si vous utilisez des instances FastCGI de MapCache, générées par par exemple spawn-fcgi ou supervisord sur le port 9001 (prenez soin d’activer le support FastCGI lors de la compilation de MapCache et de régler la variable d’environnement  MAPCACHE_CONFIG_FILE avant la génération) :</p>
<div class="highlight-nginx notranslate"><div class="highlight"><pre><span></span><span class="k">location</span> <span class="p">~</span> <span class="sr">^/mapcache(?&lt;path_info&gt;/.*|$)</span> <span class="p">{</span>
   <span class="kn">set</span> <span class="nv">$url_prefix</span> <span class="s">&quot;/mapcache&quot;</span><span class="p">;</span>
   <span class="kn">mapcache</span> <span class="s">/usr/local/src/mapcache/mapcache.xml</span><span class="p">;</span>
   <span class="kn">error_page</span> <span class="mi">404</span> <span class="p">=</span> <span class="s">@fastcgi_mapcache</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">location</span> <span class="s">@fastcgi_mapcache</span> <span class="p">{</span>
   <span class="kn">fastcgi_pass</span>   <span class="n">localhost</span><span class="p">:</span><span class="mi">9001</span><span class="p">;</span>
   <span class="kn">fastcgi_param</span>  <span class="s">QUERY_STRING</span>     <span class="nv">$query_string</span><span class="p">;</span>
   <span class="kn">fastcgi_param</span>  <span class="s">REQUEST_METHOD</span>   <span class="nv">$request_method</span><span class="p">;</span>
   <span class="kn">fastcgi_param</span>  <span class="s">CONTENT_TYPE</span>     <span class="nv">$content_type</span><span class="p">;</span>
   <span class="kn">fastcgi_param</span>  <span class="s">CONTENT_LENGTH</span>   <span class="nv">$content_length</span><span class="p">;</span>
   <span class="kn">fastcgi_param</span>  <span class="s">PATH_INFO</span>        <span class="nv">$path_info</span><span class="p">;</span>
   <span class="kn">fastcgi_param</span>  <span class="s">SERVER_NAME</span>      <span class="nv">$server_name</span><span class="p">;</span>
   <span class="kn">fastcgi_param</span>  <span class="s">SERVER_PORT</span>      <span class="nv">$server_port</span><span class="p">;</span>
   <span class="kn">fastcgi_param</span>  <span class="s">SCRIPT_NAME</span>      <span class="s">&quot;/mapcache&quot;</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Copier les sections correspondantes de <code class="docutils literal notranslate"><span class="pre">nginx.conf</span></code> du répertoire <code class="docutils literal notranslate"><span class="pre">nginx</span></code> de MapCache dans le fichier de configuration de Nginx (dans notre cas <code class="docutils literal notranslate"><span class="pre">/usr/local/nginx/conf/nginx.conf</span></code>). Vous devriez alors avoir accès à la demo à l’URL <a class="reference external" href="http://myserver/mapcache/demo">http://myserver/mapcache/demo</a></p>
</div>
<div class="section" id="cgi-fastcgi-specific-instructions">
<h3><a class="toc-backref" href="#table-of-contents">Instructions spécifiques CGI/FastCGI</a><a class="headerlink" href="#cgi-fastcgi-specific-instructions" title="Lien permanent vers ce titre">¶</a></h3>
<p>Un binaire cgi/FastCGI est situé dans le sous-répertoire MapCache, et est nommé «&nbsp;mapcache&nbsp;». L’activation du FastCGI pour le programme MapCache sur votre serveur web ne fait pas partie de ces instructions. Plus de détails peuvent être trouvés à la page :ref:<a href="#id1"><span class="problematic" id="id2">`</span></a>FastCGI &lt;fastcgi&gt;`ou dans ces pages web plus générale sur Internet.</p>
<p>La programme MapCache FastCGI recherche son fichier de configuration dans la variable d’environnement MAPCACHE_CONFIG_FILE, qui doit donc être paramétrée par le serveur web avant qu’il ne génère des process MapCache.</p>
<div class="admonition seealso">
<p class="first admonition-title">Voir aussi</p>
<p class="last"><a class="reference internal" href="config.html#mapcache-config"><span class="std std-ref">Fichier de configuration</span></a></p>
</div>
<p>Pour Apache avec mod_cgi:</p>
<div class="highlight-apache notranslate"><div class="highlight"><pre><span></span><span class="nb">SetEnv</span> <span class="s2">&quot;MAPCACHE_CONFIG_FILE&quot;</span> <span class="s2">&quot;/path/to/mapcache/mapcache.xml&quot;</span>
</pre></div>
</div>
<p>Pour Apache avec mod_fcgid:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">FcgidInitialEnv</span> <span class="s2">&quot;MAPCACHE_CONFIG_FILE&quot;</span> <span class="s2">&quot;/path/to/mapcache/mapcache.xml</span>
</pre></div>
</div>
<p>Si vous n’avez pas désactivé le service de démonstration, vous devriez maintenant pouvoir y accéder à l’URL <a class="reference external" href="http://myserver/fcgi-bin/mapcache/demo">http://myserver/fcgi-bin/mapcache/demo</a> pour peu que vos process fcgi soient accessibles par l’alias fcgi-bin.</p>
<p>Avec une instance Apache fonctionnant avec mod_fcgid, la partie à ajouter à httpd.conf pour activer mapcache pourrait être :</p>
<div class="highlight-apache notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;IfModule</span> <span class="s">mod_fcgid.c</span><span class="nt">&gt;</span>
   <span class="nb">IPCCommTimeout</span> <span class="m">120</span>
   <span class="nb">MaxProcessCount</span> <span class="m">10</span>
   <span class="nb">FcgidInitialEnv</span> <span class="s2">&quot;MAPCACHE_CONFIG_FILE&quot;</span> <span class="s2">&quot;/path/to/mapcache/mapcache.xml&quot;</span>
   <span class="nt">&lt;Location</span> <span class="s">/map.fcgi</span><span class="nt">&gt;</span>
      <span class="nb">Order</span> Allow,Deny
      <span class="nb">Allow</span> from <span class="k">all</span>
      <span class="nb">SetHandler</span> fcgid-script
   <span class="nt">&lt;/Location&gt;</span>
   <span class="nb">ScriptAlias</span> <span class="sx">/map.fcgi</span> <span class="s2">&quot;/path/to/mapcache/src/mapcache&quot;</span>
<span class="nt">&lt;/IfModule&gt;</span>
</pre></div>
</div>
<p>Le service MapCache sera alors accessible à l’URL <a class="reference external" href="http://myserver/map.fcgi[/demo">http://myserver/map.fcgi[/demo</a>]</p>
</div>
<div class="section" id="customizing-the-build-or-if-something-went-wrong">
<h3><a class="toc-backref" href="#table-of-contents">Personnaliser la compilation, ou s’il y a eu un problème</a><a class="headerlink" href="#customizing-the-build-or-if-something-went-wrong" title="Lien permanent vers ce titre">¶</a></h3>
<p>Selon les paquetages disponibles dans les emplacement par défaut de votre système, l’étape «&nbsp;cmake ..&nbsp;» se sera probablement interrompue avec des messages indiquant des dépendances manquantes (par défaut, MapCache en a plusieurs). Le message d’erreur indiqué par MapCache devrait vous donner de bons indices quant à ce qu’il vous reste à faire, selon que la dépendance manquante vous est nécessaire ou pas.</p>
<p>mod_mapcache nécessite les en-têtes de développement Apache, libcurl, libjpeg et libpng. Le script CMake tentera de les localiser dans les emplacements par défaut du système, qui peut être outrepassé avec des commutateurs -D. Par exemple, si vous avez un message tel que “Could not find APR”, vous pouvez utiliser une commande telle que (en supposant que apr est dans /usr/local/apr):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ cmake -DCMAKE_PREFIX_PATH<span class="o">=</span><span class="s2">&quot;/usr/local/apr;&quot;</span> ..
</pre></div>
</div>
<p>De même si vous ne voulez pas de fCGI, vous pouvez désactiver la dépendance en relançant le cmake avec -DWITH_DEPENDENCY=0, e.g.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ cmake .. -DWITH_FCGI<span class="o">=</span><span class="m">0</span>
</pre></div>
</div>
<div class="section" id="options-supported-by-the-mapcache-cmake-builder">
<h4>Options supportées par le compilateur cmake MapCache<a class="headerlink" href="#options-supported-by-the-mapcache-cmake-builder" title="Lien permanent vers ce titre">¶</a></h4>
<p>Voici une liste des options supportées qui peuvent être activées/désactivées à la compilation.</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">option</span><span class="p">(</span><span class="n">WITH_PIXMAN</span> <span class="s2">&quot;Use Pixman for SSE optimized image manipulations&quot;</span> <span class="n">ON</span><span class="p">)</span>
<span class="n">option</span><span class="p">(</span><span class="n">WITH_SQLITE</span> <span class="s2">&quot;Use SQLite as a cache backend&quot;</span> <span class="n">ON</span><span class="p">)</span>
<span class="n">option</span><span class="p">(</span><span class="n">WITH_BERKELEY_DB</span> <span class="s2">&quot;Use Berkeley DB as a cache backend&quot;</span> <span class="n">OFF</span><span class="p">)</span>
<span class="n">option</span><span class="p">(</span><span class="n">WITH_MEMCACHE</span> <span class="s2">&quot;Use memcache as a cache backend (requires recent apr-util)&quot;</span> <span class="n">OFF</span><span class="p">)</span>
<span class="n">option</span><span class="p">(</span><span class="n">WITH_TIFF</span> <span class="s2">&quot;Use TIFFs as a cache backend&quot;</span> <span class="n">OFF</span><span class="p">)</span>
<span class="n">option</span><span class="p">(</span><span class="n">WITH_TIFF_WRITE_SUPPORT</span> <span class="s2">&quot;Enable (experimental) support for writable TIFF cache backends&quot;</span> <span class="n">OFF</span><span class="p">)</span>
<span class="n">option</span><span class="p">(</span><span class="n">WITH_GEOTIFF</span> <span class="s2">&quot;Allow GeoTIFF metadata creation for TIFF cache backends&quot;</span> <span class="n">OFF</span><span class="p">)</span>
<span class="n">option</span><span class="p">(</span><span class="n">WITH_PCRE</span> <span class="s2">&quot;Use PCRE for regex tests&quot;</span> <span class="n">OFF</span><span class="p">)</span>
<span class="n">option</span><span class="p">(</span><span class="n">WITH_MAPSERVER</span> <span class="s2">&quot;Enable (experimental) support for the MapServer library&quot;</span> <span class="n">OFF</span><span class="p">)</span>
<span class="n">option</span><span class="p">(</span><span class="n">WITH_GEOS</span> <span class="s2">&quot;Choose whether GEOS geometry operations support should be built in&quot;</span> <span class="n">ON</span><span class="p">)</span>
<span class="n">option</span><span class="p">(</span><span class="n">WITH_OGR</span> <span class="s2">&quot;Choose whether OGR/GDAL input vector support should be built in&quot;</span> <span class="n">ON</span><span class="p">)</span>
<span class="n">option</span><span class="p">(</span><span class="n">WITH_CGI</span> <span class="s2">&quot;Choose whether CGI executable should be built&quot;</span> <span class="n">ON</span><span class="p">)</span>
<span class="n">option</span><span class="p">(</span><span class="n">WITH_FCGI</span> <span class="s2">&quot;Choose whether CGI executable should support FastCGI&quot;</span> <span class="n">ON</span><span class="p">)</span>
<span class="n">option</span><span class="p">(</span><span class="n">WITH_VERSION_STRING</span> <span class="s2">&quot;Show MapCache in server version string&quot;</span> <span class="n">ON</span><span class="p">)</span>
<span class="n">option</span><span class="p">(</span><span class="n">WITH_APACHE</span> <span class="s2">&quot;Build Apache Module&quot;</span> <span class="n">ON</span><span class="p">)</span>
</pre></div>
</div>
<ul>
<li><p class="first"><strong>Pixman</strong> (<em>recommandé</em>, à partir de la version 0.5)</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>-DWITH_PIXMAN<span class="o">=[</span><span class="m">0</span><span class="p">|</span><span class="m">1</span><span class="o">]</span>
</pre></div>
</div>
<p>Pixman est une bibliothèque de manipulation de pixel utilisée pour assembler les tuiles lors des réponses à des requêtes WMS non tuilées. Le recours à Pixman est recommandé dans la mesure où il est parfaitement optimisé et tirera parti des récentes extensions des microprocesseurs (MMX, SSE…) pour accélérer les opérations de remplissage et de ré-échantillonnage. Si la bibliothèque Pixman n’est pas trouvée, MapCache utilisera son mécanisme interne qui est plus lent.</p>
</li>
<li><p class="first"><strong>SQLite</strong> (<em>optionnel</em>, à partir de la version 0.5)</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>-DWITH_SQLITE<span class="o">=[</span><span class="m">0</span><span class="p">|</span><span class="m">1</span><span class="o">]</span>
</pre></div>
</div>
<p>SQLite est utilisé pour permettre d’avoir les caches backend de type SQLite et MBTiles. La version 3.5.0 ou plus récente est requise.</p>
</li>
<li><p class="first"><strong>GDAL</strong> (<em>optionnel</em>, à partir de la version 0.4, nécessite aussi la bibliothèque geos)</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>-DWITH_OGR<span class="o">=[</span><span class="m">0</span><span class="p">|</span><span class="m">1</span><span class="o">]</span>
</pre></div>
</div>
<p>GDAL (ou plutôt OGR) est utilisé par le pré-générateur de cache pour permettre la génération de tuiles intersectant un polygone donné, pour par exemple pré-générer les tuiles sur un pays particulier.</p>
</li>
<li><p class="first"><strong>GEOS</strong> (<em>optionnel</em>, à partir de la version 0.5)</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>-DWITH_GEOS<span class="o">=[</span><span class="m">0</span><span class="p">|</span><span class="m">1</span><span class="o">]</span>
</pre></div>
</div>
<p>Parallèlement à GDAL/OGR, GEOS est requis par le pré-générateur pour tester les intersection des tuiles avec des entités géographiques. Une version suffisamment récente de GEOS (avec la prise en charge des géométries préparées) est nécessaire (mais pas vérifié par le script de configuration, vous pouvez donc avoir des erreurs à la compilation avec une version trop ancienne de GEOS)</p>
</li>
<li><p class="first"><strong>PCRE</strong> (<em>optionnel</em>)</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>-DWITH_PCRE<span class="o">=[</span><span class="m">0</span><span class="p">|</span><span class="m">1</span><span class="o">]</span>
</pre></div>
</div>
<p>Les PCRE (perl compatible regular expressions)  peuvent être utilisées en remplacement des expressions régulières POSIX pour valider les dimensions WMS. Elles sont plus puissantes que les expressions régulières POSIX (et peuvent être plus lentes). Vous n’avez pas besoin de ce composant si vous n’avez pas l’intention d’utiliser les dimensions WMS avec un validateur d’expression régulière, ou si vos besoins sont couverts par POSIX.</p>
<div class="admonition seealso">
<p class="first admonition-title">Voir aussi</p>
<p class="last"><a class="reference internal" href="dimensions.html#mapcache-dimensions"><span class="std std-ref">Dimensions d’un jeu de tuiles</span></a></p>
</div>
</li>
<li><p class="first"><strong>Support FastCGI</strong> (<em>optionnel</em>)</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>-DWITH_FCGI<span class="o">=[</span><span class="m">0</span><span class="p">|</span><span class="m">1</span><span class="o">]</span>
</pre></div>
</div>
<p>MapCache peut fonctionner comme un exécutable FastCGI. Notez bien que la charge induite par FastCGI n’est pas négligeable comparativement aux résultats que vous pourriez obtenir avec un module Apache natif. La version FastCGI est moins testée et peut être à la traîne de la version module Apache sur quelques détails mineurs.</p>
</li>
<li><p class="first"><a href="#id1"><span class="problematic" id="id2">**</span></a>Support du cache TIFF en lecture/écriture ** (<em>optionnel</em>)</p>
<p>Utiliser des fichiers TIFFs comme système de stockage du cache (LECTURE SEULE)</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>-DWITH_TIFF<span class="o">=[</span><span class="m">0</span><span class="p">|</span><span class="m">1</span><span class="o">]</span>
</pre></div>
</div>
<p>Le support du TIFF en écriture (pour créer de nouveaux fichiers TIFF et ajouter des tuiles à des fichiers TIFF existants) est toujours expérimental et désactivé par défaut. Il y a un risque à obtenir des fichiers TIFF corrompus s’ils ne sont pas placés sur un système de fichiers qui ne permet pas le verrouillage de fichier, car dans ce cas de multiples processus pourraient venir écrire dans le même fichier. Le blocage de fichier entre des processus concurrents est également problématique, bien que MapCache essaie de détecter cette situation en amont et de l’éviter. Pour rester prudent, le mode écriture ne devrait être activé que sur des systèmes de fichiers locaux, avec un Apache prefork ou une installation de MapCache en fastCGI.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>-DWITH_TIFF_WRITE_SUPPORT<span class="o">=[</span><span class="m">0</span><span class="p">|</span><span class="m">1</span><span class="o">]</span>
</pre></div>
</div>
<p>Lors de l’écriture de fichiers TIFF, MapCache peut également ajouter des informations de géoréférencement s’il a été compulé avec le support libtiff. L’écriture de GeoTIFF ne génère pas les informations nécessaires au référencement de la projection de la grille, mais seulement l’échelle du pixel et les points de calage (comme on le retrouve dans les fichiers .tfw)</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>-DWITH_GEOTIFF<span class="o">=[</span><span class="m">0</span><span class="p">|</span><span class="m">1</span><span class="o">]</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">Voir aussi</p>
<p class="last"><a class="reference internal" href="caches.html#mapcache-cache-tiff"><span class="std std-ref">Caches (Geo)TIFF</span></a></p>
</div>
</li>
<li><p class="first"><a href="#id1"><span class="problematic" id="id2">**</span></a>Support du cache de type Memcached ** (<em>optionnel</em>)</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>-DWITH_MEMCACHE<span class="o">=[</span><span class="m">0</span><span class="p">|</span><span class="m">1</span><span class="o">]</span>
</pre></div>
</div>
<p>Le système de cache memcached est désactivé par défaut. Vous pouvez optionnellement l’activer car il ne dépend pas de bibliothèques extérieures (c’est apr-util qui le fournit).</p>
<div class="admonition seealso">
<p class="first admonition-title">Voir aussi</p>
<p class="last"><a class="reference internal" href="caches.html#mapcache-cache-memcache"><span class="std std-ref">Caches Memcache</span></a></p>
</div>
</li>
<li><p class="first"><strong>Options de module Apache</strong></p>
<p>Vous pouvez désactiver la compilation du module Apache si vous prévoyez uniquement d’utiliser l’exécutable FastCGI ou le pré-générateur.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>-DWITH_APACHE<span class="o">=[</span><span class="m">0</span><span class="p">|</span><span class="m">1</span><span class="o">]</span>
</pre></div>
</div>
<p>MapCache se rajoute à l’information de version rapportée par le serveur Apache. Ceci peut être désactivé avec</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>-DWITH_VERSION_STRING<span class="o">=[</span><span class="m">0</span><span class="p">|</span><span class="m">1</span><span class="o">]</span>
</pre></div>
</div>
</li>
<li><p class="first"><strong>Mode MapServer natif</strong> (<em>options expérimentales</em>)</p>
<p>Par défaut MapCache n’est pas lié à MapServer en aucune sorte, et communique uniquement via le protocole WMS. Pour des raisons de performances, il y a la possibilité d’utiliser directement la bibliothèque C de MapServer et éviter ainsi une requête HTTP et une compression/décompression d’image. Cette intégration est néanmoins expérimentale et doit être utilisée avec précaution.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>-DWITH_MAPSERVER<span class="o">=[</span><span class="m">0</span><span class="p">|</span><span class="m">1</span><span class="o">]</span>
</pre></div>
</div>
<p>Ceci utilisera le libmapserver.so du répertoire d’installation de MapServer. MapServer lui-même devra avoir été compilé avec l’option thread_safety activée, à moins que vous n’utilisiez qu’apache en mode prefork ou FastCGI, <strong>et</strong> que vous n’envisagiez pas l’utilisation du pré-générateur. Pour le thread-safety côté MapServer, voyez les tickets  #4041 et #4044.</p>
</li>
<li><p class="first"><strong>Mode Debug</strong> (<em>travail en cours</em>)</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Depuis la migration vers CMake, cela doit être fait.</p>
</div>
<p>Ceci active quelques tests complémentaires dans le code et génère beaucoup plus de messages de debug dans le log serveur. Vous ne devriez probablement pas l’activer à moins de vouloir traquer un problème au sein de MapCache.</p>
</li>
</ul>
</div></blockquote>
</div>
</div>
</div>
<div class="section" id="windows-instructions">
<h2><a class="toc-backref" href="#table-of-contents">Instructions Windows</a><a class="headerlink" href="#windows-instructions" title="Lien permanent vers ce titre">¶</a></h2>
<div class="admonition warning">
<p class="first admonition-title">Avertissement</p>
<p class="last">Les instructions suivantes sont périmées, les compilations Windows sont maintenant traitées de manière identique à celle sous Unix avec cmake.</p>
</div>
<p>Ces instructions s’adressent à une configuration Windows 7 avec un Apache httpd compilé à partir des sources. Le module Apache MapCache a été compilé avec succès avec Microsoft Visual Studio C++ versions 2003, 2008 and 2010.</p>
<div class="section" id="dependencies">
<h3><a class="toc-backref" href="#table-of-contents">Dépendances</a><a class="headerlink" href="#dependencies" title="Lien permanent vers ce titre">¶</a></h3>
<p>Requis:</p>
<ul class="simple">
<li><strong>Apache / APR / APR-UTIL</strong>: inclus avec l’installation httpd Apache</li>
</ul>
<p>Celles-ci peuvent être installées manuellement ou en utilisant le SDK Windows prévu à cet effet depuis <a class="reference external" href="http://vbkto.dyndns.org/sdk/">http://vbkto.dyndns.org/sdk/</a></p>
<ul class="simple">
<li><strong>PNG</strong></li>
<li><strong>JPEG</strong></li>
<li><strong>CURL</strong></li>
</ul>
<p>Recommandé:</p>
<ul class="simple">
<li><strong>PCRE</strong>: <a class="reference external" href="ftp://ftp.gnu.org/pub/gnu/regex/regex-0.12.tar.gz">ftp://ftp.gnu.org/pub/gnu/regex/regex-0.12.tar.gz</a></li>
</ul>
<p>Optionnel:</p>
<ul class="simple">
<li><strong>FCGI</strong>: Nécessaire à la compilation du programme FastCGI si vous ne voulez par faire tourner MapCache en tant que module Apache.</li>
<li><strong>GDAL / GEOS</strong>:: nécessaires à l’activation des options avancées du pré-générateur (pour ne générer que les tuiles intersectant une entité géographique quelconque)</li>
<li><strong>SQLITE</strong>: Pour activer le stockage dans SQLite</li>
<li><strong>TIFF</strong>: Pour activer le stockage dans des fichiers TIFF</li>
</ul>
</div>
<div class="section" id="configure-your-makefile">
<h3><a class="toc-backref" href="#table-of-contents">Configurer votre Makefile</a><a class="headerlink" href="#configure-your-makefile" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ouvrez nmake.opt et modifiez les chemins vers les diverses bibliothèques.</p>
</div>
<div class="section" id="compilation">
<h3><a class="toc-backref" href="#table-of-contents">Compilation</a><a class="headerlink" href="#compilation" title="Lien permanent vers ce titre">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ nmake /f Makefile.vc
</pre></div>
</div>
<p>En cas de succès, les biliothèques et exécutables auront été générés dans leurs répertoires respectifs:</p>
<dl class="docutils">
<dt>apache/</dt>
<dd>Module Apache (mod_mapcache.dll)</dd>
<dt>cgi/</dt>
<dd>Exécutable MapCache FastCGI (mapcache.exe)</dd>
<dt>util/</dt>
<dd>Utilitaires MapCache (mapcache_seed.exe)</dd>
</dl>
</div>
<div class="section" id="move-the-module-into-the-apache-directory">
<h3><a class="toc-backref" href="#table-of-contents">Déplacer le module dans le répertoire Apache</a><a class="headerlink" href="#move-the-module-into-the-apache-directory" title="Lien permanent vers ce titre">¶</a></h3>
<p>Copiez le fichier <em>mod_mapcache.dll</em> dans un de vos sous-répertoires Apache.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Bien que les autres modules soient installés dans <em>/Apache/modules/</em>, vous devriez placer mod_mapcache.dll là où sont ses fichiers dll associés (libcurl.dll, zlib.dll, etc.) afin d’éviter tout problème ultérieur de chargement.</p>
</div>
</div>
<div class="section" id="configure-your-installed-apache">
<h3><a class="toc-backref" href="#table-of-contents">Configurer votre Apache installé</a><a class="headerlink" href="#configure-your-installed-apache" title="Lien permanent vers ce titre">¶</a></h3>
<ul>
<li><p class="first">Modifier votre fichier <em>httpd.conf</em> pour charger le module:</p>
<div class="highlight-apache notranslate"><div class="highlight"><pre><span></span><span class="nb">LoadModule</span> mapcache_module <span class="s2">&quot;D:/ms4w/Apache/cgi-bin/mod_mapcache.dll&quot;</span>
</pre></div>
</div>
</li>
<li><p class="first">Ensuite, configurez votre répertoire MapCache avec le contenu suivant</p>
<div class="highlight-apache notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;IfModule</span> <span class="s">mapcache_module</span><span class="nt">&gt;</span>
   <span class="nt">&lt;Directory</span> <span class="s">&quot;D:/ms4w/apps/mapcache/&quot;</span><span class="nt">&gt;</span>
      <span class="nb">Order</span> Allow,Deny
      <span class="nb">Allow</span> from <span class="k">all</span>
   <span class="nt">&lt;/Directory&gt;</span>
   <span class="nb">MapCacheAlias</span> <span class="sx">/mapcache</span> <span class="s2">&quot;D:/ms4w/apps/mapcache/mapcache.xml&quot;</span>
<span class="nt">&lt;/IfModule&gt;</span>
</pre></div>
</div>
</li>
<li><p class="first">Configurez votre fichier <em>mapcache.xml</em> (voir la section <a class="reference internal" href="config.html#mapcache-config"><span class="std std-ref">Configuration</span></a>)</p>
<div class="admonition warning">
<p class="first admonition-title">Avertissement</p>
<p class="last">Si vous obtenez une erreur telle que «&nbsp;cache disk: host system does not support file symbolic linking&nbsp;», vous devriez commenter la ligne «&nbsp;&lt;symlink_blank/&gt;&nbsp;» dans votre fichier mapcache.xml, ainsi :</p>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&lt;cache <span class="nv">name</span><span class="o">=</span><span class="s2">&quot;disk&quot;</span> <span class="nv">type</span><span class="o">=</span><span class="s2">&quot;disk&quot;</span>&gt;
  &lt;base&gt;D:/ms4w/tmp/ms_tmp/cache&lt;/base&gt;
  &lt;!--&lt;symlink_blank/&gt;--&gt;
&lt;/cache&gt;
</pre></div>
</div>
</li>
<li><p class="first">Enfin, redémarrer votre Apache. Vous devriez voir un message dans l’error.log d’Apache similaire à:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>notice<span class="o">]</span> Apache/2.2.21 <span class="o">(</span>Win32<span class="o">)</span> mod-mapcache/0.5-dev configured -- resuming normal operations
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="test-your-mapcache-module">
<h3><a class="toc-backref" href="#table-of-contents">Tester votre module MapCache</a><a class="headerlink" href="#test-your-mapcache-module" title="Lien permanent vers ce titre">¶</a></h3>
<ul>
<li><p class="first">Dans votre navigateur web, allez à la page locale de démonstration MapCache <a class="reference external" href="http://127.0.0.1/mapcache/demo/">http://127.0.0.1/mapcache/demo/</a>. Vous devriez vois apparaître une liste cliquable de lien de démonstration:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tms</span>
<span class="n">wmts</span>
<span class="n">gmaps</span>
<span class="n">kml</span>
<span class="n">ve</span>
<span class="n">wms</span>
</pre></div>
</div>
</li>
<li><p class="first">Cliquez sur l’une des démonstration (<a class="reference external" href="http://127.0.0.1/mapcache/demo/wmts">http://127.0.0.1/mapcache/demo/wmts</a> par exemple), un visualiseur cartographique devrait apparaître, similaire à l’image ci-dessous:</p>
<a class="reference internal image-reference" href="../_images/mapcache-demo.jpg"><img alt="../_images/mapcache-demo.jpg" src="../_images/mapcache-demo.jpg" style="width: 900px; height: 600px;" /></a>
</li>
<li><p class="first">Zoomez plusieurs fois, et votre emplacement de cache devrait générer des tuiles (dans notre cas dans :/ms4w/tmp/ms_tmp/cache/).</p>
<img alt="../_images/mapcache-disk.jpg" src="../_images/mapcache-disk.jpg" />
</li>
</ul>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3>Recherche rapide</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><h3>Navigation</h3>
<p>
<a href="../about.html" title="About">About</a><br>
<a href="../products.html" title="Products">Products</a><br>
<a href="../community/index.html" title="Community">Community</a><br>
<a href="../development/index.html" title="Development">Development</a><br>
<a href="../download.html" title="Downloads">Downloads</a><br>
<a href="../documentation.html" title="Documentation">Documentation</a><br>
<a href="../faq.html" title="FAQ">FAQ</a><br>
<a href="../psc.html" title="PSC">PSC</a><br>
<a href="https://twitter.com/mapserver_osgeo" title="Twitter">Twitter</a>
</p>
  <h3>Current Table Of Contents</h3>
  <ul>
<li><a class="reference internal" href="#">Compilation &amp; Installation</a><ul>
<li><a class="reference internal" href="#getting-the-source">Obtenir les sources</a></li>
<li><a class="reference internal" href="#linux-instructions">Instructions Linux</a><ul>
<li><a class="reference internal" href="#apache-module-specific-instructions">Instructions spécifiques au module Apache</a></li>
<li><a class="reference internal" href="#nginx-specific-instructions">Instructions spécifiques Nginx</a></li>
<li><a class="reference internal" href="#cgi-fastcgi-specific-instructions">Instructions spécifiques CGI/FastCGI</a></li>
<li><a class="reference internal" href="#customizing-the-build-or-if-something-went-wrong">Personnaliser la compilation, ou s’il y a eu un problème</a><ul>
<li><a class="reference internal" href="#options-supported-by-the-mapcache-cmake-builder">Options supportées par le compilateur cmake MapCache</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#windows-instructions">Instructions Windows</a><ul>
<li><a class="reference internal" href="#dependencies">Dépendances</a></li>
<li><a class="reference internal" href="#configure-your-makefile">Configurer votre Makefile</a></li>
<li><a class="reference internal" href="#compilation">Compilation</a></li>
<li><a class="reference internal" href="#move-the-module-into-the-apache-directory">Déplacer le module dans le répertoire Apache</a></li>
<li><a class="reference internal" href="#configure-your-installed-apache">Configurer votre Apache installé</a></li>
<li><a class="reference internal" href="#test-your-mapcache-module">Tester votre module MapCache</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Index général"
             >index</a></li>
        <li class="right" >
          <a href="config.html" title="Fichier de configuration"
             >suivant</a> |</li>
        <li class="right" >
          <a href="index.html" title="MapCache 1.6.1"
             >précédent</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../documentation.html" >MapServer 7.2.2 Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >MapCache 1.6.1</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; <a href="../copyright.html">Copyright</a> 2019, Open Source Geospatial Foundation.
      Mis à jour le 2019-03-27.
      Créé avec <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.6.
    </div>
  </body>
</html>