<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" lang="fr">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Compilation de MapScript .NET &#8212; MapServer 7.0.5 documentation</title>
    
    <link rel="stylesheet" href="../_static/sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '7.0.5',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <link rel="shortcut icon" href="../_static/mapserver.ico"/>
    <link rel="author" title="À propos de ces documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Recherche" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="top" title="MapServer 7.0.5 documentation" href="../index.html" />
    <link rel="up" title="Installation" href="index.html" />
    <link rel="next" title="Paramétrage de IIS pour MapServer" href="iis.html" />
    <link rel="prev" title="Installation de PHP MapScript" href="php.html" /> 
  </head>
  <body role="document">

<table width="100%" style="width: 100%; background-color: white;">
  <tr>
    <td rowspan="2" style="padding: 10px 0px 10px 10px;">
      <a href="../index.html" title="Home"><img src="../_static/banner.png" alt="MapServer banner" border="0" /></a>
    </td>
    <td style="padding: 10px 10px 0px 0px; text-align: right; vertical-align: top;">
      <a href="../index.html" title="Home">Home</a> |
      <a href="../products.html" title="Products (MapServer core, MapCache, TinyOWS">Products</a> |
      <a href="https://github.com/mapserver/mapserver/issues/" title="Issue Tracker (MapServer core)">Issue Tracker</a> |
      <a href="../community/service_providers.html" title="Professional Service Providers">Service Providers</a> |      
      <a href="../faq.html" title="Frequently Asked Questions">FAQ</a> |
      <a href="../download.html" title="Download Source or Binaries">Download </a>
    </td>
  </tr>
  <tr>
    <td style="padding: 0px 10px 0px 0px; text-align: right; vertical-align: bottom;">
        
          
            <a href="../../installation/dotnet.html"><img src="../_static/flagicons/en.png" alt="en" title="en" border="0" /></a>
          
        
        
          
            <a href="../../ar/installation/dotnet.html"><img src="../_static/flagicons/ar.png" alt="ar" title="ar" border="0" /></a>
          
        
        
          
            <a href="../../de/installation/dotnet.html"><img src="../_static/flagicons/de.png" alt="de" title="de" border="0" /></a>
          
        
        
          
            <a href="../../el/installation/dotnet.html"><img src="../_static/flagicons/el.png" alt="el" title="el" border="0" /></a>
          
        
        
          
            <a href="../../es/installation/dotnet.html"><img src="../_static/flagicons/es.png" alt="es" title="es" border="0" /></a>
          
        
        <img src="../_static/flagicons/fr.png" alt="fr" title="fr" border="0" width="18px" height="13px"/>
        
          
            <a href="../../id/installation/dotnet.html"><img src="../_static/flagicons/id.png" alt="id" title="id" border="0" /></a>
          
        
        
          
            <a href="../../it/installation/dotnet.html"><img src="../_static/flagicons/it.png" alt="it" title="it" border="0" /></a>
          
        
        
          
            <a href="../../ja/installation/dotnet.html"><img src="../_static/flagicons/ja.png" alt="ja" title="ja" border="0" /></a>
          
        
        
          
            <a href="../../nl_NL/installation/dotnet.html"><img src="../_static/flagicons/nl_NL.png" alt="nl_NL" title="nl_NL" border="0" /></a>
          
        
        
          
            <a href="../../pl/installation/dotnet.html"><img src="../_static/flagicons/pl.png" alt="pl" title="pl" border="0" /></a>
          
        
        
          
            <a href="../../ru/installation/dotnet.html"><img src="../_static/flagicons/ru.png" alt="ru" title="ru" border="0" /></a>
          
        
        
          
            <a href="../../sq/installation/dotnet.html"><img src="../_static/flagicons/sq.png" alt="sq" title="sq" border="0" /></a>
          
        
        
          
            <a href="../../tr/installation/dotnet.html"><img src="../_static/flagicons/tr.png" alt="tr" title="tr" border="0" /></a>
          
        

    </td>
  </tr>
</table>


    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Index général"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="iis.html" title="Paramétrage de IIS pour MapServer"
             accesskey="N">suivant</a> |</li>
        <li class="right" >
          <a href="php.html" title="Installation de PHP MapScript"
             accesskey="P">précédent</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../documentation.html" >Documentation de MapServer 7.0.5</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">Installation</a> &#187;</li> 
      </ul>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="net-mapscript-compilation">
<span id="dotnet-compile"></span><span id="index-0"></span><h1>Compilation de MapScript .NET<a class="headerlink" href="#net-mapscript-compilation" title="Lien permanent vers ce titre">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Author:</th><td class="field-body">Tamas Szekeres</td>
</tr>
<tr class="field-even field"><th class="field-name">Contact:</th><td class="field-body">szekerest at gmail.com</td>
</tr>
</tbody>
</table>
<div class="section" id="compilation">
<h2>Compilation<a class="headerlink" href="#compilation" title="Lien permanent vers ce titre">¶</a></h2>
<p>Avant de compiler MapScript C#, vous devez compiler MapServer avec les options selon vos besoins. Pour plus d&#8217;informations sur la compilation de MapServer, merci de lire <a class="reference internal" href="win32.html#win32"><span class="std std-ref">le guide de compilation et d&#8217;installation Win32</span></a>. Il est fortement recommandé de limiter les dépendances de la bibliothèque de votre application, ainsi quand vous compilez MapServer activez seulement les fonctionnalités vraiment nécessaires. Pour compiler les bindings C#, SWIG 1.3.31 ou plus récent est requis.</p>
<div class="admonition warning">
<p class="first admonition-title">Avertissement</p>
<p class="last">Ce document peut se référer à des versions de bibliothèques un peu anciennes. Vous voudrez peut être essayer d&#8217;utiliser des versions plus récentes des bibliothèques pour votre compilation.</p>
</div>
<div class="section" id="win32-compilation-targeting-the-ms-net-framework-1-1">
<h3>Compilation Win32 pour le framework 1.1 de MS.NET<a class="headerlink" href="#win32-compilation-targeting-the-ms-net-framework-1-1" title="Lien permanent vers ce titre">¶</a></h3>
<p>Vous devez compiler MapServer, MapScript et toutes les bibliothèques associées en utilisant Visual Studio 2003. Téléchargez et décompressez la dernière version de SWIGWIN qui contient le binaire swig.exe précompilé. Ouvrez la ligne de commande de Visual Studio .NET 2003 et allez dans le répertoire /mapscript/csharp. Editer makefile.vc et définissez la variable SWIG à l&#8217;emplacement de votre swig.exe</p>
<p>Usage:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">nmake</span> <span class="o">-</span><span class="n">f</span> <span class="n">makefile</span><span class="o">.</span><span class="n">vc</span>
</pre></div>
</div>
<p>pour compiler mapscript.dll et mapscript_csharp.dll.</p>
</div>
<div class="section" id="win32-compilation-targeting-the-ms-net-framework-2-0">
<h3>Compilation Win32 pour le framework 2.0 de MS.NET<a class="headerlink" href="#win32-compilation-targeting-the-ms-net-framework-2-0" title="Lien permanent vers ce titre">¶</a></h3>
<p>Vous devez compiler MapServer, MapScript et toutes les bibliothèques associées en utilisant Visual Studio 2005. Téléchargez et décompressez la dernière version de SWIGWIN qui contient le binaire swig.exe précompilé. Ouvrez la ligne de commande de Visual Studio 2005 et allez dans le répertoire /mapscript/csharp. Editer makefile.vc et définissez la variable SWIG à l&#8217;emplacement de votre swig.exe</p>
<p>Usage:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">nmake</span> <span class="o">-</span><span class="n">f</span> <span class="n">makefile</span><span class="o">.</span><span class="n">vc</span>
</pre></div>
</div>
<p>pour compiler mapscript.dll et mapscript_csharp.dll.</p>
</div>
<div class="section" id="win32-compilation-targeting-the-mono-framework">
<h3>Compilation sous Win32 pour le framework MONO<a class="headerlink" href="#win32-compilation-targeting-the-mono-framework" title="Lien permanent vers ce titre">¶</a></h3>
<p>Avant la compilation, vous devez télécharger et installer le paquet d&#8217;installation récent mono pour Win32 (comme mono-1.1.13.2-gtksharp-2.8.1-win32-1.exe) Editer makefile.vc et définir la variable CSC à l&#8217;emplacement de votre mcs.exe. Alternativement, vous pouvez définir:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">MONO</span> <span class="o">=</span> <span class="n">YES</span>
</pre></div>
</div>
<p>dans votre fichier nmake.opt</p>
<p>Vous devez utiliser le même compilateur pour compiler MapScript que celui utilisé pour la compilation de MapServer. Pour compiler MapScript, ouvrez la ligne de commande fournie par votre compilateur et utilisez:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">nmake</span> <span class="o">-</span><span class="n">f</span> <span class="n">makefile</span><span class="o">.</span><span class="n">vc</span>
</pre></div>
</div>
<p>pour compiler mapscript.dll et mapscript_csharp.dll.</p>
</div>
<div class="section" id="alternative-compilation-methods-on-windows">
<h3>Méthodes de compilations alternatives sous Windows<a class="headerlink" href="#alternative-compilation-methods-on-windows" title="Lien permanent vers ce titre">¶</a></h3>
<p>A partir de la version de MapServer 4.8.3, vous pouvez appeler la compilation C# depuis votre répertoire MapServer en dé-commentant DOT_NET dans nmake.opt:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span>
<span class="c1"># .NET/C# MapScript</span>
<span class="c1"># ----------------------------------------------------------------------</span>
<span class="c1"># .NET will of course only work with MSVC 7.0 and 7.1.  Also note that</span>
<span class="c1"># you will definitely want USE_THREAD defined.</span>
<span class="c1">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span>
<span class="c1">#DOT_NET = YES</span>
</pre></div>
</div>
<p>et en invoquant la compilation par:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">nmake</span> <span class="o">-</span><span class="n">f</span> <span class="n">makefile</span><span class="o">.</span><span class="n">vc</span> <span class="n">csharp</span>
</pre></div>
</div>
<p>Vous pouvez aussi utiliser:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">nmake</span> <span class="o">-</span><span class="n">f</span> <span class="n">makefile</span><span class="o">.</span><span class="n">vc</span> <span class="n">install</span>
</pre></div>
</div>
<p>pour effectuer la compilation et copier les cibles dans un répertoire de sortie commun</p>
</div>
<div class="section" id="testing-the-compilation">
<h3>Tester la compilation<a class="headerlink" href="#testing-the-compilation" title="Lien permanent vers ce titre">¶</a></h3>
<p>Pour tester la compilation et l&#8217;environnement d&#8217;exécution, vous pouvez utiliser:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">nmake</span> <span class="o">-</span><span class="n">f</span> <span class="n">makefile</span><span class="o">.</span><span class="n">vc</span> <span class="n">test</span>
</pre></div>
</div>
<p>à l&#8217;intérieur du répertoire csharp pour démarrer les applications exemple compilées antérieurement. Avant de faire le test, l&#8217;emplacement des bibliothèques correspondantes doivent être incluses dans le PATH système.</p>
</div>
<div class="section" id="linux-compilation-targeting-the-mono-framework">
<h3>Compilation Linux avec le framework MONO<a class="headerlink" href="#linux-compilation-targeting-the-mono-framework" title="Lien permanent vers ce titre">¶</a></h3>
<p>Avant la compilation, vous devez télécharger et installer le paquet récent de Mono pour Linux. Certaines distributions ont des binaires précompilés à installer, mais pour utiliser la dernière version vous voulez peut-être compiler et installer Mono depuis les sources. Téléchargez et décompressez la dernière version de SWIG. Vous devez probablement l&#8217;installer depuis les sources si des binaires précompilés ne sont pas disponibles pour votre plateforme.</p>
<p>Before compiling MapScript, MapServer should be configured and compiled.
Beginning from MapServer 4.8.2 during configuration the
mapscript/csharp/Makefile will be created according to the configuration
options. Edit this file and set the SWIG and CSC for the corresponding
executable paths if the files could not be accessed by default. To
compile at a console step into the /mapscript/csharp directory use:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">make</span>
</pre></div>
</div>
<p>pour compiler libmapscript.so et mapscript_csharp.dll.</p>
<p>Pour tester la compilation et l&#8217;environnement d&#8217;exécution, vous pouvez utiliser:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">test</span>
</pre></div>
</div>
<p>pour démarrer les applications exemples compilés précédemment.</p>
</div>
<div class="section" id="osx-compilation-targeting-the-mono-framework">
<h3>Compilation sous OSX avec le framework MONO<a class="headerlink" href="#osx-compilation-targeting-the-mono-framework" title="Lien permanent vers ce titre">¶</a></h3>
<p>À partir de la version 4.10.0, le csharp/Makefile gère la compilation sous Mac OSX. Avant de lancer la compilation, le paquet récent de MONO doit être installé sur votre système.</p>
<p>Before compiling MapScript, MapServer should be configured and compiled.
Beginning from MapServer 4.8.2 during configuration the
mapscript/csharp/Makefile will be created according to the configuration
options. Edit this file and set the SWIG and CSC for the corresponding
executable paths if the files could not be accessed by default. To compile
at a console step into the /mapscript/csharp directory use:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">make</span>
</pre></div>
</div>
<p>pour compiler libmapscript.dylib et mapscript_csharp.dll.</p>
<p>Pour tester la compilation et l&#8217;environnement d&#8217;exécution, vous pouvez utiliser:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">test</span>
</pre></div>
</div>
<p>pour démarrer les applications exemples compilés précédemment.</p>
<p>Pour lancer les applications, mapscript_csharp.dll.config est nécessaire avec le fichier mapscript_csharp.dll. Ce fichier est créé pendant le processus make</p>
</div>
</div>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Lien permanent vers ce titre">¶</a></h2>
<p>Les fichiers requis pour votre application devraient être installés manuellement. Il est fortement recommandé de copier les fichiers dans le même dossier que là où les éxécutables sont présents.</p>
</div>
<div class="section" id="known-issues">
<h2>Problèmes connus<a class="headerlink" href="#known-issues" title="Lien permanent vers ce titre">¶</a></h2>
<div class="section" id="visual-studio-2005-requires-a-manifest-file-to-load-the-crt-native-assembly-wrapper">
<h3>Visual Studio 2005 nécessite un fichier manifest pour charger le &#8220;CRT native assembly wrapper&#8221;<a class="headerlink" href="#visual-studio-2005-requires-a-manifest-file-to-load-the-crt-native-assembly-wrapper" title="Lien permanent vers ce titre">¶</a></h3>
<p>Si vous avez compilé MapServer pour utiliser les bibliothèques CRT et que vous utilisez le framework MS.NET 2.0 comme &#8220;runtime&#8221;, vous devriez fournir un fichier manifest avec votre exécutable, comme:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;assembly xsi:schemaLocation=&quot;urn:schemas-microsoft-com:asm.v1
 assembly.adaptive.xsd&quot; manifestVersion=&quot;1.0&quot;
 xmlns:asmv1=&quot;urn:schemas-microsoft-com:asm.v1&quot;
 xmlns:asmv2=&quot;urn:schemas-microsoft-com:asm.v2&quot;
 xmlns:dsig=&quot;http://www.w3.org/2000/09/xmldsig#&quot;
 xmlns=&quot;urn:schemas-microsoft-com:asm.v1&quot;
 xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt;
&lt;assemblyIdentity name=&quot;drawmap.exe&quot; version=&quot;1.0.0.0&quot; type=&quot;win32&quot; /&gt;
&lt;dependency&gt;
&lt;dependentAssembly asmv2:dependencyType=&quot;install&quot;
 asmv2:codebase=&quot;Microsoft.VC80.CRT.manifest&quot; asmv2:size=&quot;522&quot;&gt;
&lt;assemblyIdentity name=&quot;Microsoft.VC80.CRT&quot; version=&quot;8.0.50608.0&quot;
 publicKeyToken=&quot;1fc8b3b9a1e18e3b&quot; processorArchitecture=&quot;x86&quot;
 type=&quot;win32&quot; /&gt;
&lt;hash xmlns=&quot;urn:schemas-microsoft-com:asm.v2&quot;&gt;
&lt;dsig:Transforms&gt;
&lt;dsig:Transform Algorithm=&quot;urn:schemas-microsoft-com:HashTransforms.Identity&quot; /&gt;
&lt;/dsig:Transforms&gt;
&lt;dsig:DigestMethod Algorithm=&quot;http://www.w3.org/2000/09/xmldsig#sha1&quot; /&gt;
&lt;dsig:DigestValue&gt;UMOlhUBGeKRrrg9DaaPNgyhRjyM=&lt;/dsig:DigestValue&gt;
&lt;/hash&gt;
&lt;/dependentAssembly&gt;
&lt;/dependency&gt;
&lt;/assembly&gt;
</pre></div>
</div>
<p>Cela informera le CLR (Common Language Runtime) que votre exécutable dépend du CRT (C Run Time) et que le wrapper de l&#8217;assembly est présent pour être utilisé. Si vous utilisez l&#8217;IDE, le fichier manifest peut être prégénéré en ajoutant une référence à Microsoft.VC80.CRT.manifest dans le répertoire /Microsoft Visual Studio 8/VC/redist/x86/Microsoft.VC80.CRT.</p>
</div>
<div class="section" id="manifests-for-the-dll-s-must-be-embedded-as-a-resource">
<h3>Les manifests pour les dlls doivent être encapsulées comme une ressource<a class="headerlink" href="#manifests-for-the-dll-s-must-be-embedded-as-a-resource" title="Lien permanent vers ce titre">¶</a></h3>
<p>Selon le makefile windows, la cible de compilation MapScript (mapscript.dll) est liée avec l&#8217;option /MD. Dans ce cas, le linker VS2005 générera un fichier manifest contenant la dépendance de l&#8217;assembly non managé. Les contenus exemple du fichier manifest sont:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>&lt;?xml version=&#39;1.0&#39; encoding=&#39;UTF-8&#39; standalone=&#39;yes&#39;?&gt;
&lt;assembly xmlns=&#39;urn:schemas-microsoft-com:asm.v1&#39; manifestVersion=&#39;1.0&#39;&gt;
&lt;dependency&gt;
&lt;dependentAssembly&gt;
&lt;assemblyIdentity type=&#39;win32&#39; name=&#39;Microsoft.VC80.CRT&#39;
 version=&#39;8.0.50608.0&#39; processorArchitecture=&#39;x86&#39;
 publicKeyToken=&#39;1fc8b3b9a1e18e3b&#39; /&gt;
&lt;/dependentAssembly&gt;
&lt;/dependency&gt;
&lt;/assembly&gt;
</pre></div>
</div>
<p>Comme mentionné précédemment si vous créez une application windows, le CLR (Common Language Runtime) cherchera un fichier manifest pour l&#8217;application.  Le nom du fichier manifest devrait être le même comme l&#8217;exécutable ajoute et se termine avec une extension .manifest. Cependant, si le processus hôte n&#8217;est pas contrôlé par vous (comme une application de cartographie en ligne utilisant aspnet_wp.exe comme processus hôte), vous ne serez pas certain que le processus hôte (.exe) aura un manifest contenant une référence au wrapper CRT. Dans ce cas, vous devrez peut être encapsulé le manifest dans la dll en tant que ressource en utilisant l&#8217;outil mt comme:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">mt</span> <span class="o">/</span><span class="n">manifest</span> <span class="n">mapscript</span><span class="o">.</span><span class="n">dll</span><span class="o">.</span><span class="n">manifest</span> <span class="o">/</span><span class="n">outputresource</span><span class="p">:</span><span class="n">mapscript</span><span class="o">.</span><span class="n">dll</span><span class="p">;</span><span class="c1">#2</span>
</pre></div>
</div>
<p>the common language runtime will search for the embedded resource and load
the CRT assembly properly.</p>
<p>Normallement, il est suffisant de charger le CRT avec la dll racine (mapscript.dll), mais ce n&#8217;est pas dangereux d&#8217;encapsuler le manifest dans les bibliothèques dépendantes également.</p>
</div>
<div class="section" id="issue-with-regex-and-visual-studio-2005">
<h3>Problème avec regex et Visual Studio 2005<a class="headerlink" href="#issue-with-regex-and-visual-studio-2005" title="Lien permanent vers ce titre">¶</a></h3>
<p>Quand vous compilez avec Microsoft Visual Studio 2005, une collision de nom de variable peut avoir lieu entre regex.c et crtdefs.h. Pour plus de détails, voir:</p>
<p><a class="reference external" href="https://github.com/mapserver/mapserver/issues/1651">https://github.com/mapserver/mapserver/issues/1651</a></p>
</div>
<div class="section" id="c-mapscript-library-name-mapping-with-mono">
<h3>Correspondance de nom de bibliothèque MapScript C# avec MONO<a class="headerlink" href="#c-mapscript-library-name-mapping-with-mono" title="Lien permanent vers ce titre">¶</a></h3>
<p>En utilisant l&#8217;interface MapScript créé par le générateur d&#8217;interface SWIG, la communication entre les classes du wrapper C# (mapscript_csharp.dll) et le code C (mapscript.dll) a lieu à l&#8217;aide d&#8217;appel de plateforme comme:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">DllImport</span><span class="p">(</span><span class="s2">&quot;mapscript&quot;</span><span class="p">,</span> <span class="n">EntryPoint</span><span class="o">=</span><span class="s2">&quot;CSharp_new_mapObj&quot;</span><span class="p">)]</span>
<span class="n">public</span> <span class="n">static</span> <span class="n">extern</span> <span class="n">IntPtr</span> <span class="n">new_mapObj</span><span class="p">(</span><span class="n">string</span> <span class="n">jarg1</span><span class="p">);</span>
</pre></div>
</div>
<p>La déclaration DllImport contient le nom de la bibliothèque, cependant la  transformation du nom de la bibliothèque en nom de fichier est fonction du système. Sous Windows au nom de la bibliothèque est simplement ajouté l&#8217;extension .dll (mapscript.dll). Sous les systèmes Unix les noms de fichiers des bibliothèques démarrent avec le préfixe lib et se terminent avec l&#8217;extension .so (libmapscript.so).</p>
<p>L&#8217;enregistrement du nom de la bibliothèque au niveau du système peut être manuellement contrôlé en utilisant le fichier dll.config. Cela enregistre simplement le fichier de la bibliothèque que DllImport recherche dans son équivalent unix. Le fichier contient normalement les informations suivantes (mapscript_csharp.dll.config) :</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">configuration</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">dllmap</span> <span class="n">dll</span><span class="o">=</span><span class="s2">&quot;mapscript&quot;</span> <span class="n">target</span><span class="o">=</span><span class="s2">&quot;libmapscript.so&quot;</span> <span class="o">/&gt;</span>
<span class="o">&lt;/</span><span class="n">configuration</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>et avec les build OSX:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">configuration</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">dllmap</span> <span class="n">dll</span><span class="o">=</span><span class="s2">&quot;mapscript&quot;</span> <span class="n">target</span><span class="o">=</span><span class="s2">&quot;libmapscript.dylib&quot;</span> <span class="o">/&gt;</span>
<span class="o">&lt;/</span><span class="n">configuration</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Le fichier doit être placé en parallèle du fichier mapscript_csharp.dll correspondant, et sera créé par défaut durant le processus de make. Pour plus d&#8217;information voir :</p>
<p><a class="reference external" href="https://github.com/mapserver/mapserver/issues/1596">https://github.com/mapserver/mapserver/issues/1596</a>
<a class="reference external" href="http://www.mono-project.com/Interop_with_Native_Libraries">http://www.mono-project.com/Interop_with_Native_Libraries</a></p>
</div>
<div class="section" id="localization-issues-with-mono-linux">
<h3>Problèmes avec les locales avec MONO/Linux<a class="headerlink" href="#localization-issues-with-mono-linux" title="Lien permanent vers ce titre">¶</a></h3>
<p>Selon le ticket <a class="reference external" href="https://github.com/mapserver/mapserver/issues/1762">https://github.com/mapserver/mapserver/issues/1762</a> MapServer peut ne pas opérer de la même façon sur différents paramétrages régionaux. Spécialement quand le séparateur de décimal est différent de &#8221;.&#8221; dans la locale du processus qui peut entraîner des erreurs de lecture quand le mapfile contient des nombres flottants. Puisque le processus MONO prend en charge les paramètres régionaux de l&#8217;environnement, il est utile d&#8217;envisager de définir les paramètres régionaux par défaut à &#8220;C&#8221; du processus hébergé, par exemple</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">LC_ALL</span><span class="o">=</span><span class="n">C</span> <span class="n">mono</span> <span class="o">./</span><span class="n">drawmap</span><span class="o">.</span><span class="n">exe</span> <span class="o">../../</span><span class="n">tests</span><span class="o">/</span><span class="n">test</span><span class="o">.</span><span class="n">map</span> <span class="n">test_csharp</span><span class="o">.</span><span class="n">png</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="most-frequent-errors">
<h2>Erreurs les plus fréquentes<a class="headerlink" href="#most-frequent-errors" title="Lien permanent vers ce titre">¶</a></h2>
<p>Ce chapitre résume les problèmes les plus fréquents sur lequel l&#8217;utilisateur peut tomber. Les problèmes sont collectés principalement de la liste -user et sur IRC.</p>
<div class="section" id="unable-to-load-dll-mapscript">
<h3>Unable to load dll (MapScript)<a class="headerlink" href="#unable-to-load-dll-mapscript" title="Lien permanent vers ce titre">¶</a></h3>
<p>Vous pouvez avoir ce problème sous Windows et dans la plupart des cas, il peut être dû à une bibliothèque partagée manquante ou impossible à charger. Le message d&#8217;erreur parle de mapscript.dll mais il manque surement une ou plusieurs dll-s dont le fichier libmap.dll dépend. Ainsi en premier lieu, vous devriez vérifier les dépendances de votre fichier libmap.dll dans votre répertoire d&#8217;application. Vous pouvez utiliser le logiciel Visual Studio Dependency Walker pour accomplir cette tâche. Vous pouvez aussi utiliser un outil de monitoring de fichiers (comme filemon fourni par SysInternal) pour détecter les dll-s qui ne peuvent pas être chargées. Je propose de stocker toutes les dll-s requises par votre application dans votre répertoire d&#8217;application. Si vous pouvez lancer les applications exemples C# drawmap avec votre mapfile, votre compilation devrait être correcte et toutes vos dlls seraient disponibles.</p>
<p>Vous allez peut être trouver que l&#8217;interface mapscript C# se comporte différemment pour les applications desktop et ASP.NET. Bien que vous puissiez lancer correctement l&#8217;exemple drawmap, vous rencontrerez peut-être le problème de chargement de dlls avec les applications ASP.NET.   Quand vous créez un projet ASP.NET, votre répertoire d&#8217;application sera &#8216;Inetpubwwwroot[YourApp]bin&#8217; par défaut. Le processus hôte de l&#8217;application sera aspnet_wp.exe ou w3wp.exe en fonction de votre système. L&#8217;application tournera dans un context de sécurité différent de l&#8217;utilisateur interactif (sous le contexte de l&#8217;utilisateur ASPNET par défaut). Quand vous placez les dll-s en dehors de votre répertoire d&#8217;application, vous devriez prendre en compte les différences de valeurs de la variable d&#8217;environnement PATH entre l&#8217;utilisateur interactif et ASPNET et/ou que nous n&#8217;ayiez pas assez de droits pour accéder à une dll en dehors de votre répertoire d&#8217;application.</p>
</div>
</div>
<div class="section" id="bug-reports">
<h2>Rapports de bugs<a class="headerlink" href="#bug-reports" title="Lien permanent vers ce titre">¶</a></h2>
<p>Si vous trouvez un problème associé à l&#8217;interface MapScript C# interface, h&#8217;ésitez pas à compléter un rapport de bug sur <a class="reference external" href="https://github.com/mapserver/mapserver/issues">le gestionnaire de bugs</a>.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3>Recherche rapide</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><h3>Navigation</h3>
<p>
<a href="../about.html" title="About">About</a><br>
<a href="../products.html" title="Products">Products</a><br>
<a href="../community/index.html" title="Community">Community</a><br>
<a href="../development/index.html" title="Development">Development</a><br>
<a href="../download.html" title="Downloads">Downloads</a><br>
<a href="../documentation.html" title="Documentation">Documentation</a><br>
<a href="../faq.html" title="FAQ">FAQ</a><br>
<a href="../psc.html" title="PSC">PSC</a>
</p>
  <h3>Current Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Compilation de MapScript .NET</a><ul>
<li><a class="reference internal" href="#compilation">Compilation</a><ul>
<li><a class="reference internal" href="#win32-compilation-targeting-the-ms-net-framework-1-1">Compilation Win32 pour le framework 1.1 de MS.NET</a></li>
<li><a class="reference internal" href="#win32-compilation-targeting-the-ms-net-framework-2-0">Compilation Win32 pour le framework 2.0 de MS.NET</a></li>
<li><a class="reference internal" href="#win32-compilation-targeting-the-mono-framework">Compilation sous Win32 pour le framework MONO</a></li>
<li><a class="reference internal" href="#alternative-compilation-methods-on-windows">Méthodes de compilations alternatives sous Windows</a></li>
<li><a class="reference internal" href="#testing-the-compilation">Tester la compilation</a></li>
<li><a class="reference internal" href="#linux-compilation-targeting-the-mono-framework">Compilation Linux avec le framework MONO</a></li>
<li><a class="reference internal" href="#osx-compilation-targeting-the-mono-framework">Compilation sous OSX avec le framework MONO</a></li>
</ul>
</li>
<li><a class="reference internal" href="#installation">Installation</a></li>
<li><a class="reference internal" href="#known-issues">Problèmes connus</a><ul>
<li><a class="reference internal" href="#visual-studio-2005-requires-a-manifest-file-to-load-the-crt-native-assembly-wrapper">Visual Studio 2005 nécessite un fichier manifest pour charger le &#8220;CRT native assembly wrapper&#8221;</a></li>
<li><a class="reference internal" href="#manifests-for-the-dll-s-must-be-embedded-as-a-resource">Les manifests pour les dlls doivent être encapsulées comme une ressource</a></li>
<li><a class="reference internal" href="#issue-with-regex-and-visual-studio-2005">Problème avec regex et Visual Studio 2005</a></li>
<li><a class="reference internal" href="#c-mapscript-library-name-mapping-with-mono">Correspondance de nom de bibliothèque MapScript C# avec MONO</a></li>
<li><a class="reference internal" href="#localization-issues-with-mono-linux">Problèmes avec les locales avec MONO/Linux</a></li>
</ul>
</li>
<li><a class="reference internal" href="#most-frequent-errors">Erreurs les plus fréquentes</a><ul>
<li><a class="reference internal" href="#unable-to-load-dll-mapscript">Unable to load dll (MapScript)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#bug-reports">Rapports de bugs</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Index général"
             >index</a></li>
        <li class="right" >
          <a href="iis.html" title="Paramétrage de IIS pour MapServer"
             >suivant</a> |</li>
        <li class="right" >
          <a href="php.html" title="Installation de PHP MapScript"
             >précédent</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../documentation.html" >Documentation de MapServer 7.0.5</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >Installation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; <a href="../copyright.html">Copyright</a> 2017, Open Source Geospatial Foundation.
      Mis à jour le 2017-05-23.
      Créé avec <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.9.
    </div>
  </body>
</html>