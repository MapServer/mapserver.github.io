<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>PHP MapScript Installation &#8212; MapServer 8.0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx.css?v=6c7b17ac" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=dd298242" />
    <link rel="stylesheet" type="text/css" href="../_static/ribbon.css?v=ea091bf4" />
    
    <script src="../_static/documentation_options.js?v=521b6f53"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    
    <link rel="icon" href="../_static/mapserver.ico"/>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title=".NET MapScript Compilation" href="dotnet.html" />
    <link rel="prev" title="Compiling on Win32" href="win32.html" /> 
  </head><body>


<!-- for main branch only, do not backport this -->

<table width="100%" style="width: 100%; background-color: white;">
  <tr>
    <td rowspan="2" style="padding: 10px 0px 10px 10px;">
      <a href="../index.html" title="Home"><img src="../_static/banner.png" alt="MapServer banner" border="0" /></a>
    </td>
    <td style="padding: 10px 10px 0px 0px; text-align: right; vertical-align: top;">
      <a href="../index.html" title="Home">Home</a> |
      <a href="../products.html" title="Products (MapServer core, MapCache, TinyOWS">Products</a> |
      <a href="https://github.com/mapserver/mapserver/issues/" title="Issue Tracker (MapServer core)">Issue Tracker</a> |
      <a href="../community/service_providers.html" title="Professional Service Providers">Service Providers</a> |      
      <a href="../faq.html" title="Frequently Asked Questions">FAQ</a> |
      <a href="https://twitter.com/mapserver_osgeo" title="Twitter" target="_blank">Twitter</a> |
      <a href="../download.html" title="Download Source or Binaries">Download </a> |
      <a class="badge" href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=KRJ2X44N3HA6U&source=url" target="_blank">
        <img src="https://img.shields.io/badge/donate-%E2%9D%A4%C2%A0-ff69b4.svg?style=flat" alt="Donate to MapServer">
      </a>
    </td>
  </tr>
  <tr>
    <td style="padding: 0px 10px 0px 0px; text-align: right; vertical-align: bottom;">
        <img src="../_static/flagicons/en.png" alt="en" title="en" border="0" width="18px" height="13px"/>
        
          <a href="../ar/installation/php.html"><img src="../_static/flagicons/ar.png" alt="ar" title="ar" border="0" /></a>
        
        
          <a href="../de/installation/php.html"><img src="../_static/flagicons/de.png" alt="de" title="de" border="0" /></a>
        
        
          <a href="../el/installation/php.html"><img src="../_static/flagicons/el.png" alt="el" title="el" border="0" /></a>
        
        
          <a href="../es/installation/php.html"><img src="../_static/flagicons/es.png" alt="es" title="es" border="0" /></a>
        
        
          <a href="../fr/installation/php.html"><img src="../_static/flagicons/fr.png" alt="fr" title="fr" border="0" /></a>
        
        
          <a href="../id/installation/php.html"><img src="../_static/flagicons/id.png" alt="id" title="id" border="0" /></a>
        
        
          <a href="../it/installation/php.html"><img src="../_static/flagicons/it.png" alt="it" title="it" border="0" /></a>
        
        
          <a href="../ja/installation/php.html"><img src="../_static/flagicons/ja.png" alt="ja" title="ja" border="0" /></a>
        
        
          <a href="../nl_NL/installation/php.html"><img src="../_static/flagicons/nl_NL.png" alt="nl_NL" title="nl_NL" border="0" /></a>
        
        
          <a href="../pl/installation/php.html"><img src="../_static/flagicons/pl.png" alt="pl" title="pl" border="0" /></a>
        
        
          <a href="../ru/installation/php.html"><img src="../_static/flagicons/ru.png" alt="ru" title="ru" border="0" /></a>
        
        
          <a href="../sq/installation/php.html"><img src="../_static/flagicons/sq.png" alt="sq" title="sq" border="0" /></a>
        
        
          <a href="../tr/installation/php.html"><img src="../_static/flagicons/tr.png" alt="tr" title="tr" border="0" /></a>
        

    </td>
  </tr>
</table>


    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="dotnet.html" title=".NET MapScript Compilation"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="win32.html" title="Compiling on Win32"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../documentation.html" >MapServer 8.0.1 Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">Installation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">PHP MapScript Installation</a></li> 
      </ul>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="php-mapscript-installation">
<span id="php-install"></span><h1><a class="toc-backref" href="#table-of-contents" role="doc-backlink">PHP MapScript Installation</a><a class="headerlink" href="#php-mapscript-installation" title="Link to this heading">¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd">Author<span class="colon">:</span></dt>
<dd class="field-odd"><p>Jeff McKenna</p>
</dd>
<dt class="field-even">Contact<span class="colon">:</span></dt>
<dd class="field-even"><p>jmckenna at gatewaygeomatics.com</p>
</dd>
<dt class="field-odd">Last Updated<span class="colon">:</span></dt>
<dd class="field-odd"><p>2020-01-17</p>
</dd>
</dl>
<nav class="contents" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#php-mapscript-installation" id="id1">PHP MapScript Installation</a></p>
<ul>
<li><p><a class="reference internal" href="#introduction" id="id2">Introduction</a></p></li>
<li><p><a class="reference internal" href="#obtaining-compiling-and-installing-php-and-the-php-mapscript-module" id="id3">Obtaining, Compiling, and Installing PHP and the PHP/MapScript Module</a></p></li>
<li><p><a class="reference internal" href="#faq-common-problems" id="id4">FAQ / Common Problems</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="introduction">
<span id="index-0"></span><h2><a class="toc-backref" href="#table-of-contents" role="doc-backlink">Introduction</a><a class="headerlink" href="#introduction" title="Link to this heading">¶</a></h2>
<p>The PHP/MapScript module is a PHP dynamically loadable module that makes
MapServer’s MapScript functions and classes available in a PHP environment.</p>
<p>The original version of MapScript (in Perl) uses <a class="reference external" href="http://www.swig.org/">SWIG</a>, but at that time SWIG
did not support the PHP language, so the PHP module had to be maintained separately and was
not always in sync with other mapscripts.  As of MapServer 7.4.0, PHP/MapScript is
also available through the <a class="reference internal" href="../mapscript/mapscript-api/index.html#swig"><span class="std std-ref">SWIG API</span></a>.</p>
<p>The original PHP module was developed by <a class="reference external" href="http://www.dmsolutions.ca/">DM Solutions Group</a> and <a class="reference external" href="http://www.mapgears.com">Mapgears</a> and is
currently maintained by <a class="reference external" href="https://gatewaygeomatics.com/">Gateway Geomatics</a> and
other contributors.</p>
<p>This document assumes that you are already familiar with certain aspects of
your operating system:</p>
<ul class="simple">
<li><p>For Unix/Linux users, a familiarity with the build environment, notably <em>make</em>.</p></li>
<li><p>For Windows users, some compilation skills if you don’t have ready access to
a pre-compiled installation and need to compile your own copy of MapServer with
the PHP/MapScript module.</p></li>
</ul>
<section id="which-version-of-php-is-supported">
<span id="index-1"></span><h3>Which version of PHP is supported?<a class="headerlink" href="#which-version-of-php-is-supported" title="Link to this heading">¶</a></h3>
<p>PHP MapScript was originally developed for PHP-3.0.14 but after MapServer 3.5
support for PHP3 was dropped. As of the last update of this document,
PHP 5.6 or more recent was required, and PHP 7 is recommended.</p>
<p>The best combinations of MapScript and PHP versions are:</p>
<ul class="simple">
<li><p>MapScript 7.4.0 with PHP 7.0 and up (through the new <a class="reference internal" href="../mapscript/mapscript-api/index.html#swig"><span class="std std-ref">SWIG API</span></a>)</p></li>
<li><p>MapScript 4.10 with PHP 5.2.1 and up</p></li>
<li><p>MapScript 4.10 with PHP 4.4.6 and up</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>As of MapServer 7.4.0, PHP 7
is available through the <a class="reference internal" href="../mapscript/mapscript-api/index.html#swig"><span class="std std-ref">SWIG API</span></a>, and all existing MapServer
users are encouraged to update their scripts for the new SWIG syntax;
see the <a class="reference internal" href="../MIGRATION_GUIDE.html#migration"><span class="std std-ref">MapServer Migration Guide</span></a> for example syntax.</p>
</div>
</section>
<section id="how-to-get-more-information-on-the-php-mapscript-module-for-mapserver">
<h3>How to Get More Information on the PHP/MapScript Module for MapServer<a class="headerlink" href="#how-to-get-more-information-on-the-php-mapscript-module-for-mapserver" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>For a list of all classes, properties, and methods available in the module:</p>
<ul>
<li><p>through SWIG (and PHP 7) see the <a class="reference internal" href="../mapscript/mapscript-api/index.html#swig"><span class="std std-ref">SWIG API</span></a></p></li>
<li><p>for the legacy module, see the <a class="reference internal" href="../mapscript/php/phpmapscript.html#phpmapscriptapi"><span class="std std-ref">PHP MapScript API</span></a> reference document.</p></li>
</ul>
</li>
<li><p>More information on the original PHP/MapScript module can be found on the
<a class="reference external" href="http://www.maptools.org/php_mapscript/">PHP/MapScript page</a> on MapTools.org.</p></li>
<li><p>The <a class="reference external" href="http://trac.osgeo.org/mapserver/wiki/PHPMapScript">MapServer Wiki</a> also has PHP/MapScript build and installation notes
and some php code snippets.</p></li>
<li><p>As many users rely on <a class="reference external" href="https://ms4w.com/">MS4W</a> for MapScript, you can also
see user-contributed PHP 7 scripts through the SWIG API, on the
<a class="reference external" href="https://ms4w.com/trac/">MS4W wiki</a>.</p></li>
<li><p>Questions regarding the module should be forwarded to the <a class="reference internal" href="../community/lists.html#lists"><span class="std std-ref">MapServer mailing list</span></a>.</p></li>
</ul>
</section>
</section>
<section id="obtaining-compiling-and-installing-php-and-the-php-mapscript-module">
<h2><a class="toc-backref" href="#table-of-contents" role="doc-backlink">Obtaining, Compiling, and Installing PHP and the PHP/MapScript Module</a><a class="headerlink" href="#obtaining-compiling-and-installing-php-and-the-php-mapscript-module" title="Link to this heading">¶</a></h2>
<section id="download-php-and-php-mapscript">
<span id="index-2"></span><h3>Download PHP and PHP/MapScript<a class="headerlink" href="#download-php-and-php-mapscript" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>The PHP source or the Win32 binaries can be obtained from the <a class="reference external" href="http://www.php.net/">PHP web site</a>.</p></li>
<li><p>Once you have verified that PHP is installed and is running, you need to get
the latest <a class="reference internal" href="../download.html#download"><span class="std std-ref">MapServer source</span></a> and compile MapServer and the PHP module.</p></li>
</ul>
</section>
<section id="setting-up-php-on-your-server">
<span id="index-3"></span><h3>Setting Up PHP on Your Server<a class="headerlink" href="#setting-up-php-on-your-server" title="Link to this heading">¶</a></h3>
<p><strong>Unix</strong></p>
<ul class="simple">
<li><p>Check if you have PHP already installed (several Linux distributions have it built in).</p></li>
<li><p>If not, see the PHP manual’s “<a class="reference external" href="http://php.net/manual/en/install.unix.php">Installation on Unix systems</a>” section.</p></li>
</ul>
<p><strong>Windows</strong></p>
<ul class="simple">
<li><p><a class="reference external" href="https://ms4w.com">MS4W (MapServer For Windows)</a> is a popular product maintained by Gateway Geomatics
that contains Apache, PHP, and PHP/MapScript ready to use in a zipfile or installer.
Several Open Source applications are also available for use in MS4W.</p></li>
<li><p>Windows users can follow steps in the <a class="reference external" href="https://superuser.com/questions/748117/how-to-manually-install-apache-php-and-mysql-on-windows">Installing Apache, PHP and MySQL on Windows tutorial</a>
to install Apache and PHP manually on their system.</p></li>
<li><p>Window users running IIS can follow <a class="reference external" href="http://www.iis.net/learn/application-frameworks/install-and-configure-php-on-iis/install-and-configure-php">iis.net’s howto</a> for installing PHP.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When setting up PHP on Windows, make sure that PHP is configured as a CGI and not
as an Apache module because php_mapscript.dll is not thread-safe and does not work
as an Apache module (See the <a class="reference internal" href="#php-install-example-steps"><span class="std std-ref">Example Steps of a Full Windows Installation</span></a> section of this document).</p>
</div>
</section>
<section id="build-install-the-php-mapscript-module">
<span id="index-4"></span><h3>Build/Install the PHP/MapScript Module<a class="headerlink" href="#build-install-the-php-mapscript-module" title="Link to this heading">¶</a></h3>
<p><strong>Building on a Linux Box</strong></p>
<p>NOTE: For UNIX users, see the README.CONFIGURE file in the MapServer source, or
see the <a class="reference internal" href="unix.html#unix"><span class="std std-ref">Compiling on Unix</span></a> HowTo.</p>
<ul>
<li><p>The main MapServer configure script will automatically setup the main makefile
to compile php_mapscript.so if you pass the <em>–WITH_PHP=ON</em> argument to the configure script.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>As of MapServer 7.4.0, you can pass the <em>–WITH_PHPNG=ON</em> argument for the
new PHP 7 support through the <a class="reference internal" href="../mapscript/mapscript-api/index.html#swig"><span class="std std-ref">SWIG API</span></a>.</p>
</div>
</li>
<li><p>Copy the php_mapscript.so library to your PHP extensions directory, and then
use the dl() function to load the module at the beginning of your PHP scripts.
See also the PHP function <a class="reference external" href="http://www.php.net/manual/en/function.extension-loaded.php">extension_loaded()</a> to check whether an extension is
already loaded.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The dl() function was deprecated as of PHP 5.3.</p>
</div>
</li>
<li><p>The file <em>mapscript/php/examples/phpinfo_mapscript.phtml</em> will test that the
php_mapscript module is properly installed and can be loaded.</p></li>
<li><p>If you get an error from PHP complaining that it cannot load the library, then
make sure that you recompiled and reinstalled PHP with support for dynamic
libraries. On RedHat 5.x and 6.x, this means adding “-rdynamic” to the CLDFLAGS
in the main PHP3 Makefile after running ./configure Also make sure all directories
in the path to the location of php_mapscript.so are at least r-x for the HTTPd user
(usually ‘nobody’), otherwise dl() may complain that it cannot find the file even
if it’s there.</p></li>
</ul>
<p><strong>Building on Windows</strong></p>
<ul class="simple">
<li><p>For Windows users, it is recommended to look for a precompiled binary for your
PHP version on the <a class="reference internal" href="../download.html#download"><span class="std std-ref">MapServer download page</span></a> or use the <a class="reference external" href="https://ms4w.com">MS4W</a>
installer.</p></li>
<li><p>If for some reason you really need to compile your own Windows binary then see the
README.WIN32 file in the MapServer source (good luck!).</p></li>
</ul>
</section>
<section id="installing-php-mapscript">
<span id="index-5"></span><h3>Installing PHP/MapScript<a class="headerlink" href="#installing-php-mapscript" title="Link to this heading">¶</a></h3>
<p>Simply copy the file php_mapscript.dll to your PHP extensions directory
(pathto/php/extensions)</p>
<p>Using phpinfo()</p>
<p>To verify that PHP and PHP/MapScript were installed properly, create a ‘.php’ file
containing the following code and try to access it through your web server:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="x">&lt;HTML&gt;</span>
<span class="x">&lt;BODY&gt;</span>

<span class="cp">&lt;?php</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">PHP_OS</span> <span class="o">==</span> <span class="s2">&quot;WINNT&quot;</span> <span class="o">||</span> <span class="k">PHP_OS</span> <span class="o">==</span> <span class="s2">&quot;WIN32&quot;</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="nb">dl</span><span class="p">(</span><span class="s2">&quot;php_mapscript.dll&quot;</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">else</span>
  <span class="p">{</span>
    <span class="nb">dl</span><span class="p">(</span><span class="s2">&quot;php_mapscript.so&quot;</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="nb">phpinfo</span><span class="p">();</span>
<span class="cp">?&gt;</span>

<span class="x">&lt;/BODY&gt;</span>
<span class="x">&lt;/HTML&gt;</span>
</pre></div>
</div>
<p>If PHP and PHP/MapScript were installed properly, several tables should be
displayed on your page, and ‘MapScript’ should be listed in the ‘Extensions’
table.</p>
</section>
<section id="example-steps-of-a-full-windows-installation">
<span id="php-install-example-steps"></span><h3>Example Steps of a Full Windows Installation<a class="headerlink" href="#example-steps-of-a-full-windows-installation" title="Link to this heading">¶</a></h3>
<p><strong>Using MS4W (MapServer for Windows)</strong></p>
<ol class="arabic simple">
<li><p>Download the latest <a class="reference external" href="https://ms4w.com/download.html">MS4W base package</a>.</p></li>
<li><p>Extract the files in the archive to the root of one of your drives
(e.g. C:/ or D:/).</p></li>
<li><p>Double-click the file /ms4w/apache-install.bat to install and start the
Apache Web server.</p></li>
<li><p>In a web browser goto <a class="reference external" href="http://127.0.0.1">http://127.0.0.1</a>. You should see an MS4W opening page.
You are now running PHP, PHP/MapScript, and Apache.</p></li>
<li><p>You can now optionally install other applications that are pre-configured
for MS4W, which are located on the <a class="reference external" href="https://ms4w.com/download.html">MS4W download page</a>.</p></li>
</ol>
<p><strong>Manual Installation Using Apache Server</strong></p>
<ol class="arabic">
<li><p>Download the <a class="reference external" href="http://httpd.apache.org/">Apache Web Server</a> and extract it to the root of a directory
(eg. D:/Apache).</p></li>
<li><p>Download <a class="reference external" href="http://www.php.net/">PHP</a> and extract it to your Apache folder (eg. D:/Apache/PHP).</p></li>
<li><p>Create a temp directory to store MapServer created GIFs. NOTE: This directory
is specified in the IMAGEPATH parameter of the WEB Object in the <a class="reference internal" href="../mapfile/index.html#mapfile"><span class="std std-ref">Mapfile</span></a>
reference.
For this example we will call the temp directory “ms_tmp” (eg. E:/tmp/ms_tmp).</p></li>
<li><p>Locate the file <em>httpd.conf</em> in the conf directory of Apache, and open it
in a text viewer (eg. TextPad, Emacs, Notepad).</p>
<p>In the <em>Alias</em> section of this file, add aliases to the ms_tmp folder and any
other folder you require (for this example we will use the <em>msapps</em> folder):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Alias</span>   <span class="o">/</span><span class="n">ms_tmp</span><span class="o">/</span>   <span class="s2">&quot;path/to/ms_tmp/&quot;</span>
<span class="n">Alias</span>   <span class="o">/</span><span class="n">msapps</span><span class="o">/</span>   <span class="s2">&quot;path/to/msapps/&quot;</span>
</pre></div>
</div>
<p>In the <em>ScriptAlias</em> section of this file, add an alias for the PHP folder.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ScriptAlias</span>    <span class="o">/</span><span class="n">cgi</span><span class="o">-</span><span class="n">php</span><span class="o">/</span>     <span class="s2">&quot;pathto/apache/php/&quot;</span>
</pre></div>
</div>
<p>In the <em>AddType</em> section of this file, add a type for php files.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AddType</span> <span class="n">application</span><span class="o">/</span><span class="n">x</span><span class="o">-</span><span class="n">httpd</span><span class="o">-</span><span class="n">php</span>   <span class="o">.</span><span class="n">php</span>
</pre></div>
</div>
<p>In the <em>Action</em> section of this file, add an action for the php.exe file.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Action</span> <span class="n">application</span><span class="o">/</span><span class="n">x</span><span class="o">-</span><span class="n">httpd</span><span class="o">-</span><span class="n">php</span>    <span class="s2">&quot;/cgi-php/php.exe&quot;</span>
</pre></div>
</div>
</li>
<li><p>Copy the file <em>php.ini-dist</em> located in your Apache/php directory and
paste it into your WindowsNT folder (eg. c:/winnt), and then rename this
file to <em>php.ini</em> in your WindowsNT folder.</p></li>
<li><p>If you want specific extensions loaded by default, open the <em>php.ini</em> file
in a text viewer and uncomment the appropriate extension.</p></li>
<li><p>Place the file php_mapscript.dll into your Apache/php/extensions folder.</p></li>
</ol>
<p><strong>Installation Using Microsoft’s IIS</strong></p>
<p>(please see the <a class="reference internal" href="iis.html#iis"><span class="std std-ref">Running MapServer on IIS</span></a> document for uptodate steps)</p>
<ol class="arabic">
<li><p>Install IIS if required (see the <a class="reference external" href="http://windows.microsoft.com/en-us/windows-vista/install-internet-information-services-iis-7-0">IIS installation procedure</a>).</p></li>
<li><p>Install PHP and PHP/MapScript (see above).</p></li>
<li><p>Open the Internet Service Manager (eg. C/WINNT/system32/inetsrv/inetmgr.exe).</p></li>
<li><p>Select the Default web site and create a virtual directory (right click,
select New/Virtual directory). For this example we will call the directory
<em>msapps</em>.</p></li>
<li><p>In the Alias field enter <em>msapps</em> and click Next.</p></li>
<li><p>Enter the path to the root of your application (eg. “c:/msapps”) and click Next.</p></li>
<li><p>Set the directory permissions and click Finish.</p></li>
<li><p>Select the msapps virtual directory previously created and open the directory
property sheets (by right clicking and selecting properties) and then click
on the Virtual directory tab.</p></li>
<li><p>Click on the Configuration button and then click the App Mapping tab.</p></li>
<li><p>Click Add and in the Executable box type: <em>path/to/php/php.exe %s %s</em>. You
MUST have the <em>%s %s</em> on the end, PHP will not function properly if you fail
to do this. In the Extension box, type the file name extension to be associated
with your PHP scripts. Usual extensions needed to be associated are phtml and php.
You must repeat this step for each extension.</p></li>
<li><p>Create a temp directory in Explorer to store MapServer created GIFs.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This directory is specified in the IMAGEPATH parameter of the WEB
Object in the <a class="reference internal" href="../mapfile/index.html#mapfile"><span class="std std-ref">Mapfile</span></a>. For this example we will call the temp
directory <em>ms_tmp</em> (eg. C:/tmp/ms_tmp).</p>
</div>
</li>
<li><p>Open the Internet Service Manager again.</p></li>
<li><p>Select the Default web site and create a virtual directory called <em>ms_tmp</em>
(right click, select New/Virtual directory). Set the path to the ms_tmp directory
(eg. C:/tmp/ms_tmp) . The directory permissions should at least be set to
Read/Write Access.</p></li>
</ol>
</section>
</section>
<section id="faq-common-problems">
<h2><a class="toc-backref" href="#table-of-contents" role="doc-backlink">FAQ / Common Problems</a><a class="headerlink" href="#faq-common-problems" title="Link to this heading">¶</a></h2>
<section id="questions-regarding-documentation">
<h3>Questions Regarding Documentation<a class="headerlink" href="#questions-regarding-documentation" title="Link to this heading">¶</a></h3>
<dl class="field-list">
<dt class="field-odd">Q<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>Is there any documentation available?</strong></p>
</dd>
<dt class="field-even">A<span class="colon">:</span></dt>
<dd class="field-even"><p>The main reference document is the <a class="reference internal" href="../mapscript/mapscript-api/index.html#swig"><span class="std std-ref">SWIG API</span></a> (or the legacy
<a class="reference internal" href="../mapscript/php/index.html#php-mapscript"><span class="std std-ref">PHP MapScript reference</span></a>), which describes all of the current classes,
properties and methods associated with the PHP/MapScript module.</p>
<p>To get a more complete description of each class and the meaning of
their member variables, see the <a class="reference internal" href="../mapscript/index.html#mapscript"><span class="std std-ref">MapScript reference</span></a>
and the <a class="reference internal" href="../mapfile/index.html#mapfile"><span class="std std-ref">MapFile reference</span></a>.</p>
<p>The <a class="reference external" href="http://trac.osgeo.org/mapserver/wiki/PHPMapScript">MapServer Wiki</a> also has PHP/MapScript build and installation
notes and some php code snippets.</p>
</dd>
</dl>
<hr class="docutils" />
<dl class="field-list">
<dt class="field-odd">Q<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>Where can I find sample scripts?</strong></p>
</dd>
<dt class="field-even">A<span class="colon">:</span></dt>
<dd class="field-even"><p>Some examples are included in directory <em>mapserver/mapscript/php/examples/</em>
in the MapServer source distribution. A good one to get started is
<em>test_draw_map.phtml</em>: it’s a very simple script that just draws a map,
legend and scalebar in an HTML page.</p>
<p>A good intermediate example is the <a class="reference internal" href="../mapscript/php/by_example.html#php-example"><span class="std std-ref">PHP MapScript By Example guide</span></a>
(note that this document was created for an earlier MapServer version
but the code might be still useful).</p>
<p>As many users rely on <a class="reference external" href="https://ms4w.com/">MS4W</a> for MapScript, you can also
see user-contributed PHP 7 scripts through the SWIG API, on the
<a class="reference external" href="https://ms4w.com/trac/">MS4W wiki</a>.</p>
<p>The original example is the “Gmap demo”, download the whole source and
data files from the <a class="reference external" href="http://www.maptools.org/dl/">MapTools.org download page</a>.</p>
</dd>
</dl>
</section>
<section id="questions-about-installation">
<h3>Questions About Installation<a class="headerlink" href="#questions-about-installation" title="Link to this heading">¶</a></h3>
<dl class="field-list">
<dt class="field-odd">Q<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>How can I tell that the module is properly installed on my server?</strong></p>
</dd>
<dt class="field-even">A<span class="colon">:</span></dt>
<dd class="field-even"><p>Create a file called phpinfo.phtml with the following contents:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;?php  dl(&quot;php_mapscript.so&quot;);
       phpinfo();
?&gt;
</pre></div>
</div>
<p>Make sure you replace the php_mapscript.so with the name under which you
installed it, it could be php_mapscript_74.so on Unix, or php_mapscript_74.dll
on Windows</p>
<p>You can then try the second test page <em>mapserver/mapscript/php/examples/test_draw_map.phtml</em>.
This page simply opens a MapServer .map file and inserts its map, legend,
and scalebar in an HTML page. Modify the page to access one of your own
MapServer .map files, and if you get the expected result, then everything
is probably working fine.</p>
</dd>
</dl>
<hr class="docutils" />
<dl class="field-list">
<dt class="field-odd">Q<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>I try to display my .phtml or .php page in my browser but the page is
shown as it would it Notepad.</strong></p>
</dd>
<dt class="field-even">A<span class="colon">:</span></dt>
<dd class="field-even"><p>The problem is that your PHP installation does not recognize “.phtml”
as a PHP file extension. Assuming you’re using PHP under Apache then you
need to add the following line with the other PHP-related AddType
lines in the httpd.conf:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AddType</span> <span class="n">application</span><span class="o">/</span><span class="n">x</span><span class="o">-</span><span class="n">httpd</span><span class="o">-</span><span class="n">php</span> <span class="o">.</span><span class="n">phtml</span>
</pre></div>
</div>
<p>For a more detailed explanation, see the <a class="reference internal" href="#php-install-example-steps"><span class="std std-ref">Example Steps of a Full Windows
Installation</span></a> section of this document.</p>
</dd>
</dl>
<hr class="docutils" />
<dl class="field-list">
<dt class="field-odd">Q<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>I installed PROJ (formerly `PROJ.4`), GDAL, and other support libraries on my system,
they are recognized by MapServer’s “configure” as a system lib but at runtime
I get an error: “libproj.so.0: No such file or directory”.</strong></p>
</dd>
<dt class="field-even">A<span class="colon">:</span></dt>
<dd class="field-even"><p>You are probably running a RedHat Linux system if this happened to you.
This happens because the libraries install themselves under /usr/local/lib
but this directory is not part of the runtime library path by default on
your system.</p>
<p>(I’m still surprised that “configure” picked PROJ as a system lib since
it’s not in the system’s lib path…probably something magic in autoconf
that we’ll have to look into)</p>
<p>There are a couple of possible solutions:</p>
<ol class="arabic">
<li><p>Add a “setenv LD_LIBRARY_PATH” to your httpd.conf to contain that directory</p></li>
<li><p>Edit /etc/ld.so.conf to add /usr/local/lib, and then run “/sbin/ldconfig”.
This will permanently add /usr/local/lib to your system’s runtime lib path.</p></li>
<li><p>Configure MapServer with the following options:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span><span class="k">with</span><span class="o">-</span><span class="n">proj</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span> <span class="o">--</span><span class="n">enable</span><span class="o">-</span><span class="n">runpath</span>
</pre></div>
</div>
<p>and the /usr/local/lib directory will be hardcoded in the exe and .so files</p>
</li>
</ol>
<p>I (Daniel Morissette) personally prefer option #2 because it is permanent
and applies to everything running on your system.</p>
</dd>
</dl>
<hr class="docutils" />
<dl class="field-list simple">
<dt class="field-odd">Q<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>Does PHP/MapScript have to be setup as a CGI? If so, why?</strong></p>
</dd>
<dt class="field-even">A<span class="colon">:</span></dt>
<dd class="field-even"><p>Yes, please see the <a class="reference external" href="https://trac.osgeo.org/mapserver/wiki/PHPMapScriptCGI">PHP/MapScript CGI page</a> in the MapServer Wiki for details.</p>
</dd>
</dl>
<hr class="docutils" />
<dl class="field-list">
<dt class="field-odd">Q<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>I have compiled PHP as a CGI and when PHP tries to load the php_mapscript.so,
I get an “undefined symbol: _register_list_destructors” error. What’s wrong?</strong></p>
</dd>
<dt class="field-even">A<span class="colon">:</span></dt>
<dd class="field-even"><p>Your PHP CGI executable is probably not linked to support loading shared libraries.
The MapServer configure script must have given you a message about a flag to add
to the PHP Makefile to enable shared libs.</p>
<p>Edit the main PHP Makefile and add “-rdynamic” to the LDFLAGS at the top of the
Makefile, then relink your PHP executable.</p>
<p><strong>Note:</strong> The actual parameter to add to LDFLAGS may vary depending on the system
you’re running on. On Linux it is “-rdynamic”, and on *BSD it is “-export-dynamic”.</p>
</dd>
</dl>
<hr class="docutils" />
<dl class="field-list simple">
<dt class="field-odd">Q<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>What are the best combinations of MapScript and PHP versions?</strong></p>
</dd>
<dt class="field-even">A<span class="colon">:</span></dt>
<dd class="field-even"><p>The best combinations are:</p>
<ul class="simple">
<li><p>MapScript 7.4.0 with PHP 7.0 and up (through the new <a class="reference internal" href="../mapscript/mapscript-api/index.html#swig"><span class="std std-ref">SWIG API</span></a>)</p></li>
<li><p>MapScript 4.10 with PHP 5.2.1 and up</p></li>
<li><p>MapScript 4.10 with PHP 4.4.6 and up</p></li>
</ul>
</dd>
</dl>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p>
<a href="../about.html" title="About">About</a><br>
<a href="../products.html" title="Products">Products</a><br>
<a href="../community/index.html" title="Community">Community</a><br>
<a href="../development/index.html" title="Development">Development</a><br>
<a href="../download.html" title="Downloads">Downloads</a><br>
<a href="../documentation.html" title="Documentation">Documentation</a><br>
<a href="../faq.html" title="FAQ">FAQ</a><br>
<a href="../psc.html" title="PSC">PSC</a><br>
<a href="https://twitter.com/mapserver_osgeo" title="Twitter">Twitter</a>
</p>
  <h3>Current Table Of Contents</h3>
  <ul>
<li><a class="reference internal" href="#">PHP MapScript Installation</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a><ul>
<li><a class="reference internal" href="#which-version-of-php-is-supported">Which version of PHP is supported?</a></li>
<li><a class="reference internal" href="#how-to-get-more-information-on-the-php-mapscript-module-for-mapserver">How to Get More Information on the PHP/MapScript Module for MapServer</a></li>
</ul>
</li>
<li><a class="reference internal" href="#obtaining-compiling-and-installing-php-and-the-php-mapscript-module">Obtaining, Compiling, and Installing PHP and the PHP/MapScript Module</a><ul>
<li><a class="reference internal" href="#download-php-and-php-mapscript">Download PHP and PHP/MapScript</a></li>
<li><a class="reference internal" href="#setting-up-php-on-your-server">Setting Up PHP on Your Server</a></li>
<li><a class="reference internal" href="#build-install-the-php-mapscript-module">Build/Install the PHP/MapScript Module</a></li>
<li><a class="reference internal" href="#installing-php-mapscript">Installing PHP/MapScript</a></li>
<li><a class="reference internal" href="#example-steps-of-a-full-windows-installation">Example Steps of a Full Windows Installation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#faq-common-problems">FAQ / Common Problems</a><ul>
<li><a class="reference internal" href="#questions-regarding-documentation">Questions Regarding Documentation</a></li>
<li><a class="reference internal" href="#questions-about-installation">Questions About Installation</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="dotnet.html" title=".NET MapScript Compilation"
             >next</a> |</li>
        <li class="right" >
          <a href="win32.html" title="Compiling on Win32"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../documentation.html" >MapServer 8.0.1 Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >Installation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">PHP MapScript Installation</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; <a href="../copyright.html">Copyright</a> 2023, Open Source Geospatial Foundation.
      Last updated on 2023-12-22.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.5.
    </div>
  </body>
</html>