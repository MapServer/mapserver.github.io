<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>A Simple CGI Wrapper Script &#8212; MapServer 8.0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx.css?v=6c7b17ac" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=dd298242" />
    <link rel="stylesheet" type="text/css" href="../_static/ribbon.css?v=ea091bf4" />
    
    <script src="../_static/documentation_options.js?v=521b6f53"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    
    <link rel="icon" href="../_static/mapserver.ico"/>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="MapServer OpenLayers Viewer" href="openlayers.html" />
    <link rel="prev" title="Run-time Substitution" href="runsub.html" /> 
  </head><body>


<!-- for main branch only, do not backport this -->

<table width="100%" style="width: 100%; background-color: white;">
  <tr>
    <td rowspan="2" style="padding: 10px 0px 10px 10px;">
      <a href="../index.html" title="Home"><img src="../_static/banner.png" alt="MapServer banner" border="0" /></a>
    </td>
    <td style="padding: 10px 10px 0px 0px; text-align: right; vertical-align: top;">
      <a href="../index.html" title="Home">Home</a> |
      <a href="../products.html" title="Products (MapServer core, MapCache, TinyOWS">Products</a> |
      <a href="https://github.com/mapserver/mapserver/issues/" title="Issue Tracker (MapServer core)">Issue Tracker</a> |
      <a href="../community/service_providers.html" title="Professional Service Providers">Service Providers</a> |      
      <a href="../faq.html" title="Frequently Asked Questions">FAQ</a> |
      <a href="https://twitter.com/mapserver_osgeo" title="Twitter" target="_blank">Twitter</a> |
      <a href="../download.html" title="Download Source or Binaries">Download </a> |
      <a class="badge" href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=KRJ2X44N3HA6U&source=url" target="_blank">
        <img src="https://img.shields.io/badge/donate-%E2%9D%A4%C2%A0-ff69b4.svg?style=flat" alt="Donate to MapServer">
      </a>
    </td>
  </tr>
  <tr>
    <td style="padding: 0px 10px 0px 0px; text-align: right; vertical-align: bottom;">
        <img src="../_static/flagicons/en.png" alt="en" title="en" border="0" width="18px" height="13px"/>
        
          <a href="../ar/cgi/wrapper.html"><img src="../_static/flagicons/ar.png" alt="ar" title="ar" border="0" /></a>
        
        
          <a href="../de/cgi/wrapper.html"><img src="../_static/flagicons/de.png" alt="de" title="de" border="0" /></a>
        
        
          <a href="../el/cgi/wrapper.html"><img src="../_static/flagicons/el.png" alt="el" title="el" border="0" /></a>
        
        
          <a href="../es/cgi/wrapper.html"><img src="../_static/flagicons/es.png" alt="es" title="es" border="0" /></a>
        
        
          <a href="../fr/cgi/wrapper.html"><img src="../_static/flagicons/fr.png" alt="fr" title="fr" border="0" /></a>
        
        
          <a href="../id/cgi/wrapper.html"><img src="../_static/flagicons/id.png" alt="id" title="id" border="0" /></a>
        
        
          <a href="../it/cgi/wrapper.html"><img src="../_static/flagicons/it.png" alt="it" title="it" border="0" /></a>
        
        
          <a href="../ja/cgi/wrapper.html"><img src="../_static/flagicons/ja.png" alt="ja" title="ja" border="0" /></a>
        
        
          <a href="../nl_NL/cgi/wrapper.html"><img src="../_static/flagicons/nl_NL.png" alt="nl_NL" title="nl_NL" border="0" /></a>
        
        
          <a href="../pl/cgi/wrapper.html"><img src="../_static/flagicons/pl.png" alt="pl" title="pl" border="0" /></a>
        
        
          <a href="../ru/cgi/wrapper.html"><img src="../_static/flagicons/ru.png" alt="ru" title="ru" border="0" /></a>
        
        
          <a href="../sq/cgi/wrapper.html"><img src="../_static/flagicons/sq.png" alt="sq" title="sq" border="0" /></a>
        
        
          <a href="../tr/cgi/wrapper.html"><img src="../_static/flagicons/tr.png" alt="tr" title="tr" border="0" /></a>
        

    </td>
  </tr>
</table>


    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="openlayers.html" title="MapServer OpenLayers Viewer"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="runsub.html" title="Run-time Substitution"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../documentation.html" >MapServer 8.0.1 Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">CGI</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">A Simple CGI Wrapper Script</a></li> 
      </ul>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="a-simple-cgi-wrapper-script">
<span id="wrapper"></span><h1><a class="toc-backref" href="#table-of-contents" role="doc-backlink">A Simple CGI Wrapper Script</a><a class="headerlink" href="#a-simple-cgi-wrapper-script" title="Link to this heading">¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd">Author<span class="colon">:</span></dt>
<dd class="field-odd"><p>Steven Monai</p>
</dd>
<dt class="field-even">Last Updated<span class="colon">:</span></dt>
<dd class="field-even"><p>2006/01/26</p>
</dd>
</dl>
<nav class="contents" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#a-simple-cgi-wrapper-script" id="id1">A Simple CGI Wrapper Script</a></p>
<ul>
<li><p><a class="reference internal" href="#introduction" id="id2">Introduction</a></p></li>
<li><p><a class="reference internal" href="#script-information" id="id3">Script Information</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="introduction">
<h2><a class="toc-backref" href="#table-of-contents" role="doc-backlink">Introduction</a><a class="headerlink" href="#introduction" title="Link to this heading">¶</a></h2>
<p>This document presents a simple shell script that can be used to “wrap” the
MapServer CGI, in order to avoid having to specify the ‘map’ parameter (or any
other chosen parameters) in your MapServer URLs.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Using a wrapper script is inefficient as it implies spawning two processes
(shell+mapserv) instead of only one (mapserv), and should not be used on
production installations. Refer to <a class="reference internal" href="../ogc/wms_server.html#online-resource-wms"><span class="std std-ref">Changing the Online Resource URL</span></a> for examples
of how to setup similar functionality directly by using webserver
configuration options.</p>
</div>
</section>
<section id="script-information">
<h2><a class="toc-backref" href="#table-of-contents" role="doc-backlink">Script Information</a><a class="headerlink" href="#script-information" title="Link to this heading">¶</a></h2>
<p>If you want to avoid having to specify the ‘map’ parameter in your MapServer
URLs, one solution is to use a “wrapper”. Basically, a wrapper is a CGI program
that receives an incoming CGI request, modifies the request parameters in some
way, and then hands off the actual processing to another CGI program (e.g.
MapServer).</p>
<p>The following shell scripts are wrappers for CGI GET requests that should be
generic enough to run on any OS with /bin/sh.</p>
<section id="alternative-1">
<h3>Alternative 1<a class="headerlink" href="#alternative-1" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>#!/bin/sh
MAPSERV=&quot;/path/to/my/mapserv&quot;
MS_MAPFILE=&quot;/path/to/my/mapfile.map&quot; exec ${MAPSERV}
</pre></div>
</div>
<p>You should set the MAPSERV and MS_MAPFILE variables as appropriate for
your configuration. MAPSERV points to your MapServer executable, and
MS_MAPFILE points to the mapfile you want MapServer to use. Both
variables should be absolute file paths that your webserver has
permission to access, although they need not (and probably should not)
be in web-accessible locations.  Put the script in your web server’s
cgi-bin directory, and make it executable.</p>
<p>This solution should support both GET and POST requests.</p>
</section>
<section id="alternative-2">
<h3>Alternative 2<a class="headerlink" href="#alternative-2" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>#!/bin/sh
MAPSERV=&quot;/path/to/my/mapserv&quot;
MAPFILE=&quot;/path/to/my/mapfile.map&quot;
if [ &quot;${REQUEST_METHOD}&quot; = &quot;GET&quot; ]; then
  if [ -z &quot;${QUERY_STRING}&quot; ]; then
    QUERY_STRING=&quot;map=${MAPFILE}&quot;
  else
    QUERY_STRING=&quot;map=${MAPFILE}&amp;${QUERY_STRING}&quot;
  fi
  exec ${MAPSERV}
else
  echo &quot;Sorry, I only understand GET requests.&quot;
fi
exit 1
# End of Script
</pre></div>
</div>
<p>You should set the MAPSERV and MAPFILE variables as appropriate for your
configuration. MAPSERV points to your MapServer executable, and MAPFILE points
to the mapfile you want MapServer to use. Both variables should be absolute
file paths that your webserver has permission to access, although they need not
(and probably should not) be in web-accessible locations. Then put the script
in your web server’s cgi-bin directory, and make it executable.</p>
<p>Although this script only sets the ‘map’ parameter, it is easily modified to
set any number of other MapServer parameters as well. For example, if you want
to force your MapServer to ‘map’ mode, you can simply add ‘mode=map’ to the
front of the QUERY_STRING variable. Just remember to separate your parameters
with ampersands (’&amp;’).</p>
<p>Finally, note that the script only works for GET requests.</p>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p>
<a href="../about.html" title="About">About</a><br>
<a href="../products.html" title="Products">Products</a><br>
<a href="../community/index.html" title="Community">Community</a><br>
<a href="../development/index.html" title="Development">Development</a><br>
<a href="../download.html" title="Downloads">Downloads</a><br>
<a href="../documentation.html" title="Documentation">Documentation</a><br>
<a href="../faq.html" title="FAQ">FAQ</a><br>
<a href="../psc.html" title="PSC">PSC</a><br>
<a href="https://twitter.com/mapserver_osgeo" title="Twitter">Twitter</a>
</p>
  <h3>Current Table Of Contents</h3>
  <ul>
<li><a class="reference internal" href="#">A Simple CGI Wrapper Script</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#script-information">Script Information</a><ul>
<li><a class="reference internal" href="#alternative-1">Alternative 1</a></li>
<li><a class="reference internal" href="#alternative-2">Alternative 2</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="openlayers.html" title="MapServer OpenLayers Viewer"
             >next</a> |</li>
        <li class="right" >
          <a href="runsub.html" title="Run-time Substitution"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../documentation.html" >MapServer 8.0.1 Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >CGI</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">A Simple CGI Wrapper Script</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; <a href="../copyright.html">Copyright</a> 2023, Open Source Geospatial Foundation.
      Last updated on 2023-12-22.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.5.
    </div>
  </body>
</html>