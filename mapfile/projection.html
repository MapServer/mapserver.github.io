<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>PROJECTION &#8212; MapServer 8.0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx.css?v=6c7b17ac" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=dd298242" />
    <link rel="stylesheet" type="text/css" href="../_static/ribbon.css?v=ea091bf4" />
    
    <script src="../_static/documentation_options.js?v=521b6f53"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    
    <link rel="icon" href="../_static/mapserver.ico"/>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="QUERYMAP" href="querymap.html" />
    <link rel="prev" title="OUTPUTFORMAT" href="outputformat.html" /> 
  </head><body>


<!-- for main branch only, do not backport this -->

<table width="100%" style="width: 100%; background-color: white;">
  <tr>
    <td rowspan="2" style="padding: 10px 0px 10px 10px;">
      <a href="../index.html" title="Home"><img src="../_static/banner.png" alt="MapServer banner" border="0" /></a>
    </td>
    <td style="padding: 10px 10px 0px 0px; text-align: right; vertical-align: top;">
      <a href="../index.html" title="Home">Home</a> |
      <a href="../products.html" title="Products (MapServer core, MapCache, TinyOWS">Products</a> |
      <a href="https://github.com/mapserver/mapserver/issues/" title="Issue Tracker (MapServer core)">Issue Tracker</a> |
      <a href="../community/service_providers.html" title="Professional Service Providers">Service Providers</a> |      
      <a href="../faq.html" title="Frequently Asked Questions">FAQ</a> |
      <a href="https://twitter.com/mapserver_osgeo" title="Twitter" target="_blank">Twitter</a> |
      <a href="../download.html" title="Download Source or Binaries">Download </a> |
      <a class="badge" href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=KRJ2X44N3HA6U&source=url" target="_blank">
        <img src="https://img.shields.io/badge/donate-%E2%9D%A4%C2%A0-ff69b4.svg?style=flat" alt="Donate to MapServer">
      </a>
    </td>
  </tr>
  <tr>
    <td style="padding: 0px 10px 0px 0px; text-align: right; vertical-align: bottom;">
        <img src="../_static/flagicons/en.png" alt="en" title="en" border="0" width="18px" height="13px"/>
        
          <a href="../ar/mapfile/projection.html"><img src="../_static/flagicons/ar.png" alt="ar" title="ar" border="0" /></a>
        
        
          <a href="../de/mapfile/projection.html"><img src="../_static/flagicons/de.png" alt="de" title="de" border="0" /></a>
        
        
          <a href="../el/mapfile/projection.html"><img src="../_static/flagicons/el.png" alt="el" title="el" border="0" /></a>
        
        
          <a href="../es/mapfile/projection.html"><img src="../_static/flagicons/es.png" alt="es" title="es" border="0" /></a>
        
        
          <a href="../fr/mapfile/projection.html"><img src="../_static/flagicons/fr.png" alt="fr" title="fr" border="0" /></a>
        
        
          <a href="../id/mapfile/projection.html"><img src="../_static/flagicons/id.png" alt="id" title="id" border="0" /></a>
        
        
          <a href="../it/mapfile/projection.html"><img src="../_static/flagicons/it.png" alt="it" title="it" border="0" /></a>
        
        
          <a href="../ja/mapfile/projection.html"><img src="../_static/flagicons/ja.png" alt="ja" title="ja" border="0" /></a>
        
        
          <a href="../nl_NL/mapfile/projection.html"><img src="../_static/flagicons/nl_NL.png" alt="nl_NL" title="nl_NL" border="0" /></a>
        
        
          <a href="../pl/mapfile/projection.html"><img src="../_static/flagicons/pl.png" alt="pl" title="pl" border="0" /></a>
        
        
          <a href="../ru/mapfile/projection.html"><img src="../_static/flagicons/ru.png" alt="ru" title="ru" border="0" /></a>
        
        
          <a href="../sq/mapfile/projection.html"><img src="../_static/flagicons/sq.png" alt="sq" title="sq" border="0" /></a>
        
        
          <a href="../tr/mapfile/projection.html"><img src="../_static/flagicons/tr.png" alt="tr" title="tr" border="0" /></a>
        

    </td>
  </tr>
</table>


    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="querymap.html" title="QUERYMAP"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="outputformat.html" title="OUTPUTFORMAT"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../documentation.html" >MapServer 8.0.1 Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">Mapfile</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">PROJECTION</a></li> 
      </ul>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="projection">
<span id="index-0"></span><span id="id1"></span><h1>PROJECTION<a class="headerlink" href="#projection" title="Link to this heading">¶</a></h1>
<section id="background">
<span id="index-2"></span><span id="index-1"></span><h2>Background<a class="headerlink" href="#background" title="Link to this heading">¶</a></h2>
<p>There are thousands of geographical reference systems.  In order to
combine datasets with different geographical reference systems into a
map, the datasets will have to be transformed (projected) to the
chosen geographical reference system of the map.  If you want to know
more about geographical reference systems and map projections in general,
please see the <cite>More Information</cite> links below, or look into Geomatics courses
(Geographical Information Systems, Cartography, Geodesy), as projections
are an advanced topic for beginners.</p>
</section>
<section id="projections-with-mapserver">
<h2>Projections with MapServer<a class="headerlink" href="#projections-with-mapserver" title="Link to this heading">¶</a></h2>
<p>To set up projections you must define one projection object for the
output image (in the <a class="reference internal" href="map.html#map"><span class="std std-ref">MAP</span></a> object) and one projection object for
each layer (in the <a class="reference internal" href="layer.html#layer"><span class="std std-ref">LAYER</span></a> objects) to be projected.  MapServer
relies on the <a class="reference internal" href="../glossary.html#term-PROJ"><span class="xref std std-term">PROJ</span></a> library for projections.  Projection
objects therefore consist of a series of PROJ keywords, which are
either specified within the object directly or referred to in an
<a class="reference internal" href="../glossary.html#term-EPSG"><span class="xref std std-term">EPSG</span></a> file.  An EPSG file is a lookup file containing projection
parameters, and is part of the PROJ library.</p>
<p>Starting with MapServer 8 and when the PROJ 6 library or above is used,
the use of EPSG codes when available, rather than the inline projection
parameters, is recommended to benefit from higher accuracy coordinate reprojection.</p>
<p>The following two examples both define the same projection (UTM zone 15,
NAD83), but use 2 different methods:</p>
<p><strong>Example 1: Inline Projection Parameters</strong></p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">PROJECTION</span>
  <span class="s">&quot;proj=utm&quot;</span>
  <span class="s">&quot;ellps=GRS80&quot;</span>
  <span class="s">&quot;datum=NAD83&quot;</span>
  <span class="s">&quot;zone=15&quot;</span>
  <span class="s">&quot;units=m&quot;</span>
  <span class="s">&quot;north&quot;</span>
  <span class="s">&quot;no_defs&quot;</span>
<span class="k">END</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For a list of all of the possible PROJ projection parameters, the official PROJ site is
best (<a class="reference external" href="https://proj.org">https://proj.org</a>), however the old wiki has a thorough list of <a class="reference external" href="https://web.archive.org/web/20160201161640/http://trac.osgeo.org/proj/wiki/GenParms">PROJ parameters</a>.</p>
</div>
<p><strong>Example 2: EPSG Projection Use</strong></p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">PROJECTION</span>
   <span class="s">&quot;init=epsg:26915&quot;</span>
<span class="k">END</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This refers to an EPSG lookup file that contains a ‘26915’ code with the
full projection parameters.  “epsg” in this instance is case-sensitive
because it is referring to a file name.  If your file system is
case-sensitive, this must be lower case, or MapServer (PROJ actually)
will complain about not being able to find this file.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>See <a class="reference external" href="https://epsg.io/26915">https://epsg.io/26915</a> for more information on
this coordinate system.</p>
</div>
<p>The next two examples both display how to possibly define unprojected
lat/long (“geographic”):</p>
<p><strong>Example 3: Inline Projection Parameters</strong></p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">PROJECTION</span>
  <span class="s">&quot;proj=latlong&quot;</span>
  <span class="s">&quot;ellps=WGS84&quot;</span>
  <span class="s">&quot;datum=WGS84&quot;</span>
<span class="k">END</span>
</pre></div>
</div>
<p><strong>Example 4: epsg Projection Use</strong></p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">PROJECTION</span>
   <span class="s">&quot;init=epsg:4326&quot;</span>
<span class="k">END</span>
</pre></div>
</div>
</section>
<section id="web-mercator-or-google-mercator">
<h2>“Web Mercator” or “Google Mercator”<a class="headerlink" href="#web-mercator-or-google-mercator" title="Link to this heading">¶</a></h2>
<p>The EPSG code for the commonly used “Web” or “Google” mercator projection is
‘3857’.  See <a class="reference external" href="https://epsg.io/3857">https://epsg.io/3857</a> for more information on
this coordinate system.  This code was also unofficially referred to as
<cite>EPSG:900913</cite>; you are recommended to use the official <cite>EPSG:3857</cite> code
instead, such as:</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">PROJECTION</span>
   <span class="s">&quot;init=epsg:3857&quot;</span>
<span class="k">END</span>
</pre></div>
</div>
</section>
<section id="projection-auto">
<h2>PROJECTION AUTO<a class="headerlink" href="#projection-auto" title="Link to this heading">¶</a></h2>
<p>The following syntax may be used in LAYERs that are OGR connections,
shapefile layers or raster layers :</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">PROJECTION</span>
   <span class="nb">AUTO</span>
<span class="k">END</span>
</pre></div>
</div>
<ul class="simple">
<li><p>In case of a OGR connection, the projection will be retrieved from the OGR
layer.</p></li>
<li><p>In case of a shapefile layer, the projection will be retrieved from the
associated .prj file.</p></li>
<li><p>In case of raster layers containing a single raster (DATA keyword),
the projection will be retrieved from the GDAL datasource.</p></li>
<li><p>If the raster layer refers to a tile index (OGR layer or shapefile
tileindex), the projection will be retrieved according to the above
describe rules.</p></li>
<li><p>If the raster layer refers to a tile index with rasters in a variety
of projections, the <em>TILESRS</em> keyword should be specified to choose the
appropriate projection for the corresponding raster. See
<a class="reference internal" href="../optimization/tileindex.html#tileindex-mixed-srs"><span class="std std-ref">Tileindexes with tiles in different projections</span></a> for more details.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For other layer types, this syntax is invalid.</p>
</div>
</section>
<section id="specifying-which-epsg-files-to-use">
<h2>Specifying which EPSG files to use<a class="headerlink" href="#specifying-which-epsg-files-to-use" title="Link to this heading">¶</a></h2>
<p id="index-3"><a class="reference internal" href="map.html#map"><span class="std std-ref">MAP</span></a> <cite>CONFIG</cite> can be used to specify the location of EPSG files:</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">MAP</span>
  <span class="k">CONFIG</span> <span class="s">&quot;PROJ_LIB&quot;</span> <span class="s">&quot;/usr/share/proj/&quot;</span>
  <span class="k">PROJECTION</span>
    <span class="s">&quot;init=epsg:3857&quot;</span>
  <span class="k">END</span> <span class="c"># PROJECTION</span>
  <span class="p">...</span>
</pre></div>
</div>
<p>It is important that <cite>CONFIG “PROJ_LIB”</cite> line comes before the
<cite>PROJECTION</cite> block.</p>
</section>
<section id="important-notes">
<h2>Important Notes<a class="headerlink" href="#important-notes" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>If all of your data in the mapfile is in the same projection, you DO NOT
have to specify any projection objects.  MapServer will assume that all of
the data is in the same projection.</p></li>
<li><p>Think of the <a class="reference internal" href="map.html#map"><span class="std std-ref">MAP</span></a>-level projection object as your output projection.
The <cite>EXTENT</cite> and <cite>UNITS</cite> values at the <cite>MAP</cite>-level must be in the output
projection units.  Also, if you have layers in other projections (other than
the <cite>MAP</cite>-level projection) then you must define <cite>PROJECTION</cite> objects for
those layers, to tell MapServer what projections they are in.</p></li>
<li><p>If you specify a <cite>MAP</cite>-level projection, and then only one other <cite>LAYER</cite>
projection object, MapServer will assume that all of the other layers are in
the specified <cite>MAP</cite>-level projection.</p></li>
<li><p>Always refer to the EPSG file in lowercase, because it is a lowercase
filename and on Linux/Unix systems this parameter is case sensitive.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you receive an error such as “<em>msProjectRect(): Projection library error.
All points failed to reproject</em>” definitely verify that you have set
the (MAP-level) output projection and extent properly, as well as the
projection block for each of your layers (their source projection).</p>
</div>
</section>
<section id="for-more-information">
<h2>For More Information<a class="headerlink" href="#for-more-information" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>If you get projection errors, refer to the <a class="reference internal" href="../errors.html#errors"><span class="std std-ref">Errors</span></a> to check
if your exact error has been discussed.</p></li>
<li><p>Search the MapServer-users <a class="reference external" href="http://lists.osgeo.org/pipermail/mapserver-users/">email list archives</a>, odds are that someone has
faced your exact issue before.</p></li>
<li><p>See the <a class="reference external" href="https://proj.org">PROJ</a> user guides for complete descriptions of supported
projections and coordinate systems.</p></li>
<li><p>Read more about the history of the <a class="reference external" href="https://en.wikipedia.org/wiki/Web_Mercator_projection">Web Mercator projection</a>.</p></li>
<li><p>A respected author on map projections is John P. Snyder, if you are wishing
for printed material to review.</p></li>
<li><p>To lookup specific EPSG projection codes, the old website <a class="reference external" href="https://spatialreference.org/">https://spatialreference.org/</a> is unmaintained, so
<a class="reference external" href="https://epsg.io/">https://epsg.io/</a> is recommended instead.</p></li>
</ul>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p>
<a href="../about.html" title="About">About</a><br>
<a href="../products.html" title="Products">Products</a><br>
<a href="../community/index.html" title="Community">Community</a><br>
<a href="../development/index.html" title="Development">Development</a><br>
<a href="../download.html" title="Downloads">Downloads</a><br>
<a href="../documentation.html" title="Documentation">Documentation</a><br>
<a href="../faq.html" title="FAQ">FAQ</a><br>
<a href="../psc.html" title="PSC">PSC</a><br>
<a href="https://twitter.com/mapserver_osgeo" title="Twitter">Twitter</a>
</p>
  <h3>Current Table Of Contents</h3>
  <ul>
<li><a class="reference internal" href="#">PROJECTION</a><ul>
<li><a class="reference internal" href="#background">Background</a></li>
<li><a class="reference internal" href="#projections-with-mapserver">Projections with MapServer</a></li>
<li><a class="reference internal" href="#web-mercator-or-google-mercator">“Web Mercator” or “Google Mercator”</a></li>
<li><a class="reference internal" href="#projection-auto">PROJECTION AUTO</a></li>
<li><a class="reference internal" href="#specifying-which-epsg-files-to-use">Specifying which EPSG files to use</a></li>
<li><a class="reference internal" href="#important-notes">Important Notes</a></li>
<li><a class="reference internal" href="#for-more-information">For More Information</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="querymap.html" title="QUERYMAP"
             >next</a> |</li>
        <li class="right" >
          <a href="outputformat.html" title="OUTPUTFORMAT"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../documentation.html" >MapServer 8.0.1 Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >Mapfile</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">PROJECTION</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; <a href="../copyright.html">Copyright</a> 2023, Open Source Geospatial Foundation.
      Last updated on 2023-12-22.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.5.
    </div>
  </body>
</html>