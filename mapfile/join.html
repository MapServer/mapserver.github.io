<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>JOIN &#8212; MapServer 8.0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx.css?v=6c7b17ac" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=dd298242" />
    <link rel="stylesheet" type="text/css" href="../_static/ribbon.css?v=ea091bf4" />
    
    <script src="../_static/documentation_options.js?v=521b6f53"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    
    <link rel="icon" href="../_static/mapserver.ico"/>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="LABEL" href="label.html" />
    <link rel="prev" title="INCLUDE" href="include.html" /> 
  </head><body>


<!-- for main branch only, do not backport this -->

<table width="100%" style="width: 100%; background-color: white;">
  <tr>
    <td rowspan="2" style="padding: 10px 0px 10px 10px;">
      <a href="../index.html" title="Home"><img src="../_static/banner.png" alt="MapServer banner" border="0" /></a>
    </td>
    <td style="padding: 10px 10px 0px 0px; text-align: right; vertical-align: top;">
      <a href="../index.html" title="Home">Home</a> |
      <a href="../products.html" title="Products (MapServer core, MapCache, TinyOWS">Products</a> |
      <a href="https://github.com/mapserver/mapserver/issues/" title="Issue Tracker (MapServer core)">Issue Tracker</a> |
      <a href="../community/service_providers.html" title="Professional Service Providers">Service Providers</a> |      
      <a href="../faq.html" title="Frequently Asked Questions">FAQ</a> |
      <a href="https://twitter.com/mapserver_osgeo" title="Twitter" target="_blank">Twitter</a> |
      <a href="../download.html" title="Download Source or Binaries">Download </a> |
      <a class="badge" href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=KRJ2X44N3HA6U&source=url" target="_blank">
        <img src="https://img.shields.io/badge/donate-%E2%9D%A4%C2%A0-ff69b4.svg?style=flat" alt="Donate to MapServer">
      </a>
    </td>
  </tr>
  <tr>
    <td style="padding: 0px 10px 0px 0px; text-align: right; vertical-align: bottom;">
        <img src="../_static/flagicons/en.png" alt="en" title="en" border="0" width="18px" height="13px"/>
        
          <a href="../ar/mapfile/join.html"><img src="../_static/flagicons/ar.png" alt="ar" title="ar" border="0" /></a>
        
        
          <a href="../de/mapfile/join.html"><img src="../_static/flagicons/de.png" alt="de" title="de" border="0" /></a>
        
        
          <a href="../el/mapfile/join.html"><img src="../_static/flagicons/el.png" alt="el" title="el" border="0" /></a>
        
        
          <a href="../es/mapfile/join.html"><img src="../_static/flagicons/es.png" alt="es" title="es" border="0" /></a>
        
        
          <a href="../fr/mapfile/join.html"><img src="../_static/flagicons/fr.png" alt="fr" title="fr" border="0" /></a>
        
        
          <a href="../id/mapfile/join.html"><img src="../_static/flagicons/id.png" alt="id" title="id" border="0" /></a>
        
        
          <a href="../it/mapfile/join.html"><img src="../_static/flagicons/it.png" alt="it" title="it" border="0" /></a>
        
        
          <a href="../ja/mapfile/join.html"><img src="../_static/flagicons/ja.png" alt="ja" title="ja" border="0" /></a>
        
        
          <a href="../nl_NL/mapfile/join.html"><img src="../_static/flagicons/nl_NL.png" alt="nl_NL" title="nl_NL" border="0" /></a>
        
        
          <a href="../pl/mapfile/join.html"><img src="../_static/flagicons/pl.png" alt="pl" title="pl" border="0" /></a>
        
        
          <a href="../ru/mapfile/join.html"><img src="../_static/flagicons/ru.png" alt="ru" title="ru" border="0" /></a>
        
        
          <a href="../sq/mapfile/join.html"><img src="../_static/flagicons/sq.png" alt="sq" title="sq" border="0" /></a>
        
        
          <a href="../tr/mapfile/join.html"><img src="../_static/flagicons/tr.png" alt="tr" title="tr" border="0" /></a>
        

    </td>
  </tr>
</table>


    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="label.html" title="LABEL"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="include.html" title="INCLUDE"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../documentation.html" >MapServer 8.0.1 Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">Mapfile</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">JOIN</a></li> 
      </ul>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="join">
<span id="index-0"></span><span id="id1"></span><h1>JOIN<a class="headerlink" href="#join" title="Link to this heading">¶</a></h1>
<section id="description">
<span id="mapfile-join-layer"></span><h2>Description<a class="headerlink" href="#description" title="Link to this heading">¶</a></h2>
<p>Joins are defined within a <a class="reference internal" href="layer.html#layer"><span class="std std-ref">LAYER</span></a> object. It is important to understand
that JOINs are <em>ONLY</em> available once a query has been processed. You cannot
use joins to affect the look of a map. The primary purpose is to enable lookup
tables for coded data (e.g. 1 =&gt; Forest) but there are other possible uses.</p>
</section>
<section id="supported-formats">
<span id="index-1"></span><h2>Supported Formats<a class="headerlink" href="#supported-formats" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>DBF/XBase files</p></li>
<li><p>CSV (comma delimited text file)</p></li>
<li><p>PostgreSQL tables</p></li>
<li><p>MySQL tables</p></li>
</ul>
</section>
<section id="mapfile-parameters">
<h2>Mapfile Parameters:<a class="headerlink" href="#mapfile-parameters" title="Link to this heading">¶</a></h2>
<dl id="mapfile-join-connection">
<dt>CONNECTION [string]</dt><dd><p>Parameters required for the join table’s database connection (not required
for DBF or CSV joins). The following is an example connection for
<a class="reference internal" href="../input/vector/postgis.html#input-postgis"><span class="std std-ref">PostgreSQL</span></a>:</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">CONNECTION</span> <span class="s">&quot;host=127.0.0.1 port=5432 user=pg password=pg dbname=somename&quot;</span>
<span class="k">CONNECTIONTYPE</span> <span class="nb">POSTGRESQL</span>
</pre></div>
</div>
</dd>
</dl>
<span id="index-3"></span><span id="index-2"></span><span id="mapfile-join-connectiontype"></span><dl class="simple" id="index-4">
<dt>CONNECTIONTYPE [csv|mysql|postgresql]</dt><dd><p>Type of connection (not required for DBF joins). For PostgreSQL
use <cite>postgresql</cite>, for CSV use <cite>csv</cite>, for MySQL use <cite>mysql</cite>.</p>
</dd>
</dl>
<dl class="simple" id="mapfile-join-footer">
<dt>FOOTER [filename]</dt><dd><p>Template to use <em>after</em> a layer’s set of results have been sent. In other
words, this header HTML will be displayed after the contents of the
<cite>TEMPLATE</cite> HTML.</p>
</dd>
</dl>
<dl class="simple" id="mapfile-join-from">
<dt>FROM [column]</dt><dd><p>Join column in the dataset.  This is case sensitive.</p>
</dd>
</dl>
<dl class="simple" id="mapfile-join-header">
<dt>HEADER [filename]</dt><dd><p>Template to use <em>before</em> a layer’s set of results have been sent. In other
words, this header HTML will be displayed before the contents of the
<cite>TEMPLATE</cite> HTML.</p>
</dd>
</dl>
<dl class="simple" id="mapfile-join-name">
<dt>NAME [string]</dt><dd><p>Unique name for this join. Required.</p>
</dd>
</dl>
<dl class="simple" id="mapfile-join-table">
<dt>TABLE [filename|tablename]</dt><dd><p>For file-based joins this is the name of XBase or comma delimited file
(relative to the location of the mapfile) to join TO. For PostgreSQL
support this is the name of the PostgreSQL table to join TO.</p>
</dd>
</dl>
<dl class="simple" id="mapfile-join-template">
<dt>TEMPLATE [filename]</dt><dd><p>Template to use with one-to-many joins. The template is processed
once for each record and can only contain substitutions for
columns in the joined table.  Refer to the column in the joined
table in your template like [joinname_columnname], where joinname
is the NAME specified for the JOIN object.</p>
</dd>
</dl>
<dl class="simple" id="mapfile-join-to">
<dt>TO [column]</dt><dd><p>Join column in the table to be joined. This is case sensitive.</p>
</dd>
</dl>
<dl class="simple" id="mapfile-join-type">
<dt>TYPE [ONE-TO-ONE|ONE-TO-MANY]</dt><dd><p>The type of join. Default is one-to-one.</p>
</dd>
</dl>
</section>
<section id="example-1-join-from-shapefile-to-dbf-file">
<h2>Example 1: Join from Shapefile to DBF file<a class="headerlink" href="#example-1-join-from-shapefile-to-dbf-file" title="Link to this heading">¶</a></h2>
<section id="mapfile-layer">
<h3>Mapfile Layer<a class="headerlink" href="#mapfile-layer" title="Link to this heading">¶</a></h3>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">LAYER</span>
  <span class="k">NAME</span> <span class="s">&quot;prov_bound&quot;</span>
  <span class="k">TYPE</span> <span class="nb">POLYGON</span>
  <span class="k">STATUS</span> <span class="nb">DEFAULT</span>
  <span class="k">DATA</span> <span class="s">&quot;prov.shp&quot;</span>
  <span class="k">CLASS</span>
    <span class="k">NAME</span> <span class="s">&quot;Province&quot;</span>
    <span class="k">STYLE</span>
      <span class="k">OUTLINECOLOR</span> <span class="mi">120</span> <span class="mi">120</span> <span class="mi">120</span>
      <span class="k">COLOR</span> <span class="mi">255</span> <span class="mi">255</span> <span class="mi">0</span>
    <span class="k">END</span>
  <span class="k">END</span>
  <span class="k">TEMPLATE</span> <span class="s">&quot;../htdocs/cgi-query-templates/prov.html&quot;</span>
  <span class="k">HEADER</span> <span class="s">&quot;../htdocs/cgi-query-templates/prov-header.html&quot;</span>
  <span class="k">FOOTER</span> <span class="s">&quot;../htdocs/cgi-query-templates/footer.html&quot;</span>
  <span class="k">JOIN</span>
    <span class="k">NAME</span> <span class="s">&quot;test&quot;</span>
    <span class="k">TABLE</span> <span class="s">&quot;../data/lookup.dbf&quot;</span>
    <span class="k">FROM</span> <span class="s">&quot;ID&quot;</span>
    <span class="k">TO</span> <span class="s">&quot;IDENT&quot;</span>
    <span class="k">TYPE</span> <span class="nb">ONE-TO-ONE</span>
  <span class="k">END</span>
<span class="k">END</span> <span class="c"># layer</span>
</pre></div>
</div>
</section>
<section id="ogrinfo">
<h3>Ogrinfo<a class="headerlink" href="#ogrinfo" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&gt;ogrinfo lookup.dbf lookup -summary
INFO: Open of `lookup.dbf&#39;
using driver `ESRI Shapefile&#39; successful.

Layer name: lookup
Geometry: None
Feature Count: 12
Layer SRS WKT:
(unknown)
IDENT: Integer (2.0)
VAL: Integer (2.0)
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&gt;ogrinfo prov.shp prov -summary
INFO: Open of `prov.shp&#39;
using driver `ESRI Shapefile&#39; successful.

Layer name: prov
Geometry: Polygon
Feature Count: 12
Extent: (-2340603.750000, -719746.062500) - (3009430.500000, 3836605.250000)
Layer SRS WKT:
(unknown)
NAME: String (30.0)
ID: Integer (2.0)
</pre></div>
</div>
</section>
<section id="template">
<h3>Template<a class="headerlink" href="#template" title="Link to this heading">¶</a></h3>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="cm">&lt;!-- MapServer Template --&gt;</span>
<span class="p">&lt;</span><span class="nt">tr</span> <span class="na">bgcolor</span><span class="o">=</span><span class="s">&quot;#EFEFEF&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">td</span> <span class="na">align</span><span class="o">=</span><span class="s">&quot;left&quot;</span><span class="p">&gt;</span>[NAME]<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">td</span> <span class="na">align</span><span class="o">=</span><span class="s">&quot;left&quot;</span><span class="p">&gt;</span>[test_VAL]<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
</pre></div>
</div>
</section>
</section>
<section id="example-2-join-from-shapefile-to-postgresql-table">
<h2>Example 2: Join from Shapefile to PostgreSQL table<a class="headerlink" href="#example-2-join-from-shapefile-to-postgresql-table" title="Link to this heading">¶</a></h2>
<section id="id2">
<h3>Mapfile Layer<a class="headerlink" href="#id2" title="Link to this heading">¶</a></h3>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">LAYER</span>
  <span class="k">NAME</span> <span class="s">&quot;prov_bound&quot;</span>
  <span class="k">TYPE</span> <span class="nb">POLYGON</span>
  <span class="k">STATUS</span> <span class="nb">DEFAULT</span>
  <span class="k">DATA</span> <span class="s">&quot;prov.shp&quot;</span>
  <span class="k">CLASS</span>
    <span class="k">NAME</span> <span class="s">&quot;Province&quot;</span>
    <span class="k">STYLE</span>
      <span class="k">OUTLINECOLOR</span> <span class="mi">120</span> <span class="mi">120</span> <span class="mi">120</span>
      <span class="k">COLOR</span> <span class="mi">255</span> <span class="mi">255</span> <span class="mi">0</span>
    <span class="k">END</span>
  <span class="k">END</span>
  <span class="k">TOLERANCE</span> <span class="mi">20</span>
  <span class="k">TEMPLATE</span> <span class="s">&quot;../htdocs/cgi-query-templates/prov.html&quot;</span>
  <span class="k">HEADER</span> <span class="s">&quot;../htdocs/cgi-query-templates/prov-header.html&quot;</span>
  <span class="k">FOOTER</span> <span class="s">&quot;../htdocs/cgi-query-templates/footer.html&quot;</span>
  <span class="k">JOIN</span>
    <span class="k">NAME</span> <span class="s">&quot;test&quot;</span>
    <span class="k">CONNECTION</span> <span class="s">&quot;host=127.0.0.1 port=5432 user=pg password=pg dbname=join&quot;</span>
    <span class="k">CONNECTIONTYPE</span> <span class="nb">postgresql</span>
    <span class="k">TABLE</span> <span class="s">&quot;lookup&quot;</span>
    <span class="k">FROM</span> <span class="s">&quot;ID&quot;</span>
    <span class="k">TO</span> <span class="s">&quot;ident&quot;</span>
    <span class="k">TYPE</span> <span class="nb">ONE-TO-ONE</span>
  <span class="k">END</span>
<span class="k">END</span> <span class="c"># layer</span>
</pre></div>
</div>
</section>
<section id="id3">
<h3>Ogrinfo<a class="headerlink" href="#id3" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&gt;ogrinfo -ro PG:&quot;host=127.0.0.1 port=5432 user=pg password=pg dbname=join&quot;
             lookup -summary
INFO: Open of `PG:host=127.0.0.1 port=5432 user=pg password=pg dbname=join&#39;
using driver `PostgreSQL&#39; successful.

Layer name: lookup
Geometry: Unknown (any)
Feature Count: 12
Layer SRS WKT:
(unknown)
ident: Integer (0.0)
val: Integer (0.0)
</pre></div>
</div>
</section>
<section id="id4">
<h3>Template<a class="headerlink" href="#id4" title="Link to this heading">¶</a></h3>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;!-- MapServer Template</span>
<span class="cp">&lt;tr bgcolor=&quot;#EFEFEF&quot;&gt;</span>
  <span class="p">&lt;</span><span class="nt">td</span> <span class="na">align</span><span class="o">=</span><span class="s">&quot;left&quot;</span><span class="p">&gt;</span>[NAME]<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">td</span> <span class="na">align</span><span class="o">=</span><span class="s">&quot;left&quot;</span><span class="p">&gt;</span>[test_val]<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
</pre></div>
</div>
</section>
</section>
<section id="example-3-join-from-shapefile-to-csv-file">
<h2>Example 3: Join from Shapefile to CSV file<a class="headerlink" href="#example-3-join-from-shapefile-to-csv-file" title="Link to this heading">¶</a></h2>
<section id="id5">
<h3>Mapfile Layer<a class="headerlink" href="#id5" title="Link to this heading">¶</a></h3>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">LAYER</span>
  <span class="k">NAME</span> <span class="s">&quot;prov_bound&quot;</span>
  <span class="k">TYPE</span> <span class="nb">POLYGON</span>
  <span class="k">STATUS</span> <span class="nb">DEFAULT</span>
  <span class="k">DATA</span> <span class="s">&quot;prov.shp&quot;</span>
  <span class="k">CLASS</span>
    <span class="k">NAME</span> <span class="s">&quot;Province&quot;</span>
    <span class="k">STYLE</span>
      <span class="k">OUTLINECOLOR</span> <span class="mi">120</span> <span class="mi">120</span> <span class="mi">120</span>
      <span class="k">COLOR</span> <span class="mi">255</span> <span class="mi">255</span> <span class="mi">0</span>
    <span class="k">END</span>
  <span class="k">END</span>
  <span class="k">TOLERANCE</span> <span class="mi">20</span>
  <span class="k">TEMPLATE</span> <span class="s">&quot;../htdocs/cgi-query-templates/prov.html&quot;</span>
  <span class="k">HEADER</span> <span class="s">&quot;../htdocs/cgi-query-templates/prov-header.html&quot;</span>
  <span class="k">FOOTER</span> <span class="s">&quot;../htdocs/cgi-query-templates/footer.html&quot;</span>
  <span class="k">JOIN</span>
    <span class="k">NAME</span> <span class="s">&quot;test&quot;</span>
    <span class="k">CONNECTIONTYPE</span> <span class="nb">CSV</span>
    <span class="k">TABLE</span> <span class="s">&quot;../data/lookup.csv&quot;</span>
    <span class="k">FROM</span> <span class="s">&quot;ID&quot;</span>
    <span class="c">#TO &quot;IDENT&quot;  # see note below</span>
    <span class="k">TO</span> <span class="s">&quot;1&quot;</span>       <span class="c"># see note below</span>
    <span class="k">TYPE</span> <span class="nb">ONE-TO-ONE</span>
  <span class="k">END</span>
<span class="k">END</span> <span class="c"># layer</span>
</pre></div>
</div>
</section>
<section id="csv-file-structure">
<h3>CSV File Structure<a class="headerlink" href="#csv-file-structure" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;IDENT&quot;</span><span class="p">,</span><span class="s2">&quot;VAL&quot;</span>
<span class="mi">1</span><span class="p">,</span><span class="mi">12</span>
<span class="mi">2</span><span class="p">,</span><span class="mi">11</span>
<span class="mi">3</span><span class="p">,</span><span class="mi">10</span>
<span class="mi">4</span><span class="p">,</span><span class="mi">9</span>
<span class="mi">5</span><span class="p">,</span><span class="mi">8</span>
<span class="mi">6</span><span class="p">,</span><span class="mi">7</span>
<span class="mi">7</span><span class="p">,</span><span class="mi">6</span>
<span class="mi">8</span><span class="p">,</span><span class="mi">5</span>
<span class="mi">9</span><span class="p">,</span><span class="mi">4</span>
<span class="mi">10</span><span class="p">,</span><span class="mi">3</span>
<span class="mi">11</span><span class="p">,</span><span class="mi">2</span>
<span class="mi">12</span><span class="p">,</span><span class="mi">1</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The CSV driver currently doesn’t read column names from the first
row. It just uses indexes (1, 2, … n) to reference the
columns. It’s ok to leave column names as the first row since they
likely won’t match anything but they aren’t used. Typically you’d
see something like TO “1” in the JOIN block. Then in the template
you’d use [name_1], [name_2], etc…</p>
</div>
</section>
<section id="id6">
<h3>Ogrinfo<a class="headerlink" href="#id6" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&gt;ogrinfo lookup.csv lookup -summary
INFO: Open of `lookup.csv&#39;
using driver `CSV&#39; successful.

Layer name: lookup
Geometry: None
Feature Count: 12
Layer SRS WKT:
(unknown)
IDENT: String (0.0)
VAL: String (0.0)
</pre></div>
</div>
</section>
<section id="template-prov-html">
<h3>Template (prov.html)<a class="headerlink" href="#template-prov-html" title="Link to this heading">¶</a></h3>
<p>Ideally this the template should look like this:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="cm">&lt;!-- MapServer Template --&gt;</span>
<span class="p">&lt;</span><span class="nt">tr</span> <span class="na">bgcolor</span><span class="o">=</span><span class="s">&quot;#EFEFEF&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">td</span> <span class="na">align</span><span class="o">=</span><span class="s">&quot;left&quot;</span><span class="p">&gt;</span>[NAME]<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">td</span> <span class="na">align</span><span class="o">=</span><span class="s">&quot;left&quot;</span><span class="p">&gt;</span>[test_VAL]<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>But since attribute names are not supported for CSV files (see note
above), the following will have to be used:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="cm">&lt;!-- MapServer Template --&gt;</span>
<span class="p">&lt;</span><span class="nt">tr</span> <span class="na">bgcolor</span><span class="o">=</span><span class="s">&quot;#EFEFEF&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">td</span> <span class="na">align</span><span class="o">=</span><span class="s">&quot;left&quot;</span><span class="p">&gt;</span>[NAME]<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">td</span> <span class="na">align</span><span class="o">=</span><span class="s">&quot;left&quot;</span><span class="p">&gt;</span>[test_2]<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
</pre></div>
</div>
</section>
</section>
<section id="example-4-join-from-shapefile-to-mysql">
<h2>Example 4: Join from Shapefile to MySQL<a class="headerlink" href="#example-4-join-from-shapefile-to-mysql" title="Link to this heading">¶</a></h2>
<section id="id7">
<h3>Mapfile Layer<a class="headerlink" href="#id7" title="Link to this heading">¶</a></h3>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">LAYER</span>
  <span class="k">NAME</span> <span class="s">&quot;prov_bound&quot;</span>
  <span class="k">TYPE</span> <span class="nb">POLYGON</span>
  <span class="k">STATUS</span> <span class="nb">DEFAULT</span>
  <span class="k">DATA</span> <span class="s">&quot;prov.shp&quot;</span>
  <span class="k">CLASS</span>
    <span class="k">NAME</span> <span class="s">&quot;Province&quot;</span>
    <span class="k">STYLE</span>
      <span class="k">OUTLINECOLOR</span> <span class="mi">120</span> <span class="mi">120</span> <span class="mi">120</span>
      <span class="k">COLOR</span> <span class="mi">255</span> <span class="mi">255</span> <span class="mi">0</span>
    <span class="k">END</span> <span class="c"># style</span>
  <span class="k">END</span> <span class="c"># class</span>
  <span class="k">TOLERANCE</span> <span class="mi">20</span>
  <span class="k">TEMPLATE</span> <span class="s">&quot;../htdocs/cgi-query-templates/prov.html&quot;</span>
  <span class="k">HEADER</span> <span class="s">&quot;../htdocs/cgi-query-templates/prov-header.html&quot;</span>
  <span class="k">FOOTER</span> <span class="s">&quot;../htdocs/cgi-query-templates/footer.html&quot;</span>
  <span class="k">JOIN</span>
    <span class="k">NAME</span> <span class="s">&quot;mysql-join&quot;</span>
    <span class="k">CONNECTIONTYPE</span> <span class="nb">MYSQL</span>
    <span class="k">CONNECTION</span> <span class="s">&#39;server:user:password:database&#39;</span>
    <span class="k">TABLE</span> <span class="s">&quot;mysql-tablename&quot;</span>
    <span class="k">FROM</span> <span class="s">&quot;ID&quot;</span>
    <span class="k">TO</span> <span class="s">&quot;mysql-column&quot;</span>
    <span class="k">TYPE</span> <span class="nb">ONE-TO-ONE</span>
  <span class="k">END</span> <span class="c"># join</span>
<span class="k">END</span> <span class="c"># layer</span>
</pre></div>
</div>
</section>
</section>
<section id="example-5-one-to-many-join">
<h2>Example 5: One-to-many join<a class="headerlink" href="#example-5-one-to-many-join" title="Link to this heading">¶</a></h2>
<p>In a join of type <cite>ONE-TO-MANY</cite>, the <cite>JOIN</cite> object needs to contain a
<cite>TEMPLATE</cite>.  This <cite>TEMPLATE</cite> is used for each matching record in the
join table.  Columns in the join table are referenced using
&lt;join_name&gt;_&lt;join_column_name&gt;.  Columns in the layer table are
referenced using &lt;column_name&gt;.</p>
<p>For a one-to-many join, the <cite>LAYER</cite> <cite>TEMPLATE</cite> file has to contain a
reference to the the <cite>JOIN</cite> object, as follows: [join_&lt;join_name&gt;].</p>
<p>In this example, it is assumed that the join table many.dbf contains
the columns MANYFIELD1 and MANYFIELD2 in addition to the join column
(IDENT).</p>
<p>Layer object:</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">LAYER</span>
  <span class="k">NAME</span> <span class="s">&quot;joinonetomany&quot;</span>
  <span class="k">TYPE</span> <span class="nb">POLYGON</span>
  <span class="k">STATUS</span> <span class="nb">DEFAULT</span>
  <span class="k">DATA</span> <span class="s">&quot;prov.shp&quot;</span>
  <span class="k">CLASS</span>
    <span class="k">NAME</span> <span class="s">&quot;Province&quot;</span>
    <span class="k">STYLE</span>
      <span class="k">OUTLINECOLOR</span> <span class="mi">120</span> <span class="mi">120</span> <span class="mi">120</span>
      <span class="k">COLOR</span> <span class="mi">255</span> <span class="mi">255</span> <span class="mi">0</span>
    <span class="k">END</span> <span class="c"># style</span>
  <span class="k">END</span> <span class="c"># class</span>
  <span class="k">TEMPLATE</span> <span class="s">&quot;oneToMany.html&quot;</span>
  <span class="k">HEADER</span> <span class="s">&quot;oneToMany_header.html&quot;</span>
  <span class="k">FOOTER</span> <span class="s">&quot;oneToMany_footer.html&quot;</span>
  <span class="k">JOIN</span>
    <span class="k">NAME</span> <span class="s">&quot;onetomanytest&quot;</span>
    <span class="k">TABLE</span> <span class="s">&quot;many.dbf&quot;</span>
    <span class="k">FROM</span> <span class="s">&quot;ID&quot;</span>
    <span class="k">TO</span> <span class="s">&quot;IDENT&quot;</span>
    <span class="k">TYPE</span> <span class="nb">ONE-TO-MANY</span>
    <span class="k">TEMPLATE</span> <span class="s">&quot;oneToMany_join.html&quot;</span>
  <span class="k">END</span> <span class="c"># join</span>
<span class="k">END</span> <span class="c"># layer</span>
</pre></div>
</div>
<p>Template oneToMany_header.html:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="cm">&lt;!-- MapServer Template --&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;&lt;</span><span class="nt">title</span><span class="p">&gt;</span>One to Many Join<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>MapServer output<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">table</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Template oneToMany.html:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="cm">&lt;!-- MapServer Template --&gt;</span>
<span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>[ID]<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">table</span><span class="p">&gt;</span>
      [join_onetomanytest]
    <span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Template oneToMany_join.html:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="cm">&lt;!-- MapServer Template --&gt;</span>
<span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>[NAME]<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>[onetomanytest_MANYFIELD1]<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>[onetomanytest_MANYFIELD2]<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Template oneToMany_footer.html:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="cm">&lt;!-- MapServer Template --&gt;</span>
    <span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p>
<a href="../about.html" title="About">About</a><br>
<a href="../products.html" title="Products">Products</a><br>
<a href="../community/index.html" title="Community">Community</a><br>
<a href="../development/index.html" title="Development">Development</a><br>
<a href="../download.html" title="Downloads">Downloads</a><br>
<a href="../documentation.html" title="Documentation">Documentation</a><br>
<a href="../faq.html" title="FAQ">FAQ</a><br>
<a href="../psc.html" title="PSC">PSC</a><br>
<a href="https://twitter.com/mapserver_osgeo" title="Twitter">Twitter</a>
</p>
  <h3>Current Table Of Contents</h3>
  <ul>
<li><a class="reference internal" href="#">JOIN</a><ul>
<li><a class="reference internal" href="#description">Description</a></li>
<li><a class="reference internal" href="#supported-formats">Supported Formats</a></li>
<li><a class="reference internal" href="#mapfile-parameters">Mapfile Parameters:</a></li>
<li><a class="reference internal" href="#example-1-join-from-shapefile-to-dbf-file">Example 1: Join from Shapefile to DBF file</a><ul>
<li><a class="reference internal" href="#mapfile-layer">Mapfile Layer</a></li>
<li><a class="reference internal" href="#ogrinfo">Ogrinfo</a></li>
<li><a class="reference internal" href="#template">Template</a></li>
</ul>
</li>
<li><a class="reference internal" href="#example-2-join-from-shapefile-to-postgresql-table">Example 2: Join from Shapefile to PostgreSQL table</a><ul>
<li><a class="reference internal" href="#id2">Mapfile Layer</a></li>
<li><a class="reference internal" href="#id3">Ogrinfo</a></li>
<li><a class="reference internal" href="#id4">Template</a></li>
</ul>
</li>
<li><a class="reference internal" href="#example-3-join-from-shapefile-to-csv-file">Example 3: Join from Shapefile to CSV file</a><ul>
<li><a class="reference internal" href="#id5">Mapfile Layer</a></li>
<li><a class="reference internal" href="#csv-file-structure">CSV File Structure</a></li>
<li><a class="reference internal" href="#id6">Ogrinfo</a></li>
<li><a class="reference internal" href="#template-prov-html">Template (prov.html)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#example-4-join-from-shapefile-to-mysql">Example 4: Join from Shapefile to MySQL</a><ul>
<li><a class="reference internal" href="#id7">Mapfile Layer</a></li>
</ul>
</li>
<li><a class="reference internal" href="#example-5-one-to-many-join">Example 5: One-to-many join</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="label.html" title="LABEL"
             >next</a> |</li>
        <li class="right" >
          <a href="include.html" title="INCLUDE"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../documentation.html" >MapServer 8.0.1 Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >Mapfile</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">JOIN</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; <a href="../copyright.html">Copyright</a> 2023, Open Source Geospatial Foundation.
      Last updated on 2023-12-22.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.5.
    </div>
  </body>
</html>