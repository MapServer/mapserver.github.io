<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>LAYER &#8212; MapServer 8.0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx.css?v=6c7b17ac" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=dd298242" />
    <link rel="stylesheet" type="text/css" href="../_static/ribbon.css?v=ea091bf4" />
    
    <script src="../_static/documentation_options.js?v=521b6f53"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    
    <link rel="icon" href="../_static/mapserver.ico"/>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="LEADER" href="leader.html" />
    <link rel="prev" title="LABEL" href="label.html" /> 
  </head><body>


<!-- for main branch only, do not backport this -->

<table width="100%" style="width: 100%; background-color: white;">
  <tr>
    <td rowspan="2" style="padding: 10px 0px 10px 10px;">
      <a href="../index.html" title="Home"><img src="../_static/banner.png" alt="MapServer banner" border="0" /></a>
    </td>
    <td style="padding: 10px 10px 0px 0px; text-align: right; vertical-align: top;">
      <a href="../index.html" title="Home">Home</a> |
      <a href="../products.html" title="Products (MapServer core, MapCache, TinyOWS">Products</a> |
      <a href="https://github.com/mapserver/mapserver/issues/" title="Issue Tracker (MapServer core)">Issue Tracker</a> |
      <a href="../community/service_providers.html" title="Professional Service Providers">Service Providers</a> |      
      <a href="../faq.html" title="Frequently Asked Questions">FAQ</a> |
      <a href="https://twitter.com/mapserver_osgeo" title="Twitter" target="_blank">Twitter</a> |
      <a href="../download.html" title="Download Source or Binaries">Download </a> |
      <a class="badge" href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=KRJ2X44N3HA6U&source=url" target="_blank">
        <img src="https://img.shields.io/badge/donate-%E2%9D%A4%C2%A0-ff69b4.svg?style=flat" alt="Donate to MapServer">
      </a>
    </td>
  </tr>
  <tr>
    <td style="padding: 0px 10px 0px 0px; text-align: right; vertical-align: bottom;">
        <img src="../_static/flagicons/en.png" alt="en" title="en" border="0" width="18px" height="13px"/>
        
          <a href="../ar/mapfile/layer.html"><img src="../_static/flagicons/ar.png" alt="ar" title="ar" border="0" /></a>
        
        
          <a href="../de/mapfile/layer.html"><img src="../_static/flagicons/de.png" alt="de" title="de" border="0" /></a>
        
        
          <a href="../el/mapfile/layer.html"><img src="../_static/flagicons/el.png" alt="el" title="el" border="0" /></a>
        
        
          <a href="../es/mapfile/layer.html"><img src="../_static/flagicons/es.png" alt="es" title="es" border="0" /></a>
        
        
          <a href="../fr/mapfile/layer.html"><img src="../_static/flagicons/fr.png" alt="fr" title="fr" border="0" /></a>
        
        
          <a href="../id/mapfile/layer.html"><img src="../_static/flagicons/id.png" alt="id" title="id" border="0" /></a>
        
        
          <a href="../it/mapfile/layer.html"><img src="../_static/flagicons/it.png" alt="it" title="it" border="0" /></a>
        
        
          <a href="../ja/mapfile/layer.html"><img src="../_static/flagicons/ja.png" alt="ja" title="ja" border="0" /></a>
        
        
          <a href="../nl_NL/mapfile/layer.html"><img src="../_static/flagicons/nl_NL.png" alt="nl_NL" title="nl_NL" border="0" /></a>
        
        
          <a href="../pl/mapfile/layer.html"><img src="../_static/flagicons/pl.png" alt="pl" title="pl" border="0" /></a>
        
        
          <a href="../ru/mapfile/layer.html"><img src="../_static/flagicons/ru.png" alt="ru" title="ru" border="0" /></a>
        
        
          <a href="../sq/mapfile/layer.html"><img src="../_static/flagicons/sq.png" alt="sq" title="sq" border="0" /></a>
        
        
          <a href="../tr/mapfile/layer.html"><img src="../_static/flagicons/tr.png" alt="tr" title="tr" border="0" /></a>
        

    </td>
  </tr>
</table>


    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="leader.html" title="LEADER"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="label.html" title="LABEL"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../documentation.html" >MapServer 8.0.1 Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">Mapfile</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">LAYER</a></li> 
      </ul>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="layer">
<span id="index-0"></span><span id="id1"></span><h1>LAYER<a class="headerlink" href="#layer" title="Link to this heading">¶</a></h1>
<img alt="../_images/layer_classes.png" class="no-scaled-link align-center" src="../_images/layer_classes.png" style="width: 1024px; height: 248px;" />
<dl id="mapfile-layer-bindvals">
<dt>BINDVALS</dt><dd><div class="versionadded">
<p><span class="versionmodified added">New in version 6.0.</span></p>
</div>
<p>This keyword allows name value pairs to be created to bind variables in SQL statements.
Variable binding prevents SQL injection by properly escaping strings and integers.
Applies to <a class="reference internal" href="../input/vector/postgis.html#input-postgis"><span class="std std-ref">PostGIS</span></a> and <a class="reference internal" href="../input/vector/oracle.html#oci"><span class="std std-ref">Oracle</span></a> connections only.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../development/rfc/ms-rfc-59.html#rfc59"><span class="std std-ref">MS RFC 59: Add Variable Binding to Database Connection Types</span></a></p>
</div>
<p>Example:</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">DATA</span> <span class="s">&quot;the_geom from (select * from province where name_e = $1) as foo using unique gid&quot;</span>
<span class="k">BINDVALS</span>
        <span class="s">&quot;1&quot;</span>  <span class="s">&quot;Nova Scotia&quot;</span>
<span class="k">END</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This attribute can be replaced using runtime substitution. See <a class="reference internal" href="../cgi/runsub.html#runsub"><span class="std std-ref">Run-time Substitution</span></a>.</p>
</div>
</dd>
</dl>
<span id="mapfile-layer-class"></span><dl id="layer-class">
<dt><a class="reference internal" href="class.html#class"><span class="std std-ref">CLASS</span></a></dt><dd><p>Signals the start of a <a class="reference internal" href="class.html#class"><span class="std std-ref">CLASS</span></a> object.</p>
<p>Inside a layer, only a single class will be used for the rendering
of a feature. Each feature is tested against each class in the order
in which they are defined in the mapfile. The first class that matches
the its min/max scale constraints and its <a class="reference internal" href="expressions.html#expressions"><span class="std std-ref">EXPRESSION</span></a>
check for the current feature will be used for rendering.</p>
<p>This can be controlled with
<a class="reference internal" href="#layer-processing-rendermode"><span class="std std-ref">RENDERMODE</span></a> processing directive.</p>
</dd>
</dl>
<dl class="simple" id="mapfile-layer-classgroup">
<dt>CLASSGROUP  [string]</dt><dd><p>Specify the class’s group that would be considered at rendering time.
The <a class="reference internal" href="class.html#class"><span class="std std-ref">CLASS</span></a> object’s GROUP parameter must be used in combination with
CLASSGROUP.</p>
</dd>
</dl>
<span id="mapfile-layer-classitem"></span><dl class="simple" id="classitem">
<dt>CLASSITEM [attribute]</dt><dd><p>Item name in attribute table to use for class lookups.</p>
</dd>
</dl>
<dl id="mapfile-layer-cluster">
<dt><a class="reference internal" href="cluster.html#cluster"><span class="std std-ref">CLUSTER</span></a></dt><dd><p>Signals the start of a <a class="reference internal" href="cluster.html#cluster"><span class="std std-ref">CLUSTER</span></a> object.</p>
<p>The CLUSTER configuration option provides to combine multiple
features from the layer into single (aggregated) features based on
their relative positions.  Supported only for POINT layers.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../development/rfc/ms-rfc-69.html#rfc69"><span class="std std-ref">MS RFC 69: Support for clustering of features in point layers</span></a></p>
</div>
</dd>
</dl>
<dl id="mapfile-layer-composite">
<dt><a class="reference internal" href="composite.html#composite"><span class="std std-ref">COMPOSITE</span></a></dt><dd><p>Signals the start of a <a class="reference internal" href="composite.html#composite"><span class="std std-ref">COMPOSITE</span></a> object.</p>
<p>One or more COMPOSITE blocks can be used to signal that rendering
should be done in a temporary image and merged onto the final map
image in a final step. The options defined inside the COMPOSITE block
will determine how this merging should be done (e.g. by appying opacity,
composition operator, or pixel filters)</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../development/rfc/ms-rfc-113.html#rfc113"><span class="std std-ref">MS RFC 113: Layer Compositing Pipeline</span></a></p>
</div>
</dd>
</dl>
<dl id="mapfile-layer-connection">
<dt>CONNECTION [string]</dt><dd><p>Database connection string to retrieve remote data.</p>
<p>A PostGIS connection string is basically a regular PostgreSQL connection
string, it takes the form of
“user=nobody password=****** dbname=dbname host=localhost port=5432”</p>
<p>An Oracle connection string: user/pass[&#64;db]</p>
<p>An SDE connection string consists of a hostname, instance name,
database name, username and password separated by commas.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>MapServer’s native SDE driver was removed for the MapServer 7.0 release
(see <a class="reference external" href="http://lists.osgeo.org/pipermail/mapserver-dev/2015-February/014349.html">discussion</a>).
SDE support can still be accessed through the <a class="reference external" href="https://gdal.org/drivers/vector/sde.html">OGR driver</a>.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../input/vector/index.html#vector"><span class="std std-ref">Vector Data</span></a> for specific connection information for various
data sources.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>See <a class="reference internal" href="../output/kerneldensity.html#kerneldensity"><span class="std std-ref">Kernel Density Estimation (Dynamic Heatmap)</span></a> for specific connection information
for kernel density estimation.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This attribute can be replaced using runtime substitution. See <a class="reference internal" href="../cgi/runsub.html#runsub"><span class="std std-ref">Run-time Substitution</span></a>.</p>
</div>
</dd>
</dl>
<dl id="mapfile-layer-connectionoptions">
<dt>CONNECTIONOPTIONS</dt><dd><div class="versionadded">
<p><span class="versionmodified added">New in version 7.6.0.</span></p>
</div>
<p>This keyword allows to define connection options expressed as key / value
pairs. This is currently only implemented for CONNECTIONTYPE OGR or
raster layers, to pass open options to GDAL/OGR drivers.</p>
<p>Example for a GeoJSON datasource to specify the FLATTEN_NESTED_ATTRIBUTES
open option of the OGR GeoJSON driver.</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">CONNECTIONOPTIONS</span>
    <span class="s">&quot;FLATTEN_NESTED_ATTRIBUTES&quot;</span> <span class="s">&quot;YES&quot;</span>
<span class="k">END</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../development/rfc/ms-rfc-125.html#rfc125"><span class="std std-ref">MS RFC 125: Support for CONNECTIONOPTIONS in mapfiles</span></a></p>
</div>
</dd>
</dl>
<span id="index-12"></span><span id="index-11"></span><span id="index-10"></span><span id="index-9"></span><span id="index-8"></span><span id="index-7"></span><span id="index-6"></span><span id="index-5"></span><span id="index-4"></span><span id="index-3"></span><span id="index-2"></span><span id="index-1"></span><span id="mapfile-layer-connectiontype"></span><dl id="index-13">
<dt>CONNECTIONTYPE [contour|kerneldensity|idw|local|ogr|oraclespatial|plugin|postgis|sde|union|uvraster|wfs|wms]</dt><dd><p>Type of connection. Default is local. See additional documentation for
any other type.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../input/vector/index.html#vector"><span class="std std-ref">Vector Data</span></a> for specific connection information for various
data sources.  See <a class="reference internal" href="union.html#union"><span class="std std-ref">Union Layer</span></a> for combining layers, added in
MapServer 6.0</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>See <a class="reference internal" href="../output/kerneldensity.html#kerneldensity"><span class="std std-ref">Kernel Density Estimation (Dynamic Heatmap)</span></a> for specific connection information
for kernel density estimation.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>See <a class="reference internal" href="../output/idw.html#idw"><span class="std std-ref">Inverse distance weighted interpolation</span></a> for specific connection information
for inverse distance weighted interpolation.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><em>mygis</em> is another connectiontype, but it is deprecated; please
see the <a class="reference internal" href="../input/vector/mysql.html#mysql"><span class="std std-ref">MySQL section</span></a> of the Vector Data
document for connection details.</p>
</div>
</dd>
</dl>
<dl id="mapfile-layer-data">
<dt>DATA [filename]|[sde parameters][postgis table/column][oracle table/column]</dt><dd><p>Full filename of the spatial data to process. No file extension is
necessary for shapefiles. Can be specified relative to the
SHAPEPATH option from the Map Object.</p>
<p>If this is an SDE layer, the parameter should include the name of
the layer as well as the geometry column, i.e. “mylayer,shape,myversion”.</p>
<p>If this is a PostGIS layer, the parameter should be in the form of
“&lt;columnname&gt; from &lt;tablename&gt;”, where “columnname” is the name of the
column containing the geometry objects and “tablename” is the name of the
table from which the geometry data will be read.</p>
<p>For Oracle, use “shape FROM table” or “shape FROM (SELECT statement)” or
even more complex Oracle compliant queries! Note that there are important
performance impacts when using spatial subqueries however. Try using
MapServer’s <a class="reference internal" href="#filter">FILTER</a> whenever possible instead. You can also see the SQL
submitted by forcing an error, for instance by submitting a DATA parameter
you know won’t work, using for example a bad column name.</p>
<p>In a standard use case, when PostGIS, SpatiaLite, or GeoPackage are used as data
source the BBOX filter (bounding boxes intersect, <cite>&amp;&amp;</cite> with PostGIS) is used
automatically. However in some rare use case, a subquery can be very time
consuming if data is really important as the final data will be filtered only
in the query. In order to filter data sooner, ie before the final query, one
can filter data directly in the subquery using the !BOX! variable:
<cite>WHERE ST_Intersects(wkb_geometry,!BOX!)</cite>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../input/vector/index.html#vector"><span class="std std-ref">Vector Data</span></a> for specific connection information for various
data sources.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This attribute can be replaced using runtime substitution. See <a class="reference internal" href="../cgi/runsub.html#runsub"><span class="std std-ref">Run-time Substitution</span></a>.</p>
</div>
</dd>
</dl>
<dl id="mapfile-layer-debug">
<dt>DEBUG [off|on|0|1|2|3|4|5]</dt><dd><p>Enables debugging of a layer in the current map.</p>
<p><em>Debugging with MapServer versions &gt;= 5.0:</em></p>
<p>Verbose output is generated and sent to the standard error output
(STDERR) or the MapServer errorfile if one is set using the
“MS_ERRORFILE” environment variable.  You can set the environment
variable by using the CONFIG parameter at the MAP level of the
mapfile, such as:</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">CONFIG</span> <span class="s">&quot;MS_ERRORFILE&quot;</span> <span class="s">&quot;/ms4w/tmp/ms_error.txt&quot;</span>
</pre></div>
</div>
<p>You can also set the environment variable in Apache by adding the
following to your httpd.conf:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SetEnv</span> <span class="n">MS_ERRORFILE</span> <span class="s2">&quot;/ms4w/tmp/ms_error.txt&quot;</span>
</pre></div>
</div>
<p>Once the environment variable is set, the DEBUG mapfile parameter
can be used to control the level of debugging output.  Here is a
description of the possible DEBUG values:</p>
<ul class="simple">
<li><p><strong>DEBUG O or OFF</strong> - only msSetError() calls are logged to
MS_ERRORFILE. No msDebug() output at all. This is the default
and corresponds to the original behavior of MS_ERRORFILE in
MapServer 4.x</p></li>
<li><p><strong>DEBUG 1 or ON</strong> - includes all output from DEBUG 0 plus
msDebug() warnings about common pitfalls, failed assertions or
non-fatal error situations (e.g. missing or invalid values for
some parameters, missing shapefiles in tileindex, timeout error
from remote WMS/WFS servers, etc.)</p></li>
<li><p><strong>DEBUG 2</strong> - includes all output from DEBUG 1 plus notices and timing
information useful for tuning mapfiles and applications</p></li>
<li><p><strong>DEBUG 3</strong> - all of DEBUG 2 plus some debug output useful in
troubleshooting problems such as WMS connection URLs being called,
database connection calls, etc. This is the recommended level for
debugging mapfiles.</p></li>
<li><p><strong>DEBUG 4</strong> - DEBUG 3 plus even more details…</p></li>
<li><p><strong>DEBUG 5</strong> - DEBUG 4 plus any msDebug() output that might be
more useful to the developers than to the users.</p></li>
</ul>
<p>You can also set the debug level by using the “MS_DEBUGLEVEL” environment
variable.</p>
<p>The DEBUG setting can also be specified for the entire map, by setting the
DEBUG parameter in the <a class="reference internal" href="map.html#map"><span class="std std-ref">MAP</span></a> object.</p>
<p>For more details on this debugging mechanism, please see <a class="reference internal" href="../optimization/debugging.html#debugging"><span class="std std-ref">Debugging MapServer</span></a>.</p>
<p><em>Debugging with MapServer versions &lt; 5:</em></p>
<p>Verbose output is generated and sent to the standard error output (STDERR)
or the MapServer logfile if one is set using the LOG parameter in the WEB
object.  Apache users will see timing details for drawing in Apache’s
error_log file.  Requires MapServer to be built with the DEBUG=MSDEBUG
option (–with-debug configure option).</p>
</dd>
</dl>
<dl id="mapfile-layer-dump">
<dt>DUMP [true|false]</dt><dd><div class="versionremoved">
<p><span class="versionmodified removed">Removed in version 8.0: </span>Please use <em>LAYER</em> <em>METADATA</em> instead.</p>
</div>
<p>Switch to allow MapServer to return data in GML format. Useful when
used with WMS GetFeatureInfo operations. “false” by default.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../ogc/wms_server.html#wms-server"><span class="std std-ref">WMS Server</span></a></p>
</div>
</dd>
</dl>
<dl id="mapfile-layer-encoding">
<dt>ENCODING [string]</dt><dd><div class="versionadded">
<p><span class="versionmodified added">New in version 7.0.</span></p>
</div>
<p>The encoding used for text in the layer data source.  The value
must be supported by ICONV (for example “LATIN1”).  When
<cite>ENCODING</cite> is set (and not equal to “UTF-8”), the data source text
attributes will be converted to UTF-8.</p>
<p>Required for displaying international characters in MapServer.
More information can be found in the <a class="reference internal" href="encoding.html#encoding"><span class="std std-ref">Label Encoding document</span></a>.</p>
</dd>
</dl>
<dl class="simple" id="mapfile-layer-extent">
<dt>EXTENT [minx] [miny] [maxx] [maxy]</dt><dd><p>The spatial extent of the data. In most cases you will not need
to specify this, but it can be used to avoid the speed cost of having
MapServer compute the extents of the data.  An application can also
possibly use this value to override the extents of the map.</p>
</dd>
</dl>
<dl class="simple" id="mapfile-layer-feature">
<dt><a class="reference internal" href="feature.html#feature"><span class="std std-ref">FEATURE</span></a></dt><dd><p>Signals the start of a <a class="reference internal" href="feature.html#feature"><span class="std std-ref">FEATURE</span></a> object.</p>
</dd>
</dl>
<p id="filter"><span id="mapfile-layer-filter"></span>FILTER [string]</p>
<blockquote>
<div><p>This parameter allows for data specific attribute filtering that
is done at the same time spatial filtering is done, but before any
CLASS expressions are evaluated.  The string is simply a MapServer
<a class="reference internal" href="expressions.html#expressions"><span class="std std-ref">expression</span></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">FILTER</span> <span class="p">(</span><span class="s2">&quot;[type]&quot;</span><span class="o">=</span><span class="s1">&#39;road&#39;</span> <span class="ow">and</span> <span class="p">[</span><span class="n">size</span><span class="p">]</span><span class="o">&lt;</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>Native filters are supported through the <cite>NATIVE_FILTER</cite>
<cite>PROCESSING</cite> key:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PROCESSING</span> <span class="s1">&#39;NATIVE_FILTER=id=234&#39;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Until MapServer 6, native filters could be specified as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">FILTER</span> <span class="s1">&#39;where id=234&#39;</span><span class="o">.</span>
</pre></div>
</div>
<p>But this is no longer supported.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This attribute can be replaced using runtime substitution. See <a class="reference internal" href="../cgi/runsub.html#runsub"><span class="std std-ref">Run-time Substitution</span></a>.</p>
</div>
</div></blockquote>
<dl class="simple" id="mapfile-layer-filteritem">
<dt>FILTERITEM [attribute]</dt><dd><p>Item to use with simple <a class="reference internal" href="#filter">FILTER</a> expressions. OGR and shapefiles only.</p>
</dd>
</dl>
<dl class="simple" id="mapfile-layer-footer">
<dt>FOOTER [filename]</dt><dd><p>Template to use <em>after</em> a layer’s set of results have been sent.
Multiresult query modes only.</p>
</dd>
</dl>
<dl id="mapfile-layer-geomtransform">
<dt>GEOMTRANSFORM [&lt;expression&gt;|&lt;Javascript file&gt;]</dt><dd><div class="versionadded">
<p><span class="versionmodified added">New in version 6.4.</span></p>
</div>
<p>Used to indicate that the current feature will be transformed.</p>
<ul id="index-14">
<li><p><em>&lt;expression&gt;</em>: Applies the given expression to the geometry.</p>
<p>Supported expressions:</p>
<ul class="simple" id="index-15">
<li><p><em>(buffer([shape],dist))</em>: Buffer the geometry (<cite>[shape]</cite>)
using <cite>dist</cite> ground units as buffer distance. For polygons, a
negative <cite>dist</cite> will produce a setback.</p></li>
</ul>
<div class="versionadded" id="index-16">
<p><span class="versionmodified added">New in version 8.0: </span>centerline()</p>
</div>
<ul>
<li><p><em>(centerline([shape])</em>:  Useful for labeling polygons, creates a
centered line (<cite>[shape]</cite>) using a Voronoi diagram generated by GEOS
and then additional simplification. Requires GEOS &gt;= 3.5
Centerlines can <em>only</em> be computed for polygon shapes.</p>
<ul>
<li><p>an example showing a generated red centerline that is used
to label lakes, from a polygon datasource <cite>lakes.db</cite> (and uses
<cite>densify()</cite> to add more verticies to the generated red line, so it
follows the lake’s shape) :</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">LAYER</span>
  <span class="k">NAME</span> <span class="s">&quot;red-line&quot;</span>
  <span class="k">TYPE</span> <span class="nb">LINE</span>
  <span class="k">CONNECTIONTYPE</span> <span class="nb">OGR</span>
  <span class="k">CONNECTION</span> <span class="s">&quot;lakes.db&quot;</span>
  <span class="k">DATA</span> <span class="s">&quot;lakes&quot;</span>
  <span class="k">GEOMTRANSFORM</span> <span class="p">(</span><span class="err">center</span><span class="nb">line</span><span class="p">(</span><span class="err">densify</span><span class="p">([</span><span class="err">shape</span><span class="p">],</span> <span class="mf">0.1</span><span class="p">)))</span>
  <span class="p">...</span>
  <span class="k">CLASS</span>
    <span class="k">NAME</span> <span class="s">&quot;red&quot;</span>
    <span class="k">STYLE</span>
      <span class="k">COLOR</span> <span class="mi">255</span> <span class="mi">0</span> <span class="mi">0</span>
    <span class="k">END</span> <span class="c">#style</span>
    <span class="k">LABEL</span>
      <span class="k">COLOR</span>  <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span>
      <span class="k">FONT</span> <span class="err">sans</span>
      <span class="k">TYPE</span> <span class="nb">truetype</span>
      <span class="k">SIZE</span> <span class="mi">7</span>
      <span class="k">POSITION</span> <span class="nb">cc</span>
      <span class="k">FORCE</span> <span class="nb">TRUE</span>
      <span class="k">ANGLE</span> <span class="nb">FOLLOW</span>
    <span class="k">END</span> <span class="c">#label</span>
  <span class="k">END</span> <span class="c">#class</span>
  <span class="p">...</span>
<span class="k">END</span> <span class="c">#layer</span>
</pre></div>
</div>
<img alt="../_images/centerline-greatlakes.png" class="no-scaled-link" src="../_images/centerline-greatlakes.png" style="width: 400px; height: 300px;" />
</li>
</ul>
</li>
</ul>
<div class="versionadded" id="index-17">
<p><span class="versionmodified added">New in version 8.0: </span>densify()</p>
</div>
<ul class="simple">
<li><p><em>(densify([shape],tolerance)</em>:  Add more verticies to the
feature (<cite>[shape]</cite>). Requires a positive tolerance
value.  Might be useful in combination with <cite>centerline()</cite> to
add more verticies to the generated labeled line.</p></li>
</ul>
<ul class="simple" id="index-18">
<li><p><em>(generalize([shape],tolerance))</em>: simplifies a geometry
(<cite>[shape]</cite>) in way comparable to FME’s ThinNoPoint
algorithm. See <a class="reference external" href="http://trac.osgeo.org/gdal/ticket/966">http://trac.osgeo.org/gdal/ticket/966</a> for more
information.</p></li>
</ul>
<div class="versionadded" id="index-19">
<p><span class="versionmodified added">New in version 8.0: </span>inner()</p>
</div>
<ul class="simple">
<li><p><em>(inner([shape])</em>:
creates an inner corresponding ring from an input polygon, as a
new <cite>[shape]</cite></p></li>
</ul>
<ul id="index-20">
<li><p><em>(simplify([shape],tolerance))</em>: simplifies a geometry
(<cite>[shape]</cite>) using the standard Douglas-Peucker algorithm.</p>
<ul>
<li><p>an example showing a generated red centerline that is used
to label a province, from a polygon datasource <cite>ns.db</cite> (and uses
<cite>simplify()</cite> to reduce the verticies in the generated line) :</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">LAYER</span>
  <span class="k">NAME</span> <span class="s">&quot;red-line&quot;</span>
  <span class="k">TYPE</span> <span class="nb">LINE</span>
  <span class="k">STATUS</span> <span class="nb">ON</span>
  <span class="k">CONNECTIONTYPE</span> <span class="nb">OGR</span>
  <span class="k">CONNECTION</span> <span class="s">&quot;ns.db&quot;</span>
  <span class="k">DATA</span> <span class="s">&quot;ns&quot;</span>
  <span class="p">...</span>
  <span class="k">GEOMTRANSFORM</span> <span class="p">(</span><span class="err">simplify</span><span class="p">((</span><span class="err">center</span><span class="nb">line</span><span class="p">([</span><span class="err">shape</span><span class="p">])),</span> <span class="mi">10000</span><span class="p">))</span>
  <span class="k">CLASS</span>
    <span class="k">NAME</span> <span class="s">&quot;red&quot;</span>
    <span class="k">STYLE</span>
      <span class="k">COLOR</span> <span class="mi">255</span> <span class="mi">0</span> <span class="mi">0</span>
    <span class="k">END</span> <span class="c">#style</span>
    <span class="k">LABEL</span>
      <span class="k">COLOR</span>  <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span>
      <span class="k">FONT</span> <span class="err">sans</span>
      <span class="k">TYPE</span> <span class="nb">truetype</span>
      <span class="k">SIZE</span> <span class="mi">10</span>
      <span class="k">POSITION</span> <span class="nb">AUTO</span>
      <span class="k">MINFEATURESIZE</span> <span class="nb">AUTO</span>
      <span class="k">ANGLE</span> <span class="nb">FOLLOW</span>
    <span class="k">END</span> <span class="c">#label</span>
  <span class="k">END</span> <span class="c">#class</span>
  <span class="p">...</span>
<span class="k">END</span> <span class="c">#layer</span>
</pre></div>
</div>
<img alt="../_images/centerline-novascotia.png" class="no-scaled-link" src="../_images/centerline-novascotia.png" style="width: 400px; height: 300px;" />
</li>
</ul>
</li>
</ul>
<ul class="simple" id="index-21">
<li><p><em>(simplifypt([shape], tolerance))</em>: simplifies a geometry
(<cite>[shape]</cite>), ensuring that the result is a valid geometry
having the same dimension and number of components as the
input. <cite>tolerance</cite> must be non-negative.</p></li>
</ul>
<ul class="simple" id="index-22">
<li><p><em>(smoothsia([shape], smoothing_size, smoothing_iteration, preprocessing))</em>:
will smooth a geometry (<cite>[shape]</cite>) using the SIA algorithm</p></li>
</ul>
<div class="versionadded" id="index-23">
<p><span class="versionmodified added">New in version 8.0: </span>outer()</p>
</div>
<ul>
<li><p><em>(outer([shape])</em>:
creates an outer corresponding ring from an input polygon, as a
new <cite>[shape]</cite>.  This might be useful when you want to ignore islands
when labeling a lake.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="geomtransform.html#geomtransform"><span class="std std-ref">GEOMTRANSFORM - Geometry Transformations</span></a> and <a class="reference internal" href="../output/shape_smoothing.html#shape-smoothing"><span class="std std-ref">Shape Smoothing</span></a></p>
</div>
</li>
</ul>
<p>There is a difference between STYLE and LAYER
GEOMTRANSFORM. LAYER-level will receive ground coordinates
(meters, degress, etc) and STYLE-level will receive pixel
coordinates. The argument to methods such as simplify() must be
in the same units as the coordinates of the shapes at that point
of the rendering workflow, i.e. pixels at the STYLE-level and in
ground units at the LAYER-level.</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">LAYER</span> <span class="k">NAME</span> <span class="s">&quot;my_layer&quot;</span>
    <span class="k">TYPE</span> <span class="nb">LINE</span>
    <span class="k">STATUS</span> <span class="nb">DEFAULT</span>
    <span class="k">DATA</span> <span class="s">&quot;lines.shp&quot;</span>
    <span class="k">GEOMTRANSFORM</span> <span class="p">(</span><span class="err">simplify</span><span class="p">([</span><span class="err">shape</span><span class="p">],</span> <span class="mi">10</span><span class="p">))</span>  <span class="c">## 10 ground units</span>
    <span class="k">CLASS</span>
        <span class="k">STYLE</span>
            <span class="k">GEOMTRANSFORM</span> <span class="p">(</span><span class="k">buffer</span><span class="p">([</span><span class="err">shape</span><span class="p">],</span> <span class="mi">5</span><span class="p">)</span>  <span class="c">## 5 pixels</span>
            <span class="k">WIDTH</span> <span class="mi">2</span>
            <span class="k">COLOR</span> <span class="mi">255</span> <span class="mi">0</span> <span class="mi">0</span>
        <span class="k">END</span>
    <span class="k">END</span>
<span class="k">END</span>
</pre></div>
</div>
<p>The [map_cellsize] variable is available if you need to pass a pixel value
at the LAYER-level.</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">LAYER</span> <span class="k">NAME</span> <span class="s">&quot;my_layer&quot;</span>
    <span class="k">TYPE</span> <span class="nb">LINE</span>
    <span class="k">STATUS</span> <span class="nb">DEFAULT</span>
    <span class="k">DATA</span> <span class="s">&quot;lines.shp&quot;</span>
    <span class="k">UNITS</span> <span class="nb">meters</span>
    <span class="c"># 10 * [map_cellsize] == 10 pixels converted to ground units</span>
    <span class="k">GEOMTRANSFORM</span> <span class="p">(</span><span class="err">simplify</span><span class="p">([</span><span class="err">shape</span><span class="p">],</span> <span class="nx">[map_cellsize]</span><span class="o">*</span><span class="mi">10</span><span class="p">))</span>
<span class="p">...</span>
</pre></div>
</div>
<p>To get this variable working in the math expression parser,
the [map_cellsize] has to be converted into the layer ground unit.
If you choose to use [map_cellsize] in your GEOMTRANSFORM expression,
you must explicitly set the UNITS option in the layer.</p>
</li>
</ul>
<ul id="index-24">
<li><p><em>&lt;Javascript file&gt;</em>: A Javascript file that returns a new geometry.  See <a class="reference internal" href="geomtransform.html#geomtransformjs"><span class="std std-ref">Javascript transformation</span></a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 7.0.</span></p>
</div>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">LAYER</span>
  <span class="p">...</span>
  <span class="k">GEOMTRANSFORM</span> <span class="s">&quot;javascript://transform.js&quot;</span> <span class="c"># relative path</span>
<span class="k">END</span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">LAYER</span>
  <span class="p">...</span>
  <span class="k">GEOMTRANSFORM</span> <span class="s">&quot;javascript:///home/user/transform.js&quot;</span> <span class="c"># absolute path</span>
<span class="k">END</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Requires <a class="reference internal" href="../installation/v8.html#v8-support"><span class="std std-ref">V8 MapScript Support</span></a>.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="geomtransform.html#geomtransform"><span class="std std-ref">GEOMTRANSFORM - Geometry Transformations</span></a></p>
</div>
</li>
</ul>
</dd>
</dl>
<dl class="simple" id="mapfile-layer-grid">
<dt><a class="reference internal" href="grid.html#grid"><span class="std std-ref">GRID</span></a></dt><dd><p>Signals the start of a <a class="reference internal" href="grid.html#grid"><span class="std std-ref">GRID</span></a> object.</p>
</dd>
</dl>
<dl id="mapfile-layer-group">
<dt>GROUP [name]</dt><dd><p>Name of a group that this layer belongs to. The group name can then be
reference as a regular layer name in the template files, allowing to do
things like turning on and off a group of layers at once.</p>
<p>If a group name is present in the LAYERS parameter of a CGI
request, all the layers of the group are returned (the <cite>STATUS</cite> of
the <cite>LAYER</cite>s have no effect).</p>
</dd>
</dl>
<dl class="simple" id="mapfile-layer-header">
<dt>HEADER [filename]</dt><dd><p>Template to use <em>before</em> a layer’s set of results have been sent.
Multiresult query modes only.</p>
</dd>
</dl>
<dl id="mapfile-layer-join">
<dt><a class="reference internal" href="join.html#join"><span class="std std-ref">JOIN</span></a></dt><dd><p>Signals the start of a <a class="reference internal" href="join.html#join"><span class="std std-ref">JOIN</span></a> object.</p>
</dd>
<dt>LABELANGLEITEM [attribute]</dt><dd><div class="versionremoved">
<p><span class="versionmodified removed">Removed in version 5.0: </span>Please see the <a class="reference internal" href="label.html#label"><span class="std std-ref">LABEL</span></a> object’s ANGLE parameter instead.</p>
</div>
<p>For MapServer versions &lt; 5.0, this is the item name in attribute table
to use for class annotation angles. Values should be in degrees.</p>
</dd>
</dl>
<dl class="simple" id="mapfile-layer-labelcache">
<dt>LABELCACHE [on|off]</dt><dd><p>Specifies whether labels should be drawn as the features for this layer
are drawn, or whether they should be cached and drawn after all layers
have been drawn. Default is on. Label overlap removal, auto placement
etc… are only available when the label cache is active.</p>
</dd>
</dl>
<dl class="simple" id="mapfile-layer-labelitem">
<dt>LABELITEM [attribute]</dt><dd><p>Item name in attribute table to use for class annotation (i.e. labeling).</p>
</dd>
</dl>
<dl id="mapfile-layer-labelmaxscaledenom">
<dt>LABELMAXSCALEDENOM [double]</dt><dd><p>Minimum scale at which this LAYER is labeled.  Scale is given as the
denominator of the actual scale fraction, for example for a map at a scale
of 1:24,000 use 24000.  Implemented in MapServer 5.0, to replace the
deprecated LABELMAXSCALE parameter. Must be greater or equal to 0.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../glossary.html#term-Map-Scale"><span class="xref std std-term">Map Scale</span></a></p>
</div>
</dd>
</dl>
<dl id="mapfile-layer-labelminscaledenom">
<dt>LABELMINSCALEDENOM [double]</dt><dd><p>Maximum scale at which this LAYER is labeled.  Scale is given as the
denominator of the actual scale fraction, for example for a map at a scale
of 1:24,000 use 24000.  Implemented in MapServer 5.0, to replace the
deprecated LABELMINSCALE parameter. Must be greater or equal to 0.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../glossary.html#term-Map-Scale"><span class="xref std std-term">Map Scale</span></a></p>
</div>
</dd>
</dl>
<span id="mapfile-layer-labelrequires"></span><dl id="labelrequires">
<dt>LABELREQUIRES [expression]</dt><dd><p>Sets context for labeling this layer, for example:</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">LABELREQUIRES</span> <span class="s">&quot;![orthoquads]&quot;</span>
</pre></div>
</div>
<p>means that this layer would NOT be labeled if a layer named
“orthoquads” is on. The expression consists of a boolean expression based
on the status of other layers, each [layer name] substring is replaced by
a 0 or a 1 depending on that layer’s <a class="reference internal" href="#status">STATUS</a> and then evaluated as normal.
Logical operators AND and OR can be used.</p>
</dd>
<dt>LABELSIZEITEM [attribute]</dt><dd><div class="versionremoved">
<p><span class="versionmodified removed">Removed in version 5.0: </span>Please see the <a class="reference internal" href="label.html#label"><span class="std std-ref">LABEL</span></a> object’s SIZE parameter instead.</p>
</div>
<p>For MapServer versions &lt; 5.0, this is the item name in attribute table to
use for class annotation sizes. Values should be in pixels.</p>
</dd>
</dl>
<dl id="mapfile-layer-mask">
<dt>MASK [layername]</dt><dd><p>The data from the current layer will only be rendered where it intersects
features from the [layername] layer. [layername] must reference the NAME of
another <a class="reference internal" href="#layer">LAYER</a> defined in the current mapfile. can be any kind of
MapServer layer, i.e. vector or raster. If the current layer has labelling
configured, then only labels who’s label-point fall inside the unmasked
area will be added to the labelcache (the actual glyphs for the label
may be rendered ontop of the masked-out area.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Unless you want the features of [layername] to actually appear on the
generated map, [layername] should usually be set to <a class="reference internal" href="#status">STATUS</a> OFF.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../development/rfc/ms-rfc-79.html#rfc79"><span class="std std-ref">MS RFC 79: Layer Masking</span></a></p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This attribute can be replaced using runtime substitution. See <a class="reference internal" href="../cgi/runsub.html#runsub"><span class="std std-ref">Run-time Substitution</span></a>.</p>
</div>
</dd>
</dl>
<dl class="simple" id="mapfile-layer-maxfeatures">
<dt>MAXFEATURES [integer]</dt><dd><p>Specifies the number of features that should be drawn for this layer in
the CURRENT window. Has some interesting uses with annotation and with
sorted data (i.e. lakes by area). Must be greater than 0.</p>
</dd>
</dl>
<dl id="mapfile-layer-maxgeowidth">
<dt>MAXGEOWIDTH [double]</dt><dd><div class="versionadded">
<p><span class="versionmodified added">New in version 5.4.0.</span></p>
</div>
<p>Maximum width, in the map’s geographic units, at which this LAYER
is drawn.  If MAXSCALEDENOM is also specified then MAXSCALEDENOM
will be used instead. Must be greater than 0.</p>
<p>The width of a map in geographic units can be found by calculating the
following from the extents:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">maxx</span><span class="p">]</span> <span class="o">-</span> <span class="p">[</span><span class="n">minx</span><span class="p">]</span>
</pre></div>
</div>
</dd>
</dl>
<dl id="mapfile-layer-maxscaledenom">
<dt>MAXSCALEDENOM [double]</dt><dd><div class="versionadded">
<p><span class="versionmodified added">New in version 5.0.0: </span>Replaced MAXSCALE.</p>
</div>
<p>Minimum scale at which this LAYER is drawn.  Scale is given as the
denominator of the actual scale fraction, for example for a map at a scale
of 1:24,000 use 24000. Must be greater or equal to 0.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../glossary.html#term-Map-Scale"><span class="xref std std-term">Map Scale</span></a></p>
</div>
</dd>
</dl>
<dl id="mapfile-layer-metadata">
<dt>METADATA</dt><dd><p>This keyword allows for arbitrary data to be stored as name value pairs.
This is used with <a class="reference internal" href="../ogc/wms_server.html#wms-server"><span class="std std-ref">OGC WMS</span></a> to define things such as
layer title. It can also allow more flexibility in creating templates, as
anything you put in here will be accessible via template tags.</p>
<p>Example:</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">METADATA</span>
    <span class="s">&quot;title&quot;</span> <span class="s">&quot;My layer title&quot;</span>
    <span class="s">&quot;author&quot;</span> <span class="s">&quot;Me!&quot;</span>
<span class="k">END</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Runtime substitution can be used to replace metadata values, but not keys. See <a class="reference internal" href="../cgi/runsub.html#runsub"><span class="std std-ref">Run-time Substitution</span></a></p>
</div>
</dd>
</dl>
<dl class="simple" id="mapfile-layer-minfeaturesize">
<dt>MINFEATURESIZE [integer]</dt><dd><p>Minimum feature size (in pixels) for shapes in the layer.
Must be greater than 0.</p>
</dd>
</dl>
<dl id="mapfile-layer-mingeowidth">
<dt>MINGEOWIDTH [double]</dt><dd><div class="versionadded">
<p><span class="versionmodified added">New in version 5.4.0.</span></p>
</div>
<p>Minimum width, in the map’s geographic units, at which this LAYER
is drawn.  If MINSCALEDENOM is also specified then MINSCALEDENOM
will be used instead. Must be greater than 0.</p>
<p>The width of a map in geographic units can be found by calculating the
following from the extents:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">maxx</span><span class="p">]</span> <span class="o">-</span> <span class="p">[</span><span class="n">minx</span><span class="p">]</span>
</pre></div>
</div>
</dd>
</dl>
<dl id="mapfile-layer-minscaledenom">
<dt>MINSCALEDENOM [double]</dt><dd><p>Maximum scale at which this LAYER is drawn.  Scale is given as the
denominator of the actual scale fraction, for example for a map at a scale
of 1:24,000 use 24000.  Implemented in MapServer 5.0, to replace the
deprecated MINSCALE parameter. Must be greater or equal to 0.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../glossary.html#term-Map-Scale"><span class="xref std std-term">Map Scale</span></a></p>
</div>
</dd>
</dl>
<dl id="mapfile-layer-name">
<dt>NAME [string]</dt><dd><p>Short name for this layer. This name is the link between the
mapfile and web interfaces that refer to this name. They must be
identical. The name should be unique, unless one layer replaces
another at different scales. Use the GROUP option to associate
layers with each other.  It is recommended that the name not
contain spaces, special characters, or begin with a number (which
could cause problems through interfaces such as OGC services).</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>It is <strong>strongly recommended</strong> that you set a NAME parameter for every LAYER.</p>
</div>
</dd>
</dl>
<dl id="mapfile-layer-offsite">
<dt>OFFSITE [r] [g] [b] | [hexadecimal string]</dt><dd><p>Sets the color index to treat as transparent for raster layers.</p>
<ul>
<li><p><cite>r</cite>, <cite>g</cite> and <cite>b</cite> shall be integers [0..255].  To specify black
pixels, the following is used:</p>
<blockquote>
<div><div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">OFFSITE</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p><cite>hexadecimal string</cite> can be</p>
<ul>
<li><p>RGB value: “#rrggbb”.  To specify magenta, the following is
used:</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">OFFSITE</span> <span class="s">&quot;#FF00FF&quot;</span>
</pre></div>
</div>
</li>
<li><p>RGBA value (adding translucence): “#rrggbbaa”.  To specify a
semi-translucent magenta, the following is used:</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">OFFSITE</span> <span class="s">&quot;#FF00FFCC&quot;</span>
</pre></div>
</div>
</li>
</ul>
</li>
</ul>
</dd>
</dl>
<p id="layer-opacity"><span id="mapfile-layer-opacity"></span>OPACITY [integer|alpha]</p>
<blockquote>
<div><div class="versionremoved">
<p><span class="versionmodified removed">Removed in version 8.0: </span>Use a <a class="reference internal" href="composite.html#composite"><span class="std std-ref">COMPOSITE</span></a> block instead.</p>
</div>
</div></blockquote>
<dl id="mapfile-layer-plugin">
<dt>PLUGIN [filename]</dt><dd><p>Additional library to load by MapServer, for this layer.  This is commonly
used to load specific support for Oracle and Microsoft SQL Server layers,
such as:</p>
<p><strong>For MapServer &gt;=8:</strong></p>
<blockquote>
<div><div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">CONNECTIONTYPE</span> <span class="nb">PLUGIN</span>
<span class="k">CONNECTION</span> <span class="s">&quot;username/password@hostname:port/database&quot;</span>
<span class="nb">PLUGIN</span> <span class="s">&quot;oci&quot;</span>
<span class="k">DATA</span> <span class="s">&quot;geometrycolumn FROM schema.table USING UNIQUE column SRID 4326&quot;</span>
</pre></div>
</div>
</div></blockquote>
<p>Where “oci” is an alias mapped in the global <a class="reference internal" href="config.html#config"><span class="std std-ref">CONFIG</span></a>
file:</p>
<blockquote>
<div><div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="err">PLUGINS</span>
  <span class="c"># new keyed approach to plugins</span>
  <span class="s">&quot;mssql&quot;</span> <span class="s">&quot;C:/apps/gisinternals/bin/ms/plugins/mssql2008/msplugin_mssql2008.dll&quot;</span>
  <span class="s">&quot;oci&quot;</span> <span class="s">&quot;C:/apps/gisinternals/bin/ms/plugins/oci/msplugin_oracle.dll&quot;</span>
  <span class="s">&quot;mssql_ms4w&quot;</span> <span class="s">&quot;C:/ms4w/msplugins/mssql/msplugin_mssql2008.dll&quot;</span>
<span class="k">END</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>For MapServer &lt;8:</strong></p>
<blockquote>
<div><div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">CONNECTIONTYPE</span> <span class="nb">PLUGIN</span>
<span class="k">CONNECTION</span> <span class="s">&quot;server=mysqlserver2008.com;uid=dbusername;pwd=dbpassword;database=Roads Database;Integrated Security=false&quot;</span>
<span class="nb">PLUGIN</span> <span class="s">&quot;C:/ms4w/msplugins/mssql/msplugin_mssql2008.dll&quot;</span>
<span class="k">DATA</span> <span class="s">&quot;the_geom from roads&quot;</span>
</pre></div>
</div>
</div></blockquote>
</dd>
</dl>
<dl class="simple" id="mapfile-layer-postlabelcache">
<dt>POSTLABELCACHE [true|false]</dt><dd><p>Tells MapServer to render this layer after all labels in the cache have
been drawn. Useful for adding neatlines and similar elements.
Default is false.</p>
</dd>
</dl>
<span id="mapfile-layer-processing"></span><dl id="index-25">
<dt>PROCESSING [string]</dt><dd><p>Passes a processing directive to be used with this layer. The supported
processing directives vary by layer type, and the underlying driver that
processes them.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This attribute can be replaced using runtime substitution. See <a class="reference internal" href="../cgi/runsub.html#runsub"><span class="std std-ref">Run-time Substitution</span></a>.</p>
</div>
<ul id="index-26">
<li><p><strong>ArcSDE Directives</strong> - All ArcSDE processing options are described
in <a class="reference internal" href="../input/vector/arcsde.html#arcsde"><span class="std std-ref">ArcSDE</span></a>.  Here are two examples.</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">PROCESSING</span> <span class="s">&quot;QUERYORDER=ATTRIBUTE&quot;</span>
<span class="k">PROCESSING</span> <span class="s">&quot;OBJECTID=OBJECTID&quot;</span>
</pre></div>
</div>
</li>
</ul>
<ul id="index-27">
<li><p><strong>Attributes Directive</strong> - The ITEMS processing option allows to
specify the name of attributes for inline layers or specify the subset
of the attributes to be used by the layer, such as:</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">PROCESSING</span> <span class="s">&quot;ITEMS=itemname1,itemname2,itemname3&quot;</span>
</pre></div>
</div>
</li>
</ul>
<span id="index-31"></span><span id="index-30"></span><span id="index-29"></span><span id="index-28"></span><ul id="index-32">
<li><p><strong>Clustering</strong> - cluster object directives are described in
<a class="reference internal" href="cluster.html#cluster"><span class="std std-ref">CLUSTER</span></a></p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">PROCESSING</span> <span class="s">&quot;CLUSTER_GET_ALL_SHAPES=ON&quot;</span>
<span class="k">PROCESSING</span> <span class="s">&quot;CLUSTER_KEEP_LOCATIONS=ON&quot;</span>
<span class="k">PROCESSING</span> <span class="s">&quot;CLUSTER_USE_MAP_UNITS=ON&quot;</span>
<span class="k">PROCESSING</span> <span class="s">&quot;ITEMS=attribute1,attribute2,attribute3&quot;</span>
</pre></div>
</div>
</li>
</ul>
<ul id="index-33">
<li><p><strong>Connection Pooling Directive</strong> - This is where you can enable
connection pooling for certain layer layer types. Connection pooling
will allow MapServer to share the handle to an open database or layer
connection throughout a single map draw process. Additionally, if you
have FastCGI enabled, the connection handle will stay open indefinitely,
or according to the options specified in the
<a class="reference internal" href="../optimization/fastcgi.html#fastcgi"><span class="std std-ref">FastCGI</span></a> configuration. <a class="reference internal" href="../input/vector/oracle.html#oci"><span class="std std-ref">Oracle Spatial</span></a>, <a class="reference internal" href="../input/vector/arcsde.html#arcsde"><span class="std std-ref">ArcSDE</span></a>,
<a class="reference internal" href="../input/vector/ogr.html#ogr"><span class="std std-ref">OGR Vector Layers Through MapServer</span></a> and <a class="reference internal" href="../input/vector/postgis.html#input-postgis"><span class="std std-ref">PostGIS/PostgreSQL</span></a> currently support this approach.
“<strong>DEFER</strong>” enables connection pooling; “<strong>ALWAYS</strong>” will always close
the connection after use, and will also not try to reuse a shared
connection from the pool that might come from another layer.</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">PROCESSING</span> <span class="s">&quot;CLOSE_CONNECTION=DEFER&quot;</span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">PROCESSING</span> <span class="s">&quot;CLOSE_CONNECTION=ALWAYS&quot;</span>
</pre></div>
</div>
</li>
</ul>
<span id="index-36"></span><span id="index-35"></span><span id="index-34"></span><ul id="index-37">
<li><p><strong>Contour Directives</strong> - contour directives are described in
<a class="reference internal" href="../input/vector/contour.html#contour"><span class="std std-ref">Contour</span></a>.</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">PROCESSING</span> <span class="s">&quot;BANDS=1&quot;</span>
<span class="k">PROCESSING</span> <span class="s">&quot;CONTOUR_INTERVAL=5&quot;</span>
<span class="k">PROCESSING</span> <span class="s">&quot;CONTOUR_LEVELS=100,500,1000&quot;</span>
<span class="k">PROCESSING</span> <span class="s">&quot;CONTOUR_ITEM=elevation&quot;</span>
</pre></div>
</div>
</li>
</ul>
<ul id="index-38">
<li><p><strong>Kernel density radius</strong></p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 7.0.</span></p>
</div>
<p>Radius in pixels of the gaussian
filter to apply to the bitmap array once all features have been
accumulated.  Higher values result in increased cpu time needed
to compute the filtered data.</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">PROCESSING</span> <span class="s">&quot;KERNELDENSITY_RADIUS=10&quot;</span>
</pre></div>
</div>
</li>
</ul>
<ul id="index-39">
<li><p><strong>Kernel density compute borders</strong></p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 7.0.</span></p>
</div>
<p>A kernel of radius “r”
cannot be applied to “r” pixels along the borders of the image.
The default is to extend the search rectangle of the input
datasource to include features “r” pixels outside of the current
map extent so that the computed heatmap extends to the full
extent of the resulting image.  This can be deactivated when
tiling if the tiling software applies a metabuffer of “r” pixels
to its requests, to avoid the performance overhead of computing
this extra information.</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">PROCESSING</span> <span class="s">&quot;KERNELDENSITY_COMPUTE_BORDERS=ON|OFF&quot;</span>
</pre></div>
</div>
</li>
</ul>
<ul id="index-40">
<li><p><strong>Kernel density normalization</strong></p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 7.0.</span></p>
</div>
<p>If set to “AUTO”, the created
raster band will be scaled such that its intensities range from
0 to 255, in order to fully span the configured color ramp.
Such behavior may not be desirable (typically for tiling) as the
resulting intensity of a pixel at a given location will vary
depending on the extent of the current map request.  If set to a
numeric value, the samples will be multiplied by the given value.
It is up to the user to determine which scaling value to use to
make the resulting pixels span the full 0-255 range; determining
that value is mostly a process of trial and error.  Pixels that
fall outside the 0-255 range will be clipped to 0 or 255.</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">PROCESSING</span> <span class="s">&quot;KERNELDENSITY_NORMALIZATION=AUTO|numeric&quot;</span>
</pre></div>
</div>
</li>
</ul>
<ul id="index-41">
<li><p><strong>Inverse distance weight interpolation radius</strong></p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 8.0.</span></p>
</div>
<p>Radius in pixels of the search radius of features to take into account.
Higher values result in increased cpu time needed to compute the filtered data.
The default is the dimension of the image to render.</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">PROCESSING</span> <span class="s">&quot;IDW_RADIUS=10&quot;</span>
</pre></div>
</div>
</li>
</ul>
<ul id="index-42">
<li><p><strong>Inverse distance weight interpolation compute borders</strong></p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 8.0.</span></p>
</div>
<p>A kernel of radius “r”
cannot be applied to “r” pixels along the borders of the image.
The default is to extend the search rectangle of the input
datasource to include features “r” pixels outside of the current
map extent so that the computed result extends to the full
extent of the resulting image.  This can be deactivated when
tiling if the tiling software applies a metabuffer of “r” pixels
to its requests, to avoid the performance overhead of computing
this extra information.</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">PROCESSING</span> <span class="s">&quot;IDW_COMPUTE_BORDERS=ON|OFF&quot;</span>
</pre></div>
</div>
</li>
</ul>
<ul id="index-43">
<li><p><strong>Inverse distance weight interpolation power</strong></p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 8.0.</span></p>
</div>
<p>Value such that 1 / distance^power is the weight applied when computing
pixel values. The default is 1.0.</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">PROCESSING</span> <span class="s">&quot;IDW_POWER=1&quot;</span>
</pre></div>
</div>
</li>
</ul>
<ul id="index-44">
<li><p><strong>Raster colour ramping</strong></p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 7.0.</span></p>
</div>
<p>RANGE_COLORSPACE=RGB|HSL - The
default RANGE support interpolates colors between stops in RGB
space, which usually results in washed out colors. The
interpolation can be done in HSL space which usually results in
wanted output for heatmaps.</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">PROCESSING</span> <span class="s">&quot;RANGE_COLORSPACE=HSL&quot;</span>
</pre></div>
</div>
</li>
</ul>
<ul id="index-45">
<li><p><strong>Label Directive</strong> - The LABEL_NO_CLIP processing option can be
used to skip clipping of shapes when determining associated
label anchor points. This avoids changes in label position as
extents change between map draws. It also avoids duplicate
labels where features appear in multiple adjacent tiles when
creating tiled maps.</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">PROCESSING</span> <span class="s">&quot;LABEL_NO_CLIP=True&quot;</span>
</pre></div>
</div>
</li>
</ul>
<ul id="index-46">
<li><p><strong>Line Rendering Directive</strong> - The POLYLINE_NO_CLIP processing
option can be used to skip clipping of shapes when rendering
styled lines (dashed or styled with symbols).  This avoids
changes in the line styling as extents change between map
draws. It also avoids edge effects where features appear in
multiple adjacent tiles when creating tiled maps.</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">PROCESSING</span> <span class="s">&quot;POLYLINE_NO_CLIP=True&quot;</span>
</pre></div>
</div>
</li>
</ul>
<span id="index-47"></span><ul id="layer-processing-rendermode">
<li><p><strong>Class Rendering Directive</strong></p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 7.6.</span></p>
</div>
<p>The RENDERMODE processing option
specifies how classes are selected for rendering a layer. Default value,
and historic behaviour, is FIRST_MATCHING_CLASS: only the first
applicable class is selected to render a feature (see <a class="reference internal" href="#layer-class"><span class="std std-ref">CLASS
description</span></a>). The other available value is
ALL_MATCHING_CLASSES: all applicable classes are used to render a
feature, each one being used on top of the previous ones. This is the
default behaviour with SLD styles.</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">PROCESSING</span> <span class="s">&quot;RENDERMODE=ALL_MATCHING_CLASSES&quot;</span>
</pre></div>
</div>
</li>
</ul>
<ul id="index-48">
<li><p><strong>OGR Styles Directive</strong> - This directive can be used for obtaining
label styles through MapScript.  For more information see the
<a class="reference internal" href="../input/vector/ogr.html#styleitemauto-label-styles"><span class="std std-ref">MapServer’s OGR document</span></a>.</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">PROCESSING</span> <span class="s">&quot;GETSHAPE_STYLE_ITEMS=all&quot;</span>
</pre></div>
</div>
</li>
</ul>
<ul id="index-49">
<li><p><strong>MSSQL specific options</strong> - MSSQL_READ_WKB=TRUE - Uses WKB
(Well Known Binary) format instead of native format when
fetching geometries.</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">PROCESSING</span> <span class="s">&quot;MSSQL_READ_WKB=TRUE&quot;</span>
</pre></div>
</div>
</li>
</ul>
<ul id="index-50">
<li><p><strong>Native filter Directive</strong></p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 7.0.</span></p>
</div>
<p>This directive can be used to do
driver specific filtering.  For database connections the string
is a SQL WHERE clause that is valid with respect to the
underlying database.</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">PROCESSING</span> <span class="s">&quot;NATIVE_FILTER=id=234&quot;</span>
</pre></div>
</div>
</li>
</ul>
<ul id="index-51">
<li><p><strong>PostGIS specific options</strong> - FORCE2D=YES can be used to force
2D only geometries to be retrieved from PostGIS.</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">PROCESSING</span> <span class="s">&quot;FORCE2D=YES&quot;</span>
</pre></div>
</div>
</li>
</ul>
<span id="index-52"></span><ul id="index-53">
<li><p><strong>Vector field specific rendering options</strong> - UV_SPACING: The
spacing is the distance, in pixels, between arrows to be
displayed in the vector field.  Default is 32.  UV_SIZE_SCALE:
Used to convert the vector lengths (magnitude) of the raster to
pixels for a better rendering. Default is 1.</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">PROCESSING</span> <span class="s">&quot;UV_SPACING=40&quot;</span>
<span class="k">PROCESSING</span> <span class="s">&quot;UV_SIZE_SCALE=0.2&quot;</span>
</pre></div>
</div>
</li>
</ul>
<blockquote>
<div></div></blockquote>
<ul id="index-54">
<li><p><strong>AGG renderer tweaking</strong> - This directive can be used for setting
the linear gamma to be used when rendering polygon features. The
default value of 0.75 (that can be overridden at the <a class="reference internal" href="outputformat.html#outputformat"><span class="std std-ref">OUTPUTFORMAT</span></a>
level) can be set to a lower value to limit/remove the faint outlines
that appear between adjacent polygons. A value of 0.5 is usually good
enough.</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">PROCESSING</span> <span class="s">&quot;GAMMA=0.5&quot;</span>
</pre></div>
</div>
</li>
</ul>
<ul id="index-55">
<li><p><strong>Raster Directives</strong> - All raster processing options are described
in <a class="reference internal" href="../input/raster.html#raster"><span class="std std-ref">Raster Data</span></a>.  Here we see the SCALE and BANDs directives used to
autoscale raster data and alter the band mapping.</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">PROCESSING</span> <span class="s">&quot;SCALE=AUTO&quot;</span>
<span class="k">PROCESSING</span> <span class="s">&quot;BANDS=3,2,1&quot;</span>
</pre></div>
</div>
</li>
</ul>
<span id="index-58"></span><span id="index-57"></span><span id="index-56"></span><ul id="index-59">
<li><p><strong>Union layer Directives</strong> - The following processing options
can be used with the union layers: UNION_STATUS_CHECK (TRUE or
FALSE) - controls whether the status of the source layers should
be checked and the invisible layers (STATUS=OFF) should be
skipped. Default value is FALSE.  UNION_SCALE_CHECK (TRUE or
FALSE) - controls whether the scale range of the source layers
should be checked and the invisible layers (falling outside of
the scale range and zoom range) should be skipped. Default value
is TRUE.  UNION_SRCLAYER_CLOSE_CONNECTION - override the
connection pool setting of the source layers. By introducing
this setting we alter the current behaviour which is equivalent
to: “UNION_SRCLAYER_CLOSE_CONNECTION=ALWAYS”</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">PROCESSING</span> <span class="s">&quot;UNION_STATUS_CHECK=FALSE&quot;</span>
<span class="k">PROCESSING</span> <span class="s">&quot;UNION_SCALE_CHECK=TRUE&quot;</span>
<span class="k">PROCESSING</span> <span class="s">&quot;UNION_SRCLAYER_CLOSE_CONNECTION=ALWAYS&quot;</span>
</pre></div>
</div>
</li>
</ul>
</dd>
</dl>
<dl class="simple" id="mapfile-layer-projection">
<dt><a class="reference internal" href="projection.html#projection"><span class="std std-ref">PROJECTION</span></a></dt><dd><p>Signals the start of a <a class="reference internal" href="projection.html#projection"><span class="std std-ref">PROJECTION</span></a> object.</p>
</dd>
</dl>
<dl id="mapfile-layer-requires">
<dt>REQUIRES [expression]</dt><dd><p>Sets context for displaying this layer (see <a class="reference internal" href="#labelrequires">LABELREQUIRES</a>).</p>
<p>An example could be that you have a <em>states_poly</em> layer that you
want turned off whenever a <em>modis</em> layer is turned on; in this case
you would set the <em>REQUIRES</em> parameter in the <em>states_poly</em> layer such as:</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">LAYER</span>
  <span class="k">NAME</span> <span class="s">&quot;states_poly&quot;</span>
  <span class="k">TYPE</span> <span class="nb">POLYGON</span>
  <span class="k">REQUIRES</span> <span class="s">&quot;![modis]&quot;</span>
  <span class="p">...</span>
</pre></div>
</div>
<p>with REQUIRES:</p>
<img alt="../_images/requires-enabled.png" class="no-scaled-link" src="../_images/requires-enabled.png" style="width: 400px; height: 300px;" />
<p>without REQUIRES</p>
<img alt="../_images/requires-disabled.png" class="no-scaled-link" src="../_images/requires-disabled.png" style="width: 400px; height: 300px;" />
<p>The <em>REQUIRES</em> setting should affect all modes (confirmed through testing is:
mode=map, WMS GetMap, MapScript, and map2img commandline).</p>
</dd>
</dl>
<dl id="mapfile-layer-scaletoken">
<dt>SCALETOKEN</dt><dd><div class="versionadded">
<p><span class="versionmodified added">New in version 6.4.</span></p>
</div>
<p>Signals the start of a <cite>SCALETOKEN</cite> object.
Allows scale dependent string substitutions.
See <a class="reference internal" href="../development/rfc/ms-rfc-86.html#rfc86"><span class="std std-ref">MS RFC 86: Scale-dependant String Substitutions</span></a>.</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">LAYER</span>
  <span class="p">...</span>
  <span class="k">SCALETOKEN</span>
    <span class="k">NAME</span> <span class="s">&quot;%pri%&quot;</span>
    <span class="k">VALUES</span>
      <span class="s">&quot;0&quot;</span> <span class="s">&quot;1&quot;</span>
      <span class="s">&quot;1000&quot;</span> <span class="s">&quot;2&quot;</span>
      <span class="s">&quot;10000&quot;</span> <span class="s">&quot;3&quot;</span>
    <span class="k">END</span> <span class="c"># VALUES</span>
  <span class="k">END</span> <span class="c"># SCALETOKEN</span>
  <span class="c"># data from a specific table:</span>
  <span class="k">DATA</span> <span class="s">&quot;geom from mytable_%pri%&quot;</span>
  <span class="c"># data from a specific Shapefile format dataset:</span>
  <span class="k">DATA</span> <span class="s">&quot;/path/to/roads_%pri%.shp&quot;</span>
  <span class="c"># data from a specific column in the table:</span>
  <span class="k">DATA</span> <span class="s">&quot;geom_%pri</span><span class="si">% f</span><span class="s">rom roads&quot;</span>
  <span class="c"># filtering:</span>
  <span class="k">DATA</span> <span class="s">&quot;geom_%pri</span><span class="si">% f</span><span class="s">rom (select * from roads where pri &gt; %pri%) as foo&quot;</span>
  <span class="k">CLASS</span>
    <span class="p">...</span>
  <span class="k">END</span> <span class="c"># CLASS</span>
<span class="k">END</span> <span class="c"># LAYER</span>
</pre></div>
</div>
<p>In the previous example, %pri% would be replaced by:</p>
<ul>
<li><p>“1” for scale denominators smaller than 1,000, giving:</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">DATA</span> <span class="s">&quot;geom from mytable_1&quot;</span>
<span class="k">DATA</span> <span class="s">&quot;/path/to/roads_1.shp&quot;</span>
<span class="k">DATA</span> <span class="s">&quot;geom_1 from roads&quot;</span>
<span class="k">DATA</span> <span class="s">&quot;geom_1 from (select * from roads where pri &gt; 1) as foo&quot;</span>
</pre></div>
</div>
</li>
<li><p>“2” for scale denominators between 1,000 and 10,000:</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">DATA</span> <span class="s">&quot;geom from mytable_2&quot;</span>
<span class="k">DATA</span> <span class="s">&quot;/path/to/roads_2.shp&quot;</span>
<span class="k">DATA</span> <span class="s">&quot;geom_2 from roads&quot;</span>
<span class="k">DATA</span> <span class="s">&quot;geom_2 from (select * from roads where pri &gt; 2) as foo&quot;</span>
</pre></div>
</div>
</li>
<li><p>“3” for scale denominators larger than 10,000:</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">DATA</span> <span class="s">&quot;geom from mytable_3&quot;</span>
<span class="k">DATA</span> <span class="s">&quot;/path/to/roads_3.shp&quot;</span>
<span class="k">DATA</span> <span class="s">&quot;geom_3 from roads&quot;</span>
<span class="k">DATA</span> <span class="s">&quot;geom_3 from (select * from roads where pri &gt; 3) as foo&quot;</span>
</pre></div>
</div>
</li>
</ul>
</dd>
</dl>
<span id="index-65"></span><span id="index-64"></span><span id="index-63"></span><span id="index-62"></span><span id="index-61"></span><span id="index-60"></span><span id="mapfile-layer-sizeunits"></span><dl class="simple" id="index-66">
<dt>SIZEUNITS [feet|inches|kilometers|meters|miles|nauticalmiles|pixels]</dt><dd><p>Sets the unit of <a class="reference internal" href="style.html#style"><span class="std std-ref">STYLE</span></a> object SIZE values (default is
pixels).  Useful for simulating buffering. <cite>nauticalmiles</cite> was
added in MapServer 5.6.</p>
</dd>
</dl>
<span id="mapfile-layer-status"></span><dl id="status">
<dt>STATUS [on|off|default]</dt><dd><p>Sets the current status of the layer. Often modified by MapServer itself.
Default turns the layer on permanently.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In <a class="reference internal" href="../cgi/index.html#cgi"><span class="std std-ref">CGI</span></a> mode, layers with STATUS DEFAULT cannot be turned
off using normal mechanisms. It is recommended to set layers to STATUS
DEFAULT while debugging a problem, but set them back to ON/OFF in
normal use.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For <a class="reference internal" href="../ogc/wms_server.html#wms-server"><span class="std std-ref">WMS</span></a>, layers in the server mapfile with STATUS
DEFAULT are always sent to the client.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The STATUS of the individual layers of a GROUP has no effect
when the group name is present in the LAYERS parameter of a CGI
request - all the layers of the group will be returned.</p>
</div>
</dd>
</dl>
<dl id="mapfile-layer-styleitem">
<dt>STYLEITEM [&lt;attribute&gt;|auto|&lt;javascript file&gt;]</dt><dd><p>Styling based on attributes or generated with Javascript</p>
<ul id="index-67">
<li><p><em>&lt;attribute&gt;</em>: Item to use for feature specific styling. The
style information may be represented by a separate attribute
(style string) attached to the feature.  MapServer supports the
following style string representations:</p>
<ul>
<li><p><strong>MapServer STYLE definition</strong> - The style string can be
represented as a MapServer <a class="reference internal" href="style.html#style"><span class="std std-ref">STYLE</span></a> block according to the
following example:</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">STYLE</span> <span class="k">BACKGROUNDCOLOR</span> <span class="mi">128</span> <span class="mi">0</span> <span class="mi">0</span> <span class="k">COLOR</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">208</span> <span class="k">END</span>
</pre></div>
</div>
</li>
<li><p><strong>MapServer CLASS definition</strong> - By specifying the entire
<a class="reference internal" href="class.html#class"><span class="std std-ref">CLASS</span></a> instead of a single style allows to use further
options (like setting expressions, label attributes, multiple
styles) on a per feature basis.</p></li>
<li><p><strong>OGR Style String</strong> - MapServer support rendering the OGR
style string format according to the <a class="reference external" href="https://gdal.org/user/ogr_feature_style.html">OGR - Feature Style
Specification</a> documentation.  Currently only a few data
sources support storing the styles along with the features
(like MapInfo, AutoCAD DXF, Microstation DGN), however those
styles can easily be transferred to many other data sources as
a separate attribute by using the <a class="reference external" href="https://gdal.org/programs/ogr2ogr.html">ogr2ogr</a> command line tool
as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ogr2ogr<span class="w"> </span>-sql<span class="w"> </span><span class="s2">&quot;select *, OGR_STYLE from srclayer&quot;</span><span class="w"> </span><span class="s2">&quot;dstlayer&quot;</span><span class="w"> </span><span class="s2">&quot;srclayer&quot;</span>
</pre></div>
</div>
</li>
</ul>
</li>
</ul>
<ul class="simple" id="index-68">
<li><p><em>AUTO</em>: The value: <cite>AUTO</cite> can be used for automatic styling.</p>
<ul>
<li><p>Automatic styling can be provided by the driver. Currently,
only the OGR driver supports automatic styling.</p></li>
<li><p>When used for a <a class="reference internal" href="union.html#union"><span class="std std-ref">Union Layer</span></a>, the styles from the source
layers will be used.</p></li>
</ul>
</li>
</ul>
<ul id="index-69">
<li><p><em>&lt;Javascript file&gt;</em>:</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 6.6.</span></p>
</div>
<p>A Javascript file that returns a new string
containing either a <a class="reference internal" href="style.html#style"><span class="std std-ref">STYLE</span></a> definition or a <a class="reference internal" href="class.html#class"><span class="std std-ref">CLASS</span></a>
definition with one or multiple styles.  See <a class="reference internal" href="styleitem.html#styleitemjs"><span class="std std-ref">STYLEITEM Javascript</span></a>.</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">LAYER</span>
  <span class="p">...</span>
  <span class="k">STYLEITEM</span> <span class="s">&quot;javascript://myscript.js&quot;</span> <span class="c"># relative path</span>
  <span class="k">CLASS</span>
  <span class="k">END</span>
<span class="k">END</span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">LAYER</span>
  <span class="p">...</span>
  <span class="k">STYLEITEM</span> <span class="s">&quot;javascript:///home/user/myscript.js&quot;</span> <span class="c"># absolute path</span>
  <span class="k">CLASS</span>
  <span class="k">END</span>
<span class="k">END</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Requires <a class="reference internal" href="../installation/v8.html#v8-support"><span class="std std-ref">V8 MapScript Support</span></a>.</p>
</div>
</li>
</ul>
</dd>
</dl>
<span id="mapfile-layer-symbolscaledenom"></span><dl id="symbolscaledenom">
<dt>SYMBOLSCALEDENOM [double]</dt><dd><p>The scale at which symbols and/or text appear full size. This
allows for dynamic scaling of objects based on the scale of the
map. If not set then this layer will always appear at the same
size. Scaling only takes place within the limits of MINSIZE and
MAXSIZE as described above.  Scale is given as the denominator of
the actual scale fraction, for example for a map at a scale of
1:24,000 use 24000.  Implemented in MapServer 5.0, to replace the
deprecated SYMBOLSCALE parameter. Must be greater or equal to 1.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../glossary.html#term-Map-Scale"><span class="xref std std-term">Map Scale</span></a></p>
</div>
</dd>
</dl>
<dl class="simple" id="mapfile-layer-template">
<dt><a class="reference internal" href="template.html#template"><span class="std std-ref">TEMPLATE</span></a> [file|url]</dt><dd><p>Used as a global alternative to <a class="reference internal" href="class.html#class"><span class="std std-ref">CLASS</span></a> <cite>TEMPLATE</cite>.
See <a class="reference internal" href="template.html#template"><span class="std std-ref">Templating</span></a> for more info.</p>
</dd>
</dl>
<span id="mapfile-layer-tileindex"></span><dl id="tileindex-keyword">
<dt><a class="reference internal" href="../optimization/tileindex.html#tileindex"><span class="std std-ref">TILEINDEX</span></a> [filename|layername]</dt><dd><p>Name of the tileindex file or layer.  A tileindex is similar to
an ArcInfo library index.  The tileindex contains polygon features for
each tile. The item that contains the location of the tiled data is given
using the TILEITEM parameter.  When a file is used as the tileindex for
shapefile or raster layers, the tileindex should be a shapefile.  For
CONNECTIONTYPE OGR layers, any OGR supported datasource can be a
tileindex.  Normally the location should contain the path to the tile
file relative to the shapepath, not relative to the tileindex itself.
If the DATA parameter contains a value then it is added to the end of
the location.  When a tileindex layer is used, it works similarly to
directly referring to a file, but any supported feature source can
be used (ie. postgres, oracle).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All files in the tileindex should have the same coordinate system, and
for vector files the same set of attributes in the same order.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Starting with MapServer 6.4 for raster layers and MapServer 7.2 for
vector layers, tileindexes with tiles of different projections can be
used. For that, the <a class="reference internal" href="#tilesrs"><span class="std std-ref">TILESRS</span></a> parameter must be specified.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This attribute can be replaced using runtime substitution. See <a class="reference internal" href="../cgi/runsub.html#runsub"><span class="std std-ref">Run-time Substitution</span></a>.</p>
</div>
</dd>
</dl>
<span id="mapfile-layer-tileitem"></span><dl class="simple" id="tileitem">
<dt>TILEITEM [attribute]</dt><dd><p>Item that contains the location of an individual tile, default is
“location”.</p>
</dd>
</dl>
<span id="mapfile-layer-tilesrs"></span><dl id="tilesrs">
<dt>TILESRS [attribute]</dt><dd><p>Name of the attribute that contains the SRS of an individual tile.
That SRS can be expressed in WKT format, as an EPSG:XXXX code or as a
PROJ string.
If the tileindex contains rasters in different projections, this option
must be specified. If the tileindex has been generated with
gdaltindex (GDAL &gt;= 2.0) or ogrtindex (GDAL &gt;= 2.2), the value of TILESRS
is the value of the -src_srs_name option of gdaltindex/ogrtindex.
See <a class="reference internal" href="../optimization/tileindex.html#tileindex-mixed-srs"><span class="std std-ref">Tileindexes with tiles in different projections</span></a></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This option is currently available only on raster layers.</p>
</div>
</dd>
</dl>
<span id="mapfile-layer-tolerance"></span><dl class="simple" id="tolerance">
<dt>TOLERANCE [double]</dt><dd><p>Sensitivity for point based queries (i.e. via mouse and/or map
coordinates). Given in TOLERANCEUNITS. If the layer is a POINT or a LINE,
the default is 3. For all other layer types, the default is 0.  To
restrict polygon searches so that the point must occur in the polygon
set the tolerance to zero. This setting does not apply to WFS GetFeature
operations.</p>
</dd>
</dl>
<dl class="simple" id="mapfile-layer-toleranceunits">
<dt>TOLERANCEUNITS [pixels|feet|inches|kilometers|meters|miles|nauticalmiles|dd]</dt><dd><p>Units of the TOLERANCE value. Default is pixels.
<cite>Nauticalmiles</cite> was added in MapServer 5.6.</p>
</dd>
</dl>
<dl id="mapfile-layer-transform">
<dt>TRANSFORM [true|false] | [ul|uc|ur|cl|cc|cr|ll|lc|lr]</dt><dd><p>Tells MapServer whether or not a particular layer needs to be transformed
from some coordinate system to image coordinates. Default is true. This
allows you to create shapefiles in image/graphics coordinates and
therefore have features that will always be displayed in the same location
on every map. Ideal for placing logos or text in maps. Remember that the
graphics coordinate system has an origin in the upper left hand corner of
the image, contrary to most map coordinate systems.</p>
<p>Version 4.10 introduces the ability to define features with coordinates
given in pixels (or percentages, see UNITS), most often inline features,
relative to something other than the UL corner of an image. That is what
‘TRANSFORM FALSE’ means. By setting an alternative origin it allows you
to anchor something like a copyright statement to another portion of the
image in a way that is independent of image size.</p>
</dd>
</dl>
<p id="index-77"><span id="index-76"></span><span id="index-75"></span><span id="index-74"></span><span id="index-73"></span><span id="index-72"></span><span id="index-71"></span><span id="index-70"></span><span id="mapfile-layer-type"></span>TRANSPARENCY [integer|alpha]</p>
<blockquote>
<div><div class="versionremoved">
<p><span class="versionmodified removed">Removed in version 8.0: </span>Use <a class="reference internal" href="composite.html#composite"><span class="std std-ref">COMPOSITE</span></a> instead.</p>
</div>
</div></blockquote>
<dl>
<dt>TYPE [chart|circle|line|point|polygon|raster|query]</dt><dd><p>Specifies how the data should be drawn. Need not be the same as the
shapefile type. For example, a polygon shapefile may be drawn as a point
layer, but a point shapefile may not be drawn as a polygon layer. Common
sense rules.</p>
<p>In order to differentiate between POLYGONs and POLYLINEs (which do not
exist as a type), simply respectively use or omit the COLOR keyword when
classifying. If you use it, it’s a polygon with a fill color, otherwise
it’s a polyline with only an OUTLINECOLOR.</p>
<p>A <cite>circle</cite> must be defined by a a minimum bounding rectangle. That
is, two points that define the smallest square that can contain
it. These two points are the two opposite corners of said box.
The following is an example using inline points to draw a circle:</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">LAYER</span>
  <span class="k">NAME</span> <span class="s">&#39;inline_circles&#39;</span>
  <span class="k">TYPE</span> <span class="nb">CIRCLE</span>
  <span class="k">STATUS</span> <span class="nb">ON</span>
  <span class="k">FEATURE</span>
    <span class="k">POINTS</span>
      <span class="mf">74.01</span> <span class="p">-</span><span class="mf">53.8</span>
      <span class="mf">110.7</span> <span class="p">-</span><span class="mf">22.16</span>
    <span class="k">END</span>
  <span class="k">END</span>
  <span class="k">CLASS</span>
    <span class="k">STYLE</span>
      <span class="k">COLOR</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">255</span>
    <span class="k">END</span>
  <span class="k">END</span>
<span class="k">END</span>
</pre></div>
</div>
<p><cite>TYPE</cite> <cite>query</cite> means the layer can be queried but not drawn.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><cite>TYPE</cite> <cite>annotation</cite> has been deprecated since version 6.2.
Identical functionality can be obtained by adding <a class="reference internal" href="label.html#label"><span class="std std-ref">LABEL</span></a>
level <a class="reference internal" href="style.html#style"><span class="std std-ref">STYLE</span></a> blocks, and do not require loading the
datasets twice in two different layers as was the case with
layers of <cite>TYPE</cite> <cite>annotation</cite>.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>The <a class="reference internal" href="../output/dynamic_charting.html#dynamic-charting"><span class="std std-ref">Dynamic Charting</span></a> HowTo for <cite>TYPE</cite>
<cite>chart</cite>.</p>
</div>
</dd>
</dl>
<span id="index-85"></span><span id="index-84"></span><span id="index-83"></span><span id="index-82"></span><span id="index-81"></span><span id="index-80"></span><span id="index-79"></span><span id="index-78"></span><span id="mapfile-layer-units"></span><dl class="simple" id="index-86">
<dt>UNITS [dd|feet|inches|kilometers|meters|miles|nauticalmiles|percentages|pixels]</dt><dd><p>Units of the layer.  <cite>percentages</cite> (in this case a value between 0
and 1) was added in MapServer 4.10 and is mostly geared for inline
features.  <cite>nauticalmiles</cite> was added in MapServer 5.6.</p>
</dd>
</dl>
<dl id="mapfile-layer-utfdata">
<dt>UTFDATA [string]</dt><dd><div class="versionadded">
<p><span class="versionmodified added">New in version 7.0.</span></p>
</div>
<p>A UTFGrid JSON template.  MapServer expression syntax
(expressionObj).  If no <cite>UTFDATA</cite> is provided, no data beyond the
<cite>UTFITEM</cite> values will be exposed.  If <cite>UTFITEM</cite> is set, the
<cite>UTFDATA</cite> expose those so that keys and data can be connected.
See <a class="reference internal" href="../development/rfc/ms-rfc-93.html#rfc93"><span class="std std-ref">MS RFC 93: UTF Grid Support</span></a> and <a class="reference internal" href="../output/utfgrid_output.html#utfgrid-output"><span class="std std-ref">UTFGrid Output</span></a>.</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">UTFDATA</span> <span class="s">&quot;{</span><span class="se">\&quot;</span><span class="s">id</span><span class="se">\&quot;</span><span class="s">:</span><span class="se">\&quot;</span><span class="s">[fid]</span><span class="se">\&quot;</span><span class="s">, </span><span class="se">\&quot;</span><span class="s">name</span><span class="se">\&quot;</span><span class="s">:</span><span class="se">\&quot;</span><span class="s">[name]</span><span class="se">\&quot;</span><span class="s">, </span><span class="se">\&quot;</span><span class="s">area</span><span class="se">\&quot;</span><span class="s">:</span><span class="se">\&quot;</span><span class="s">[area]</span><span class="se">\&quot;</span><span class="s">}&quot;</span>
</pre></div>
</div>
</dd>
</dl>
<dl id="mapfile-layer-utfitem">
<dt>UTFITEM [string]</dt><dd><div class="versionadded">
<p><span class="versionmodified added">New in version 7.0.</span></p>
</div>
<p>The attribute to use as the ID for the UTFGrid.  If a <cite>UTFITEM</cite> is
not set, the sequential id (based on rendering order) is being
used.  If <cite>UTFITEM</cite> is set, the <cite>UTFDATA</cite> expose those so that
keys and data can be connected.  See <a class="reference internal" href="../development/rfc/ms-rfc-93.html#rfc93"><span class="std std-ref">MS RFC 93: UTF Grid Support</span></a> and
<a class="reference internal" href="../output/utfgrid_output.html#utfgrid-output"><span class="std std-ref">UTFGrid Output</span></a>.</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">UTFITEM</span> <span class="s">&quot;fid&quot;</span>
</pre></div>
</div>
</dd>
</dl>
<dl id="mapfile-layer-validation">
<dt><a class="reference internal" href="validation.html#validation"><span class="std std-ref">VALIDATION</span></a></dt><dd><p>Signals the start of a <a class="reference internal" href="validation.html#validation"><span class="std std-ref">VALIDATION</span></a> block.</p>
<p>As of MapServer 5.4.0, <cite>VALIDATION</cite> blocks are the preferred
mechanism for specifying validation patterns for CGI param runtime
substitutions.  See <a class="reference internal" href="../cgi/runsub.html#runsub"><span class="std std-ref">Run-time Substitution</span></a>.</p>
</dd>
</dl>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p>
<a href="../about.html" title="About">About</a><br>
<a href="../products.html" title="Products">Products</a><br>
<a href="../community/index.html" title="Community">Community</a><br>
<a href="../development/index.html" title="Development">Development</a><br>
<a href="../download.html" title="Downloads">Downloads</a><br>
<a href="../documentation.html" title="Documentation">Documentation</a><br>
<a href="../faq.html" title="FAQ">FAQ</a><br>
<a href="../psc.html" title="PSC">PSC</a><br>
<a href="https://twitter.com/mapserver_osgeo" title="Twitter">Twitter</a>
</p>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="leader.html" title="LEADER"
             >next</a> |</li>
        <li class="right" >
          <a href="label.html" title="LABEL"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../documentation.html" >MapServer 8.0.1 Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >Mapfile</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">LAYER</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; <a href="../copyright.html">Copyright</a> 2023, Open Source Geospatial Foundation.
      Last updated on 2023-12-22.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.5.
    </div>
  </body>
</html>