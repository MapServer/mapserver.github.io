<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>map2img &#8212; MapServer 8.0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx.css?v=6c7b17ac" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=dd298242" />
    <link rel="stylesheet" type="text/css" href="../_static/ribbon.css?v=ea091bf4" />
    
    <script src="../_static/documentation_options.js?v=521b6f53"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    
    <link rel="icon" href="../_static/mapserver.ico"/>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="msencrypt" href="msencrypt.html" />
    <link rel="prev" title="legend" href="legend.html" /> 
  </head><body>


<!-- for main branch only, do not backport this -->

<table width="100%" style="width: 100%; background-color: white;">
  <tr>
    <td rowspan="2" style="padding: 10px 0px 10px 10px;">
      <a href="../index.html" title="Home"><img src="../_static/banner.png" alt="MapServer banner" border="0" /></a>
    </td>
    <td style="padding: 10px 10px 0px 0px; text-align: right; vertical-align: top;">
      <a href="../index.html" title="Home">Home</a> |
      <a href="../products.html" title="Products (MapServer core, MapCache, TinyOWS">Products</a> |
      <a href="https://github.com/mapserver/mapserver/issues/" title="Issue Tracker (MapServer core)">Issue Tracker</a> |
      <a href="../community/service_providers.html" title="Professional Service Providers">Service Providers</a> |      
      <a href="../faq.html" title="Frequently Asked Questions">FAQ</a> |
      <a href="https://twitter.com/mapserver_osgeo" title="Twitter" target="_blank">Twitter</a> |
      <a href="../download.html" title="Download Source or Binaries">Download </a> |
      <a class="badge" href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=KRJ2X44N3HA6U&source=url" target="_blank">
        <img src="https://img.shields.io/badge/donate-%E2%9D%A4%C2%A0-ff69b4.svg?style=flat" alt="Donate to MapServer">
      </a>
    </td>
  </tr>
  <tr>
    <td style="padding: 0px 10px 0px 0px; text-align: right; vertical-align: bottom;">
        <img src="../_static/flagicons/en.png" alt="en" title="en" border="0" width="18px" height="13px"/>
        
          <a href="../ar/utilities/map2img.html"><img src="../_static/flagicons/ar.png" alt="ar" title="ar" border="0" /></a>
        
        
          <a href="../de/utilities/map2img.html"><img src="../_static/flagicons/de.png" alt="de" title="de" border="0" /></a>
        
        
          <a href="../el/utilities/map2img.html"><img src="../_static/flagicons/el.png" alt="el" title="el" border="0" /></a>
        
        
          <a href="../es/utilities/map2img.html"><img src="../_static/flagicons/es.png" alt="es" title="es" border="0" /></a>
        
        
          <a href="../fr/utilities/map2img.html"><img src="../_static/flagicons/fr.png" alt="fr" title="fr" border="0" /></a>
        
        
          <a href="../id/utilities/map2img.html"><img src="../_static/flagicons/id.png" alt="id" title="id" border="0" /></a>
        
        
          <a href="../it/utilities/map2img.html"><img src="../_static/flagicons/it.png" alt="it" title="it" border="0" /></a>
        
        
          <a href="../ja/utilities/map2img.html"><img src="../_static/flagicons/ja.png" alt="ja" title="ja" border="0" /></a>
        
        
          <a href="../nl_NL/utilities/map2img.html"><img src="../_static/flagicons/nl_NL.png" alt="nl_NL" title="nl_NL" border="0" /></a>
        
        
          <a href="../pl/utilities/map2img.html"><img src="../_static/flagicons/pl.png" alt="pl" title="pl" border="0" /></a>
        
        
          <a href="../ru/utilities/map2img.html"><img src="../_static/flagicons/ru.png" alt="ru" title="ru" border="0" /></a>
        
        
          <a href="../sq/utilities/map2img.html"><img src="../_static/flagicons/sq.png" alt="sq" title="sq" border="0" /></a>
        
        
          <a href="../tr/utilities/map2img.html"><img src="../_static/flagicons/tr.png" alt="tr" title="tr" border="0" /></a>
        

    </td>
  </tr>
</table>


    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="msencrypt.html" title="msencrypt"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="legend.html" title="legend"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../documentation.html" >MapServer 8.0.1 Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">Utilities</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">map2img</a></li> 
      </ul>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="map2img">
<span id="index-0"></span><span id="id1"></span><h1><a class="toc-backref" href="#table-of-contents" role="doc-backlink">map2img</a><a class="headerlink" href="#map2img" title="Link to this heading">¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd">Author<span class="colon">:</span></dt>
<dd class="field-odd"><p>Jeff McKenna</p>
</dd>
<dt class="field-even">Contact<span class="colon">:</span></dt>
<dd class="field-even"><p>jmckenna at gatewaygeomatics.com</p>
</dd>
<dt class="field-odd">Last Updated<span class="colon">:</span></dt>
<dd class="field-odd"><p>2022-08-09</p>
</dd>
</dl>
<nav class="contents" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#map2img" id="id2">map2img</a></p>
<ul>
<li><p><a class="reference internal" href="#purpose" id="id3">Purpose</a></p></li>
<li><p><a class="reference internal" href="#syntax" id="id4">Syntax</a></p>
<ul>
<li><p><a class="reference internal" href="#example-1-generate-a-map-image" id="id5">Example #1 Generate a Map Image</a></p></li>
<li><p><a class="reference internal" href="#example-2-generate-a-map-image-with-draw-speeds" id="id6">Example #2 Generate a Map Image with Draw Speeds</a></p></li>
<li><p><a class="reference internal" href="#example-3-generate-a-map-image-with-debug-information-for-all-layers" id="id7">Example #3 Generate a Map Image with Debug Information for all Layers</a></p></li>
<li><p><a class="reference internal" href="#example-4-generate-a-map-image-for-a-specific-layer" id="id8">Example #4 Generate a Map Image for a Specific Layer</a></p></li>
<li><p><a class="reference internal" href="#example-5-generate-a-map-image-for-specific-multiple-layers" id="id9">Example #5 Generate a Map Image for Specific (Multiple) Layers</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
<section id="purpose">
<h2><a class="toc-backref" href="#table-of-contents" role="doc-backlink">Purpose</a><a class="headerlink" href="#purpose" title="Link to this heading">¶</a></h2>
<p>map2img is a commandline utility that creates a map image from a mapfile. Output
is by default PNG, but you can specify other output formats defined in the mapfile.
This is a very useful utility to test your mapfile (and should always be your first test,
before any tests through a web browser or OGC client). You can simply provide the
path to your mapfile and the name of an output image, and an image should be
returned. If an image cannot be created an error will be displayed at the
commandline that should refer to a line number in the mapfile.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>map2img was renamed from ‘shp2img’ as of the MapServer 8.0 release,
according to <a class="reference internal" href="../development/rfc/ms-rfc-136.html#rfc136"><span class="std std-ref">MS RFC 136: Rename shp2img to map2img</span></a></p>
</div>
</section>
<section id="syntax">
<h2><a class="toc-backref" href="#table-of-contents" role="doc-backlink">Syntax</a><a class="headerlink" href="#syntax" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">map2img</span> <span class="o">-</span><span class="n">m</span> <span class="n">mapfile</span> <span class="p">[</span><span class="o">-</span><span class="n">o</span> <span class="n">image</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">e</span> <span class="n">minx</span> <span class="n">miny</span> <span class="n">maxx</span> <span class="n">maxy</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">s</span> <span class="n">sizex</span> <span class="n">sizey</span><span class="p">]</span>
           <span class="p">[</span><span class="o">-</span><span class="n">l</span> <span class="s2">&quot;layer1 [layers2...]&quot;</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">i</span> <span class="nb">format</span><span class="p">]</span>
           <span class="p">[</span><span class="o">-</span><span class="n">all_debug</span> <span class="n">n</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">map_debug</span> <span class="n">n</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">layer_debug</span> <span class="n">n</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">p</span> <span class="n">n</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">c</span> <span class="n">n</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">d</span> <span class="n">layername</span> <span class="n">datavalue</span><span class="p">]</span>
           <span class="p">[</span><span class="o">-</span><span class="n">conf</span> <span class="n">filename</span><span class="p">]</span>
<span class="o">-</span><span class="n">m</span> <span class="n">mapfile</span><span class="p">:</span> <span class="n">Map</span> <span class="n">file</span> <span class="n">to</span> <span class="n">operate</span> <span class="n">on</span> <span class="o">-</span> <span class="n">required</span>
<span class="o">-</span><span class="n">i</span> <span class="nb">format</span><span class="p">:</span> <span class="n">Override</span> <span class="n">the</span> <span class="n">IMAGETYPE</span> <span class="n">value</span> <span class="n">to</span> <span class="n">pick</span> <span class="n">output</span> <span class="nb">format</span>
<span class="o">-</span><span class="n">o</span> <span class="n">image</span><span class="p">:</span> <span class="n">output</span> <span class="n">filename</span> <span class="p">(</span><span class="n">stdout</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">provided</span><span class="p">)</span>
<span class="o">-</span><span class="n">e</span> <span class="n">minx</span> <span class="n">miny</span> <span class="n">maxx</span> <span class="n">maxy</span><span class="p">:</span> <span class="n">extents</span> <span class="n">to</span> <span class="n">render</span>
<span class="o">-</span><span class="n">s</span> <span class="n">sizex</span> <span class="n">sizey</span><span class="p">:</span> <span class="n">output</span> <span class="n">image</span> <span class="n">size</span>
<span class="o">-</span><span class="n">l</span> <span class="n">layers</span><span class="p">:</span> <span class="n">layers</span> <span class="o">/</span> <span class="n">groups</span> <span class="n">to</span> <span class="n">enable</span> <span class="o">-</span> <span class="n">make</span> <span class="n">sure</span> <span class="n">they</span> <span class="n">are</span> <span class="n">quoted</span> <span class="ow">and</span> <span class="n">space</span> <span class="n">separated</span> <span class="k">if</span> <span class="n">more</span> <span class="n">than</span> <span class="n">one</span> <span class="n">listed</span>
<span class="o">-</span><span class="n">all_debug</span> <span class="n">n</span><span class="p">:</span> <span class="n">Set</span> <span class="n">debug</span> <span class="n">level</span> <span class="k">for</span> <span class="nb">map</span> <span class="ow">and</span> <span class="nb">all</span> <span class="n">layers</span>
<span class="o">-</span><span class="n">map_debug</span> <span class="n">n</span><span class="p">:</span> <span class="n">Set</span> <span class="nb">map</span> <span class="n">debug</span> <span class="n">level</span>
<span class="o">-</span><span class="n">layer_debug</span> <span class="n">layer_name</span> <span class="n">n</span><span class="p">:</span> <span class="n">Set</span> <span class="n">layer</span> <span class="n">debug</span> <span class="n">level</span>
<span class="o">-</span><span class="n">c</span> <span class="n">n</span><span class="p">:</span> <span class="n">draw</span> <span class="nb">map</span> <span class="n">n</span> <span class="n">number</span> <span class="n">of</span> <span class="n">times</span>
<span class="o">-</span><span class="n">p</span> <span class="n">n</span><span class="p">:</span> <span class="n">pause</span> <span class="k">for</span> <span class="n">n</span> <span class="n">seconds</span> <span class="n">after</span> <span class="n">reading</span> <span class="n">the</span> <span class="nb">map</span>
<span class="o">-</span><span class="n">d</span> <span class="n">layername</span> <span class="n">datavalue</span><span class="p">:</span> <span class="n">change</span> <span class="n">DATA</span> <span class="n">value</span> <span class="k">for</span> <span class="n">layer</span>
<span class="o">-</span><span class="n">conf</span> <span class="n">filename</span><span class="p">:</span> <span class="n">filename</span> <span class="n">of</span> <span class="n">the</span> <span class="n">MapServer</span> <span class="n">configuration</span> <span class="n">file</span><span class="o">.</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../optimization/debugging.html#debugging"><span class="std std-ref">Debugging MapServer</span></a></p>
</div>
<section id="example-1-generate-a-map-image">
<h3><a class="toc-backref" href="#table-of-contents" role="doc-backlink">Example #1 Generate a Map Image</a><a class="headerlink" href="#example-1-generate-a-map-image" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">map2img</span> <span class="o">-</span><span class="n">m</span> <span class="n">local</span><span class="o">.</span><span class="n">map</span> <span class="o">-</span><span class="n">o</span> <span class="n">test</span><span class="o">.</span><span class="n">png</span>
</pre></div>
</div>
<dl class="simple">
<dt>Result</dt><dd><p>A file named ‘test.png’ is created, that you can drag into your browser to view.</p>
</dd>
</dl>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>These examples use the distributed working mapfile that every <a class="reference external" href="https://ms4w.com/">MS4W</a>
instance contains at <em>/ms4w/apps/local-demo/local.map</em></p>
</div>
</section>
<section id="example-2-generate-a-map-image-with-draw-speeds">
<h3><a class="toc-backref" href="#table-of-contents" role="doc-backlink">Example #2 Generate a Map Image with Draw Speeds</a><a class="headerlink" href="#example-2-generate-a-map-image-with-draw-speeds" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">map2img</span> <span class="o">-</span><span class="n">m</span> <span class="n">local</span><span class="o">.</span><span class="n">map</span> <span class="o">-</span><span class="n">o</span> <span class="n">test2</span><span class="o">.</span><span class="n">png</span> <span class="o">-</span><span class="n">map_debug</span> <span class="mi">3</span>
</pre></div>
</div>
<dl class="simple">
<dt>Result</dt><dd><p>A file named ‘test2.png’ is created, and layer draw speeds are returned such as:</p>
</dd>
</dl>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">msDrawMap</span><span class="p">():</span> <span class="n">rendering</span> <span class="n">using</span> <span class="n">outputformat</span> <span class="n">named</span> <span class="n">png</span> <span class="p">(</span><span class="n">AGG</span><span class="o">/</span><span class="n">PNG</span><span class="p">)</span><span class="o">.</span>
<span class="n">msDrawMap</span><span class="p">():</span> <span class="n">WMS</span><span class="o">/</span><span class="n">WFS</span> <span class="nb">set</span><span class="o">-</span><span class="n">up</span> <span class="ow">and</span> <span class="n">query</span><span class="p">,</span> <span class="mf">0.000</span><span class="n">s</span>
<span class="n">msDrawMap</span><span class="p">():</span> <span class="n">Layer</span> <span class="mi">0</span> <span class="p">(</span><span class="n">ocean</span><span class="p">),</span> <span class="mf">0.081</span><span class="n">s</span>
<span class="n">msDrawMap</span><span class="p">():</span> <span class="n">Layer</span> <span class="mi">1</span> <span class="p">(</span><span class="n">countries</span><span class="p">),</span> <span class="mf">0.026</span><span class="n">s</span>
<span class="n">msDrawMap</span><span class="p">():</span> <span class="n">Layer</span> <span class="mi">2</span> <span class="p">(</span><span class="n">lakes</span><span class="p">),</span> <span class="mf">0.009</span><span class="n">s</span>
<span class="n">msDrawMap</span><span class="p">():</span> <span class="n">Layer</span> <span class="mi">3</span> <span class="p">(</span><span class="n">ocean</span><span class="o">-</span><span class="n">labels</span><span class="p">),</span> <span class="mf">0.010</span><span class="n">s</span>
<span class="n">msDrawMap</span><span class="p">():</span> <span class="n">Drawing</span> <span class="n">Label</span> <span class="n">Cache</span><span class="p">,</span> <span class="mf">0.039</span><span class="n">s</span>
<span class="n">msDrawMap</span><span class="p">()</span> <span class="n">total</span> <span class="n">time</span><span class="p">:</span> <span class="mf">0.167</span><span class="n">s</span>
<span class="n">msSaveImage</span><span class="p">(</span><span class="n">test2</span><span class="o">.</span><span class="n">png</span><span class="p">)</span> <span class="n">total</span> <span class="n">time</span><span class="p">:</span> <span class="mf">0.019</span><span class="n">s</span>
</pre></div>
</div>
</section>
<section id="example-3-generate-a-map-image-with-debug-information-for-all-layers">
<h3><a class="toc-backref" href="#table-of-contents" role="doc-backlink">Example #3 Generate a Map Image with Debug Information for all Layers</a><a class="headerlink" href="#example-3-generate-a-map-image-with-debug-information-for-all-layers" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">map2img</span> <span class="o">-</span><span class="n">m</span> <span class="n">local</span><span class="o">.</span><span class="n">map</span> <span class="o">-</span><span class="n">o</span> <span class="n">test3</span><span class="o">.</span><span class="n">png</span> <span class="o">-</span><span class="n">all_debug</span> <span class="mi">3</span>
</pre></div>
</div>
<dl class="simple">
<dt>Result</dt><dd><p>A file named ‘test3.png’ is created, layer draw speeds are returned,
and some warnings that index qix files are not found, such as:</p>
</dd>
</dl>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">msLoadMap</span><span class="p">():</span> <span class="mf">0.006</span><span class="n">s</span>
<span class="n">msDrawMap</span><span class="p">():</span> <span class="n">rendering</span> <span class="n">using</span> <span class="n">outputformat</span> <span class="n">named</span> <span class="n">png</span> <span class="p">(</span><span class="n">AGG</span><span class="o">/</span><span class="n">PNG</span><span class="p">)</span><span class="o">.</span>
<span class="n">msDrawMap</span><span class="p">():</span> <span class="n">WMS</span><span class="o">/</span><span class="n">WFS</span> <span class="nb">set</span><span class="o">-</span><span class="n">up</span> <span class="ow">and</span> <span class="n">query</span><span class="p">,</span> <span class="mf">0.000</span><span class="n">s</span>
<span class="n">msOGRFileOpen</span><span class="p">(</span><span class="n">demo</span><span class="o">.</span><span class="n">sqlite</span><span class="p">)</span><span class="o">...</span>
<span class="n">OGROPen</span><span class="p">(</span><span class="n">D</span><span class="p">:</span>\<span class="n">ms4w</span>\<span class="n">apps</span>\<span class="n">local</span><span class="o">-</span><span class="n">demo</span><span class="o">/.</span>\<span class="o">./</span><span class="n">data</span><span class="o">/</span><span class="n">demo</span><span class="o">.</span><span class="n">sqlite</span><span class="p">)</span>
<span class="n">msConnPoolRegister</span><span class="p">(</span><span class="n">ocean</span><span class="p">,</span><span class="n">demo</span><span class="o">.</span><span class="n">sqlite</span><span class="p">,</span><span class="mi">015672</span><span class="n">C8</span><span class="p">)</span>
<span class="n">msOGRLayerClose</span><span class="p">(</span><span class="n">demo</span><span class="o">.</span><span class="n">sqlite</span><span class="p">)</span><span class="o">.</span>
<span class="n">msOGRFileClose</span><span class="p">(</span><span class="n">D</span><span class="p">:</span>\<span class="n">ms4w</span>\<span class="n">apps</span>\<span class="n">local</span><span class="o">-</span><span class="n">demo</span><span class="o">/.</span>\<span class="o">./</span><span class="n">data</span><span class="o">/</span><span class="n">demo</span><span class="o">.</span><span class="n">sqlite</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span>
<span class="n">msConnPoolRelease</span><span class="p">(</span><span class="n">ocean</span><span class="p">,</span><span class="n">demo</span><span class="o">.</span><span class="n">sqlite</span><span class="p">,</span><span class="mi">015672</span><span class="n">C8</span><span class="p">)</span>
<span class="n">msConnPoolClose</span><span class="p">(</span><span class="n">demo</span><span class="o">.</span><span class="n">sqlite</span><span class="p">,</span><span class="mi">015672</span><span class="n">C8</span><span class="p">)</span>
<span class="n">msDrawMap</span><span class="p">():</span> <span class="n">Layer</span> <span class="mi">0</span> <span class="p">(</span><span class="n">ocean</span><span class="p">),</span> <span class="mf">0.030</span><span class="n">s</span>
<span class="n">msOGRFileOpen</span><span class="p">(</span><span class="n">demo</span><span class="o">.</span><span class="n">sqlite</span><span class="p">)</span><span class="o">...</span>
<span class="n">OGROPen</span><span class="p">(</span><span class="n">D</span><span class="p">:</span>\<span class="n">ms4w</span>\<span class="n">apps</span>\<span class="n">local</span><span class="o">-</span><span class="n">demo</span><span class="o">/.</span>\<span class="o">./</span><span class="n">data</span><span class="o">/</span><span class="n">demo</span><span class="o">.</span><span class="n">sqlite</span><span class="p">)</span>
<span class="n">msConnPoolRegister</span><span class="p">(</span><span class="n">countries</span><span class="p">,</span><span class="n">demo</span><span class="o">.</span><span class="n">sqlite</span><span class="p">,</span><span class="mi">03561</span><span class="n">F40</span><span class="p">)</span>
<span class="n">msOGRLayerClose</span><span class="p">(</span><span class="n">demo</span><span class="o">.</span><span class="n">sqlite</span><span class="p">)</span><span class="o">.</span>
<span class="n">msOGRFileClose</span><span class="p">(</span><span class="n">D</span><span class="p">:</span>\<span class="n">ms4w</span>\<span class="n">apps</span>\<span class="n">local</span><span class="o">-</span><span class="n">demo</span><span class="o">/.</span>\<span class="o">./</span><span class="n">data</span><span class="o">/</span><span class="n">demo</span><span class="o">.</span><span class="n">sqlite</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span>
<span class="n">msConnPoolRelease</span><span class="p">(</span><span class="n">countries</span><span class="p">,</span><span class="n">demo</span><span class="o">.</span><span class="n">sqlite</span><span class="p">,</span><span class="mi">03561</span><span class="n">F40</span><span class="p">)</span>
<span class="n">msConnPoolClose</span><span class="p">(</span><span class="n">demo</span><span class="o">.</span><span class="n">sqlite</span><span class="p">,</span><span class="mi">03561</span><span class="n">F40</span><span class="p">)</span>
<span class="n">msDrawMap</span><span class="p">():</span> <span class="n">Layer</span> <span class="mi">1</span> <span class="p">(</span><span class="n">countries</span><span class="p">),</span> <span class="mf">0.020</span><span class="n">s</span>
<span class="n">msOGRFileOpen</span><span class="p">(</span><span class="n">demo</span><span class="o">.</span><span class="n">sqlite</span><span class="p">)</span><span class="o">...</span>
<span class="n">OGROPen</span><span class="p">(</span><span class="n">D</span><span class="p">:</span>\<span class="n">ms4w</span>\<span class="n">apps</span>\<span class="n">local</span><span class="o">-</span><span class="n">demo</span><span class="o">/.</span>\<span class="o">./</span><span class="n">data</span><span class="o">/</span><span class="n">demo</span><span class="o">.</span><span class="n">sqlite</span><span class="p">)</span>
<span class="n">msConnPoolRegister</span><span class="p">(</span><span class="n">lakes</span><span class="p">,</span><span class="n">demo</span><span class="o">.</span><span class="n">sqlite</span><span class="p">,</span><span class="mi">03517620</span><span class="p">)</span>
<span class="n">msOGRLayerClose</span><span class="p">(</span><span class="n">demo</span><span class="o">.</span><span class="n">sqlite</span><span class="p">)</span><span class="o">.</span>
<span class="n">msOGRFileClose</span><span class="p">(</span><span class="n">D</span><span class="p">:</span>\<span class="n">ms4w</span>\<span class="n">apps</span>\<span class="n">local</span><span class="o">-</span><span class="n">demo</span><span class="o">/.</span>\<span class="o">./</span><span class="n">data</span><span class="o">/</span><span class="n">demo</span><span class="o">.</span><span class="n">sqlite</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span>
<span class="n">msConnPoolRelease</span><span class="p">(</span><span class="n">lakes</span><span class="p">,</span><span class="n">demo</span><span class="o">.</span><span class="n">sqlite</span><span class="p">,</span><span class="mi">03517620</span><span class="p">)</span>
<span class="n">msConnPoolClose</span><span class="p">(</span><span class="n">demo</span><span class="o">.</span><span class="n">sqlite</span><span class="p">,</span><span class="mi">03517620</span><span class="p">)</span>
<span class="n">msDrawMap</span><span class="p">():</span> <span class="n">Layer</span> <span class="mi">2</span> <span class="p">(</span><span class="n">lakes</span><span class="p">),</span> <span class="mf">0.009</span><span class="n">s</span>
<span class="n">msOGRFileOpen</span><span class="p">(</span><span class="n">demo</span><span class="o">.</span><span class="n">sqlite</span><span class="p">)</span><span class="o">...</span>
<span class="n">OGROPen</span><span class="p">(</span><span class="n">D</span><span class="p">:</span>\<span class="n">ms4w</span>\<span class="n">apps</span>\<span class="n">local</span><span class="o">-</span><span class="n">demo</span><span class="o">/.</span>\<span class="o">./</span><span class="n">data</span><span class="o">/</span><span class="n">demo</span><span class="o">.</span><span class="n">sqlite</span><span class="p">)</span>
<span class="n">msConnPoolRegister</span><span class="p">(</span><span class="n">ocean</span><span class="o">-</span><span class="n">labels</span><span class="p">,</span><span class="n">demo</span><span class="o">.</span><span class="n">sqlite</span><span class="p">,</span><span class="mi">03517620</span><span class="p">)</span>
<span class="n">msOGRLayerClose</span><span class="p">(</span><span class="n">demo</span><span class="o">.</span><span class="n">sqlite</span><span class="p">)</span><span class="o">.</span>
<span class="n">msOGRFileClose</span><span class="p">(</span><span class="n">D</span><span class="p">:</span>\<span class="n">ms4w</span>\<span class="n">apps</span>\<span class="n">local</span><span class="o">-</span><span class="n">demo</span><span class="o">/.</span>\<span class="o">./</span><span class="n">data</span><span class="o">/</span><span class="n">demo</span><span class="o">.</span><span class="n">sqlite</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span><span class="o">.</span>
<span class="n">msConnPoolRelease</span><span class="p">(</span><span class="n">ocean</span><span class="o">-</span><span class="n">labels</span><span class="p">,</span><span class="n">demo</span><span class="o">.</span><span class="n">sqlite</span><span class="p">,</span><span class="mi">03517620</span><span class="p">)</span>
<span class="n">msConnPoolClose</span><span class="p">(</span><span class="n">demo</span><span class="o">.</span><span class="n">sqlite</span><span class="p">,</span><span class="mi">03517620</span><span class="p">)</span>
<span class="n">msDrawMap</span><span class="p">():</span> <span class="n">Layer</span> <span class="mi">3</span> <span class="p">(</span><span class="n">ocean</span><span class="o">-</span><span class="n">labels</span><span class="p">),</span> <span class="mf">0.012</span><span class="n">s</span>
<span class="n">msLayerIsVisible</span><span class="p">():</span> <span class="n">Skipping</span> <span class="n">layer</span> <span class="p">(</span><span class="n">places</span><span class="p">)</span> <span class="n">because</span> <span class="n">no</span> <span class="n">CLASS</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">layer</span> <span class="ow">is</span> <span class="ow">in</span><span class="o">-</span><span class="n">scale</span> <span class="k">for</span> <span class="n">this</span> <span class="n">MAP</span> <span class="n">scale</span>
<span class="n">msDrawMap</span><span class="p">():</span> <span class="n">Drawing</span> <span class="n">Label</span> <span class="n">Cache</span><span class="p">,</span> <span class="mf">0.004</span><span class="n">s</span>
<span class="n">msDrawMap</span><span class="p">()</span> <span class="n">total</span> <span class="n">time</span><span class="p">:</span> <span class="mf">0.075</span><span class="n">s</span>
<span class="n">msSaveImage</span><span class="p">(</span><span class="n">test3</span><span class="o">.</span><span class="n">png</span><span class="p">)</span> <span class="n">total</span> <span class="n">time</span><span class="p">:</span> <span class="mf">0.013</span><span class="n">s</span>
<span class="n">map2img</span> <span class="n">total</span> <span class="n">time</span><span class="p">:</span> <span class="mf">0.096</span><span class="n">s</span>
</pre></div>
</div>
</section>
<section id="example-4-generate-a-map-image-for-a-specific-layer">
<h3><a class="toc-backref" href="#table-of-contents" role="doc-backlink">Example #4 Generate a Map Image for a Specific Layer</a><a class="headerlink" href="#example-4-generate-a-map-image-for-a-specific-layer" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">map2img</span> <span class="o">-</span><span class="n">m</span> <span class="n">local</span><span class="o">.</span><span class="n">map</span> <span class="o">-</span><span class="n">o</span> <span class="n">test4</span><span class="o">.</span><span class="n">png</span> <span class="o">-</span><span class="n">l</span> <span class="s2">&quot;countries&quot;</span> <span class="o">-</span><span class="n">map_debug</span> <span class="mi">3</span>
</pre></div>
</div>
<dl class="simple">
<dt>Result</dt><dd><p>A file named ‘test4.png’ is created, and layer draw speeds are returned for
1 layer only, such as:</p>
</dd>
</dl>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">msDrawMap</span><span class="p">():</span> <span class="n">rendering</span> <span class="n">using</span> <span class="n">outputformat</span> <span class="n">named</span> <span class="n">png</span> <span class="p">(</span><span class="n">AGG</span><span class="o">/</span><span class="n">PNG</span><span class="p">)</span><span class="o">.</span>
<span class="n">msDrawMap</span><span class="p">():</span> <span class="n">WMS</span><span class="o">/</span><span class="n">WFS</span> <span class="nb">set</span><span class="o">-</span><span class="n">up</span> <span class="ow">and</span> <span class="n">query</span><span class="p">,</span> <span class="mf">0.000</span><span class="n">s</span>
<span class="n">msDrawMap</span><span class="p">():</span> <span class="n">Layer</span> <span class="mi">1</span> <span class="p">(</span><span class="n">countries</span><span class="p">),</span> <span class="mf">0.036</span><span class="n">s</span>
<span class="n">msDrawMap</span><span class="p">():</span> <span class="n">Drawing</span> <span class="n">Label</span> <span class="n">Cache</span><span class="p">,</span> <span class="mf">0.002</span><span class="n">s</span>
<span class="n">msDrawMap</span><span class="p">()</span> <span class="n">total</span> <span class="n">time</span><span class="p">:</span> <span class="mf">0.038</span><span class="n">s</span>
<span class="n">msSaveImage</span><span class="p">(</span><span class="n">test4</span><span class="o">.</span><span class="n">png</span><span class="p">)</span> <span class="n">total</span> <span class="n">time</span><span class="p">:</span> <span class="mf">0.026</span><span class="n">s</span>
</pre></div>
</div>
</section>
<section id="example-5-generate-a-map-image-for-specific-multiple-layers">
<h3><a class="toc-backref" href="#table-of-contents" role="doc-backlink">Example #5 Generate a Map Image for Specific (Multiple) Layers</a><a class="headerlink" href="#example-5-generate-a-map-image-for-specific-multiple-layers" title="Link to this heading">¶</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The syntax for specifying multiple layers is: -l “layer1 layer2 layer3 layer4”</p>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">map2img</span> <span class="o">-</span><span class="n">m</span> <span class="n">local</span><span class="o">.</span><span class="n">map</span> <span class="o">-</span><span class="n">o</span> <span class="n">test5</span><span class="o">.</span><span class="n">png</span> <span class="o">-</span><span class="n">l</span> <span class="s2">&quot;countries lakes&quot;</span> <span class="o">-</span><span class="n">map_debug</span> <span class="mi">3</span>
</pre></div>
</div>
<dl class="simple">
<dt>Result</dt><dd><p>A file named ‘test5.png’ is created, and layer draw speeds are returned for
only the 2 specified layers, such as:</p>
</dd>
</dl>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">msDrawMap</span><span class="p">():</span> <span class="n">rendering</span> <span class="n">using</span> <span class="n">outputformat</span> <span class="n">named</span> <span class="n">png</span> <span class="p">(</span><span class="n">AGG</span><span class="o">/</span><span class="n">PNG</span><span class="p">)</span><span class="o">.</span>
<span class="n">msDrawMap</span><span class="p">():</span> <span class="n">WMS</span><span class="o">/</span><span class="n">WFS</span> <span class="nb">set</span><span class="o">-</span><span class="n">up</span> <span class="ow">and</span> <span class="n">query</span><span class="p">,</span> <span class="mf">0.000</span><span class="n">s</span>
<span class="n">msDrawMap</span><span class="p">():</span> <span class="n">Layer</span> <span class="mi">1</span> <span class="p">(</span><span class="n">countries</span><span class="p">),</span> <span class="mf">0.037</span><span class="n">s</span>
<span class="n">msDrawMap</span><span class="p">():</span> <span class="n">Layer</span> <span class="mi">2</span> <span class="p">(</span><span class="n">lakes</span><span class="p">),</span> <span class="mf">0.008</span><span class="n">s</span>
<span class="n">msDrawMap</span><span class="p">():</span> <span class="n">Drawing</span> <span class="n">Label</span> <span class="n">Cache</span><span class="p">,</span> <span class="mf">0.002</span><span class="n">s</span>
<span class="n">msDrawMap</span><span class="p">()</span> <span class="n">total</span> <span class="n">time</span><span class="p">:</span> <span class="mf">0.049</span><span class="n">s</span>
<span class="n">msSaveImage</span><span class="p">(</span><span class="n">test5</span><span class="o">.</span><span class="n">png</span><span class="p">)</span> <span class="n">total</span> <span class="n">time</span><span class="p">:</span> <span class="mf">0.011</span><span class="n">s</span>
</pre></div>
</div>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p>
<a href="../about.html" title="About">About</a><br>
<a href="../products.html" title="Products">Products</a><br>
<a href="../community/index.html" title="Community">Community</a><br>
<a href="../development/index.html" title="Development">Development</a><br>
<a href="../download.html" title="Downloads">Downloads</a><br>
<a href="../documentation.html" title="Documentation">Documentation</a><br>
<a href="../faq.html" title="FAQ">FAQ</a><br>
<a href="../psc.html" title="PSC">PSC</a><br>
<a href="https://twitter.com/mapserver_osgeo" title="Twitter">Twitter</a>
</p>
  <h3>Current Table Of Contents</h3>
  <ul>
<li><a class="reference internal" href="#">map2img</a><ul>
<li><a class="reference internal" href="#purpose">Purpose</a></li>
<li><a class="reference internal" href="#syntax">Syntax</a><ul>
<li><a class="reference internal" href="#example-1-generate-a-map-image">Example #1 Generate a Map Image</a></li>
<li><a class="reference internal" href="#example-2-generate-a-map-image-with-draw-speeds">Example #2 Generate a Map Image with Draw Speeds</a></li>
<li><a class="reference internal" href="#example-3-generate-a-map-image-with-debug-information-for-all-layers">Example #3 Generate a Map Image with Debug Information for all Layers</a></li>
<li><a class="reference internal" href="#example-4-generate-a-map-image-for-a-specific-layer">Example #4 Generate a Map Image for a Specific Layer</a></li>
<li><a class="reference internal" href="#example-5-generate-a-map-image-for-specific-multiple-layers">Example #5 Generate a Map Image for Specific (Multiple) Layers</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="msencrypt.html" title="msencrypt"
             >next</a> |</li>
        <li class="right" >
          <a href="legend.html" title="legend"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../documentation.html" >MapServer 8.0.1 Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >Utilities</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">map2img</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; <a href="../copyright.html">Copyright</a> 2023, Open Source Geospatial Foundation.
      Last updated on 2023-12-22.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.5.
    </div>
  </body>
</html>