<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>msencrypt &#8212; MapServer 8.0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx.css?v=6c7b17ac" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=dd298242" />
    <link rel="stylesheet" type="text/css" href="../_static/ribbon.css?v=ea091bf4" />
    
    <script src="../_static/documentation_options.js?v=521b6f53"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    
    <link rel="icon" href="../_static/mapserver.ico"/>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="scalebar" href="scalebar.html" />
    <link rel="prev" title="map2img" href="map2img.html" /> 
  </head><body>


<!-- for main branch only, do not backport this -->

<table width="100%" style="width: 100%; background-color: white;">
  <tr>
    <td rowspan="2" style="padding: 10px 0px 10px 10px;">
      <a href="../index.html" title="Home"><img src="../_static/banner.png" alt="MapServer banner" border="0" /></a>
    </td>
    <td style="padding: 10px 10px 0px 0px; text-align: right; vertical-align: top;">
      <a href="../index.html" title="Home">Home</a> |
      <a href="../products.html" title="Products (MapServer core, MapCache, TinyOWS">Products</a> |
      <a href="https://github.com/mapserver/mapserver/issues/" title="Issue Tracker (MapServer core)">Issue Tracker</a> |
      <a href="../community/service_providers.html" title="Professional Service Providers">Service Providers</a> |      
      <a href="../faq.html" title="Frequently Asked Questions">FAQ</a> |
      <a href="https://twitter.com/mapserver_osgeo" title="Twitter" target="_blank">Twitter</a> |
      <a href="../download.html" title="Download Source or Binaries">Download </a> |
      <a class="badge" href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=KRJ2X44N3HA6U&source=url" target="_blank">
        <img src="https://img.shields.io/badge/donate-%E2%9D%A4%C2%A0-ff69b4.svg?style=flat" alt="Donate to MapServer">
      </a>
    </td>
  </tr>
  <tr>
    <td style="padding: 0px 10px 0px 0px; text-align: right; vertical-align: bottom;">
        <img src="../_static/flagicons/en.png" alt="en" title="en" border="0" width="18px" height="13px"/>
        
          <a href="../ar/utilities/msencrypt.html"><img src="../_static/flagicons/ar.png" alt="ar" title="ar" border="0" /></a>
        
        
          <a href="../de/utilities/msencrypt.html"><img src="../_static/flagicons/de.png" alt="de" title="de" border="0" /></a>
        
        
          <a href="../el/utilities/msencrypt.html"><img src="../_static/flagicons/el.png" alt="el" title="el" border="0" /></a>
        
        
          <a href="../es/utilities/msencrypt.html"><img src="../_static/flagicons/es.png" alt="es" title="es" border="0" /></a>
        
        
          <a href="../fr/utilities/msencrypt.html"><img src="../_static/flagicons/fr.png" alt="fr" title="fr" border="0" /></a>
        
        
          <a href="../id/utilities/msencrypt.html"><img src="../_static/flagicons/id.png" alt="id" title="id" border="0" /></a>
        
        
          <a href="../it/utilities/msencrypt.html"><img src="../_static/flagicons/it.png" alt="it" title="it" border="0" /></a>
        
        
          <a href="../ja/utilities/msencrypt.html"><img src="../_static/flagicons/ja.png" alt="ja" title="ja" border="0" /></a>
        
        
          <a href="../nl_NL/utilities/msencrypt.html"><img src="../_static/flagicons/nl_NL.png" alt="nl_NL" title="nl_NL" border="0" /></a>
        
        
          <a href="../pl/utilities/msencrypt.html"><img src="../_static/flagicons/pl.png" alt="pl" title="pl" border="0" /></a>
        
        
          <a href="../ru/utilities/msencrypt.html"><img src="../_static/flagicons/ru.png" alt="ru" title="ru" border="0" /></a>
        
        
          <a href="../sq/utilities/msencrypt.html"><img src="../_static/flagicons/sq.png" alt="sq" title="sq" border="0" /></a>
        
        
          <a href="../tr/utilities/msencrypt.html"><img src="../_static/flagicons/tr.png" alt="tr" title="tr" border="0" /></a>
        

    </td>
  </tr>
</table>


    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="scalebar.html" title="scalebar"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="map2img.html" title="map2img"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../documentation.html" >MapServer 8.0.1 Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">Utilities</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">msencrypt</a></li> 
      </ul>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="msencrypt">
<span id="index-2"></span><span id="index-1"></span><span id="index-0"></span><span id="id1"></span><h1>msencrypt<a class="headerlink" href="#msencrypt" title="Link to this heading">¶</a></h1>
<section id="purpose">
<h2>Purpose<a class="headerlink" href="#purpose" title="Link to this heading">¶</a></h2>
<p>Used to create an encryption key or to encrypt portions of connection
strings for use in mapfiles (added in v4.10).  Typically you might
want to encrypt portions of the CONNECTION parameter for a database
connection.  The following CONNECTIONTYPEs are supported for using
this encryption method:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../input/vector/ogr.html#ogr"><span class="std std-ref">OGR</span></a></p></li>
<li><p><a class="reference internal" href="../input/vector/oracle.html#oci"><span class="std std-ref">Oracle Spatial</span></a></p></li>
<li><p><a class="reference internal" href="../input/vector/postgis.html#input-postgis"><span class="std std-ref">PostGIS</span></a></p></li>
<li><p><a class="reference internal" href="../input/vector/mssql.html#mssql"><span class="std std-ref">Microsoft SQL Server</span></a></p></li>
</ul>
<p>Note also passwords for accessing secured <a class="reference internal" href="../ogc/wfs_client.html#wfs-client"><span class="std std-ref">WFS services</span></a> can also be encrypted.</p>
</section>
<section id="syntax">
<h2>Syntax<a class="headerlink" href="#syntax" title="Link to this heading">¶</a></h2>
<p>To create a new encryption key:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">msencrypt</span> <span class="o">-</span><span class="n">keygen</span> <span class="p">[</span><span class="n">key_filename</span><span class="p">]</span>
</pre></div>
</div>
<p>To encrypt a string:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">msencrypt</span> <span class="o">-</span><span class="n">key</span> <span class="p">[</span><span class="n">key_filename</span><span class="p">]</span> <span class="p">[</span><span class="n">string_to_encrypt</span><span class="p">]</span>
</pre></div>
</div>
</section>
<section id="use-in-mapfile">
<h2>Use in Mapfile<a class="headerlink" href="#use-in-mapfile" title="Link to this heading">¶</a></h2>
<p>The location of the encryption key can be specified by two mechanisms, either by
setting the environment variable MS_ENCRYPTION_KEY or using a CONFIG directive
in the MAP object of your mapfile.  For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CONFIG</span> <span class="n">MS_ENCRYPTION_KEY</span> <span class="s2">&quot;/path/to/mykey.txt&quot;</span>
</pre></div>
</div>
<p>Use the { and } characters as delimiters for encrypted strings inside database
CONNECTIONs in your mapfile.  For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CONNECTIONTYPE</span> <span class="n">ORACLESPATIAL</span>
<span class="n">CONNECTION</span> <span class="s2">&quot;user/{MIIBugIBAAKBgQCP0Yj+Seh8==}@service&quot;</span>
</pre></div>
</div>
<section id="example">
<h3>Example<a class="headerlink" href="#example" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">LAYER</span>
  <span class="n">NAME</span> <span class="s2">&quot;provinces&quot;</span>
  <span class="n">TYPE</span> <span class="n">POLYGON</span>
  <span class="n">CONNECTIONTYPE</span> <span class="n">POSTGIS</span>
  <span class="n">CONNECTION</span> <span class="s2">&quot;host=127.0.0.1 dbname=gmap user=postgres password=iluvyou18 port=5432&quot;</span>
  <span class="n">DATA</span> <span class="s2">&quot;the_geom FROM province using SRID=3978&quot;</span>
  <span class="n">STATUS</span> <span class="n">DEFAULT</span>
  <span class="n">CLASS</span>
    <span class="n">NAME</span> <span class="s2">&quot;Countries&quot;</span>
    <span class="n">STYLE</span>
        <span class="n">COLOR</span> <span class="mi">255</span> <span class="mi">0</span> <span class="mi">0</span>
    <span class="n">END</span>
  <span class="n">END</span>
<span class="n">END</span>
</pre></div>
</div>
<p>Here are the steps to encrypt the password in the above connection:</p>
<ol class="arabic simple">
<li><p>Generate an encryption key (note that this key should not be stored
anywhere within your web server’s accessible directories):</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">msencrypt</span> <span class="o">-</span><span class="n">keygen</span> <span class="s2">&quot;E:</span><span class="se">\t</span><span class="s2">emp\mykey.txt&quot;</span>
</pre></div>
</div>
<p>And this generated key file might contain something like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">2137</span><span class="n">FEFDB5611448738D9FBB1DC59055</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Encrypt the connection’s password using that generated key:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">msencrypt</span> <span class="o">-</span><span class="n">key</span> <span class="s2">&quot;E:</span><span class="se">\t</span><span class="s2">emp\mykey.txt&quot;</span> <span class="s2">&quot;iluvyou18&quot;</span>
</pre></div>
</div>
<p>Which returns the password encrypted, at the commandline (you’ll use
it in a second):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">3656026</span><span class="n">A23DBAFC04C402EDFAB7CE714</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Edit the mapfile to make sure the ‘mykey.txt’ can be found, using
the “MS_ENCRYPTION_KEY” environment variable.  The CONFIG parameter
inside the MAP object can be used to set an environment variable
inside a mapfile:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">MAP</span>
    <span class="o">...</span>
    <span class="n">CONFIG</span> <span class="s2">&quot;MS_ENCRYPTION_KEY&quot;</span> <span class="s2">&quot;E:/temp/mykey.txt&quot;</span>
    <span class="o">...</span>
<span class="n">END</span> <span class="c1">#mapfile</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>Modify the layer’s CONNECTION to use the generated password key,
making sure to use the “{}” brackets around the key:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CONNECTION</span> <span class="s2">&quot;host=127.0.0.1 dbname=gmap user=postgres</span>
            <span class="n">password</span><span class="o">=</span><span class="p">{</span><span class="mi">3656026</span><span class="n">A23DBAFC04C402EDFAB7CE714</span><span class="p">}</span> <span class="n">port</span><span class="o">=</span><span class="mi">5432</span><span class="s2">&quot;</span>
</pre></div>
</div>
<ol class="arabic simple" start="5">
<li><p>Done!  Give your new encrypted mapfile a try with the
<a class="reference internal" href="map2img.html#map2img"><span class="std std-ref">map2img</span></a> utility!</p></li>
</ol>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p>
<a href="../about.html" title="About">About</a><br>
<a href="../products.html" title="Products">Products</a><br>
<a href="../community/index.html" title="Community">Community</a><br>
<a href="../development/index.html" title="Development">Development</a><br>
<a href="../download.html" title="Downloads">Downloads</a><br>
<a href="../documentation.html" title="Documentation">Documentation</a><br>
<a href="../faq.html" title="FAQ">FAQ</a><br>
<a href="../psc.html" title="PSC">PSC</a><br>
<a href="https://twitter.com/mapserver_osgeo" title="Twitter">Twitter</a>
</p>
  <h3>Current Table Of Contents</h3>
  <ul>
<li><a class="reference internal" href="#">msencrypt</a><ul>
<li><a class="reference internal" href="#purpose">Purpose</a></li>
<li><a class="reference internal" href="#syntax">Syntax</a></li>
<li><a class="reference internal" href="#use-in-mapfile">Use in Mapfile</a><ul>
<li><a class="reference internal" href="#example">Example</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="scalebar.html" title="scalebar"
             >next</a> |</li>
        <li class="right" >
          <a href="map2img.html" title="map2img"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../documentation.html" >MapServer 8.0.1 Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >Utilities</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">msencrypt</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; <a href="../copyright.html">Copyright</a> 2023, Open Source Geospatial Foundation.
      Last updated on 2023-12-22.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.5.
    </div>
  </body>
</html>