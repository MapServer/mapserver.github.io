<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" lang="it">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>tile4ms &#8212; MapServer 7.0.6 documentation</title>
    
    <link rel="stylesheet" href="../_static/sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '7.0.6',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <link rel="shortcut icon" href="../_static/mapserver.ico"/>
    <link rel="author" title="A proposito di questi documenti" href="../about.html" />
    <link rel="index" title="Indice" href="../genindex.html" />
    <link rel="search" title="Cerca" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="top" title="MapServer 7.0.6 documentation" href="../index.html" />
    <link rel="up" title="Utilities" href="index.html" />
    <link rel="next" title="Batch Scripting" href="batch_utilities.html" />
    <link rel="prev" title="sym2img" href="sym2img.html" /> 
  </head>
  <body role="document">

<table width="100%" style="width: 100%; background-color: white;">
  <tr>
    <td rowspan="2" style="padding: 10px 0px 10px 10px;">
      <a href="../index.html" title="Home"><img src="../_static/banner.png" alt="MapServer banner" border="0" /></a>
    </td>
    <td style="padding: 10px 10px 0px 0px; text-align: right; vertical-align: top;">
      <a href="../index.html" title="Home">Home</a> |
      <a href="../products.html" title="Products (MapServer core, MapCache, TinyOWS">Products</a> |
      <a href="https://github.com/mapserver/mapserver/issues/" title="Issue Tracker (MapServer core)">Issue Tracker</a> |
      <a href="../community/service_providers.html" title="Professional Service Providers">Service Providers</a> |      
      <a href="../faq.html" title="Frequently Asked Questions">FAQ</a> |
      <a href="https://twitter.com/mapserver_osgeo" title="Twitter">Twitter</a> |
      <a href="../download.html" title="Download Source or Binaries">Download </a>
    </td>
  </tr>
  <tr>
    <td style="padding: 0px 10px 0px 0px; text-align: right; vertical-align: bottom;">
        
          
            <a href="../../utilities/tile4ms.html"><img src="../_static/flagicons/en.png" alt="en" title="en" border="0" /></a>
          
        
        
          
            <a href="../../ar/utilities/tile4ms.html"><img src="../_static/flagicons/ar.png" alt="ar" title="ar" border="0" /></a>
          
        
        
          
            <a href="../../de/utilities/tile4ms.html"><img src="../_static/flagicons/de.png" alt="de" title="de" border="0" /></a>
          
        
        
          
            <a href="../../el/utilities/tile4ms.html"><img src="../_static/flagicons/el.png" alt="el" title="el" border="0" /></a>
          
        
        
          
            <a href="../../es/utilities/tile4ms.html"><img src="../_static/flagicons/es.png" alt="es" title="es" border="0" /></a>
          
        
        
          
            <a href="../../fr/utilities/tile4ms.html"><img src="../_static/flagicons/fr.png" alt="fr" title="fr" border="0" /></a>
          
        
        
          
            <a href="../../id/utilities/tile4ms.html"><img src="../_static/flagicons/id.png" alt="id" title="id" border="0" /></a>
          
        
        <img src="../_static/flagicons/it.png" alt="it" title="it" border="0" width="18px" height="13px"/>
        
          
            <a href="../../ja/utilities/tile4ms.html"><img src="../_static/flagicons/ja.png" alt="ja" title="ja" border="0" /></a>
          
        
        
          
            <a href="../../nl_NL/utilities/tile4ms.html"><img src="../_static/flagicons/nl_NL.png" alt="nl_NL" title="nl_NL" border="0" /></a>
          
        
        
          
            <a href="../../pl/utilities/tile4ms.html"><img src="../_static/flagicons/pl.png" alt="pl" title="pl" border="0" /></a>
          
        
        
          
            <a href="../../ru/utilities/tile4ms.html"><img src="../_static/flagicons/ru.png" alt="ru" title="ru" border="0" /></a>
          
        
        
          
            <a href="../../sq/utilities/tile4ms.html"><img src="../_static/flagicons/sq.png" alt="sq" title="sq" border="0" /></a>
          
        
        
          
            <a href="../../tr/utilities/tile4ms.html"><img src="../_static/flagicons/tr.png" alt="tr" title="tr" border="0" /></a>
          
        

    </td>
  </tr>
</table>


    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigazione</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Indice generale"
             accesskey="I">indice</a></li>
        <li class="right" >
          <a href="batch_utilities.html" title="Batch Scripting"
             accesskey="N">successivo</a> |</li>
        <li class="right" >
          <a href="sym2img.html" title="sym2img"
             accesskey="P">precedente</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../documentation.html" >MapServer 7.0.6 Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">Utilities</a> &#187;</li> 
      </ul>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="tile4ms">
<span id="index-0"></span><span id="id1"></span><h1>tile4ms<a class="headerlink" href="#tile4ms" title="Link a questa intestazione">¶</a></h1>
<div class="section" id="purpose">
<h2>Purpose<a class="headerlink" href="#purpose" title="Link a questa intestazione">¶</a></h2>
<p>Creates a tile index Shape data set for use with MapServer&#8217;s TILEINDEX
feature.  The program creates a Shape data set of rectangles from
extents of all the Shape data sets listed in [metafile] (one Shape
data set name per line) and the associated DBF with the filename for
each shape tile in a column called LOCATION as required by mapserv.</p>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Similar functionality can be found in the GDAL commandline utilities
<a class="reference external" href="http://www.gdal.org/ogrtindex.html">ogrtindex</a> (for vectors) and
<a class="reference external" href="http://www.gdal.org/gdaltindex.html">gdaltindex</a> (for rasters).</p>
</div>
</div>
<div class="section" id="description">
<h2>Description<a class="headerlink" href="#description" title="Link a questa intestazione">¶</a></h2>
<p>This utility creates a Shape data set containing the MBR (minimum
bounding rectangle) of all shapes in the files provided, which can
then be used in the LAYER object&#8217;s TILEINDEX parameter of the mapfile.
The new filed created with this command is used by MapServer to only
load the files associated with that extent (or tile).</p>
</div>
<div class="section" id="syntax">
<h2>Syntax<a class="headerlink" href="#syntax" title="Link a questa intestazione">¶</a></h2>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">tile4ms</span> <span class="o">&lt;</span><span class="n">meta</span><span class="o">-</span><span class="n">file</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">tile</span><span class="o">-</span><span class="n">file</span><span class="o">&gt;</span> <span class="p">[</span><span class="o">-</span><span class="n">tile</span><span class="o">-</span><span class="n">path</span><span class="o">-</span><span class="n">only</span><span class="p">]</span>
<span class="o">&lt;</span><span class="n">meta</span><span class="o">-</span><span class="n">file</span><span class="o">&gt;</span>     <span class="n">INPUT</span>  <span class="n">file</span> <span class="n">containing</span> <span class="nb">list</span> <span class="n">of</span> <span class="n">Shape</span> <span class="n">data</span> <span class="nb">set</span> <span class="n">names</span>
                <span class="p">(</span><span class="n">complete</span> <span class="n">paths</span> <span class="mi">255</span> <span class="n">chars</span> <span class="nb">max</span><span class="p">,</span> <span class="n">no</span> <span class="n">extension</span><span class="p">)</span>
<span class="o">&lt;</span><span class="n">tile</span><span class="o">-</span><span class="n">file</span><span class="o">&gt;</span>     <span class="n">OUTPUT</span> <span class="n">shape</span> <span class="n">file</span> <span class="n">of</span> <span class="n">extent</span> <span class="n">rectangles</span> <span class="ow">and</span> <span class="n">names</span>
                <span class="n">of</span> <span class="n">tiles</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">tile</span><span class="o">-</span><span class="n">file</span><span class="o">&gt;.</span><span class="n">dbf</span>
<span class="o">-</span><span class="n">tile</span><span class="o">-</span><span class="n">path</span><span class="o">-</span><span class="n">only</span> <span class="n">Optional</span> <span class="n">flag</span><span class="o">.</span>  <span class="n">If</span> <span class="n">specified</span> <span class="n">then</span> <span class="n">only</span> <span class="n">the</span> <span class="n">path</span> <span class="n">to</span> <span class="n">the</span>
                <span class="n">shape</span> <span class="n">files</span> <span class="n">will</span> <span class="n">be</span> <span class="n">stored</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">LOCATION</span> <span class="n">field</span>
                <span class="n">instead</span> <span class="n">of</span> <span class="n">storing</span> <span class="n">the</span> <span class="n">full</span> <span class="n">filename</span><span class="o">.</span>
</pre></div>
</div>
</div>
<div class="section" id="short-example">
<h2>Short Example<a class="headerlink" href="#short-example" title="Link a questa intestazione">¶</a></h2>
<p>Create tileindex.shp for all tiles under the /path/to/data directory:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>   <span class="o">&lt;</span><span class="n">on</span> <span class="n">Unix</span><span class="o">&gt;</span>

<span class="n">cd</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">data</span>
<span class="n">find</span> <span class="o">.</span> <span class="o">-</span><span class="n">name</span> <span class="s2">&quot;/*.shp&quot;</span> <span class="o">-</span><span class="nb">print</span> <span class="o">&gt;</span> <span class="n">metafile</span><span class="o">.</span><span class="n">txt</span>
<span class="n">tile4ms</span> <span class="n">metafile</span><span class="o">.</span><span class="n">txt</span> <span class="n">tileindex</span>

   <span class="o">&lt;</span><span class="n">on</span> <span class="n">Windows</span><span class="o">&gt;</span>

<span class="nb">dir</span> <span class="o">/</span><span class="n">b</span> <span class="o">/</span><span class="n">s</span> <span class="o">*.</span><span class="n">shp</span> <span class="o">&gt;</span> <span class="n">metafile</span><span class="o">.</span><span class="n">txt</span>
<span class="n">tile4ms</span> <span class="n">metafile</span><span class="o">.</span><span class="n">txt</span> <span class="n">tileindex</span>
</pre></div>
</div>
</div>
<div class="section" id="long-example">
<h2>Long Example<a class="headerlink" href="#long-example" title="Link a questa intestazione">¶</a></h2>
<p>This example uses TIGER Census data, where the data contains files
divided up by county (in fact there are over 3200 counties, a very
large dataset indeed).  In this example we will show how to display
all lakes for the state of Minnesota.  (note that here we have already
converted the TIGER data into Shape format, but you could keep the
data in TIGER format and use the ogrtindex utility instead) The TIGER
Census data for Minnesota is made up of 87 different counties, each
containing its own lakes file (&#8216;wp.shp&#8217;).</p>
<ol class="arabic">
<li><p class="first">We need to create the &#8216;meta-file&#8217; for the tile4ms command.  This is
a text file of the paths to all &#8216;wp.shp&#8217; files for the MN state.
To create this file we can use a few simple commands:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">DOS</span><span class="p">:</span> <span class="nb">dir</span> <span class="n">wp</span><span class="o">.</span><span class="n">shp</span> <span class="o">/</span><span class="n">b</span> <span class="o">/</span><span class="n">s</span> <span class="o">&gt;</span> <span class="n">wp_list</span><span class="o">.</span><span class="n">txt</span>
<span class="p">(</span><span class="n">this</span> <span class="n">includes</span> <span class="n">full</span> <span class="n">paths</span> <span class="n">to</span> <span class="n">the</span> <span class="n">data</span><span class="p">,</span> <span class="n">you</span> <span class="n">might</span> <span class="n">want</span> <span class="n">to</span> <span class="n">edit</span> <span class="n">the</span> <span class="n">txt</span>
<span class="n">file</span> <span class="n">to</span> <span class="n">remove</span> <span class="n">the</span> <span class="n">full</span> <span class="n">path</span><span class="p">)</span>

<span class="n">UNIX</span><span class="p">:</span> <span class="n">find</span> <span class="o">-</span><span class="n">name</span> <span class="o">*</span><span class="n">wp</span><span class="o">.</span><span class="n">shp</span> <span class="o">-</span><span class="nb">print</span> <span class="o">&gt;</span> <span class="n">wp_list</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>The newly created file might look like the following (after removing the
full path):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="mi">001</span>\<span class="n">wp</span><span class="o">.</span><span class="n">shp</span>
<span class="mi">003</span>\<span class="n">wp</span><span class="o">.</span><span class="n">shp</span>
<span class="mi">005</span>\<span class="n">wp</span><span class="o">.</span><span class="n">shp</span>
<span class="mi">007</span>\<span class="n">wp</span><span class="o">.</span><span class="n">shp</span>
<span class="mi">009</span>\<span class="n">wp</span><span class="o">.</span><span class="n">shp</span>
<span class="mi">011</span>\<span class="n">wp</span><span class="o">.</span><span class="n">shp</span>
<span class="mi">013</span>\<span class="n">wp</span><span class="o">.</span><span class="n">shp</span>
<span class="mi">015</span>\<span class="n">wp</span><span class="o">.</span><span class="n">shp</span>
<span class="mi">017</span>\<span class="n">wp</span><span class="o">.</span><span class="n">shp</span>
<span class="mi">019</span>\<span class="n">wp</span><span class="o">.</span><span class="n">shp</span>
<span class="o">...</span>
</pre></div>
</div>
</li>
<li><p class="first">Execute the tile4ms command with the newly created meta-file to create the
index file:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">tile4ms</span> <span class="n">wp_list</span><span class="o">.</span><span class="n">txt</span> <span class="n">index</span>
  <span class="n">Processed</span> <span class="mi">87</span> <span class="n">of</span> <span class="mi">87</span> <span class="n">files</span>
</pre></div>
</div>
</li>
<li><p class="first">A new file named &#8216;index.shp&#8217; is created.  This is the index file with the MBRs
of all &#8216;wp.shp&#8217; files for the entire state, as shown in Figure1.  The attribute
table of this file contains a field named &#8216;LOCATION&#8217;, that contains the path to
each &#8216;wp.shp file&#8217;, as shown in Figure2.</p>
<blockquote>
<div><p><strong>Figure 1: Index file created by tile4ms utility</strong></p>
<img alt="../_images/tile4ms-view.png" src="../_images/tile4ms-view.png" />
<p><strong>Figure 2: Attributes of index file created by tile4ms utility</strong></p>
<img alt="../_images/tile4ms-attributes.png" src="../_images/tile4ms-attributes.png" />
</div></blockquote>
</li>
<li><p class="first">The final step is to use this in your mapfile.</p>
<ul class="simple">
<li>LAYER object&#8217;s TILEINDEX - must point to the location of the
index file</li>
<li>LAYER object&#8217;s TILEITEM - specify the name of the field in the
index file containing the paths (default is &#8216;location&#8217;)</li>
<li>do not need to use the LAYER&#8217;s DATA parameter</li>
</ul>
<p>For example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">LAYER</span>
  <span class="n">NAME</span> <span class="s1">&#39;mn-lakes&#39;</span>
  <span class="n">STATUS</span> <span class="n">ON</span>
  <span class="n">TILEINDEX</span> <span class="s2">&quot;index&quot;</span>
  <span class="n">TILEITEM</span> <span class="s2">&quot;location&quot;</span>
  <span class="n">TYPE</span> <span class="n">POLYGON</span>
  <span class="n">CLASS</span>
    <span class="n">NAME</span> <span class="s2">&quot;mn-lakes&quot;</span>
    <span class="n">STYLE</span>
      <span class="n">COLOR</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">255</span>
    <span class="n">END</span>
  <span class="n">END</span>
<span class="n">END</span>
</pre></div>
</div>
</li>
</ol>
<p>When you view the layer in a MapServer application, you will notice that when
you are zoomed into a small area of the state only those lakes layers are
loaded, which speeds up the application.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3>Ricerca veloce</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Vai" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><h3>Navigation</h3>
<p>
<a href="../about.html" title="About">About</a><br>
<a href="../products.html" title="Products">Products</a><br>
<a href="../community/index.html" title="Community">Community</a><br>
<a href="../development/index.html" title="Development">Development</a><br>
<a href="../download.html" title="Downloads">Downloads</a><br>
<a href="../documentation.html" title="Documentation">Documentation</a><br>
<a href="../faq.html" title="FAQ">FAQ</a><br>
<a href="../psc.html" title="PSC">PSC</a><br>
<a href="https://twitter.com/mapserver_osgeo" title="Twitter">Twitter</a>
</p>
  <h3>Current Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">tile4ms</a><ul>
<li><a class="reference internal" href="#purpose">Purpose</a></li>
<li><a class="reference internal" href="#description">Description</a></li>
<li><a class="reference internal" href="#syntax">Syntax</a></li>
<li><a class="reference internal" href="#short-example">Short Example</a></li>
<li><a class="reference internal" href="#long-example">Long Example</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigazione</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Indice generale"
             >indice</a></li>
        <li class="right" >
          <a href="batch_utilities.html" title="Batch Scripting"
             >successivo</a> |</li>
        <li class="right" >
          <a href="sym2img.html" title="sym2img"
             >precedente</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../documentation.html" >MapServer 7.0.6 Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >Utilities</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; <a href="../copyright.html">Copyright</a> 2017, Open Source Geospatial Foundation.
      Ultimo aggiornamento 2017-07-26.
      Creato con <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.9.
    </div>
  </body>
</html>