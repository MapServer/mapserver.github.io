<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" lang="it">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>MS RFC 118: Support Vendor-Specific OGC FILTER parameter in WMS requests &#8212; MapServer 7.0.5 documentation</title>
    
    <link rel="stylesheet" href="../../_static/sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '7.0.5',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/translations.js"></script>
    <link rel="shortcut icon" href="../../_static/mapserver.ico"/>
    <link rel="author" title="A proposito di questi documenti" href="../../about.html" />
    <link rel="index" title="Indice" href="../../genindex.html" />
    <link rel="search" title="Cerca" href="../../search.html" />
    <link rel="copyright" title="Copyright" href="../../copyright.html" />
    <link rel="top" title="MapServer 7.0.5 documentation" href="../../index.html" />
    <link rel="up" title="Request for Comments" href="index.html" />
    <link rel="next" title="MS RFC 119: Mapbox Vector Tile (MVT) Support" href="ms-rfc-119.html" />
    <link rel="prev" title="MS RFC 117: PHP 7 MapScript Support Through SWIG" href="ms-rfc-117.html" /> 
  </head>
  <body role="document">

<table width="100%" style="width: 100%; background-color: white;">
  <tr>
    <td rowspan="2" style="padding: 10px 0px 10px 10px;">
      <a href="../../index.html" title="Home"><img src="../../_static/banner.png" alt="MapServer banner" border="0" /></a>
    </td>
    <td style="padding: 10px 10px 0px 0px; text-align: right; vertical-align: top;">
      <a href="../../index.html" title="Home">Home</a> |
      <a href="../../products.html" title="Products (MapServer core, MapCache, TinyOWS">Products</a> |
      <a href="https://github.com/mapserver/mapserver/issues/" title="Issue Tracker (MapServer core)">Issue Tracker</a> |
      <a href="../../community/service_providers.html" title="Professional Service Providers">Service Providers</a> |      
      <a href="../../faq.html" title="Frequently Asked Questions">FAQ</a> |
      <a href="../../download.html" title="Download Source or Binaries">Download </a>
    </td>
  </tr>
  <tr>
    <td style="padding: 0px 10px 0px 0px; text-align: right; vertical-align: bottom;">
        
          
            <a href="../../../development/rfc/ms-rfc-118.html"><img src="../../_static/flagicons/en.png" alt="en" title="en" border="0" /></a>
          
        
        
          
            <a href="../../../ar/development/rfc/ms-rfc-118.html"><img src="../../_static/flagicons/ar.png" alt="ar" title="ar" border="0" /></a>
          
        
        
          
            <a href="../../../de/development/rfc/ms-rfc-118.html"><img src="../../_static/flagicons/de.png" alt="de" title="de" border="0" /></a>
          
        
        
          
            <a href="../../../el/development/rfc/ms-rfc-118.html"><img src="../../_static/flagicons/el.png" alt="el" title="el" border="0" /></a>
          
        
        
          
            <a href="../../../es/development/rfc/ms-rfc-118.html"><img src="../../_static/flagicons/es.png" alt="es" title="es" border="0" /></a>
          
        
        
          
            <a href="../../../fr/development/rfc/ms-rfc-118.html"><img src="../../_static/flagicons/fr.png" alt="fr" title="fr" border="0" /></a>
          
        
        
          
            <a href="../../../id/development/rfc/ms-rfc-118.html"><img src="../../_static/flagicons/id.png" alt="id" title="id" border="0" /></a>
          
        
        <img src="../../_static/flagicons/it.png" alt="it" title="it" border="0" width="18px" height="13px"/>
        
          
            <a href="../../../ja/development/rfc/ms-rfc-118.html"><img src="../../_static/flagicons/ja.png" alt="ja" title="ja" border="0" /></a>
          
        
        
          
            <a href="../../../nl_NL/development/rfc/ms-rfc-118.html"><img src="../../_static/flagicons/nl_NL.png" alt="nl_NL" title="nl_NL" border="0" /></a>
          
        
        
          
            <a href="../../../pl/development/rfc/ms-rfc-118.html"><img src="../../_static/flagicons/pl.png" alt="pl" title="pl" border="0" /></a>
          
        
        
          
            <a href="../../../ru/development/rfc/ms-rfc-118.html"><img src="../../_static/flagicons/ru.png" alt="ru" title="ru" border="0" /></a>
          
        
        
          
            <a href="../../../sq/development/rfc/ms-rfc-118.html"><img src="../../_static/flagicons/sq.png" alt="sq" title="sq" border="0" /></a>
          
        
        
          
            <a href="../../../tr/development/rfc/ms-rfc-118.html"><img src="../../_static/flagicons/tr.png" alt="tr" title="tr" border="0" /></a>
          
        

    </td>
  </tr>
</table>


    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigazione</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="Indice generale"
             accesskey="I">indice</a></li>
        <li class="right" >
          <a href="ms-rfc-119.html" title="MS RFC 119: Mapbox Vector Tile (MVT) Support"
             accesskey="N">successivo</a> |</li>
        <li class="right" >
          <a href="ms-rfc-117.html" title="MS RFC 117: PHP 7 MapScript Support Through SWIG"
             accesskey="P">precedente</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Development</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">Request for Comments</a> &#187;</li> 
      </ul>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="ms-rfc-118-support-vendor-specific-ogc-filter-parameter-in-wms-requests">
<span id="rfc118"></span><h1>MS RFC 118: Support Vendor-Specific OGC FILTER parameter in WMS requests<a class="headerlink" href="#ms-rfc-118-support-vendor-specific-ogc-filter-parameter-in-wms-requests" title="Link a questa intestazione">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Date:</th><td class="field-body">2017-02-09</td>
</tr>
<tr class="field-even field"><th class="field-name">Author:</th><td class="field-body">Daniel Morissette</td>
</tr>
<tr class="field-odd field"><th class="field-name">Contact:</th><td class="field-body"><a class="reference external" href="mailto:dmorissette&#37;&#52;&#48;mapgears&#46;com">dmorissette<span>&#64;</span>mapgears<span>&#46;</span>com</a></td>
</tr>
<tr class="field-even field"><th class="field-name">Status:</th><td class="field-body">Draft</td>
</tr>
<tr class="field-odd field"><th class="field-name">Version:</th><td class="field-body">MapServer 7.2</td>
</tr>
</tbody>
</table>
<div class="section" id="overview">
<h2>1. Overview<a class="headerlink" href="#overview" title="Link a questa intestazione">¶</a></h2>
<p>It is common practice for JS client applications to let the users make selections or apply filters on the client side that should be reflected on the map that is rendered by a WMS GetMap request.</p>
<p>At the moment, there is no simple way to pass a filter to a WMS GetMap request, so JS application developers have to resort to one of the following methods/hacks:</p>
<ul class="simple">
<li>Apply a SLD to the GetMap request: overkill especially when only a simple filter is required and needs to be applied to multiple layers with complex symbology</li>
<li>Use %variable% replacements: limited functionality, messes up your layer definitions and is prone to security issues</li>
<li>Create temporary mapfiles on the server side: hey, we are in 2017!</li>
</ul>
<p>The OpenLayers3 code already makes it possible for JS devs to build and pass an OGC filter in a WMS GetMap request the same way as for WFS GetFeature requests, and GeoServer already supports this as a vendor-specific parameter, so this RFC proposes to support the same vendor-specific FILTER parameter in MapServer.</p>
</div>
<div class="section" id="proposed-solution">
<h2>2. Proposed solution<a class="headerlink" href="#proposed-solution" title="Link a questa intestazione">¶</a></h2>
<p>This RFC proposes the implementation of a vendor-specific FILTER parameter in the MapServer WMS server interface that operates like the WFS GetFeature FILTER parameter.</p>
</div>
<div class="section" id="the-wms-filter-parameter">
<h2>2.1 The WMS FILTER parameter<a class="headerlink" href="#the-wms-filter-parameter" title="Link a questa intestazione">¶</a></h2>
<p>The WMS FILTER parameter will be supported in both GetMap and GetFeatureInfo requests. The syntax and format is the same that is currently supported by the WFS GetFeature FILTER parameter. As for any GET HTTP request parameters, the value will have to be properly URL encoded.</p>
<p>If more than one layer is specified in the LAYERS parameter then a separate FILTER must be specified for each layer.  In this case the list is enclosed in parentheses: ( ).</p>
</div>
<div class="section" id="examples">
<h2>2.2 Examples<a class="headerlink" href="#examples" title="Link a questa intestazione">¶</a></h2>
<p>Simple PropertyIsEqualTo on a single layer:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>/cgi-bin/mapserv?map=...
&amp;SERVICE=WMS
&amp;REQUEST=GetMap
&amp;LAYERS=popplace
&amp;FILTER=&lt;Filter&gt;&lt;PropertyIsEqualTo&gt;&lt;PropertyName&gt;NAME&lt;/PropertyName&gt;&lt;Literal&gt;Digby&lt;/Literal&gt;&lt;/PropertyIsEqualTo&gt;&lt;/Filter&gt;
&amp;...
</pre></div>
</div>
<p>DWithin spatial filter:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>/cgi-bin/mapserv?map=...
&amp;SERVICE=WMS
&amp;REQUEST=GetMap
&amp;LAYERS=popplace
&amp;FILTER=&lt;Filter&gt;&lt;DWithin&gt;&lt;PropertyName&gt;Geometry&lt;/PropertyName&gt;&lt;gml:Point&gt;&lt;gml:coordinates&gt;-60.18,46.10&lt;/gml:coordinates&gt;&lt;/gml:Point&gt;&lt;Distance units=&#39;dd&#39;&gt;0.05&lt;/Distance&gt;&lt;/DWithin&gt;&lt;/Filter&gt;
&amp;...
</pre></div>
</div>
<p>Filter on multiple layers enclosed in parentheses:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">TODO</span>
</pre></div>
</div>
</div>
<div class="section" id="implementation-details">
<h2>3. Implementation Details<a class="headerlink" href="#implementation-details" title="Link a questa intestazione">¶</a></h2>
<p>The internal WFS GetFeature FILTER handling code is closely tied to the WFS interface. It will have to be made generic in order to be usable by both the WFS and WMS interfaces.</p>
<p>Tests will be added to msautotest for the new feature.</p>
</div>
<div class="section" id="limitations">
<h2>4. Limitations<a class="headerlink" href="#limitations" title="Link a questa intestazione">¶</a></h2>
<p>This will only be implemented for GET requests, and will be subject to the limitation in URL length of the HTTP servers. The exact limit of GET URL length depends on the server configuration.</p>
<p>The use of FILTER in WMS requires previous knowledge of the geometry and attribute column names that would normally be obtained with a WFS DescribeFeatureType.  While this is not strictly required for the FILTER to work on their own in the GetMap request, access to DescribeFeatureType can be provided by enabling the WFS interface on the corresponding layers.</p>
</div>
<div class="section" id="backwards-compatibility-issues">
<h2>5. Backwards Compatibility Issues<a class="headerlink" href="#backwards-compatibility-issues" title="Link a questa intestazione">¶</a></h2>
<p>None anticipated.</p>
</div>
<div class="section" id="security-implications">
<h2>6. Security implications<a class="headerlink" href="#security-implications" title="Link a questa intestazione">¶</a></h2>
<p>None anticipated. If anything, this will generally improve the security of servers which will no longer have to rely on %variable% embedded in their data statements.</p>
</div>
<div class="section" id="performance-implications">
<h2>7. Performance implications<a class="headerlink" href="#performance-implications" title="Link a questa intestazione">¶</a></h2>
<p>No impacts on core performance are anticipated.</p>
</div>
<div class="section" id="documentation-needs">
<h2>8. Documentation needs<a class="headerlink" href="#documentation-needs" title="Link a questa intestazione">¶</a></h2>
<p>Documentation for this vendor-specific parameter will be added to the relevant section of the WMS Server documentation:</p>
<ul class="simple">
<li><a class="reference external" href="http://mapserver.org/ogc/wms_server.html#vendor-specific-wms-parameters">http://mapserver.org/ogc/wms_server.html#vendor-specific-wms-parameters</a></li>
</ul>
</div>
<div class="section" id="bug-id-and-references">
<h2>9. Bug ID and references<a class="headerlink" href="#bug-id-and-references" title="Link a questa intestazione">¶</a></h2>
<ul class="simple">
<li>GeoServer FILTER parameter: <a class="reference external" href="http://docs.geoserver.org/latest/en/user/services/wms/vendor.html#filter">http://docs.geoserver.org/latest/en/user/services/wms/vendor.html#filter</a></li>
</ul>
</div>
<div class="section" id="voting-history">
<h2>10. Voting history<a class="headerlink" href="#voting-history" title="Link a questa intestazione">¶</a></h2>
<p>No vote yet</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3>Ricerca veloce</h3>
    <form class="search" action="../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Vai" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><h3>Navigation</h3>
<p>
<a href="../../about.html" title="About">About</a><br>
<a href="../../products.html" title="Products">Products</a><br>
<a href="../../community/index.html" title="Community">Community</a><br>
<a href="../index.html" title="Development">Development</a><br>
<a href="../../download.html" title="Downloads">Downloads</a><br>
<a href="../../documentation.html" title="Documentation">Documentation</a><br>
<a href="../../faq.html" title="FAQ">FAQ</a><br>
<a href="../../psc.html" title="PSC">PSC</a>
</p>
  <h3>Current Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">MS RFC 118: Support Vendor-Specific OGC FILTER parameter in WMS requests</a><ul>
<li><a class="reference internal" href="#overview">1. Overview</a></li>
<li><a class="reference internal" href="#proposed-solution">2. Proposed solution</a></li>
<li><a class="reference internal" href="#the-wms-filter-parameter">2.1 The WMS FILTER parameter</a></li>
<li><a class="reference internal" href="#examples">2.2 Examples</a></li>
<li><a class="reference internal" href="#implementation-details">3. Implementation Details</a></li>
<li><a class="reference internal" href="#limitations">4. Limitations</a></li>
<li><a class="reference internal" href="#backwards-compatibility-issues">5. Backwards Compatibility Issues</a></li>
<li><a class="reference internal" href="#security-implications">6. Security implications</a></li>
<li><a class="reference internal" href="#performance-implications">7. Performance implications</a></li>
<li><a class="reference internal" href="#documentation-needs">8. Documentation needs</a></li>
<li><a class="reference internal" href="#bug-id-and-references">9. Bug ID and references</a></li>
<li><a class="reference internal" href="#voting-history">10. Voting history</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigazione</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="Indice generale"
             >indice</a></li>
        <li class="right" >
          <a href="ms-rfc-119.html" title="MS RFC 119: Mapbox Vector Tile (MVT) Support"
             >successivo</a> |</li>
        <li class="right" >
          <a href="ms-rfc-117.html" title="MS RFC 117: PHP 7 MapScript Support Through SWIG"
             >precedente</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Development</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >Request for Comments</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; <a href="../../copyright.html">Copyright</a> 2017, Open Source Geospatial Foundation.
      Ultimo aggiornamento 2017-05-10.
      Creato con <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.9.
    </div>
  </body>
</html>