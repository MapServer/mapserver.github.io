<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" lang="it">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>COMPOSITE &#8212; MapServer 7.2.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '7.2.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <link rel="shortcut icon" href="../_static/mapserver.ico"/>
    <link rel="author" title="A proposito di questi documenti" href="../about.html" />
    <link rel="index" title="Indice" href="../genindex.html" />
    <link rel="search" title="Cerca" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="top" title="MapServer 7.2.0 documentation" href="../index.html" />
    <link rel="up" title="Mapfile" href="index.html" />
    <link rel="next" title="Display of International Characters in MapServer" href="encoding.html" />
    <link rel="prev" title="CLUSTER" href="cluster.html" /> 
  </head>
  <body role="document">

<table width="100%" style="width: 100%; background-color: white;">
  <tr>
    <td rowspan="2" style="padding: 10px 0px 10px 10px;">
      <a href="../index.html" title="Home"><img src="../_static/banner.png" alt="MapServer banner" border="0" /></a>
    </td>
    <td style="padding: 10px 10px 0px 0px; text-align: right; vertical-align: top;">
      <a href="../index.html" title="Home">Home</a> |
      <a href="../products.html" title="Products (MapServer core, MapCache, TinyOWS">Products</a> |
      <a href="https://github.com/mapserver/mapserver/issues/" title="Issue Tracker (MapServer core)">Issue Tracker</a> |
      <a href="../community/service_providers.html" title="Professional Service Providers">Service Providers</a> |      
      <a href="../faq.html" title="Frequently Asked Questions">FAQ</a> |
      <a href="https://twitter.com/mapserver_osgeo" title="Twitter">Twitter</a> |
      <a href="../download.html" title="Download Source or Binaries">Download </a>
    </td>
  </tr>
  <tr>
    <td style="padding: 0px 10px 0px 0px; text-align: right; vertical-align: bottom;">
        
          
            <a href="../../mapfile/composite.html"><img src="../_static/flagicons/en.png" alt="en" title="en" border="0" /></a>
          
        
        
          
            <a href="../../ar/mapfile/composite.html"><img src="../_static/flagicons/ar.png" alt="ar" title="ar" border="0" /></a>
          
        
        
          
            <a href="../../de/mapfile/composite.html"><img src="../_static/flagicons/de.png" alt="de" title="de" border="0" /></a>
          
        
        
          
            <a href="../../el/mapfile/composite.html"><img src="../_static/flagicons/el.png" alt="el" title="el" border="0" /></a>
          
        
        
          
            <a href="../../es/mapfile/composite.html"><img src="../_static/flagicons/es.png" alt="es" title="es" border="0" /></a>
          
        
        
          
            <a href="../../fr/mapfile/composite.html"><img src="../_static/flagicons/fr.png" alt="fr" title="fr" border="0" /></a>
          
        
        
          
            <a href="../../id/mapfile/composite.html"><img src="../_static/flagicons/id.png" alt="id" title="id" border="0" /></a>
          
        
        <img src="../_static/flagicons/it.png" alt="it" title="it" border="0" width="18px" height="13px"/>
        
          
            <a href="../../ja/mapfile/composite.html"><img src="../_static/flagicons/ja.png" alt="ja" title="ja" border="0" /></a>
          
        
        
          
            <a href="../../nl_NL/mapfile/composite.html"><img src="../_static/flagicons/nl_NL.png" alt="nl_NL" title="nl_NL" border="0" /></a>
          
        
        
          
            <a href="../../pl/mapfile/composite.html"><img src="../_static/flagicons/pl.png" alt="pl" title="pl" border="0" /></a>
          
        
        
          
            <a href="../../ru/mapfile/composite.html"><img src="../_static/flagicons/ru.png" alt="ru" title="ru" border="0" /></a>
          
        
        
          
            <a href="../../sq/mapfile/composite.html"><img src="../_static/flagicons/sq.png" alt="sq" title="sq" border="0" /></a>
          
        
        
          
            <a href="../../tr/mapfile/composite.html"><img src="../_static/flagicons/tr.png" alt="tr" title="tr" border="0" /></a>
          
        

    </td>
  </tr>
</table>


    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigazione</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Indice generale"
             accesskey="I">indice</a></li>
        <li class="right" >
          <a href="encoding.html" title="Display of International Characters in MapServer"
             accesskey="N">successivo</a> |</li>
        <li class="right" >
          <a href="cluster.html" title="CLUSTER"
             accesskey="P">precedente</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../documentation.html" >MapServer 7.2.0 Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">Mapfile</a> &#187;</li> 
      </ul>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="composite">
<span id="index-0"></span><span id="id1"></span><h1>COMPOSITE<a class="headerlink" href="#composite" title="Link a questa intestazione">¶</a></h1>
<div class="section" id="background">
<h2>Background<a class="headerlink" href="#background" title="Link a questa intestazione">¶</a></h2>
<p>The <cite>COMPOSITE</cite> block is used to achieve blending effects with
MapServer.</p>
<p>Some cartographic renderings benefit from the addition of advanced
blending modes, as explained in detail in <a class="reference external" href="http://en.wikipedia.org/wiki/Blend_modes">Blend Modes</a>.  This
functionality is essential for more pleasant renderings of raster
hillshadings over vector surfaces.  It is also useful for simulating
different kinds of overprinting effects.</p>
<div class="admonition seealso">
<p class="first admonition-title">Vedi anche</p>
<p class="last"><a class="reference internal" href="../development/rfc/ms-rfc-113.html#rfc113"><span class="std std-ref">MS RFC 113: Layer Compositing Pipeline</span></a></p>
</div>
<p>Performance is affected by advanced blending (all modes except
<cite>src-over</cite>).</p>
</div>
<div class="section" id="parameters">
<h2>Parameters<a class="headerlink" href="#parameters" title="Link a questa intestazione">¶</a></h2>
<span id="index-1"></span><dl class="docutils" id="opacity">
<dt>OPACITY [integer]</dt>
<dd>Sets the opacity level (or the inability to see through the layer) of all
classed pixels for a given layer.  A value of 100 is opaque and
0 is fully transparent.</dd>
</dl>
<dl class="docutils" id="index-2">
<dt>COMPOP [string]</dt>
<dd><p class="first">Name of the compositing operator to use when blending the temporary image
onto the main map image. See <cite>http://en.wikipedia.org/wiki/Blend_modes</cite>.
The default compositing operator is &#8220;src-over&#8221;.</p>
<p>Available operators are:</p>
<ul class="simple">
<li><dl class="first docutils">
<dt>clear</dt>
<dd>Both the color and the alpha of the destination are cleared.
Neither the source nor the destination are used. This is an
unusual compose method that essentially ignores the overlay
image completely, and just clears the background image.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>color-burn</dt>
<dd>Divides the inverted bottom layer by the top layer, and then
inverts the result. This darkens the top layer increasing the
contrast to reflect the color of the bottom layer. The darker
the bottom layer, the more its color is used.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>color-dodge</dt>
<dd>Divides the bottom layer by the inverted top layer. This
lightens the bottom layer depending on the value of the top
layer: the brighter the top layer, the more its color affects
the bottom layer. Blending any color with white gives
white. Blending with black does not change the image.</dd>
</dl>
</li>
<li>contrast*</li>
<li><dl class="first docutils">
<dt>darken</dt>
<dd>Creates a image that retains the smallest components of the
foreground and background pixels. If the foreground pixel has
the components r1, g1, and b1, and the background has r2, g2,
b2, the resultant pixel is [min(r1,r2), min(g1,g2), min(b1,b2)]</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>difference</dt>
<dd>Subtracts the bottom layer from the top layer or the other way
round, to always get a positive value. Blending with black
produces no change, as values for all colors are 0. (The RGB
value for black is 0,0,0.) Blending with white inverts the
picture.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>dst</dt>
<dd>This operator does nothing. The source, or overlay image, is
completely ignored and the destination, or background image, is
left unchanged. The method&#8217;s real use is as a means of &#8216;turning
off&#8217; an alpha composition operation in other image operators.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>dst-atop</dt>
<dd>The part of the source lying inside of the destination is
composited onto the destination.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>dst-in</dt>
<dd>The part of the destination lying inside of the source replaces
the destination. Areas not overlaid are cleared. Will remove
the overlay image&#8217;s shape from the background image like a
cookie cutter which cuts out a cookie&#8217;s shape from cookie dough
(result is the cookie).</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>dst-out</dt>
<dd>The part of the destination lying outside of the source
replaces the destination. Using the &#8216;cookie dough&#8217; metaphor of
&#8216;dst-in&#8217; the result of the &#8216;dst-out&#8217; method is the dough that
was left behind once a cookie has been cut out. It can be used
to cut holes, or take bites out of the background image, using
the shape of the overlay. Any color in the overlay is again
completely ignored.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>dst-over</dt>
<dd>The destination is composited over the source and the result
replaces the destination.  Equivalent to placing the source
overlay image &#8216;under&#8217; the destination. The result is that only
the parts of our source or overlay image not hidden by the
destination or background image will be visible as they peek
out from underneath.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>exclusion</dt>
<dd>This is sort of an averaged difference. White on white will
produce black (no difference), the same with black on
black. However grey on grey will produce a grey result. White
and black naturally still produce white (maximum difference).</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>hard-light</dt>
<dd>Hard Light is a combination of Multiply and Screen, each at
half strength. Hard Light effects the blend layer&#8217;s
relationship to the base layer in the same way Overlay effects
the base layer&#8217;s relationship to the blend layer.</dd>
</dl>
</li>
<li>invert*</li>
<li>invert-rgb*</li>
<li><dl class="first docutils">
<dt>lighten</dt>
<dd>Lighten has the opposite action of Darken. It selects the
maximum of each component from the foreground and background
pixels. If the foreground pixel has the components r1, g1, and
b1, and the background has r2, g2, b2, the resultant pixel is
[max(r1,r2), max(g1,g2), max(b1,b2)]</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>minus*</dt>
<dd>Subtract the colors in the source image from the destination
image. When transparency is involved, opaque areas is
subtracted from any destination opaque areas.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>multiply</dt>
<dd>A simple multiply of the two images. Its formula is: [Src *
Dest]. This means that if one of the images is pure white, the
result will be the other image. On the other hand if one image
is black the result will be black. Between these extremes one
image will darken the destination image by the amount
given. Note that &#8216;Multiply&#8217; will only darken an image, it will
never brighten it. That is, it &#8216;attenuates&#8217; an image toward
black, which makes this compose method a &#8216;Burn&#8217; style of
composition.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>overlay</dt>
<dd>Overlay combines Multiply and Screen blend modes, at half
strength. The parts of the top layer where the base layer is
light become lighter, the parts where the base layer is dark
become darker. Areas where the top layer are mid grey are
unaffected.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>plus</dt>
<dd>The source is added to the destination and replaces the
destination. This operator is useful for averaging or a
controlled merger of two images, rather than a direct overlay.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>screen</dt>
<dd>The source and destination are complemented and then multiplied
and then replace the destination. The resultant color is always
at least as light as either of the two constituent
colors. Screening any color with white produces
white. Screening any color with black leaves the original color
unchanged.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>soft-light</dt>
<dd>Soft light is most closely related to Overlay and is only
similar to Hard Light by name. Will add highlights and shadows
to an existing color image. However, the colors of the
destination image are modified to produce a softer contrast,
and smoother gradient in lighting effects.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>src</dt>
<dd>The source is copied to the destination. The destination is not
used as input, though it is cleared. This operator completely
replaces the background image with the overlay image. The
colors and transparency in the background are completely junked
leaving a blank image the same size as the original destination
over which is applied the source image.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>src-atop</dt>
<dd>The part of the source lying inside of the destination is
composited onto the destination. Like &#8216;src-over&#8217; but limits the
result to the original shape of the background image. In other
words, the alpha channel on the destination is unchanged but
the image colors are overlaid by any non-transparent parts of
the source image. If the background image is fully opaque (no
transparency), this operation will act exactly like the normal
&#8216;src-over&#8217; composition. It only differs when the background
contains transparency which also clips the overlay. What makes
this useful is for overlaying lighting and shading effects that
are limited to the object (shape) of the destination.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>src-in</dt>
<dd>The part of the source lying inside of the destination replaces
the destination.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>src-out</dt>
<dd>The part of the source lying outside of the destination
replaces the destination.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>src-over</dt>
<dd>The source is composited over the destination. This is the
default composite option if no other is specified.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>xor</dt>
<dd>The part of the source that lies outside of the destination is
combined with the part of the destination that lies outside of
the source. Source or Destination, but not both.</dd>
</dl>
</li>
</ul>
<p class="last">Operators marked with a star (*) will only be supported when using an AGG
backends <em>and</em> when pixman support is not enabled, and will fall back to
&#8220;src-over&#8221; when this is not the case.</p>
</dd>
</dl>
</div>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Link a questa intestazione">¶</a></h2>
<p>Simple transparency / opacity is achieved by only specifying the
<cite>OPACITY</cite> parameter (this achieves the same effect as the legacy
<cite>LAYER</cite> <cite>OPACITY</cite> parameter):</p>
<div class="highlight-mapfile"><div class="highlight"><pre><span></span><span class="k">LAYER</span>
  <span class="k">COMPOSITE</span>
    <span class="k">OPACITY</span> <span class="mi">70</span>
  <span class="k">END</span> <span class="c"># COMPOSITE</span>
<span class="p">...</span>
<span class="k">END</span> <span class="c"># LAYER</span>
</pre></div>
</div>
<p>The darkening effect is achieved by adding the <cite>COMPOP</cite> parameter with
the value <cite>darken</cite>:</p>
<div class="highlight-mapfile"><div class="highlight"><pre><span></span><span class="k">LAYER</span>
  <span class="k">COMPOSITE</span>
    <span class="k">OPACITY</span> <span class="mi">100</span>
    <span class="k">COMPOP</span> <span class="s">&quot;darken&quot;</span>
  <span class="k">END</span> <span class="c"># COMPOSITE</span>
<span class="p">...</span>
<span class="k">END</span> <span class="c"># LAYER</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3>Ricerca veloce</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Vai" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><h3>Navigation</h3>
<p>
<a href="../about.html" title="About">About</a><br>
<a href="../products.html" title="Products">Products</a><br>
<a href="../community/index.html" title="Community">Community</a><br>
<a href="../development/index.html" title="Development">Development</a><br>
<a href="../download.html" title="Downloads">Downloads</a><br>
<a href="../documentation.html" title="Documentation">Documentation</a><br>
<a href="../faq.html" title="FAQ">FAQ</a><br>
<a href="../psc.html" title="PSC">PSC</a><br>
<a href="https://twitter.com/mapserver_osgeo" title="Twitter">Twitter</a>
</p>
  <h3>Current Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">COMPOSITE</a><ul>
<li><a class="reference internal" href="#background">Background</a></li>
<li><a class="reference internal" href="#parameters">Parameters</a></li>
<li><a class="reference internal" href="#usage">Usage</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigazione</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Indice generale"
             >indice</a></li>
        <li class="right" >
          <a href="encoding.html" title="Display of International Characters in MapServer"
             >successivo</a> |</li>
        <li class="right" >
          <a href="cluster.html" title="CLUSTER"
             >precedente</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../documentation.html" >MapServer 7.2.0 Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >Mapfile</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; <a href="../copyright.html">Copyright</a> 2018, Open Source Geospatial Foundation.
      Ultimo aggiornamento 2018-07-30.
      Creato con <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.9.
    </div>
  </body>
</html>