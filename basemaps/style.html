<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Tweaking Map Styles &#8212; MapServer 8.0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx.css?v=6c7b17ac" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=dd298242" />
    <link rel="stylesheet" type="text/css" href="../_static/ribbon.css?v=ea091bf4" />
    
    <script src="../_static/documentation_options.js?v=521b6f53"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    
    <link rel="icon" href="../_static/mapserver.ico"/>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="TinyOWS" href="../tinyows/index.html" />
    <link rel="prev" title="Installation" href="install.html" /> 
  </head><body>


<!-- for main branch only, do not backport this -->

<table width="100%" style="width: 100%; background-color: white;">
  <tr>
    <td rowspan="2" style="padding: 10px 0px 10px 10px;">
      <a href="../index.html" title="Home"><img src="../_static/banner.png" alt="MapServer banner" border="0" /></a>
    </td>
    <td style="padding: 10px 10px 0px 0px; text-align: right; vertical-align: top;">
      <a href="../index.html" title="Home">Home</a> |
      <a href="../products.html" title="Products (MapServer core, MapCache, TinyOWS">Products</a> |
      <a href="https://github.com/mapserver/mapserver/issues/" title="Issue Tracker (MapServer core)">Issue Tracker</a> |
      <a href="../community/service_providers.html" title="Professional Service Providers">Service Providers</a> |      
      <a href="../faq.html" title="Frequently Asked Questions">FAQ</a> |
      <a href="https://twitter.com/mapserver_osgeo" title="Twitter" target="_blank">Twitter</a> |
      <a href="../download.html" title="Download Source or Binaries">Download </a> |
      <a class="badge" href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=KRJ2X44N3HA6U&source=url" target="_blank">
        <img src="https://img.shields.io/badge/donate-%E2%9D%A4%C2%A0-ff69b4.svg?style=flat" alt="Donate to MapServer">
      </a>
    </td>
  </tr>
  <tr>
    <td style="padding: 0px 10px 0px 0px; text-align: right; vertical-align: bottom;">
        <img src="../_static/flagicons/en.png" alt="en" title="en" border="0" width="18px" height="13px"/>
        
          <a href="../ar/basemaps/style.html"><img src="../_static/flagicons/ar.png" alt="ar" title="ar" border="0" /></a>
        
        
          <a href="../de/basemaps/style.html"><img src="../_static/flagicons/de.png" alt="de" title="de" border="0" /></a>
        
        
          <a href="../el/basemaps/style.html"><img src="../_static/flagicons/el.png" alt="el" title="el" border="0" /></a>
        
        
          <a href="../es/basemaps/style.html"><img src="../_static/flagicons/es.png" alt="es" title="es" border="0" /></a>
        
        
          <a href="../fr/basemaps/style.html"><img src="../_static/flagicons/fr.png" alt="fr" title="fr" border="0" /></a>
        
        
          <a href="../id/basemaps/style.html"><img src="../_static/flagicons/id.png" alt="id" title="id" border="0" /></a>
        
        
          <a href="../it/basemaps/style.html"><img src="../_static/flagicons/it.png" alt="it" title="it" border="0" /></a>
        
        
          <a href="../ja/basemaps/style.html"><img src="../_static/flagicons/ja.png" alt="ja" title="ja" border="0" /></a>
        
        
          <a href="../nl_NL/basemaps/style.html"><img src="../_static/flagicons/nl_NL.png" alt="nl_NL" title="nl_NL" border="0" /></a>
        
        
          <a href="../pl/basemaps/style.html"><img src="../_static/flagicons/pl.png" alt="pl" title="pl" border="0" /></a>
        
        
          <a href="../ru/basemaps/style.html"><img src="../_static/flagicons/ru.png" alt="ru" title="ru" border="0" /></a>
        
        
          <a href="../sq/basemaps/style.html"><img src="../_static/flagicons/sq.png" alt="sq" title="sq" border="0" /></a>
        
        
          <a href="../tr/basemaps/style.html"><img src="../_static/flagicons/tr.png" alt="tr" title="tr" border="0" /></a>
        

    </td>
  </tr>
</table>


    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../tinyows/index.html" title="TinyOWS"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="install.html" title="Installation"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../documentation.html" >MapServer 8.0.1 Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">Basemaps</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Tweaking Map Styles</a></li> 
      </ul>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="tweaking-map-styles">
<span id="basemaps-style"></span><h1><a class="toc-backref" href="#table-of-contents" role="doc-backlink">Tweaking Map Styles</a><a class="headerlink" href="#tweaking-map-styles" title="Link to this heading">¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd">Author<span class="colon">:</span></dt>
<dd class="field-odd"><p>Nicolas Ribot</p>
</dd>
</dl>
<nav class="contents" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#tweaking-map-styles" id="id1">Tweaking Map Styles</a></p>
<ul>
<li><p><a class="reference internal" href="#generating-a-mapfile" id="id2">Generating a mapfile</a></p>
<ul>
<li><p><a class="reference internal" href="#makefile" id="id3">Makefile</a></p></li>
<li><p><a class="reference internal" href="#the-generate-style-py-script" id="id4">The generate_style.py script</a></p></li>
<li><p><a class="reference internal" href="#structure-of-parameters-in-generate-style-py" id="id5">Structure of parameters in generate_style.py</a></p></li>
<li><p><a class="reference internal" href="#supported-map-styles" id="id6">Supported map styles</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
<p>This page contains information about the way to tweak map styles using the
MapServer/basemaps project.</p>
<p>Prior to using this version of MapServer/basemaps, you have to import OSM map
data into a postgis database using the imposm tool. See <a class="reference internal" href="install.html#basemaps-install"><span class="std std-ref">Installation</span></a>
to know how to set up easily your project.</p>
<section id="generating-a-mapfile">
<h2><a class="toc-backref" href="#table-of-contents" role="doc-backlink">Generating a mapfile</a><a class="headerlink" href="#generating-a-mapfile" title="Link to this heading">¶</a></h2>
<p>The mapfile called osm-_STYLE_.map is generated by executing the ‘make’ command
based on the settings at the top of the Makefile.</p>
<section id="makefile">
<h3><a class="toc-backref" href="#table-of-contents" role="doc-backlink">Makefile</a><a class="headerlink" href="#makefile" title="Link to this heading">¶</a></h3>
<p>The following parameters are configurable at the top of the Makefile:</p>
<ul class="simple">
<li><p><cite>OSM_PREFIX</cite>: the prefix of the table names in the postgis database</p></li>
<li><p><cite>OSM_SRID</cite>: EPSG code of the mapfile’s output projection (common values are
4326 for lon,lat and 900913 for the Google Mercator projection)</p></li>
<li><p><cite>OSM_UNITS</cite>: MapServer units corresponding to the OSM_SRID (common values:
DD or METERS)</p></li>
<li><p><cite>OSM_DB_CONNECTION</cite>: MapServer CONNECTION string to the OSM database</p></li>
<li><p><cite>OSM_EXTENT</cite>: Default extents to use in the generated mapfile (in the same
coordinate system as OSM_SRID)</p></li>
<li><p><cite>STYLE</cite>: Name of the map style to generate. Three styles are available to
choose from by default: default, google and bing</p></li>
</ul>
</section>
<section id="the-generate-style-py-script">
<h3><a class="toc-backref" href="#table-of-contents" role="doc-backlink">The generate_style.py script</a><a class="headerlink" href="#the-generate-style-py-script" title="Link to this heading">¶</a></h3>
<p>The <cite>generate_style.py</cite> script contains the value of all configurable style
parameters.</p>
<p>At the top of the file, the <cite>vars</cite> array defines the default values of all
configurable parameters. Those values are used by the <cite>default</cite> style.</p>
<p>Then the <cite>style</cite> array that follows can be used to define custom styles. A
custom style inherits the settings of the default style (from the vars array),
and then all values set for that style in the <cite>styles</cite> array override default
values. Several sample custom styles are provided as examples (see Supported
Map Styles chapter)</p>
</section>
<section id="structure-of-parameters-in-generate-style-py">
<h3><a class="toc-backref" href="#table-of-contents" role="doc-backlink">Structure of parameters in generate_style.py</a><a class="headerlink" href="#structure-of-parameters-in-generate-style-py" title="Link to this heading">¶</a></h3>
<p>For each configurable style parameter, the value can either be a single value
applicable to all map scales (map scales are defined at the top of the file),
or an associative array of values where the key is the corresponding scale, and
the value is the value applicable to this scale and all scales that follow up
to the next entry in the array.</p>
<p>e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;stream_clr&#39;</span><span class="p">:</span> <span class="s1">&#39;&quot;#B3C6D4&quot;&#39;</span><span class="p">,</span>
<span class="s1">&#39;stream_font&#39;</span><span class="p">:</span> <span class="s2">&quot;sc&quot;</span><span class="p">,</span>
</pre></div>
</div>
<p>In this example, <cite>stream_clr</cite> and <cite>stream_font</cite> have values of “#B3C6D4” and
“sc” respectively for all scales.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;stream_width&#39;</span><span class="p">:</span> <span class="p">{</span>
   <span class="mi">0</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="mi">10</span><span class="p">:</span><span class="mf">0.5</span><span class="p">,</span>
   <span class="mi">12</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
   <span class="mi">14</span><span class="p">:</span><span class="mi">2</span>
<span class="p">},</span>
</pre></div>
</div>
<p>In this case <cite>stream_width</cite> has a value of 0 for scales 0 to 9, 0.5 for scales
10-11, 1 for scales 12-13, and 2 for scales 14 and up.</p>
</section>
<section id="supported-map-styles">
<h3><a class="toc-backref" href="#table-of-contents" role="doc-backlink">Supported map styles</a><a class="headerlink" href="#supported-map-styles" title="Link to this heading">¶</a></h3>
<p>The <cite>generate_styles.py</cite> file defines base styles in the styles object.</p>
<p>Final styles generated by the <cite>make</cite> command are defined in the <cite>styles_alias</cite>
object, allowing to define a final style based on several base styles.</p>
<p>For instance, the google style is defined by the combination of default,
outlined and google base styles.</p>
<p>The outlined style overloads default style to add custom outline around way and
the google style overloads default for object colors.</p>
<section id="base-styles">
<h4>base styles<a class="headerlink" href="#base-styles" title="Link to this heading">¶</a></h4>
<p>The following base styles are defined in <cite>generate_styles.py</cite>:</p>
<ul class="simple">
<li><p><cite>default</cite>: a map style with no road casing and few colors, suited for using as a basemap when overlaying other layers without risk of confusion between layers.</p></li>
<li><p><cite>outlined</cite>: a style adding outline around ways</p></li>
<li><p><cite>centerlined</cite>: a style adding center line for ways</p></li>
<li><p><cite>google</cite>: a style resembling the google-maps theme</p></li>
<li><p><cite>googleosm2pgsql</cite>: a style resembling the google-maps theme, but using data coming from an osm2pgsql schema rather than imposm</p></li>
<li><p><cite>bing</cite>: a style resembling the Bing-maps theme</p></li>
<li><p><cite>michelin</cite>: a style resembling the Michelin-maps theme</p></li>
<li><p><cite>grayscale</cite>: gray scale colors</p></li>
<li><p><cite>symbols</cite>: a style adding symbols and labels for amenities, transportation (metro, bus, tramway, carparks). PNG symbols are based on SVG OSM symbols</p></li>
<li><p><cite>labels_only</cite>: a style displaying only labels on a transparent background</p></li>
<li><p><cite>geoms_only</cite>: a style displaying only geometries, without any label or symbol</p></li>
<li><p><cite>symbols_only</cite>: a style displaying only symbols and labels, without geometries</p></li>
<li><p><cite>buildings</cite>: a style displaying buildings (OSM polygons with tag building=yes) at zoom level &gt;= 15</p></li>
</ul>
</section>
<section id="sample-final-styles">
<h4>sample final styles<a class="headerlink" href="#sample-final-styles" title="Link to this heading">¶</a></h4>
<p>Based on the defined base styles, the following styles are available when
running make command to generate mapfiles (style alias name and base style
combination are shown)</p>
<ul class="simple">
<li><p>default: default</p></li>
<li><p>google: default,outlined,google</p></li>
<li><p>googleosm2pgsql: default,outlined,google,osm2pgsql</p></li>
<li><p>bing: default,outlined,bing</p></li>
<li><p>michelin: default,outlined,centerlined,michelin</p></li>
<li><p>default-symbols: default,symbols</p></li>
<li><p>default-grayscale: default,outlined,grayscale</p></li>
<li><p>google-buildings-symbols: default,outlined,google,symbols,buildings</p></li>
<li><p>google-buildings-symbols-grayscale: default,outlined,google,symbols,buildings,grayscale</p></li>
<li><p>bing-buildings-symbols: default,outlined,bing,symbols,buildings</p></li>
<li><p>bing-buildings-symbols-grayscale: default,outlined,bing,symbols,buildings,grayscale</p></li>
<li><p>michelin-buildings-symbols: default,outlined,michelin,symbols,buildings</p></li>
<li><p>michelin-buildings-symbols-grayscale: default,outlined,michelin,symbols,buildings,grayscale</p></li>
<li><p>google-no-labels: default,outlined,google,geoms_only,buildings</p></li>
<li><p>google-no-labels-grayscale: default,outlined,google,geoms_only,buildings,grayscale</p></li>
<li><p>google-labels-only: default,outlined,google,labels_only</p></li>
<li><p>symbols-only: symbols,symbols_only</p></li>
</ul>
<section id="google-style">
<h5>Google style<a class="headerlink" href="#google-style" title="Link to this heading">¶</a></h5>
<p><strong>Colorfull Default Style basemaps</strong></p>
<img alt="../_images/default_style.png" class="no-scaled-link" src="../_images/default_style.png" style="width: 500px;" />
<p><strong>Colorfull Google Style basemaps</strong></p>
<img alt="../_images/google_style.png" class="no-scaled-link" src="../_images/google_style.png" style="width: 500px;" />
<p><strong>Black and white Google Style basemaps</strong></p>
<img alt="../_images/google_style_bw.png" class="no-scaled-link" src="../_images/google_style_bw.png" style="width: 500px;" />
<p><strong>Colorfull Bing Style basemaps</strong></p>
<img alt="../_images/bing_style.png" class="no-scaled-link" src="../_images/bing_style.png" style="width: 500px;" />
<p><strong>Colorfull Michelin Style basemaps</strong></p>
<img alt="../_images/michelin_style.png" class="no-scaled-link" src="../_images/michelin_style.png" style="width: 500px;" />
</section>
</section>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p>
<a href="../about.html" title="About">About</a><br>
<a href="../products.html" title="Products">Products</a><br>
<a href="../community/index.html" title="Community">Community</a><br>
<a href="../development/index.html" title="Development">Development</a><br>
<a href="../download.html" title="Downloads">Downloads</a><br>
<a href="../documentation.html" title="Documentation">Documentation</a><br>
<a href="../faq.html" title="FAQ">FAQ</a><br>
<a href="../psc.html" title="PSC">PSC</a><br>
<a href="https://twitter.com/mapserver_osgeo" title="Twitter">Twitter</a>
</p>
  <h3>Current Table Of Contents</h3>
  <ul>
<li><a class="reference internal" href="#">Tweaking Map Styles</a><ul>
<li><a class="reference internal" href="#generating-a-mapfile">Generating a mapfile</a><ul>
<li><a class="reference internal" href="#makefile">Makefile</a></li>
<li><a class="reference internal" href="#the-generate-style-py-script">The generate_style.py script</a></li>
<li><a class="reference internal" href="#structure-of-parameters-in-generate-style-py">Structure of parameters in generate_style.py</a></li>
<li><a class="reference internal" href="#supported-map-styles">Supported map styles</a><ul>
<li><a class="reference internal" href="#base-styles">base styles</a></li>
<li><a class="reference internal" href="#sample-final-styles">sample final styles</a><ul>
<li><a class="reference internal" href="#google-style">Google style</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../tinyows/index.html" title="TinyOWS"
             >next</a> |</li>
        <li class="right" >
          <a href="install.html" title="Installation"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../documentation.html" >MapServer 8.0.1 Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >Basemaps</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Tweaking Map Styles</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; <a href="../copyright.html">Copyright</a> 2023, Open Source Geospatial Foundation.
      Last updated on 2023-12-22.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.5.
    </div>
  </body>
</html>