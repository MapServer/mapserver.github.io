<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>ArcSDE &#8212; MapServer 8.0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx.css?v=6c7b17ac" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=dd298242" />
    <link rel="stylesheet" type="text/css" href="../../_static/ribbon.css?v=ea091bf4" />
    
    <script src="../../_static/documentation_options.js?v=521b6f53"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    
    <link rel="icon" href="../../_static/mapserver.ico"/>
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="copyright" title="Copyright" href="../../copyright.html" />
    <link rel="next" title="Contour" href="contour.html" />
    <link rel="prev" title="ArcInfo" href="ArcInfo.html" /> 
  </head><body>


<!-- for main branch only, do not backport this -->

<table width="100%" style="width: 100%; background-color: white;">
  <tr>
    <td rowspan="2" style="padding: 10px 0px 10px 10px;">
      <a href="../../index.html" title="Home"><img src="../../_static/banner.png" alt="MapServer banner" border="0" /></a>
    </td>
    <td style="padding: 10px 10px 0px 0px; text-align: right; vertical-align: top;">
      <a href="../../index.html" title="Home">Home</a> |
      <a href="../../products.html" title="Products (MapServer core, MapCache, TinyOWS">Products</a> |
      <a href="https://github.com/mapserver/mapserver/issues/" title="Issue Tracker (MapServer core)">Issue Tracker</a> |
      <a href="../../community/service_providers.html" title="Professional Service Providers">Service Providers</a> |      
      <a href="../../faq.html" title="Frequently Asked Questions">FAQ</a> |
      <a href="https://twitter.com/mapserver_osgeo" title="Twitter" target="_blank">Twitter</a> |
      <a href="../../download.html" title="Download Source or Binaries">Download </a> |
      <a class="badge" href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=KRJ2X44N3HA6U&source=url" target="_blank">
        <img src="https://img.shields.io/badge/donate-%E2%9D%A4%C2%A0-ff69b4.svg?style=flat" alt="Donate to MapServer">
      </a>
    </td>
  </tr>
  <tr>
    <td style="padding: 0px 10px 0px 0px; text-align: right; vertical-align: bottom;">
        <img src="../../_static/flagicons/en.png" alt="en" title="en" border="0" width="18px" height="13px"/>
        
          <a href="../../ar/input/vector/arcsde.html"><img src="../../_static/flagicons/ar.png" alt="ar" title="ar" border="0" /></a>
        
        
          <a href="../../de/input/vector/arcsde.html"><img src="../../_static/flagicons/de.png" alt="de" title="de" border="0" /></a>
        
        
          <a href="../../el/input/vector/arcsde.html"><img src="../../_static/flagicons/el.png" alt="el" title="el" border="0" /></a>
        
        
          <a href="../../es/input/vector/arcsde.html"><img src="../../_static/flagicons/es.png" alt="es" title="es" border="0" /></a>
        
        
          <a href="../../fr/input/vector/arcsde.html"><img src="../../_static/flagicons/fr.png" alt="fr" title="fr" border="0" /></a>
        
        
          <a href="../../id/input/vector/arcsde.html"><img src="../../_static/flagicons/id.png" alt="id" title="id" border="0" /></a>
        
        
          <a href="../../it/input/vector/arcsde.html"><img src="../../_static/flagicons/it.png" alt="it" title="it" border="0" /></a>
        
        
          <a href="../../ja/input/vector/arcsde.html"><img src="../../_static/flagicons/ja.png" alt="ja" title="ja" border="0" /></a>
        
        
          <a href="../../nl_NL/input/vector/arcsde.html"><img src="../../_static/flagicons/nl_NL.png" alt="nl_NL" title="nl_NL" border="0" /></a>
        
        
          <a href="../../pl/input/vector/arcsde.html"><img src="../../_static/flagicons/pl.png" alt="pl" title="pl" border="0" /></a>
        
        
          <a href="../../ru/input/vector/arcsde.html"><img src="../../_static/flagicons/ru.png" alt="ru" title="ru" border="0" /></a>
        
        
          <a href="../../sq/input/vector/arcsde.html"><img src="../../_static/flagicons/sq.png" alt="sq" title="sq" border="0" /></a>
        
        
          <a href="../../tr/input/vector/arcsde.html"><img src="../../_static/flagicons/tr.png" alt="tr" title="tr" border="0" /></a>
        

    </td>
  </tr>
</table>


    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="contour.html" title="Contour"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="ArcInfo.html" title="ArcInfo"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../documentation.html" >MapServer 8.0.1 Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../index.html" >Data Input</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="index.html" accesskey="U">Vector Data</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">ArcSDE</a></li> 
      </ul>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="arcsde">
<span id="id1"></span><h1>ArcSDE<a class="headerlink" href="#arcsde" title="Link to this heading">¶</a></h1>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>MapServer’s native SDE driver was removed for the MapServer 7.0 release
(see <a class="reference external" href="http://lists.osgeo.org/pipermail/mapserver-dev/2015-February/014349.html">discussion</a>).
GDAL’s ArcSDE drivers were removed in the GDAL <a class="reference external" href="https://lists.osgeo.org/pipermail/gdal-announce/2020-November/000085.html">3.2.0 release</a>.</p>
</div>
<p>Spatial Database Engine (SDE) is one of <a class="reference external" href="http://www.esri.com">ESRI</a>’s  products which enables
spatial data to be stored, managed, and quickly retrieved from leading
commercial database management systems like Oracle, Microsoft SQL Server,
Sybase, IBM DB2, and Informix.</p>
<section id="supported-arcsde-operations">
<h2>Supported ArcSDE Operations<a class="headerlink" href="#supported-arcsde-operations" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>Versioned queries (query geometry and attributes from a specified version)</p></li>
<li><p>queryByAttributes (select geometry and attributes based on the
values of an attribute)</p></li>
<li><p>Limited join support for within-database tables&lt;/li&gt;</p></li>
<li><p>queryByRect (select geometry based on an extent)</p></li>
<li><p>Projection on the fly</p></li>
<li><p>SDE for Coverages (a read-only type of SDE for coverage,
shapefile, and ArcStorm/ArcLibrarian repositories)</p></li>
<li><p>SDE 8.1, 8.2, 8.3, 9.0, 9.1, and 9.2</p></li>
<li><p>Linux, Windows, and Solaris (platforms that have SDE C API support)</p></li>
</ul>
</section>
<section id="unsupported-arcsde-operations">
<h2>Unsupported ArcSDE Operations<a class="headerlink" href="#unsupported-arcsde-operations" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>queryByShape (pass in a shape with MapScript and use it for queries)</p></li>
<li><p>Direct Connect (bypass SDE to connect directly to the database with the SDE C API)</p></li>
</ul>
</section>
<section id="how-to-make-a-connection-to-sde">
<h2>How to make a connection to SDE:<a class="headerlink" href="#how-to-make-a-connection-to-sde" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>Install the SDE C API client libraries for your platform (preferably
matched to the server version you are using, ie 8.2 client -&gt; 8.2 server,
8.3 client -&gt; 8.3 server)</p></li>
<li><p>Compile MapServer with SDE support
<a class="reference internal" href="../../installation/unix.html#unix"><span class="std std-ref">MapServer Unix Compilation Howto</span></a> for specific details)</p></li>
<li><p>Define a LAYER block in a MapFile that uses SDE as the CONNECTIONTYPE</p></li>
</ul>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">LAYER</span>
  <span class="k">NAME</span>         <span class="err">states</span>
  <span class="k">TYPE</span>         <span class="nb">POLYGON</span>
  <span class="k">CONNECTION</span> <span class="s">&quot;sdemachine.iastate.edu,port:5151,sde,username,password&quot;</span>
  <span class="k">CONNECTIONTYPE</span> <span class="nb">SDE</span>
  <span class="k">DATA</span> <span class="s">&quot;HOBU.STATES_LAYER,SHAPE,SDE.DEFAULT&quot;</span>
  <span class="k">FILTER</span> <span class="s">&quot;where MYCOLUMN is not NULL&quot;</span>
  <span class="k">PROCESSING</span> <span class="s">&quot;QUERYORDER=ATTRIBUTE&quot;</span> <span class="c"># &lt;-- MapServer 4.10 and above</span>

  <span class="c"># Within database one-to-one join support</span>

  <span class="c"># MapServer 5.0 and above</span>
  <span class="k">PROCESSING</span> <span class="s">&quot;JOINTABLE=SDE_MASTER.GEOSERVWRITE.JOINTABLE&quot;</span>

  <span class="c"># MapServer 5.0 and above</span>
  <span class="k">CLASSITEM</span> <span class="s">&quot;SDE_MASTER.GEOSERVWRITE.JOINTABLE.VAL&quot;</span>

  <span class="c"># MapServer 5.0 and above</span>
  <span class="k">FILTER</span> <span class="s">&quot;SDE_MASTER.GEOSERVWRITE.JOINTABLE.AQ_TAG=SDE_MASTER.GEOSERVWRITE.JOINTESTLAYER.AQ_TAG&quot;</span>

  <span class="c"># ObjectID column manipulation</span>
  <span class="c"># MapServer 5.0 and above</span>
  <span class="k">PROCESSING</span> <span class="s">&quot;OBJECTID=OBJECTID&quot;</span>

  <span class="k">TEMPLATE</span> <span class="s">&#39;/where/the/template/file/is/located&#39;</span>
  <span class="k">CLASS</span>
      <span class="k">STYLE</span>
              <span class="k">SYMBOL</span> <span class="s">&#39;circle&#39;</span>
              <span class="k">SIZE</span> <span class="mi">3</span>
              <span class="k">COLOR</span> <span class="p">-</span><span class="mi">1</span> <span class="p">-</span><span class="mi">1</span> <span class="p">-</span><span class="mi">1</span>
              <span class="k">OUTLINECOLOR</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span>
      <span class="k">END</span>
  <span class="k">END</span>
<span class="k">END</span>
</pre></div>
</div>
<section id="connection-order-is-important">
<h3>CONNECTION - Order is important!<a class="headerlink" href="#connection-order-is-important" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><strong>sdemachine.iastate.edu</strong> - The name of the machine you are connecting to.
In some instances, this may need to be the IP address of the machine rather
than the name if the server running MapServer is not configured to cascade
DNS lookups</p></li>
<li><p><strong>port:5151</strong> - The port number of SDE. The <em>port:</em> is important as SDE
expects you to define the <strong>service</strong> in this slot, and it can be other
names like <strong>sde:oracle</strong> (for direct connect) or <strong>esri_sde</strong> (for systems
with port 5151 defined as esri_sde in /etc/services)</p></li>
<li><p><strong>sde</strong> - The database username that the SDE server is using to connect to
your database. It is often only important for SDE setups that are connecting
to Oracle (and even then, not so important). Just leave it as <strong>sde</strong> if you
don’t know what it should be.</p></li>
<li><p><strong>username</strong> - The username that will be connecting to SDE. This user must
have been granted rights to select the layer that you will be specifying in
the <em>DATA</em> directive. You can use ArcCatalog or the SDE command-line
utilities to grant the appropriate rights to layers.</p></li>
<li><p><strong>password</strong> - Password of the user connecting to SDE.  <strong>Case Sensitive</strong>.</p></li>
</ul>
</section>
<section id="data-order-is-important">
<h3>DATA - Order is important!<a class="headerlink" href="#data-order-is-important" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><strong>HOBU.STATES_LAYER</strong> - The layer name you are querying. This the <em>full</em>
name of the table in which the layer resides. If you are using Oracle or
Microsoft SQL Server as the DB for SDE, the schema name must also be
supplied.</p></li>
<li><p><strong>SHAPE</strong> - The column that contains the geometry. SDE technically allows
for storage of multiple geometry types in the same layer, but in practice
this isn’t desirable. Also, expect to have problems if there are invalid or
null geometries in the layer (or versions of the layer).</p></li>
<li><p><strong>SDE.DEFAULT</strong> - As of MapServer 4.2, you can query against a specific
version of the layer. SDE supports multi-user editing with versions. If a
layer has been Registered with the GeoDatabase and Registered as Versioned
(ArcGIS terms), MapServer can query against specified versions of those
edits. If not specified, <em>SDE.DEFAULT</em> will be used for all queries. <strong>Case
Sensitive</strong>.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The version parameter is located in a different spot than MapServer 4.2,
which had it on the CONNECTION string.</p>
</div>
</section>
<section id="template">
<h3>TEMPLATE<a class="headerlink" href="#template" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><strong>/where/the/template/file/is/located</strong> - A template directive must be
specified (can point to a dummy file) in order for MapServer to be able to
query attributes from SDE.  If you are only going to be drawing layers,
this directive is unnecessary and will slow down the query operations of
SDE (especially for layers with lots of attribute columns).</p></li>
</ul>
</section>
<section id="processing">
<h3>PROCESSING<a class="headerlink" href="#processing" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><strong>PROCESSING “QUERYORDER=ATTRIBUTE”</strong> - Allows you to force SDE to use the
WHERE clause that was defined in your FILTER statement first, without
attempting to hit the spatial index.  Only in very special cases will
you want to do this.</p></li>
<li><p><strong>PROCESSING “OBJECTID=OBJECTID”</strong> - If you are having trouble with the
SDE driver detecting your unique ID column, you can override it with
this processing parameter.  Doing so will also have a slight performance
benefit because it will save a couple of extra queries to the database.</p></li>
<li><p><strong>PROCESSING “ATTRIBUTE_QUALIFIED=TRUE”</strong> - User can set this option to
always use fully qualified attribute names.</p></li>
</ul>
</section>
<section id="within-database-join-support">
<h3>Within-database Join Support<a class="headerlink" href="#within-database-join-support" title="Link to this heading">¶</a></h3>
<p>MapServer’s SDE driver, as of MapServer 5.0, allows you to join a single
attribute table that has no geometries to the layer that you are rendering.
This feature allows you to use the data in the joined table much as you would
in a composite query that was made with something like PostGIS or Oracle
Spatial. That is, the columns in the right table of the join are available for
CLASSITEM, LABELITEM and so on. The biggest constraint, however, is that
<strong>fully qualified</strong> names must be used or it most likely will not work. The
join support is activated through PROCESSING options.</p>
<ul class="simple">
<li><p><strong>PROCESSING “JOINTABLE=SDE_MASTER.GEOSERVWRITE.JOINTABLE”</strong> - The JOINTABLE
processing option tells the driver which table you are joining the current
layer to.</p></li>
<li><p><strong>CLASSITEM “SDE_MASTER.GEOSERVWRITE.JOINTABLE.VAL”</strong> - A CLASSITEM or
LABELITEM for a joined table using this mechanism must be fully qualified.</p></li>
<li><p><strong>FILTER “SDE_MASTER.GEOSERVWRITE.JOINTABLE.AQ_TAG=SDE_MASTER.GEOSERVWRITE.JOINTESTLAYER.AQ_TAG”</strong> -
An important part of the join is defining how the join is to be made.
Use a FILTER to do so.</p></li>
</ul>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p>
<a href="../../about.html" title="About">About</a><br>
<a href="../../products.html" title="Products">Products</a><br>
<a href="../../community/index.html" title="Community">Community</a><br>
<a href="../../development/index.html" title="Development">Development</a><br>
<a href="../../download.html" title="Downloads">Downloads</a><br>
<a href="../../documentation.html" title="Documentation">Documentation</a><br>
<a href="../../faq.html" title="FAQ">FAQ</a><br>
<a href="../../psc.html" title="PSC">PSC</a><br>
<a href="https://twitter.com/mapserver_osgeo" title="Twitter">Twitter</a>
</p>
  <h3>Current Table Of Contents</h3>
  <ul>
<li><a class="reference internal" href="#">ArcSDE</a><ul>
<li><a class="reference internal" href="#supported-arcsde-operations">Supported ArcSDE Operations</a></li>
<li><a class="reference internal" href="#unsupported-arcsde-operations">Unsupported ArcSDE Operations</a></li>
<li><a class="reference internal" href="#how-to-make-a-connection-to-sde">How to make a connection to SDE:</a><ul>
<li><a class="reference internal" href="#connection-order-is-important">CONNECTION - Order is important!</a></li>
<li><a class="reference internal" href="#data-order-is-important">DATA - Order is important!</a></li>
<li><a class="reference internal" href="#template">TEMPLATE</a></li>
<li><a class="reference internal" href="#processing">PROCESSING</a></li>
<li><a class="reference internal" href="#within-database-join-support">Within-database Join Support</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="contour.html" title="Contour"
             >next</a> |</li>
        <li class="right" >
          <a href="ArcInfo.html" title="ArcInfo"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../documentation.html" >MapServer 8.0.1 Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../index.html" >Data Input</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="index.html" >Vector Data</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">ArcSDE</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; <a href="../../copyright.html">Copyright</a> 2023, Open Source Geospatial Foundation.
      Last updated on 2023-12-22.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.5.
    </div>
  </body>
</html>